
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Deus Ex</title>
    <meta name="description" content="UC Class API documentation..">
    <meta name="author" content="Kaiser">
    <link rel="stylesheet" href="../styles.css">
    <script src="../kaiser.js"></script>
  </head>
  <body>
    <header><h2>Deus Ex Documentation::OpenDX</h2></header>
    <section>
	<nav>
	  <ul>
	    <li><a href="../index.html">Home</a></li>
	    <li><a href="../about.html">About</a></li>
	    <li><a href="https://twitter.com/_technomancer">Twitter</a></li>
	    <li><a href="https://gitlab.com/technomancer7/">Gitlab</a></li>
        <li><a href="https://discord.gg/jCFJ3A6">Discord</a></li>
        -
        <li><a href="RCON.html">RCON</a></li>
<li><a href="Core.html">Core</a></li>
<li><a href="OpenDX.html">OpenDX</a></li>
<li><a href="Extension.html">Extension</a></li>
<li><a href="PartyStuff.html">PartyStuff</a></li>
<li><a href="Engine.html">Engine</a></li>
<li><a href="DeusEx.html">DeusEx</a></li>
        -
        <li><a href="#AdminVoteWindow.uc">AdminVoteWindow.uc</a></li>
<li><a href="#AugFlight.uc">AugFlight.uc</a></li>
<li><a href="#AugHealing2.uc">AugHealing2.uc</a></li>
<li><a href="#AugIcarus.uc">AugIcarus.uc</a></li>
<li><a href="#AugMagnet.uc">AugMagnet.uc</a></li>
<li><a href="#AugMediAura.uc">AugMediAura.uc</a></li>
<li><a href="#AugNuke.uc">AugNuke.uc</a></li>
<li><a href="#AugRadar.uc">AugRadar.uc</a></li>
<li><a href="#AugRepel.uc">AugRepel.uc</a></li>
<li><a href="#AugSkullgun.uc">AugSkullgun.uc</a></li>
<li><a href="#AugTakedown.uc">AugTakedown.uc</a></li>
<li><a href="#DXL.uc">DXL.uc</a></li>
<li><a href="#DXMVMapVoteMenu.uc">DXMVMapVoteMenu.uc</a></li>
<li><a href="#GunGame.uc">GunGame.uc</a></li>
<li><a href="#Infection.uc">Infection.uc</a></li>
<li><a href="#InfectionTimer.uc">InfectionTimer.uc</a></li>
<li><a href="#Juggernaut.uc">Juggernaut.uc</a></li>
<li><a href="#JuggernautDM.uc">JuggernautDM.uc</a></li>
<li><a href="#KCObj.uc">KCObj.uc</a></li>
<li><a href="#KillConfirmed.uc">KillConfirmed.uc</a></li>
<li><a href="#KillConfirmedTeam.uc">KillConfirmedTeam.uc</a></li>
<li><a href="#MVMutator.uc">MVMutator.uc</a></li>
<li><a href="#N_ShockWave.uc">N_ShockWave.uc</a></li>
<li><a href="#ODXBoost.uc">ODXBoost.uc</a></li>
<li><a href="#ODXHiddenActor.uc">ODXHiddenActor.uc</a></li>
<li><a href="#ODXJump.uc">ODXJump.uc</a></li>
<li><a href="#ODXPickup.uc">ODXPickup.uc</a></li>
<li><a href="#ODXQuad.uc">ODXQuad.uc</a></li>
<li><a href="#ODXTrigger.uc">ODXTrigger.uc</a></li>
<li><a href="#ODXVoteActor.uc">ODXVoteActor.uc</a></li>
<li><a href="#ODXWaypoint.uc">ODXWaypoint.uc</a></li>
<li><a href="#OSDActor.uc">OSDActor.uc</a></li>
<li><a href="#OpenDX.uc">OpenDX.uc</a></li>
<li><a href="#OpenDXDevTest.uc">OpenDXDevTest.uc</a></li>
<li><a href="#PerkBoost.uc">PerkBoost.uc</a></li>
<li><a href="#PerkDebug.uc">PerkDebug.uc</a></li>
<li><a href="#PerkHero.uc">PerkHero.uc</a></li>
<li><a href="#PerkIcarus.uc">PerkIcarus.uc</a></li>
<li><a href="#PerkInfection.uc">PerkInfection.uc</a></li>
<li><a href="#PerkJuggernaut.uc">PerkJuggernaut.uc</a></li>
<li><a href="#PerkMediAura.uc">PerkMediAura.uc</a></li>
<li><a href="#PerkNuke.uc">PerkNuke.uc</a></li>
<li><a href="#PerkQuad.uc">PerkQuad.uc</a></li>
<li><a href="#PerkRepel.uc">PerkRepel.uc</a></li>
<li><a href="#PerkSpy.uc">PerkSpy.uc</a></li>
<li><a href="#PerkTakedown.uc">PerkTakedown.uc</a></li>
<li><a href="#Perks.uc">Perks.uc</a></li>
<li><a href="#Playground.uc">Playground.uc</a></li>
<li><a href="#PraxisBallistic.uc">PraxisBallistic.uc</a></li>
<li><a href="#PraxisCloak.uc">PraxisCloak.uc</a></li>
<li><a href="#PraxisCombat.uc">PraxisCombat.uc</a></li>
<li><a href="#PraxisDefense.uc">PraxisDefense.uc</a></li>
<li><a href="#PraxisDrone.uc">PraxisDrone.uc</a></li>
<li><a href="#PraxisEMP.uc">PraxisEMP.uc</a></li>
<li><a href="#PraxisEnviro.uc">PraxisEnviro.uc</a></li>
<li><a href="#PraxisHealing.uc">PraxisHealing.uc</a></li>
<li><a href="#PraxisHeroHealth.uc">PraxisHeroHealth.uc</a></li>
<li><a href="#PraxisIcarus.uc">PraxisIcarus.uc</a></li>
<li><a href="#PraxisIcarusPerk.uc">PraxisIcarusPerk.uc</a></li>
<li><a href="#PraxisKillswitch.uc">PraxisKillswitch.uc</a></li>
<li><a href="#PraxisKit.uc">PraxisKit.uc</a></li>
<li><a href="#PraxisMagnet.uc">PraxisMagnet.uc</a></li>
<li><a href="#PraxisMediAura.uc">PraxisMediAura.uc</a></li>
<li><a href="#PraxisMediAuraPerk.uc">PraxisMediAuraPerk.uc</a></li>
<li><a href="#PraxisMuscle.uc">PraxisMuscle.uc</a></li>
<li><a href="#PraxisNuke.uc">PraxisNuke.uc</a></li>
<li><a href="#PraxisRadar.uc">PraxisRadar.uc</a></li>
<li><a href="#PraxisRadarTrans.uc">PraxisRadarTrans.uc</a></li>
<li><a href="#PraxisRepel.uc">PraxisRepel.uc</a></li>
<li><a href="#PraxisShield.uc">PraxisShield.uc</a></li>
<li><a href="#PraxisSkullgun.uc">PraxisSkullgun.uc</a></li>
<li><a href="#PraxisSpeed.uc">PraxisSpeed.uc</a></li>
<li><a href="#PraxisSpy.uc">PraxisSpy.uc</a></li>
<li><a href="#PraxisStealth.uc">PraxisStealth.uc</a></li>
<li><a href="#PraxisTakedown.uc">PraxisTakedown.uc</a></li>
<li><a href="#PraxisTarget.uc">PraxisTarget.uc</a></li>
<li><a href="#PraxisVision.uc">PraxisVision.uc</a></li>
<li><a href="#SSTimer.uc">SSTimer.uc</a></li>
<li><a href="#Sharpshooter.uc">Sharpshooter.uc</a></li>
<li><a href="#TCAugmentationDisplayWindow.uc">TCAugmentationDisplayWindow.uc</a></li>
<li><a href="#TCAugmentationManager.uc">TCAugmentationManager.uc</a></li>
<li><a href="#TCAutoTurret.uc">TCAutoTurret.uc</a></li>
<li><a href="#TCComputerSecurity.uc">TCComputerSecurity.uc</a></li>
<li><a href="#TCControls.uc">TCControls.uc</a></li>
<li><a href="#TCDeathmatch.uc">TCDeathmatch.uc</a></li>
<li><a href="#TCEMenu.uc">TCEMenu.uc</a></li>
<li><a href="#TCFPS.uc">TCFPS.uc</a></li>
<li><a href="#TCGRI.uc">TCGRI.uc</a></li>
<li><a href="#TCGameInfo.uc">TCGameInfo.uc</a></li>
<li><a href="#TCHECannister20mm.uc">TCHECannister20mm.uc</a></li>
<li><a href="#TCHUD.uc">TCHUD.uc</a></li>
<li><a href="#TCHUDHitDisplay.uc">TCHUDHitDisplay.uc</a></li>
<li><a href="#TCHUDLogDisplay.uc">TCHUDLogDisplay.uc</a></li>
<li><a href="#TCHUDObjectBelt.uc">TCHUDObjectBelt.uc</a></li>
<li><a href="#TCHUDWaypoint.uc">TCHUDWaypoint.uc</a></li>
<li><a href="#TCJCDenton.uc">TCJCDenton.uc</a></li>
<li><a href="#TCLoader.uc">TCLoader.uc</a></li>
<li><a href="#TCMJ12.uc">TCMJ12.uc</a></li>
<li><a href="#TCMOTD.uc">TCMOTD.uc</a></li>
<li><a href="#TCMenuGame.uc">TCMenuGame.uc</a></li>
<li><a href="#TCMenuMain.uc">TCMenuMain.uc</a></li>
<li><a href="#TCNSF.uc">TCNSF.uc</a></li>
<li><a href="#TCPRI.uc">TCPRI.uc</a></li>
<li><a href="#TCPlayer.uc">TCPlayer.uc</a></li>
<li><a href="#TCProgressBarWindow.uc">TCProgressBarWindow.uc</a></li>
<li><a href="#TCRecall.uc">TCRecall.uc</a></li>
<li><a href="#TCReplacer.uc">TCReplacer.uc</a></li>
<li><a href="#TCRocket.uc">TCRocket.uc</a></li>
<li><a href="#TCScoreBoard.uc">TCScoreBoard.uc</a></li>
<li><a href="#TCSpectatorStartPoints.uc">TCSpectatorStartPoints.uc</a></li>
<li><a href="#TCStorageBox.uc">TCStorageBox.uc</a></li>
<li><a href="#TCTeam.uc">TCTeam.uc</a></li>
<li><a href="#TCTeamBalancer.uc">TCTeamBalancer.uc</a></li>
<li><a href="#TCTeamManager.uc">TCTeamManager.uc</a></li>
<li><a href="#TCTimerActor.uc">TCTimerActor.uc</a></li>
<li><a href="#TCUNATCO.uc">TCUNATCO.uc</a></li>
<li><a href="#TCWeaponAssaultGun.uc">TCWeaponAssaultGun.uc</a></li>
<li><a href="#TCWeaponAssaultShotgun.uc">TCWeaponAssaultShotgun.uc</a></li>
<li><a href="#TCWeaponCombatKnife.uc">TCWeaponCombatKnife.uc</a></li>
<li><a href="#TCWeaponEMPGrenade.uc">TCWeaponEMPGrenade.uc</a></li>
<li><a href="#TCWeaponFlamethrower.uc">TCWeaponFlamethrower.uc</a></li>
<li><a href="#TCWeaponGEPGun.uc">TCWeaponGEPGun.uc</a></li>
<li><a href="#TCWeaponGasGrenade.uc">TCWeaponGasGrenade.uc</a></li>
<li><a href="#TCWeaponLAM.uc">TCWeaponLAM.uc</a></li>
<li><a href="#TCWeaponLAW.uc">TCWeaponLAW.uc</a></li>
<li><a href="#TCWeaponMiniCrossbow.uc">TCWeaponMiniCrossbow.uc</a></li>
<li><a href="#TCWeaponNanoSword.uc">TCWeaponNanoSword.uc</a></li>
<li><a href="#TCWeaponPistol.uc">TCWeaponPistol.uc</a></li>
<li><a href="#TCWeaponPlasmaRifle.uc">TCWeaponPlasmaRifle.uc</a></li>
<li><a href="#TCWeaponRifle.uc">TCWeaponRifle.uc</a></li>
<li><a href="#TCWeaponSawedOffShotgun.uc">TCWeaponSawedOffShotgun.uc</a></li>
<li><a href="#TCWeaponShuriken.uc">TCWeaponShuriken.uc</a></li>
<li><a href="#TCWeaponStealthPistol.uc">TCWeaponStealthPistol.uc</a></li>
<li><a href="#ToyMC.uc">ToyMC.uc</a></li>
<li><a href="#ToyPlayer.uc">ToyPlayer.uc</a></li>
<li><a href="#Toybox.uc">Toybox.uc</a></li>
<li><a href="#_TCTimer.uc">_TCTimer.uc</a></li>
<li><a href="#wpDummy.uc">wpDummy.uc</a></li>
	  </ul>
	</nav>
	<article>  
    <button onclick="topFunction()" id="btt" title="Go to top">Top</button>
    <a class="headerlink" href="#AdminVoteWindow.uc" title="Permanent link"><h2 id="AdminVoteWindow.uc">AdminVoteWindow.uc (extends MenuUIWindow)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var Color colTextMessage;<br>var bool bForced;<br>var DXL Caller;<br>var MenuUIActionButtonWindow btnYes;<br>var MenuUIActionButtonWindow btnNo;<br>var MenuUIHeaderWindow winText;<br>var int  mbMode;<br>var bool bDeferredKeyPress;<br>var bool bKeyPressed;<br>var Window winNotify;<br>var int textBorderX;<br>var int textBorderY;<br>var int numButtons;<br>var localized string btnLabelYes;<br>var localized string btnLabelNo;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">textBorderX=20<br>textBorderY=14<br>btnLabelYes="|&Yes"<br>btnLabelNo="|&No"<br>ClientWidth=280<br>ClientHeight=85<br>clientTextures(0)=Texture'DeusExUI.UserInterface.MenuMessageBoxBackground_1'<br>clientTextures(1)=Texture'DeusExUI.UserInterface.MenuMessageBoxBackground_2'<br>textureRows=1<br>textureCols=2<br>bActionButtonBarActive=True<br>bUsesHelpWindow=False<br>winShadowClass=Class'DeusEx.MenuUIMessageBoxShadowWindow'</div>
<h3 id="AdminVoteWindow.ButtonActivated"><a class="headerlink" href="#AdminVoteWindow.ButtonActivated" title="Permanent link">ButtonActivated</a> (Window buttonPressed) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool bHandled;<br><br><br>&#9;bHandled = True;<br><br>&#9;Super.ButtonActivated(buttonPressed);<br><br>&#9;switch( buttonPressed )<br>&#9;{<br>&#9;&#9;case btnYes:<br>&#9;&#9;&#9;if ((bDeferredKeyPress) && (IsKeyDown(IK_Enter) || IsKeyDown(IK_Space) || IsKeyDown(IK_Y)))<br>&#9;&#9;&#9;&#9;bKeyPressed = True;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;PostResult(1);  // MR_Yes;<br><br>&#9;&#9;&#9;bHandled = True;<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case btnNo:<br>&#9;&#9;&#9;PostResult(0);<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;default:<br>&#9;&#9;&#9;bHandled = False;<br>&#9;&#9;&#9;break;<br>&#9;}<br><br>&#9;return bHandled;<br><br></div>
<h3 id="AdminVoteWindow.CreateTextWindow"><a class="headerlink" href="#AdminVoteWindow.CreateTextWindow" title="Permanent link">CreateTextWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;winText = CreateMenuHeader(21, 13, "", winClient);<br>&#9;winText.SetTextAlignments(HALIGN_Center, VALIGN_Center);<br>&#9;winText.SetFont(Font'FontMenuHeaders_DS');<br>&#9;winText.SetWindowAlignments(HALIGN_Full, VALIGN_Full, textBorderX, textBorderY);<br><br></div>
<h3 id="AdminVoteWindow.GetNumButtons"><a class="headerlink" href="#AdminVoteWindow.GetNumButtons" title="Permanent link">GetNumButtons</a> -> int</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return numButtons;<br><br></div>
<h3 id="AdminVoteWindow.InitWindow"><a class="headerlink" href="#AdminVoteWindow.InitWindow" title="Permanent link">InitWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.InitWindow();<br>&#9;// Don't show if match has ended<br>&#9;if (( DeusExMPGame(Player.DXGame) != None ) && DeusExMPGame(Player.DXGame).bClientNewMap )<br>&#9;&#9;return;<br>&#9;// Force the title bar to be a certain width;<br>&#9;winTitle.minTitleWidth = 250;<br><br>&#9;CreateTextWindow();<br>&#9;SetTitle("MapVote");<br>&#9;SetMode(0);<br>&#9;SetNotifyWindow(Self);<br><br></div>
<h3 id="AdminVoteWindow.MouseButtonReleased"><a class="headerlink" href="#AdminVoteWindow.MouseButtonReleased" title="Permanent link">MouseButtonReleased</a> (float pointX, float pointY, EInputKey button, int numClicks) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return True;<br><br></div>
<h3 id="AdminVoteWindow.PostResult"><a class="headerlink" href="#AdminVoteWindow.PostResult" title="Permanent link">PostResult</a> (int buttonNumber)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(ButtonNumber==0)<br>&#9;{<br>        Caller.ClientAdminVote(False);<br>    }<br>    else if(ButtonNumber==1)<br>&#9;{<br>        Caller.ClientAdminVote(True);<br>    }<br>    root.PopWindow();<br>&#9;root.ClearWindowStack();<br><br></div>
<h3 id="AdminVoteWindow.RawKeyPressed"><a class="headerlink" href="#AdminVoteWindow.RawKeyPressed" title="Permanent link">RawKeyPressed</a> (EInputKey key, EInputState iState, bool bRepeat) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (((key == IK_Enter) || (key == IK_Space) || (key == IK_Y)) &&<br>&#9;   ((iState == IST_Release) && (bKeyPressed)))<br>&#9;{<br>&#9;&#9;PostResult(0);<br>&#9;&#9;return True;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;return false;<br>&#9;}<br><br></div>
<h3 id="AdminVoteWindow.SetDeferredKeyPress"><a class="headerlink" href="#AdminVoteWindow.SetDeferredKeyPress" title="Permanent link">SetDeferredKeyPress</a> (bool bNewDeferredKeyPress)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;bDeferredKeyPress = bNewDeferredKeyPress;<br><br></div>
<h3 id="AdminVoteWindow.SetMessageText"><a class="headerlink" href="#AdminVoteWindow.SetMessageText" title="Permanent link">SetMessageText</a> (String msgText)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;winText.SetText(msgText);<br><br>&#9;AskParentForReconfigure();<br><br></div>
<h3 id="AdminVoteWindow.SetMode"><a class="headerlink" href="#AdminVoteWindow.SetMode" title="Permanent link">SetMode</a> (int newMode)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;mbMode = newMode;<br><br>&#9;switch( mbMode )<br>&#9;{<br>&#9;&#9;case 0:&#9;&#9;&#9;// MB_YesNo:<br>&#9;&#9;&#9;btnNo  = winButtonBar.AddButton(btnLabelNo, HALIGN_Right);<br>&#9;&#9;&#9;btnYes = winButtonBar.AddButton(btnLabelYes, HALIGN_Right);<br>&#9;&#9;&#9;numButtons = 2;<br>&#9;&#9;&#9;SetFocusWindow(btnYes);<br>&#9;&#9;&#9;break;<br>&#9;}<br><br>&#9;if (winShadow != None)<br>&#9;&#9;MenuUIMessageBoxShadowWindow(winShadow).SetButtonCount(numButtons);<br><br></div>
<h3 id="AdminVoteWindow.SetNotifyWindow"><a class="headerlink" href="#AdminVoteWindow.SetNotifyWindow" title="Permanent link">SetNotifyWindow</a> (Window newWinNotify)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;winNotify = newWinNotify;<br><br></div>
<h3 id="AdminVoteWindow.VirtualKeyPressed"><a class="headerlink" href="#AdminVoteWindow.VirtualKeyPressed" title="Permanent link">VirtualKeyPressed</a> (EInputKey key, bool bRepeat) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool bHandled;<br><br><br>&#9;switch( key )<br>&#9;{<br><br>        case IK_Escape:<br>&#9;&#9;&#9;if ( mbMode == 0  /*MB_YesNo*/ )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;PostResult(0);<br>&#9;&#9;&#9;&#9;bHandled = True;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case IK_Enter:<br>&#9;&#9;&#9;if ( mbMode == 0  /*MB_YesNo*/ )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;PostResult(1);<br>&#9;&#9;&#9;&#9;bHandled = True;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case IK_Y:<br>&#9;&#9;&#9;if ( mbMode == 0  /*MB_YesNo*/ )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;PostResult(1);<br>&#9;&#9;&#9;&#9;bHandled = True;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case IK_N:<br>&#9;&#9;&#9;if ( mbMode == 0  /*MB_YesNo*/ )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;PostResult(0);<br>&#9;&#9;&#9;&#9;bHandled = True;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;break;<br>&#9;}<br><br>&#9;return bHandled;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugFlight.uc" title="Permanent link"><h2 id="AugFlight.uc">AugFlight.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float mpAugValue;<br>var float mpEnergyDrain;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpAugValue=10.000000<br>mpEnergyDrain=100.000000<br>EnergyRate=120.000000<br>Icon=Texture'DeusExUI.UserInterface.AugIconDrone'<br>smallIcon=Texture'DeusExUI.UserInterface.AugIconDrone_Small'<br>AugmentationName="Flight"<br>Description=""<br>MPInfo="When active, you fly."<br>LevelValues(0)=5.000000<br>LevelValues(1)=15.000000<br>LevelValues(2)=25.000000<br>LevelValues(3)=40.000000<br>AugmentationLocation=LOC_Torso<br>MPConflictSlot=2</div>
<h3 id="AugFlight.Deactivate"><a class="headerlink" href="#AugFlight.Deactivate" title="Permanent link">Deactivate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Player.SetPhysics(PHYS_Falling);<br>&#9;//Player.bFlightAug=False;<br>&#9;Super.Deactivate();<br><br></div>
<h3 id="AugFlight.PreBeginPlay"><a class="headerlink" href="#AugFlight.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.PreBeginPlay();<br><br>&#9;// If this is a netgame, then override defaults<br>&#9;if ( Level.NetMode != NM_StandAlone )<br>&#9;{<br>&#9;&#9;LevelValues[3] = mpAugValue;<br>&#9;&#9;EnergyRate = mpEnergyDrain;<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugHealing2.uc" title="Permanent link"><h2 id="AugHealing2.uc">AugHealing2.uc (extends AugHealing)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float mpAugValue;<br>var float mpEnergyDrain;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpAugValue=0<br>mpEnergyDrain=0<br>EnergyRate=0<br>Icon=Texture'DeusExUI.UserInterface.AugIconHealing'<br>smallIcon=Texture'DeusExUI.UserInterface.AugIconHealing_Small'<br>AugmentationName="Nano Regeneration"<br>Description="Programmable polymerase automatically directs construction of proteins in injured cells, restoring an agent to full health over time.|n|nTECH ONE: Healing occurs at a normal rate.|n|nTECH TWO: Healing occurs at a slightly faster rate.|n|nTECH THREE: Healing occurs at a moderately faster rate.|n|nTECH FOUR: Healing occurs at a significantly faster rate."<br>MPInfo="When active, you heal, but at a rate insufficient for healing in combat.  Energy Drain: High"<br>LevelValues(0)=0<br>LevelValues(1)=0<br>LevelValues(2)=0<br>LevelValues(3)=0<br>LoopSound=None<br>AugmentationLocation=LOC_Torso<br>MPConflictSlot=2</div>
<h3 id="AugHealing2.PreBeginPlay"><a class="headerlink" href="#AugHealing2.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.PreBeginPlay();<br><br>&#9;// If this is a netgame, then override defaults<br>&#9;if ( Level.NetMode != NM_StandAlone )<br>&#9;{<br>&#9;&#9;LevelValues[3] = mpAugValue;<br>&#9;&#9;EnergyRate = mpEnergyDrain;<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugIcarus.uc" title="Permanent link"><h2 id="AugIcarus.uc">AugIcarus.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float mpAugValue;<br>var float mpEnergyDrain;<br>var bool bReverse;<br>var bool bTrig;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpAugValue=0<br>mpEnergyDrain=0<br>EnergyRate=0<br>Icon=Texture'DeusExUI.UserInterface.AugIconDrone'<br>smallIcon=Texture'DeusExUI.UserInterface.AugIconDrone_Small'<br>AugmentationName="Icarus Landing System"<br>Description=""<br>MPInfo="When active, you emit dangerous energy while falling at high velocity."<br>LevelValues(0)=0<br>LevelValues(1)=0<br>LevelValues(2)=0<br>LevelValues(3)=0<br>LoopSound=None<br>AugmentationLocation=4<br>MPConflictSlot=3</div>
<h3 id="AugIcarus.Deactivate"><a class="headerlink" href="#AugIcarus.Deactivate" title="Permanent link">Deactivate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;<br>&#9;Super.Deactivate();<br><br></div>
<h3 id="AugIcarus.Icarus"><a class="headerlink" href="#AugIcarus.Icarus" title="Permanent link">Icarus</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">&#9;<br>&#9;if(Player.Velocity.Z < -600 && !bReverse)<br>&#9;{<br>&#9;&#9;bTrig=True;<br>&#9;&#9;bReverse=True;<br>&#9;&#9;Player.ClientMessage("|P3Icarus landing system activated...");<br>&#9;}<br>&#9;<br>&#9;if(bTrig)<br>&#9;{<br>&#9;&#9;Player.Energy -= 1;<br>&#9;&#9;if(bReverse)<br>&#9;&#9;&#9;Player.Velocity.Z += 100;<br>&#9;&#9;<br>&#9;&#9;if(Player.Velocity.Z > 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;bTrig=False;<br>&#9;&#9;&#9;bReverse=False;<br>&#9;&#9;&#9;Player.ClientMessage("|P3Icarus landing system de-activated...");<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="AugIcarus.PreBeginPlay"><a class="headerlink" href="#AugIcarus.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.PreBeginPlay();<br><br>&#9;// If this is a netgame, then override defaults<br>&#9;if ( Level.NetMode != NM_StandAlone )<br>&#9;{<br>&#9;&#9;LevelValues[3] = mpAugValue;<br>&#9;&#9;EnergyRate = mpEnergyDrain;<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugMagnet.uc" title="Permanent link"><h2 id="AugMagnet.uc">AugMagnet.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int BioDrainODX;<br>var actor Magnet;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">BioDrainODX=10<br>//mpAugValue=0.000000<br>//mpEnergyDrain=0.000000<br>EnergyRate=0.000000<br>Icon=Texture'DeusExUI.UserInterface.AugIconEMP'<br>smallIcon=Texture'DeusExUI.UserInterface.AugIconEMP_Small'<br>AugmentationName="Magnetize"<br>Description=""<br>MPInfo="When active, it.. magnets. idk"<br>LevelValues(0)=5.000000<br>LevelValues(1)=15.000000<br>LevelValues(2)=25.000000<br>LevelValues(3)=40.000000<br>AugmentationLocation=5<br>MPConflictSlot=9<br>DeActivateSound=none</div>
<h3 id="AugMagnet.Deactivate"><a class="headerlink" href="#AugMagnet.Deactivate" title="Permanent link">Deactivate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Magnet = None;<br>&#9;Super.Deactivate();<br><br></div>
<h3 id="AugMagnet.Pull"><a class="headerlink" href="#AugMagnet.Pull" title="Permanent link">Pull</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector loc;<br><br>&#9;loc = Player.Location;<br>&#9;loc.Z -= 32;<br>&#9;<br>&#9;Player.DoJump();<br>&#9;Player.Velocity = (normal(Loc - Magnet.Location) * -750);<br>&#9;Player.SetPhysics(Phys_Falling);<br><br></div>
<h3 id="AugMagnet.Skullshot"><a class="headerlink" href="#AugMagnet.Skullshot" title="Permanent link">Skullshot</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor hitActor;<br>&#9;local vector loc, line, HitLocation, hitNormal;<br>&#9;local ScriptedPawn     hitPawn;<br>&#9;local PlayerPawn       hitPlayer;<br>&#9;local DeusExMover      hitMover;<br>&#9;local DeusExDecoration hitDecoration;<br>&#9;local int              damage;<br>&#9;local vector v2;<br><br>&#9;<br>&#9;v2 = Player.location;<br>&#9;v2.z += 20;<br>&#9;<br>&#9;loc = Player.Location;<br>&#9;loc.Z += Player.BaseEyeHeight;<br>&#9;line = Vector(Player.ViewRotation) * 4000;<br>&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;if (hitActor != None)<br>&#9;{<br>&#9;&#9;hitMover = DeusExMover(hitActor);<br>&#9;&#9;hitPawn = ScriptedPawn(hitActor);<br>&#9;&#9;hitDecoration = DeusExDecoration(hitActor);<br>&#9;&#9;hitPlayer = PlayerPawn(hitActor);<br>&#9;&#9;if (hitMover != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;Magnet = hitMover;<br>&#9;&#9;}<br>&#9;&#9;else if (hitPawn != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;Magnet = hitPawn;<br>&#9;&#9;}<br>&#9;&#9;else if (hitDecoration != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;Magnet = hitDecoration;<br>&#9;&#9;}<br>&#9;&#9;else if (hitPlayer != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;Magnet = hitPlayer;<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(Magnet == None)<br>&#9;{<br>&#9;&#9;loc = Player.Location;<br>&#9;&#9;loc.Z -= 32;<br>&#9;&#9;<br>&#9;&#9;SpawnExplosion(Loc);<br>&#9;&#9;SpawnExplosion(HitLocation);<br>&#9;&#9;Player.DoJump();<br>&#9;&#9;Player.Velocity = (normal(Loc - HitLocation) * -1450);<br>&#9;&#9;Player.SetPhysics(Phys_Falling);<br>&#9;&#9;Deactivate();<br>&#9;}<br>&#9;else<br>&#9;&#9;SpawnExplosion(Magnet.Location);<br><br></div>
<h3 id="AugMagnet.SpawnExplosion"><a class="headerlink" href="#AugMagnet.SpawnExplosion" title="Permanent link">SpawnExplosion</a> (vector Loc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ShockRing s1, s2, s3;<br><br><br>    s1 = spawn(class'ShockRing',,,Loc,rot(16384,0,0));<br>&#9;s1.Lifespan = 2.5;<br>    s2 = spawn(class'ShockRing',,,Loc,rot(0,16384,0));<br>&#9;s2.Lifespan = 2.5;<br>    s3 = spawn(class'ShockRing',,,Loc,rot(0,0,16384));<br>&#9;S3.Lifespan = 2.5;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugMediAura.uc" title="Permanent link"><h2 id="AugMediAura.uc">AugMediAura.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float mpAugValue;<br>var float mpEnergyDrain;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpAugValue=0<br>mpEnergyDrain=0<br>EnergyRate=0<br>Icon=Texture'AugIconHealingAura'<br>smallIcon=Texture'AugIconHealingAura_Small'<br>AugmentationName="Medic Aura"<br>Description="Radar-absorbent resin augments epithelial proteins; microprojection units distort agent's visual signature. Provides highly effective concealment from automated detection systems -- bots, cameras, turrets.|n|nTECH ONE: Power drain is normal.|n|nTECH TWO: Power drain is reduced slightly.|n|nTECH THREE: Power drain is reduced moderately.|n|nTECH FOUR: Power drain is reduced significantly."<br>MPInfo="Heals your allies close-by."<br>LevelValues(0)=0<br>LevelValues(1)=0<br>LevelValues(2)=0<br>LevelValues(3)=0<br>LoopSound=None<br>AugmentationLocation=LOC_Torso<br>MPConflictSlot=2</div>
<h3 id="AugMediAura.AreAlliesBasic"><a class="headerlink" href="#AugMediAura.AreAlliesBasic" title="Permanent link">AreAlliesBasic</a> (TCPlayer one, tcplayer two) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TCPRI(One.PlayerReplicationInfo).TeamNamePRI == "" || TCPRI(Two.PlayerReplicationInfo).TeamNamePRI == "")<br>&#9;&#9;return false;<br>&#9;<br>&#9;if(TCPRI(One.PlayerReplicationInfo).TeamNamePRI == TCPRI(Two.PlayerReplicationInfo).TeamNamePRI)<br>&#9;&#9;return true;<br><br></div>
<h3 id="AugMediAura.GetEnergyRate"><a class="headerlink" href="#AugMediAura.GetEnergyRate" title="Permanent link">GetEnergyRate</a> -> float</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return energyRate * LevelValues[CurrentLevel];<br><br></div>
<h3 id="AugMediAura.HealPlayers"><a class="headerlink" href="#AugMediAura.HealPlayers" title="Permanent link">HealPlayers</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor a;<br>&#9;local TCPlayer target, targetList[3];<br>&#9;local int count, i, healamount, totalamount, edrain;<br><br><br>    count = 0;<br><br>    if(TCTeam(Player.DXGame) != None) // Healing teammates in deathmatch is useless.<br>    {<br>        foreach RadiusActors(class'Actor', a, 256, Player.Location)<br>        {<br>            if(a.IsA('TCPlayer')) // TODO: Only heal teammates<br>            {<br>                target = TCPlayer(a);<br>                if(target.PlayerReplicationInfo != None && target != TCPlayer(Player) && !target.PlayerReplicationInfo.bIsSpectator && target.Health > 0 && target.Health < 100 && (target.lastTeamHeal+1 <= Level.TimeSeconds) && (target.PlayerReplicationInfo.Team == player.PlayerReplicationInfo.Team))<br>                {<br>                    targetList[count] = target;<br>                    count++;<br>                    edrain = 3 * count;<br>                    if(count == 3) // We heal a maximum of 3 players<br>                        break;<br>                }<br>            }<br>        }<br>        <br>        if(count > 0)<br>        {<br>&#9;&#9;&#9;LoopSound=Sound'DeusExSounds.Augmentation.AugLoop';<br>            healamount = Min(30, (45/count));<br>            totalamount = healamount*count;<br>            for(i = 0; i < count; i++)<br>            {<br>                if(targetList[i] != None)<br>                {<br>&#9;&#9;&#9;&#9;&#9;Player.Energy -= edrain;<br>                    targetList[i].HealPlayer(healamount, False);<br>                    targetList[i].ClientFlash(0.5, vect(0, 0, 500));<br>                    targetList[i].lastTeamHeal = Level.TimeSeconds;<br>                }<br>            }<br>            if(totalamount > 0)<br>            {<br>                Player.ClientMessage("Healed"@count@"nearby player(s) for"@totalamount$"HP");<br>            }<br>        }<br>        else LoopSound=None;<br>    }<br>    else if(TCDeathmatch(Player.DXGame) != None)<br>    {<br>&#9;&#9;foreach RadiusActors(class'Actor', a, 256, Player.Location)<br>        {<br>            if(a.IsA('TCPlayer')) // TODO: Only heal teammates<br>            {<br>                target = TCPlayer(a);<br>                if(target.PlayerReplicationInfo != None && target != TCPlayer(Player) && !target.PlayerReplicationInfo.bIsSpectator && target.Health > 0 && target.Health < 100 && (target.lastTeamHeal+1 <= Level.TimeSeconds) && AreAlliesBasic(target, TCPlayer(Player)))<br>                {<br>                    targetList[count] = target;<br>                    count++;<br>                    edrain = 3 * count;<br>                    if(count == 3) // We heal a maximum of 3 players<br>                        break;<br>                }<br>            }<br>        }<br>        <br>        if(count > 0)<br>        {<br>&#9;&#9;&#9;LoopSound=Sound'DeusExSounds.Augmentation.AugLoop';<br>            healamount = Min(30, (45/count));<br>            totalamount = healamount*count;<br>            for(i = 0; i < count; i++)<br>            {<br>                if(targetList[i] != None)<br>                {<br>&#9;&#9;&#9;&#9;&#9;Player.Energy -= edrain;<br>                    targetList[i].HealPlayer(healamount, False);<br>                    targetList[i].ClientFlash(0.5, vect(0, 0, 500));<br>                    targetList[i].lastTeamHeal = Level.TimeSeconds;<br>                }<br>            }<br>            if(totalamount > 0)<br>            {<br>                Player.ClientMessage("Healed"@count@"nearby player(s) for"@totalamount$"HP");<br>            }<br>        }<br>        else LoopSound=none;<br>&#9;}<br><br></div>
<h3 id="AugMediAura.PreBeginPlay"><a class="headerlink" href="#AugMediAura.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.PreBeginPlay();<br><br>&#9;// If this is a netgame, then override defaults<br>&#9;if ( Level.NetMode != NM_StandAlone )<br>&#9;{<br>&#9;&#9;LevelValues[3] = mpAugValue;<br>&#9;&#9;EnergyRate = mpEnergyDrain;<br>        AugmentationLocation = LOC_Torso;<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugNuke.uc" title="Permanent link"><h2 id="AugNuke.uc">AugNuke.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float mpAugValue;<br>var float mpEnergyDrain;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpAugValue=5<br>mpEnergyDrain=5<br>EnergyRate=5<br>Icon=Texture'AugIconNuke'<br>smallIcon=Texture'AugIconNuke_Small'<br>AugmentationName="Nuke"<br>Description="Programmable polymerase automatically directs construction of proteins in injured cells, restoring an agent to full health over time.|n|nTECH ONE: Healing occurs at a normal rate.|n|nTECH TWO: Healing occurs at a slightly faster rate.|n|nTECH THREE: Healing occurs at a moderately faster rate.|n|nTECH FOUR: Healing occurs at a significantly faster rate."<br>MPInfo="When active, you heal, but at a rate insufficient for healing in combat.  Energy Drain: High"<br>LevelValues(0)=5.000000<br>LevelValues(1)=5<br>LevelValues(2)=5<br>LevelValues(3)=5<br>AugmentationLocation=LOC_Torso<br>MPConflictSlot=4</div>
<h3 id="AugNuke.Deactivate"><a class="headerlink" href="#AugNuke.Deactivate" title="Permanent link">Deactivate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.Deactivate();<br><br></div>
<h3 id="AugNuke.PreBeginPlay"><a class="headerlink" href="#AugNuke.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.PreBeginPlay();<br><br>&#9;// If this is a netgame, then override defaults<br>&#9;if ( Level.NetMode != NM_StandAlone )<br>&#9;{<br>&#9;&#9;LevelValues[3] = mpAugValue;<br>&#9;&#9;EnergyRate = mpEnergyDrain;<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugRadar.uc" title="Permanent link"><h2 id="AugRadar.uc">AugRadar.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float mpAugValue;<br>var float mpEnergyDrain;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpAugValue=0<br>mpEnergyDrain=0<br>EnergyRate=0<br>Icon=Texture'AugIconDataLink'<br>smallIcon=Texture'AugIconDataLink_Small'<br>AugmentationName="Radar"<br>Description=""<br>MPInfo="Scans nearby hostiles"<br>LevelValues(0)=0<br>LevelValues(1)=0<br>LevelValues(2)=0<br>LevelValues(3)=0<br>AugmentationLocation=5<br>MPConflictSlot=9</div>
<h3 id="AugRadar.AreAllies"><a class="headerlink" href="#AugRadar.AreAllies" title="Permanent link">AreAllies</a> (TCPlayer POne, TCPlayer PTwo) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TCDeathmatch(player.DXGame) != None)<br>&#9;&#9;return TCDeathmatch(player.DXGame).ArePlayersAllied2(POne,PTwo);<br>&#9;&#9;<br>&#9;if(TCTeam(player.DXGame) != None)<br>&#9;&#9;return TCTeam(player.DXGame).ArePlayersAllied(POne,PTwo);&#9;<br><br></div>
<h3 id="AugRadar.PreBeginPlay"><a class="headerlink" href="#AugRadar.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.PreBeginPlay();<br><br>&#9;// If this is a netgame, then override defaults<br>&#9;if ( Level.NetMode != NM_StandAlone )<br>&#9;{<br>&#9;&#9;LevelValues[3] = mpAugValue;<br>&#9;&#9;EnergyRate = mpEnergyDrain;<br>        AugmentationLocation = LOC_Cranial;<br>&#9;}<br><br></div>
<h3 id="AugRadar.Scan"><a class="headerlink" href="#AugRadar.Scan" title="Permanent link">Scan</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor a;<br>&#9;local TCPlayer target;<br>&#9;local int count, allycount;<br><br><br>    count = 0;<br>&#9;allycount = 0;<br>&#9;foreach RadiusActors(class'Actor', a, 256, Player.Location)<br>&#9;{<br>&#9;&#9;if(a.IsA('TCPlayer'))<br>&#9;&#9;{<br>&#9;&#9;&#9;target = TCPlayer(a);<br>&#9;&#9;&#9;if(target.PlayerReplicationInfo != None && target != TCPlayer(Player) && !target.PlayerReplicationInfo.bIsSpectator && target.Health > 0 && target.AugmentationSystem.GetAugLevelValue(class'AugRadarTrans') == -1.0 && !target.bHidden )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;count++;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(AreAllies(TCPlayer(Player), target))<br>&#9;&#9;&#9;&#9;&#9;allycount++;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(count > 0)<br>&#9;{<br>&#9;&#9;Player.Energy -= 1;<br>&#9;&#9;Player.ClientMessage("Hostiles detected. "$count$" targets, "$allycount$" allies.");<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugRepel.uc" title="Permanent link"><h2 id="AugRepel.uc">AugRepel.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int velz, CheckRadius;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">CheckRadius=256<br>velz=-750<br>EnergyRate=0.000000<br>Icon=Texture'DeusExUI.UserInterface.AugIconEMP'<br>smallIcon=Texture'DeusExUI.UserInterface.AugIconEMP_Small'<br>AugmentationName="Blast Shield"<br>Description=""<br>MPInfo="When active, the aug repels all objects around you"<br>LevelValues(0)=5.000000<br>LevelValues(1)=15.000000<br>LevelValues(2)=25.000000<br>LevelValues(3)=40.000000<br>AugmentationLocation=5<br>MPConflictSlot=9</div>
<h3 id="AugRepel.Deactivate"><a class="headerlink" href="#AugRepel.Deactivate" title="Permanent link">Deactivate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.Deactivate();<br><br></div>
<h3 id="AugRepel.Skullshot"><a class="headerlink" href="#AugRepel.Skullshot" title="Permanent link">Skullshot</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector loc, vline, HitLocation, hitNormal, altloc;<br>&#9;local rotator altrot;<br>&#9;local Actor HitActor;<br>&#9;local actor a;<br>&#9;local ScriptedPawn     hitPawn;<br>&#9;local PlayerPawn       hitPlayer;<br>&#9;local DeusExMover      hitMover;<br>&#9;local DeusExDecoration hitDecoration;<br><br>&#9;<br>&#9;loc = Player.Location;<br>&#9;loc.Z -= 32;<br>&#9;Player.Energy -= 10;<br>&#9;SpawnExplosion(Loc);<br>&#9;foreach Player.VisibleActors(class'Actor', A, CheckRadius)<br>&#9;{<br>&#9;&#9;if (a != None && a != Player)<br>&#9;&#9;{<br>&#9;&#9;&#9;hitPawn = ScriptedPawn(a);<br>&#9;&#9;&#9;hitDecoration = DeusExDecoration(a);<br>&#9;&#9;&#9;hitPlayer = PlayerPawn(a);<br>&#9;&#9;&#9;hitMover = DeusExMover(a);<br>&#9;&#9;&#9;if (hitPawn != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitPawn.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitPawn.Velocity = (normal(loc - hitPawn.Location) * velz);<br>&#9;&#9;&#9;&#9;//hitPawn.TakeDamage(Player.Energy, Player, hitLocation, normal(loc - hitPawn.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if (hitDecoration != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitDecoration.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitDecoration.Velocity = (normal(loc - hitDecoration.Location) * velz);&#9;<br>&#9;&#9;&#9;&#9;//hitDecoration.TakeDamage(Player.Energy, Player, hitLocation, normal(loc - hitDecoration.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if (hitPlayer != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitPlayer.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitPlayer.Velocity = (normal(loc - hitPlayer.Location) * velz);<br>&#9;&#9;&#9;&#9;//hitPlayer.TakeDamage(Player.Energy / 3, Player, hitLocation, normal(loc - hitPlayer.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if (hitMover != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;hitMover.bDrawExplosion = True;<br>&#9;&#9;&#9;&#9;//&#9;hitMover.TakeDamage(Player.Energy * 3, Player, hitLocation,normal(loc - hitMover.Location) * velz, 'Exploded'); <br>&#9;&#9;&#9;}<br>&#9;&#9;}&#9;&#9;<br>&#9;}<br><br></div>
<h3 id="AugRepel.SpawnExplosion"><a class="headerlink" href="#AugRepel.SpawnExplosion" title="Permanent link">SpawnExplosion</a> (vector Loc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ShockRing s1, s2, s3;<br>&#9;local SphereEffect se;<br><br><br>    s1 = spawn(class'ShockRing',,,Loc,rot(16384,0,0));<br>&#9;s1.Lifespan = 5.5;<br>    s2 = spawn(class'ShockRing',,,Loc,rot(0,16384,0));<br>&#9;s2.Lifespan = 5.5;<br>    s3 = spawn(class'ShockRing',,,Loc,rot(0,0,16384));<br>&#9;S3.Lifespan = 5.5;<br>&#9;se = spawn(class'SphereEffect',,,Loc,rot(16384,0,0));<br>&#9;se.Lifespan = 5.5;<br>&#9;se.MultiSkins[0]=Texture'DeusExDeco.Skins.AlarmLightTex7';<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugSkullgun.uc" title="Permanent link"><h2 id="AugSkullgun.uc">AugSkullgun.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int BioDrainODX;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">BioDrainODX=10<br>//mpAugValue=0.000000<br>//mpEnergyDrain=0.000000<br>EnergyRate=0.000000<br>Icon=Texture'AugIconSkull'<br>smallIcon=Texture'AugIconSkull_Small'<br>AugmentationName="Skullgun"<br>Description=""<br>MPInfo="When active, the aug fires a shot from your eye..."<br>LevelValues(0)=5.000000<br>LevelValues(1)=15.000000<br>LevelValues(2)=25.000000<br>LevelValues(3)=40.000000<br>AugmentationLocation=LOC_Eye<br>MPConflictSlot=4<br>DeActivateSound=none</div>
<h3 id="AugSkullgun.Deactivate"><a class="headerlink" href="#AugSkullgun.Deactivate" title="Permanent link">Deactivate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.Deactivate();<br><br></div>
<h3 id="AugSkullgun.PreBeginPlay"><a class="headerlink" href="#AugSkullgun.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.PreBeginPlay();<br><br>&#9;// If this is a netgame, then override defaults<br>&#9;if ( Level.NetMode != NM_StandAlone )<br>&#9;{<br>&#9;&#9;//LevelValues[3] = mpAugValue;<br>&#9;&#9;//EnergyRate = mpEnergyDrain;<br>&#9;}<br><br></div>
<h3 id="AugSkullgun.Skullshot"><a class="headerlink" href="#AugSkullgun.Skullshot" title="Permanent link">Skullshot</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor hitActor;<br>&#9;local vector loc, line, HitLocation, hitNormal;<br>&#9;local ScriptedPawn     hitPawn;<br>&#9;local PlayerPawn       hitPlayer;<br>&#9;local DeusExMover      hitMover;<br>&#9;local DeusExDecoration hitDecoration;<br>&#9;local DeusExProjectile hitProjectile;<br>&#9;local bool             bTakeDamage;<br>&#9;local int              damage;<br>&#9;local vector v2;<br><br>&#9;<br>&#9;Player.Energy -= BioDrainODX;<br>&#9;<br>&#9;v2 = Player.location;<br>&#9;v2.z += 20;<br>&#9;Spawn(class'Tracer',Player,,v2,Player.ViewRotation);<br>&#9;<br>&#9;Player.PlaySound(sound'RifleFire');<br>&#9;<br>&#9;loc = Player.Location;<br>&#9;loc.Z += Player.BaseEyeHeight;<br>&#9;line = Vector(Player.ViewRotation) * 4000;<br>&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;&#9;if (hitActor != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitMover = DeusExMover(hitActor);<br>&#9;&#9;&#9;&#9;hitPawn = ScriptedPawn(hitActor);<br>&#9;&#9;&#9;&#9;hitDecoration = DeusExDecoration(hitActor);<br>&#9;&#9;&#9;&#9;hitPlayer = PlayerPawn(hitActor);<br>&#9;&#9;&#9;&#9;if (hitMover != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;damage=50;<br>&#9;&#9;&#9;&#9;&#9;bTakeDamage = true;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if (hitPawn != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;damage=50;<br>&#9;&#9;&#9;&#9;&#9;bTakeDamage = true;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if (hitDecoration != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;damage = 50;<br>&#9;&#9;&#9;&#9;&#9;bTakeDamage = true;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if (hitPlayer != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;damage = 50;<br>&#9;&#9;&#9;&#9;&#9;bTakeDamage = true;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if (hitActor != Level)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;damage = 50;<br>&#9;&#9;&#9;&#9;&#9;bTakeDamage = true;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;if (bTakeDamage)<br>&#9;&#9;&#9;&#9;hitActor.TakeDamage(damage, Player, hitLocation, line, 'Shot'); &#9;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#AugTakedown.uc" title="Permanent link"><h2 id="AugTakedown.uc">AugTakedown.uc (extends Augmentation)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float mpAugValue;<br>var float mpEnergyDrain;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpAugValue=10.000000<br>mpEnergyDrain=0.000000<br>EnergyRate=0.000000<br>Icon=Texture'AugIconSkull'<br>smallIcon=Texture'AugIconSkull_Small'<br>AugmentationName="Takedown"<br>Description=""<br>MPInfo="When active, something something"<br>LevelValues(0)=5.000000<br>LevelValues(1)=15.000000<br>LevelValues(2)=25.000000<br>LevelValues(3)=40.000000<br>AugmentationLocation=LOC_Arm<br>MPConflictSlot=4</div>
<h3 id="AugTakedown.Deactivate"><a class="headerlink" href="#AugTakedown.Deactivate" title="Permanent link">Deactivate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.Deactivate();<br><br></div>
<h3 id="AugTakedown.PreBeginPlay"><a class="headerlink" href="#AugTakedown.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.PreBeginPlay();<br><br>&#9;// If this is a netgame, then override defaults<br>&#9;if ( Level.NetMode != NM_StandAlone )<br>&#9;{<br>&#9;&#9;LevelValues[3] = mpAugValue;<br>&#9;&#9;EnergyRate = mpEnergyDrain;<br>&#9;}<br><br></div>
<h3 id="AugTakedown.Skullshot"><a class="headerlink" href="#AugTakedown.Skullshot" title="Permanent link">Skullshot</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor hitActor;<br>&#9;local vector loc, line, HitLocation, hitNormal;<br>&#9;local ScriptedPawn     hitPawn;<br>&#9;local PlayerPawn       hitPlayer;<br>&#9;local int              damage;<br>&#9;local vector v2;<br><br>&#9;<br>&#9;Player.Energy -= 25;<br>&#9;<br><br>&#9;Player.PlaySound(sound'RifleFire');<br>&#9;<br>&#9;loc = Player.Location;<br>&#9;loc.Z += Player.BaseEyeHeight;<br>&#9;line = Vector(Player.ViewRotation) * 100;<br>&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;&#9;if (hitActor != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitPawn = ScriptedPawn(hitActor);<br>&#9;&#9;&#9;&#9;hitPlayer = PlayerPawn(hitActor);<br>&#9;&#9;&#9;&#9;if (hitPawn != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Player.ClientMessage("Placeholder: taking down "$hitpawn);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if (hitPlayer != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Player.ClientMessage("Placeholder: taking down "$hitplayer.playerreplicationinfo.playername);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}&#9;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#DXL.uc" title="Permanent link"><h2 id="DXL.uc">DXL.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var localized string l_lvote, l_wonvote;<br>var DXL Prev, Next;<br>var DXMVMapVoteMenu MVM;<br>var string Maps[arraycount(class'MVMutator'.default.Maps)];<br>var byte VoteTotals[arraycount(Maps)];<br>Var MVMutator Mut;<br>var float RepTime;<br>var int MapCount, iCurrentVote, iNextMap, iRepMaps;<br>var bool bVoteDone, bAdminVoteDone, bAdminVoteYes;<br>var bool DoesNotVote; //Ayleth: used to seperate the master DXL from the player dxls</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">l_lvote="%s is currently leading the vote."<br>l_wonvote="%s has won the map vote!"<br>iCurrentVote=-2<br>iNextMap=-1<br>bHidden=True<br>RemoteRole=2<br>NetPriority=1.50</div>
<h3 id="DXL.AddMap"><a class="headerlink" href="#DXL.AddMap" title="Permanent link">AddMap</a> (int I, string M)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f ((iRepMaps < MapCount) && (I < MapCount) && (M != "") && (Maps[I] == "")) <br></div>
<h3 id="DXL.ClientAddMaps"><a class="headerlink" href="#DXL.ClientAddMaps" title="Permanent link">ClientAddMaps</a> (int I, string M, string M1, string M2, string M3)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">ddMap(I  , M)<br></div>
<h3 id="DXL.ClientAdminVote"><a class="headerlink" href="#DXL.ClientAdminVote" title="Permanent link">ClientAdminVote</a> (bool Vote)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    bAdminVoteDone=True;<br>    bAdminVoteYes=Vote;<br>    ServerAdminVote(Vote);<br><br></div>
<h3 id="DXL.ClientResetAdminVote"><a class="headerlink" href="#DXL.ClientResetAdminVote" title="Permanent link">ClientResetAdminVote</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    bAdminVoteDone=False;<br>    ServerResetAdminVote();<br><br></div>
<h3 id="DXL.ClientSetVote"><a class="headerlink" href="#DXL.ClientSetVote" title="Permanent link">ClientSetVote</a> (int I)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f (iCurrentVote != I) <br></div>
<h3 id="DXL.CloseMVMenu"><a class="headerlink" href="#DXL.CloseMVMenu" title="Permanent link">CloseMVMenu</a> (string sNextMap)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f (!bVoteDone) <br></div>
<h3 id="DXL.Destroyed"><a class="headerlink" href="#DXL.Destroyed" title="Permanent link">Destroyed</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f (MVM != None<br></div>
<h3 id="DXL.OpenAVMenu"><a class="headerlink" href="#DXL.OpenAVMenu" title="Permanent link">OpenAVMenu</a> (bool bForceShow)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local AdminVoteWindow AVW;<br>&#9;local DeusExRootWindow W;<br><br>    if ((!bAdminVoteDone || bForceShow) && ValidOwner())<br>    {<br>        W = DeusExRootWindow(DeusExPlayer(Owner).RootWindow);<br>        if (W != None)<br>        {<br>            AVW = AdminVoteWindow(W.InvokeMenuScreen(Class'AdminVoteWindow', true));<br>    &#9;&#9;AVW.SetMessageText("An administrator has instigated a|nservertravel vote. Do you wish to|nchange to the most voted map,|n"@Maps[iNextMap]$"?");<br>    &#9;&#9;AVW.Caller=Self;<br>            W.ShowCursor(True);<br>    &#9;}<br>    }<br><br></div>
<h3 id="DXL.OpenMVMenu"><a class="headerlink" href="#DXL.OpenMVMenu" title="Permanent link">OpenMVMenu</a></h3>

<h3 id="DXL.PostBeginPlay"><a class="headerlink" href="#DXL.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local MVMutator c;<br><br>  foreach allactors (class'MVMutator', c)<br>  {<br>      mut = c;<br>      return;<br>  }<br><br>    if (c == None)<br>        Mut = Spawn(class'MVMutator');<br>  SetTimer(1, true);<br><br></div>
<h3 id="DXL.ServerAdminVote"><a class="headerlink" href="#DXL.ServerAdminVote" title="Permanent link">ServerAdminVote</a> (bool Vote)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    bAdminVoteDone=True;<br>    bAdminVoteYes=Vote;<br><br></div>
<h3 id="DXL.ServerResetAdminVote"><a class="headerlink" href="#DXL.ServerResetAdminVote" title="Permanent link">ServerResetAdminVote</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    bAdminVoteDone=False;<br><br></div>
<h3 id="DXL.ServerSetVote"><a class="headerlink" href="#DXL.ServerSetVote" title="Permanent link">ServerSetVote</a> (int I)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">CurrentVote = I<br></div>
<h3 id="DXL.ShowWinner"><a class="headerlink" href="#DXL.ShowWinner" title="Permanent link">ShowWinner</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f ((iNextMap >= 0) && ValidOwner()<br></div>
<h3 id="DXL.Tick"><a class="headerlink" href="#DXL.Tick" title="Permanent link">Tick</a> (float Delta)</h3>

<h3 id="DXL.Timer"><a class="headerlink" href="#DXL.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f (ValidOwner()) <br></div>
<h3 id="DXL.ValidOwner"><a class="headerlink" href="#DXL.ValidOwner" title="Permanent link">ValidOwner</a> -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">eturn ( (DeusExPlayer(Owner) != None) && DeusExPlayer(Owner).PlayerIsClient() && (DeusExPlayer(Owner).Player != None) && (DeusExPlayer(Owner).Player.CurrentNetSpeed != 1000000) );  //demo chec<br></div>
<br><br><hr>
<a class="headerlink" href="#DXMVMapVoteMenu.uc" title="Permanent link"><h2 id="DXMVMapVoteMenu.uc">DXMVMapVoteMenu.uc (extends MenuUIScreenWindow)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var localized string l_help1, l_help2, l_help3, l_help4, l_cvote, l_lmap;<br>var MenuUIScrollAreaWindow winScroll;<br>var MenuUIListWindow lstMaps, lstVotes;<br>var MenuUISmallLabelWindow CurrentVote, LeadingMap;<br>var DXL PlayerVote;<br>var float RepTime;<br>var bool bListDone, bStacking;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">l_help1="Type 'Mutate MapVote' to display the menu."<br>l_help2="Type 'Mutate VoteResult' to display the leading map."<br>l_help3="Type 'Mutate Vote' to display the vote menu when a vote is in effect."<br>l_help4="Type 'Mutate StartVote' to begin a vote to immediatly change the map."<br>l_cvote="Current Vote:"<br>l_lmap="Leading Map:"<br>RepTime=1.00<br>actionButtons(0)=(Align=2,Action=1,Text="",Key="",btn=None),<br>actionButtons(1)=(Align=0,Action=5,Text="Clear Vote",Key="NOVOTE",btn=None),<br>actionButtons(2)=(Align=0,Action=5,Text="ServerTravel",Key="TRAVEL",btn=None),<br>Title="MapVote Menu v1.1.0"<br>ClientWidth=440<br>ClientHeight=244<br>bUsesHelpWindow=False</div>
<h3 id="DXMVMapVoteMenu.CanPushScreen"><a class="headerlink" href="#DXMVMapVoteMenu.CanPushScreen" title="Permanent link">CanPushScreen</a> (class<DeusExBaseWindow> C) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f (ClassIsChildOf(C, class'HUDMultiplayer') || ClassIsChildOf(C, class'MultiplayerMessageWin')) <br></div>
<h3 id="DXMVMapVoteMenu.CanStack"><a class="headerlink" href="#DXMVMapVoteMenu.CanStack" title="Permanent link">CanStack</a> -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f (bStacking) <br></div>
<h3 id="DXMVMapVoteMenu.CreateLabel"><a class="headerlink" href="#DXMVMapVoteMenu.CreateLabel" title="Permanent link">CreateLabel</a> (int X, int Y, string S) -> MenuUISmallLabelWindow</h3>

<h3 id="DXMVMapVoteMenu.DestroyWindow"><a class="headerlink" href="#DXMVMapVoteMenu.DestroyWindow" title="Permanent link">DestroyWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">TickEnabled = false<br></div>
<h3 id="DXMVMapVoteMenu.InitWindow"><a class="headerlink" href="#DXMVMapVoteMenu.InitWindow" title="Permanent link">InitWindow</a></h3>

<h3 id="DXMVMapVoteMenu.ListRowActivated"><a class="headerlink" href="#DXMVMapVoteMenu.ListRowActivated" title="Permanent link">ListRowActivated</a> (window W, int R) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f ((W == lstMaps) && bListDone) <br></div>
<h3 id="DXMVMapVoteMenu.MapNumToRow"><a class="headerlink" href="#DXMVMapVoteMenu.MapNumToRow" title="Permanent link">MapNumToRow</a> (int N) -> int</h3>

<h3 id="DXMVMapVoteMenu.ProcessAction"><a class="headerlink" href="#DXMVMapVoteMenu.ProcessAction" title="Permanent link">ProcessAction</a> (String S)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">uper.ProcessAction(S)<br></div>
<h3 id="DXMVMapVoteMenu.RawKeyPressed"><a class="headerlink" href="#DXMVMapVoteMenu.RawKeyPressed" title="Permanent link">RawKeyPressed</a> (EInputKey key, EInputState iState, bool bRepeat) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f ((key == IK_Enter) && (iState == IST_Release)) <br></div>
<h3 id="DXMVMapVoteMenu.Tick"><a class="headerlink" href="#DXMVMapVoteMenu.Tick" title="Permanent link">Tick</a> (float Delta)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int I, C;<br>f ((lstMaps == None) || (lstVotes == None) || (PlayerVote == None)<br></div>
<br><br><hr>
<a class="headerlink" href="#GunGame.uc" title="Permanent link"><h2 id="GunGame.uc">GunGame.uc (extends TCDeathmatch)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">GTName="Arsenal (WIP)"<br>VictoryConString1="|P1Hit the score limit! (|P3 "<br>VictoryConString2=" |P1) - |P2(Your weapon changes as you streak)"<br>TimeLimitString1="|P1Score the most! (|P3 "<br>TimeLimitString2=" |P1) - |P2(Your weapon changes as you streak)"</div>
<h3 id="GunGame.Killed"><a class="headerlink" href="#GunGame.Killed" title="Permanent link">Killed</a> (pawn Killer, pawn Other, name damageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool NotifyDeath;<br>&#9;local DeusExPlayer otherPlayer;<br>&#9;local Pawn CurPawn;<br>&#9;local class<actor> checkClass;<br>&#9;local int i;<br>&#9;local TCPlayer TCP;<br>&#9;local class<Inventory> GiveClass;<br>&#9;local int Passes, r;<br>&#9;local Inventory anItem, anItem2;<br>&#9;local Class<Inventory> w;<br><br>   //both players...<br>   if ((Killer.bIsPlayer) && (Other.bIsPlayer))<br>   {<br>&#9;&#9;&#9;for(i=0;i<Arraycount(Settings.DemoteWeapons) && Settings.DemoteWeapons[i] != "";i++)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;checkClass=class<Actor>(DynamicLoadObject(Settings.DemoteWeapons[i],class'class'));<br><br>&#9;&#9;&#9;&#9;if(TCPlayer(Killer).inHand.class != none && checkClass != none)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(TCPlayer(Killer).inHand.class == checkClass)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(TCPRI(TCPlayer(Other).PlayerReplicationInfo).Rank > 1)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(TCPlayer(Other).PlayerReplicationInfo).Rank -= 1;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;BroadcastMessage(Other.PlayerReplicationInfo.PlayerName$" was demoted!");<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;if (Killer != Other)<br>&#9;&#9;{<br>&#9;&#9;&#9;&#9;// Grant the kill to the killer, and increase his streak<br>&#9;&#9;&#9;&#9;Killer.PlayerReplicationInfo.Score += 1;<br>&#9;&#9;&#9;&#9;if(TCPRI(TCPlayer(Killer).PlayerReplicationInfo).Rank < 12)<br>&#9;&#9;&#9;&#9;{&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;TCPRI(TCPlayer(Killer).PlayerReplicationInfo).Rank += 1;<br>&#9;&#9;&#9;&#9;&#9;RemovePlayerInventory(TCPlayer(Killer));<br>&#9;&#9;&#9;&#9;&#9;//TCPlayer(Killer).GGRank();<br>&#9;&#9;&#9;&#9;&#9;r = TCPRI(TCPlayer(Killer).PlayerReplicationInfo).Rank;<br><br>&#9;&#9;&#9;&#9;&#9; if (r == 1)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponStealthPistol';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 2)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponPistol';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 3)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponFlamethrower';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 4)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponMiniCrossbow';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 5)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponShuriken';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 6)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponSawedOffShotgun';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 7)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponAssaultShotgun';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 8)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponAssaultgun';<br><br>&#9;&#9;&#9;&#9;&#9; if (r == 9)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponPlasmaRifle';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 10)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponGepGun';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 11)<br>&#9;&#9;&#9;&#9;&#9;   w = class'Weaponrifle';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9; if (r == 12)<br>&#9;&#9;&#9;&#9;&#9;   w = class'WeaponNanoSword';<br>&#9;&#9;&#9;&#9;&#9;   <br>&#9;&#9;&#9;&#9;&#9;anItem = Spawn(w);<br>&#9;&#9;&#9;&#9;&#9;anItem.Frob(TCPlayer(Killer),None);&#9;  <br>&#9;&#9;&#9;&#9;&#9;Inventory.bInObjectBelt = True;<br>&#9;&#9;&#9;&#9;&#9;anItem.Destroy();<br>&#9;&#9;&#9;&#9;&#9;&#9; <br>&#9;&#9;&#9;&#9;&#9;anItem = Spawn(class'WeaponCombatKnife');<br>&#9;&#9;&#9;&#9;&#9;anItem.Frob(TCPlayer(Killer),None);&#9;  <br>&#9;&#9;&#9;&#9;&#9;Inventory.bInObjectBelt = True;<br>&#9;&#9;&#9;&#9;&#9;anItem.Destroy();<br>&#9;&#9;&#9;&#9;&#9;TCPlayer(Killer).ClientMessage("|P7Ranked up to "$TCPRI(TCPlayer(Killer).PlayerReplicationInfo).Rank$"!");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;}<br>   }<br><br>      Super.Killed(Killer,Other,damageType);<br><br><br></div>
<h3 id="GunGame.PostBeginPlay"><a class="headerlink" href="#GunGame.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExWeapon w;<br>&#9;local int r;<br><br><br>    super.PostBeginPlay();<br>&#9;<br>&#9;&#9;SetTimer(5,true);<br><br>&#9;&#9;for(r=0;r<Arraycount(Settings.SaveSpawnWeapons);r++) //Weapon clearing and saving array weapons.<br>&#9;&#9;{<br>&#9;&#9;&#9;Foreach AllActors(class'DeusExWeapon',w)<br>&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;&#9;if(w.tag != Settings.SaveSpawnWeapons[r])<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;w.Destroy();<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br><br><br></div>
<h3 id="GunGame.RemovePlayerInventory"><a class="headerlink" href="#GunGame.RemovePlayerInventory" title="Permanent link">RemovePlayerInventory</a> (DeusExPlayer Player)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Inventory item, nextItem, lastItem;<br><br><br>   if (Player.Inventory != None)<br>   {<br>      item = Player.Inventory;<br>      nextItem = item.Inventory;<br>      lastItem = item;<br><br>      do<br>      {<br>         if ((item != None) && item.bDisplayableInv || item.IsA('Ammo'))<br>         {<br>            // make sure everything is turned off<br>            if (item.IsA('DeusExWeapon'))<br>            {<br>               DeusExWeapon(item).ScopeOff();<br>               DeusExWeapon(item).LaserOff();<br>            }<br>            if (item.IsA('DeusExPickup'))<br>            {<br>               if (DeusExPickup(item).bActive)<br>                  DeusExPickup(item).Activate();<br>            }<br><br>            if (item.IsA('ChargedPickup'))<br>               Player.RemoveChargedDisplay(ChargedPickup(item));<br><br>            Player.DeleteInventory(item);<br>            item.Destroy();<br>            item = Player.Inventory;<br>         }<br>         else<br>            item = nextItem;<br><br>         if (item != None)<br>            nextItem = item.Inventory;<br>      }<br>      until ((item == None) || (item == lastItem));<br>   }<br><br></div>
<h3 id="GunGame.Timer"><a class="headerlink" href="#GunGame.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer ssp;<br><br>&#9;foreach AllActors(class'TCPlayer',ssp)&#9;&#9;<br>&#9;&#9;if (ssp !=None)<br>&#9;&#9;&#9;SSP.AmmoRestock();<br><br></div>
<br><br><hr>
<a class="headerlink" href="#Infection.uc" title="Permanent link"><h2 id="Infection.uc">Infection.uc (extends TCDeathmatch)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var TCPlayer MainCarrier; //Just a track of who the original infected is.<br>var int PIK; //Pre-Infected Kills<br>var int IK;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">GTName="Infection"<br>VictoryConString1="|P1Hit the score limit! (|P3 "<br>VictoryConString2=" |P1) - |P2(Beware of the infection...)"<br>TimeLimitString1="|P1Score the most! (|P3 "<br>TimeLimitString2=" |P1) - |P2(Beware of the infection...)"<br>//bDisableDefaultScoring=True</div>
<h3 id="Infection.GetOdds"><a class="headerlink" href="#Infection.GetOdds" title="Permanent link">GetOdds</a> (bool bMain) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float baseOdds;<br>&#9;local TCPRI infecteds;<br><br>&#9;<br>&#9;baseOdds = 0.5;<br>&#9;<br>&#9;foreach AllActors(class'TCPRI', infecteds)<br>&#9;&#9;baseOdds += 0.1;<br>&#9;&#9;<br>&#9;if(bMain)<br>&#9;&#9;baseOdds += 0.2;<br>&#9;<br>&#9;if(FRand() < baseOdds)<br>&#9;&#9;return True;<br>&#9;else<br>&#9;&#9;return False;<br><br></div>
<h3 id="Infection.Killed"><a class="headerlink" href="#Infection.Killed" title="Permanent link">Killed</a> (pawn Killer, pawn Other, name damageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer KillerTC, VictimTC;<br>&#9;local PerkInfection PI;<br><br>&#9;KillerTC = TCPlayer(Killer);<br>&#9;VictimTC = TCPlayer(Other);<br>&#9;Super.Killed(Killer,Other,damageType);<br>&#9;<br>&#9;if(KillerTC != None && VictimTC != None)<br>&#9;{<br>&#9;&#9;if(MainCarrier == None) <br>&#9;&#9;{<br>&#9;&#9;&#9;PIK++;<br>&#9;&#9;&#9;if(FRand() < (0.1 * PIK)) //50% chance of every death of the beginning match triggering the infection<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Settings.Print("|P2The infection begins spreading...");<br>&#9;&#9;&#9;&#9;MainCarrier = VictimTC;<br>&#9;&#9;&#9;&#9;VictimTC.GetPerk("OpenDX.PerkInfection");<br>&#9;&#9;&#9;&#9;TCPRI(VictimTC.PlayerReplicationInfo).bInfected = True;<br>&#9;&#9;&#9;&#9;VictoryConString2=" |P1) - |P2(Death brings the infection.. be the last human standing!)";<br>&#9;&#9;&#9;&#9;TimeLimitString2=" |P1) - |P2(Death brings the infection.. be the last human standing!)";<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(TCPRI(KillerTC.PlayerReplicationInfo).bInfected && !TCPRI(VictimTC.PlayerReplicationInfo).bInfected)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(KillerTC == MainCarrier)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;IK += 1;<br>&#9;&#9;&#9;&#9;if(GetOdds(True))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;TCPRI(VictimTC.PlayerReplicationInfo).bInfected = True;<br>&#9;&#9;&#9;&#9;&#9;VictimTC.GetPerk("OpenDX.PerkInfection");<br>&#9;&#9;&#9;&#9;&#9;Settings.Print("|P2"$VictimTC.PlayerReplicationInfo.PlayerName$" was infected.");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(GetOdds(False))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;KillerTC.HealPlayer(IK, False);<br>&#9;&#9;&#9;&#9;&#9;TCPRI(VictimTC.PlayerReplicationInfo).bInfected = True;<br>&#9;&#9;&#9;&#9;&#9;VictimTC.GetPerk("OpenDX.PerkInfection");<br>&#9;&#9;&#9;&#9;&#9;Settings.Print("|P2"$VictimTC.PlayerReplicationInfo.PlayerName$" was infected.");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="Infection.PostBeginPlay"><a class="headerlink" href="#Infection.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExWeapon w;<br>&#9;local int r;<br>&#9;local Infectiontimer SST;<br><br><br>    super.PostBeginPlay();<br>&#9;<br>&#9;SST = Spawn(class'Infectiontimer');<br>&#9;SST.SetTimer(1,true);<br>&#9;<br>&#9;SST.myGame = Self;<br><br></div>
<h3 id="Infection.bAllInfected"><a class="headerlink" href="#Infection.bAllInfected" title="Permanent link">bAllInfected</a> -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPRI infecteds;<br><br><br>&#9;foreach AllActors(class'TCPRI', infecteds)<br>&#9;&#9;if(!infecteds.bInfected)<br>&#9;&#9;&#9;return False;<br>&#9;&#9;<br>&#9;return True;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#InfectionTimer.uc" title="Permanent link"><h2 id="InfectionTimer.uc">InfectionTimer.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var Infection myGame;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=true</div>
<h3 id="InfectionTimer.Timer"><a class="headerlink" href="#InfectionTimer.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPRI infecteds;<br>&#9;local int c;<br><br>&#9;<br>&#9;foreach AllActors(class'TCPRI', infecteds)<br>&#9;&#9;c++;<br>&#9;<br>&#9;if(c != 0)<br>&#9;{<br>&#9;&#9;//NEW: If all players are infected, the infected "team" wins, naming the main carrier<br>&#9;&#9;if(bAllInfected())<br>&#9;&#9;{<br>&#9;&#9;&#9;myGame.PreGameOver();<br>&#9;&#9;&#9;myGame.PlayerHasWon( myGame.MainCarrier, myGame.MainCarrier, None, "Infection" );<br>&#9;&#9;&#9;myGame.GameOver();<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="InfectionTimer.bAllInfected"><a class="headerlink" href="#InfectionTimer.bAllInfected" title="Permanent link">bAllInfected</a> -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPRI infecteds;<br><br><br>&#9;foreach AllActors(class'TCPRI', infecteds)<br>&#9;&#9;if(!infecteds.bInfected)<br>&#9;&#9;&#9;return False;<br>&#9;<br>&#9;return True;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#Juggernaut.uc" title="Permanent link"><h2 id="Juggernaut.uc">Juggernaut.uc (extends TCTeam)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var TCPlayer Juggernaut;<br>var bool bShouldRun;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">GTName="Juggernaut Team"<br>VictoryConString1="|P1Hit the score limit! (|P3 "<br>VictoryConString2=" |P1) - |P2(Get a high streak to become the juggernaut!)"<br>TimeLimitString1="|P1Score the most! (|P3 "<br>TimeLimitString2=" |P1) - |P2(Get a high streak to become the juggernaut!)"<br>//bDisableDefaultScoring=True</div>
<h3 id="Juggernaut.JuggernautTeams"><a class="headerlink" href="#Juggernaut.JuggernautTeams" title="Permanent link">JuggernautTeams</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br>&#9;local int jteam;<br><br>&#9;<br>&#9;jteam = Juggernaut.PlayerReplicationInfo.Team;<br>&#9;<br>&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;{<br>&#9;&#9;if(!TCPRI(TCP.PlayerReplicationInfo).bJuggernaut)<br>&#9;&#9;{<br>&#9;&#9;&#9;TCPRI(TCP.PlayerReplicationInfo).tOldTeam = TCP.PlayerReplicationInfo.Team;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(jteam == 0)<br>&#9;&#9;&#9;&#9;tSwapPlayer(TCP, 1, True, True);<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;tSwapPlayer(TCP, 0, True, True);<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="Juggernaut.Killed"><a class="headerlink" href="#Juggernaut.Killed" title="Permanent link">Killed</a> (pawn Killer, pawn Other, name damageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer KillerTC, VictimTC;<br><br>&#9;<br>&#9;KillerTC = TCPlayer(Killer);<br>&#9;VictimTC = TCPlayer(Other);<br>&#9;Super.Killed(Killer,Other,damageType);<br>&#9;<br>&#9;if(VictimTC == Juggernaut && Juggernaut != None) //Did the juggernaut just die<br>&#9;{<br>&#9;&#9;Settings.Print("|P2The juggernaut has died!");<br>&#9;&#9;Juggernaut = None;<br>&#9;&#9;bShouldRun = False;<br>&#9;&#9;VictimTC.RemovePerkbyName("Juggernaut");<br>&#9;&#9;TCPRI(VictimTC.PlayerReplicationInfo).bJuggernaut = False;<br>&#9;&#9;ResetTeams();<br>&#9;}<br>&#9;<br>&#9;if(Juggernaut == None)<br>&#9;{<br>&#9;&#9;if(KillerTC != None && KillerTC.PlayerReplicationInfo.Streak >= Settings.StreakLimit)<br>&#9;&#9;{<br>&#9;&#9;&#9;bShouldRun = True;<br>&#9;&#9;&#9;Juggernaut = KillerTC;<br>&#9;&#9;&#9;TCPRI(KillerTC.PlayerReplicationInfo).bJuggernaut = True;<br>&#9;&#9;&#9;Settings.Print("|P2"$KillerTC.PlayerReplicationInfo.PlayerName$" became the juggernaut!");<br>&#9;&#9;&#9;JuggernautTeams();<br>&#9;&#9;&#9;KillerTC.GetPerk("OpenDX.Juggernaut");<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="Juggernaut.ResetTeams"><a class="headerlink" href="#Juggernaut.ResetTeams" title="Permanent link">ResetTeams</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;{<br>&#9;&#9;tSwapPlayer(TCP, TCPRI(TCP.PlayerReplicationInfo).tOldTeam, True, True);<br>&#9;}<br><br></div>
<h3 id="Juggernaut.Tick"><a class="headerlink" href="#Juggernaut.Tick" title="Permanent link">Tick</a> (float Deltatime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bShouldRun && Juggernaut == None)<br>&#9;{<br>&#9;&#9;Settings.Print("Juggernaut was missing.. resetting teams.");<br>&#9;&#9;bShouldRun=False;<br>&#9;&#9;ResetTeams();<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#JuggernautDM.uc" title="Permanent link"><h2 id="JuggernautDM.uc">JuggernautDM.uc (extends TCDeathmatch)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var TCPlayer Juggernaut;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">GTName="Juggernaut DM"<br>VictoryConString1="|P1Hit the score limit! (|P3 "<br>VictoryConString2=" |P1) - |P2(Get a high streak to become the juggernaut!)"<br>TimeLimitString1="|P1Score the most! (|P3 "<br>TimeLimitString2=" |P1) - |P2(Get a high streak to become the juggernaut!)"<br>//bDisableDefaultScoring=True</div>
<h3 id="JuggernautDM.Killed"><a class="headerlink" href="#JuggernautDM.Killed" title="Permanent link">Killed</a> (pawn Killer, pawn Other, name damageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer KillerTC, VictimTC;<br><br>&#9;<br>&#9;KillerTC = TCPlayer(Killer);<br>&#9;VictimTC = TCPlayer(Other);<br>&#9;Super.Killed(Killer,Other,damageType);<br>&#9;<br>&#9;if(VictimTC == Juggernaut && Juggernaut != None) //Did the juggernaut just die<br>&#9;{<br>&#9;&#9;Settings.Print("|P2The juggernaut has died!");<br>&#9;&#9;Juggernaut = None;<br>&#9;&#9;VictimTC.RemovePerkbyName("Juggernaut");<br>&#9;&#9;TCPRI(VictimTC.PlayerReplicationInfo).bJuggernaut = False;<br>&#9;}<br>&#9;<br>&#9;if(Juggernaut == None)<br>&#9;{<br>&#9;&#9;if(KillerTC != None && KillerTC.PlayerReplicationInfo.Streak >= Settings.StreakLimit)<br>&#9;&#9;{<br>&#9;&#9;&#9;Juggernaut = KillerTC;<br>&#9;&#9;&#9;TCPRI(KillerTC.PlayerReplicationInfo).bJuggernaut = True;<br>&#9;&#9;&#9;KillerTC.GetPerk("OpenDX.Juggernaut");<br>&#9;&#9;&#9;Settings.Print("|P2"$KillerTC.PlayerReplicationInfo.PlayerName$" became the juggernaut!");<br>&#9;&#9;}<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#KCObj.uc" title="Permanent link"><h2 id="KCObj.uc">KCObj.uc (extends DeusExDecoration)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float ScoreMultiplier; //no planned use yet, but future proofing any modifications.<br>var TCPlayer KillerPlayer, KilledPlayer;<br>var int tLifespan;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">ScoreMultiplier=1<br>bStatic=False<br>Physics=PHYS_Rotating<br>Texture=Texture'DeusExDeco.Skins.DXLogoTex1'<br>bMeshEnviroMap=True<br>ItemName="Skull"<br>Mesh=LodMesh'DeusExDeco.BoneSkull'<br>CollisionRadius=5.800000<br>CollisionHeight=4.750000<br>bFixedRotationDir=True<br>bBlockPlayers=False<br>bInvincible=True<br>bPushable=False<br>Mass=50.000000<br>Buoyancy=500.000000<br>RotationRate=(Yaw=8192)</div>
<h3 id="KCObj.Bump"><a class="headerlink" href="#KCObj.Bump" title="Permanent link">Bump</a> (actor Other)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TCPlayer(Other) != None && !TCPlayer(Other).IsInState('Dying') && TCPlayer(Other).Health > 0)<br>&#9;&#9;kcTriggered(TCPlayer(Other));<br><br></div>
<h3 id="KCObj.Frob"><a class="headerlink" href="#KCObj.Frob" title="Permanent link">Frob</a> (actor Frobber, inventory FrobWith)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;kcTriggered(TCPlayer(Frobber));<br><br></div>
<h3 id="KCObj.GetName"><a class="headerlink" href="#KCObj.GetName" title="Permanent link">GetName</a> (TCPlayer p) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return p.PlayerReplicationInfo.PlayerName;<br><br></div>
<h3 id="KCObj.RadialCollect"><a class="headerlink" href="#KCObj.RadialCollect" title="Permanent link">RadialCollect</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P, winP;<br>&#9;local vector dist;<br>&#9;local float lowestDist;<br><br><br>&#9;lowestDist = 1024;<br><br>&#9;foreach VisibleActors(class'TCPlayer', P, 50)<br>&#9;{<br>&#9;&#9;if(P != None && !P.IsInState('Dying') && P.Health > 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(vSize(P.Location - Location) < lowestDist)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;winP = P;<br>&#9;&#9;&#9;&#9;lowestDist = vSize(P.Location - Location);<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if(winP != None)<br>&#9;&#9;kcTriggered(winp);<br><br></div>
<h3 id="KCObj.Tick"><a class="headerlink" href="#KCObj.Tick" title="Permanent link">Tick</a> (float Deltatime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;RadialCollect();<br><br></div>
<h3 id="KCObj.Timer"><a class="headerlink" href="#KCObj.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">&#9;<br>&#9;tLifespan--;<br>&#9;if(tLifespan <= 0)<br>&#9;{<br>&#9;&#9;BroadcastMessage("|P2"$GetName(KillerPlayer)$"'s kill against "$GetName(KilledPlayer)$" failed.");<br>&#9;&#9;Destroy();<br>&#9;}<br>&#9;RadialCollect();<br><br></div>
<h3 id="KCObj.kcTriggered"><a class="headerlink" href="#KCObj.kcTriggered" title="Permanent link">kcTriggered</a> (TCPlayer myActivator)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int modScore;<br><br>&#9;<br>&#9;modScore = 1;<br>&#9;<br>&#9;if(myActivator == KillerPlayer)<br>&#9;{<br>&#9;&#9;modScore *= ScoreMultiplier;<br>&#9;&#9;<br>&#9;&#9;myActivator.ClientMessage("|C8B6914 Confirmed your kill against "$GetName(KilledPlayer)$"! |P2+"$modScore$" |C8B6914score");<br>&#9;&#9;KilledPlayer.ClientMessage("|C8B6914 Your death to "$GetName(KillerPlayer)$" was confirmed!");<br>&#9;}<br>&#9;else if(myActivator == KilledPlayer)<br>&#9;{<br>&#9;&#9;modScore *= ScoreMultiplier;<br>&#9;&#9;<br>&#9;&#9;myActivator.ClientMessage("|C8B6914 Denied your kill by "$GetName(KillerPlayer)$"! |P2+"$modScore$" |C8B6914score");<br>&#9;&#9;KillerPlayer.ClientMessage("|C8B6914 Your kill against "$GetName(KilledPlayer)$" was denied!");<br>&#9;}&#9;<br>&#9;else<br>&#9;{<br>&#9;&#9;modScore += 1;<br>&#9;&#9;modScore *= ScoreMultiplier;<br>&#9;&#9;myActivator.ClientMessage("|C8B6914 Denied "$GetName(KillerPlayer)$"'s kill! |P2+"$modScore$" |C8B6914score");<br>&#9;&#9;KilledPlayer.ClientMessage("|C8B6914 Your death to "$GetName(KillerPlayer)$" was denied by "$GetName(myActivator)$"!");<br>&#9;&#9;KillerPlayer.ClientMessage("|C8B6914 Your kill against "$GetName(KilledPlayer)$" was denied by "$GetName(myActivator)$"!");<br>&#9;}<br>&#9;<br>&#9;Target.PlaySound(Sound'DeusExSounds.UserInterface.LogGoalCompleted',,,, 256);<br>&#9;myActivator.PlayerReplicationInfo.Score += modScore;<br>&#9;Destroy();<br><br></div>
<br><br><hr>
<a class="headerlink" href="#KillConfirmed.uc" title="Permanent link"><h2 id="KillConfirmed.uc">KillConfirmed.uc (extends TCDeathmatch)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">VictoryConString1="|P1Hit the score limit! (|P3 "<br>VictoryConString2=" |P1) -|P2 (Grab the skulls of your victims to score!)"<br>TimeLimitString1="|P1Score the most! (|P3 "<br>TimeLimitString2=" |P1) -|P2 (Grab the skulls of your victims to score!)"<br>GTName="Kill Confirmed"<br>bDisableDefaultScoring=True</div>
<h3 id="KillConfirmed.Killed"><a class="headerlink" href="#KillConfirmed.Killed" title="Permanent link">Killed</a> (pawn Killer, pawn Other, name damageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local KCObj KC;<br>&#9;local TCPlayer KillerTC, VictimTC;<br><br>&#9;<br>&#9;KillerTC = TCPlayer(Killer);<br>&#9;VictimTC = TCPlayer(Other);<br>&#9;Super.Killed(Killer,Other,damageType);<br>&#9;<br>&#9;if((KillerTC != VictimTC) && (KillerTC != None && VictimTC != None)) //Making sure it isn't suicide and both players do actually exist.<br>&#9;{<br>&#9;&#9;KillerTC.PlayerReplicationInfo.Streak += 1;<br>&#9;&#9;KC = Spawn(class'KCObj', VictimTC,, VictimTC.Location);<br>&#9;&#9;KC.KilledPlayer = VictimTC;<br>&#9;&#9;KC.KillerPlayer = KillerTC;<br>&#9;&#9;KC.SetTimer(0.5,True);<br>&#9;&#9;KC.tLifespan = Settings.KCLifespan;<br>&#9;&#9;KC.scoreMultiplier = Settings.BaseScoreMultiplier;<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#KillConfirmedTeam.uc" title="Permanent link"><h2 id="KillConfirmedTeam.uc">KillConfirmedTeam.uc (extends TCTeam)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">VictoryConString1="|P1Hit the score limit! (|P3 "<br>VictoryConString2=" |P1) - |P2(Grab the skulls of your victims to score!)"<br>TimeLimitString1="|P1Score the most! (|P3 "<br>TimeLimitString2=" |P1) - |P2(Grab the skulls of your victims to score!)"<br>GTName="Kill Confirmed Team"<br>bDisableDefaultScoring=True</div>
<h3 id="KillConfirmedTeam.Killed"><a class="headerlink" href="#KillConfirmedTeam.Killed" title="Permanent link">Killed</a> (pawn Killer, pawn Other, name damageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local KCObj KC;<br>&#9;local TCPlayer KillerTC, VictimTC;<br><br>&#9;<br>&#9;KillerTC = TCPlayer(Killer);<br>&#9;VictimTC = TCPlayer(Other);<br>&#9;Super.Killed(Killer,Other,damageType);<br>&#9;<br>&#9;if((KillerTC != VictimTC) && (KillerTC != None && VictimTC != None)) //Making sure it isn't suicide and both players do actually exist.<br>&#9;{<br>&#9;&#9;KillerTC.PlayerReplicationInfo.Streak += 1;<br>&#9;&#9;KC = Spawn(class'KCObj', VictimTC,, VictimTC.Location);<br>&#9;&#9;KC.KilledPlayer = VictimTC;<br>&#9;&#9;KC.KillerPlayer = KillerTC;<br>&#9;&#9;KC.SetTimer(0.5,True);<br>&#9;&#9;KC.tLifespan = Settings.KCLifespan;<br>&#9;&#9;KC.scoreMultiplier = Settings.BaseScoreMultiplier;<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#MVMutator.uc" title="Permanent link"><h2 id="MVMutator.uc">MVMutator.uc (extends Mutator)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var config string ExcludeList[32];<br>var config ECycleType CycleType;<br>var config eDefaultVote DefaultVote;<br>var config ETimeToDisplay TimeToDisplay;<br>var config bool bUseMapListOnly, bFilterSPMaps, bAllowRepeatMap;<br>var int VoteTime;<br>var int CountDown;  //Ayleth: for changemap.<br>var string Maps[250];<br>var int MapCount;<br>var byte VoteTotals[arraycount(Maps)];<br>var DXL DXLList;<br>var string sNextMap;<br>var float CWTime;<br>var int LoadingTime, iDefMap, iNextMap, iListSize, EggTimer;<br>var bool bInit, bVoteDone, bDoAdminVote, bDoMapChange;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">CycleType=2<br>DefaultVote=1<br>bFilterSPMaps=True<br>VoteTime=45</div>
<h3 id="MVMutator.AddDXL"><a class="headerlink" href="#MVMutator.AddDXL" title="Permanent link">AddDXL</a> (Actor A)</h3>

<h3 id="MVMutator.AddMap"><a class="headerlink" href="#MVMutator.AddMap" title="Permanent link">AddMap</a> (string M)</h3>

<h3 id="MVMutator.ChooseWinner"><a class="headerlink" href="#MVMutator.ChooseWinner" title="Permanent link">ChooseWinner</a> (optional bool bFinal)</h3>

<h3 id="MVMutator.GetDXL"><a class="headerlink" href="#MVMutator.GetDXL" title="Permanent link">GetDXL</a> (Actor A, optional bool bSafe) -> DXL</h3>

<h3 id="MVMutator.GetMapFiles"><a class="headerlink" href="#MVMutator.GetMapFiles" title="Permanent link">GetMapFiles</a></h3>

<h3 id="MVMutator.GetMapList"><a class="headerlink" href="#MVMutator.GetMapList" title="Permanent link">GetMapList</a></h3>

<h3 id="MVMutator.ModifyPlayer"><a class="headerlink" href="#MVMutator.ModifyPlayer" title="Permanent link">ModifyPlayer</a> (Pawn P)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f (!bVoteDone && (DeusExPlayer(P) != None) && (GetDXL(P) == None)<br></div>
<h3 id="MVMutator.Mutate"><a class="headerlink" href="#MVMutator.Mutate" title="Permanent link">Mutate</a> (string S, PlayerPawn P)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Local DXL GetVotes;<br>&#9;local DeusExPlayer Player;<br><br>  if (DXLList != None)<br>  {<br>   if (S ~= "MapVote")<br>   {<br>    if (!bVoteDone)<br>    {<br>     GetDXL(P, true).OpenMVMenu();<br>    }<br>   }<br>   else if (S ~= "VoteResult")<br>   {<br>     GetDXL(P, true).ShowWinner();<br>   }<br>   else if (S~= "Vote")     //allows the player to vote for immediate changemap<br>   {<br>   if(bDoAdminVote==True)<br>   GetDXL(P,true).OpenAVMenu(True);<br>   else<br>   DeusExPlayer(P).Clientmessage("There is no vote in progress to change the map");<br>   }<br>   //trm<br>   else if (P.bAdmin)<br>   {<br>    if (S ~= "filtersp")<br>    {<br>     bFilterSPMaps=!bFilterSPMaps;<br>     P.ClientMessage("MAPVOTE: Filtering SP Maps:"@bFilterSPMaps);<br>    }<br>    else if (S ~= "usemaplist")<br>    {<br>     bUseMapListOnly=!bUseMapListOnly;<br>     P.ClientMessage("MAPVOTE: Using Map List Only:"@bUseMapListOnly);<br>    }<br>    else if (S ~= "cycletype")<br>    {<br>     if (CycleType==CT_Static)<br>     {<br>      CycleType = CT_Random;<br>      P.ClientMessage("MAPVOTE: CycleType now [Random].");<br>     }<br>     else if (CycleType==CT_Random)<br>     {<br>      CycleType = CT_Cycle;<br>      P.ClientMessage("MAPVOTE: CycleType now [Cycle].");<br>     }<br>     else<br>     {<br>      CycleType = CT_Static;<br>      P.ClientMessage("MAPVOTE: CycleType now [Static].");<br>     }<br>    }<br>    Else if (S~= "StartVote")  //admin calls this to begin changemap vote.<br>    {<br>      if(!bDoAdminVote)<br>      {<br>      foreach allactors(class'DXL',GetVotes)<br>     {<br>         GetVotes.ClientResetAdminVote();<br>         GetVotes.ServerResetAdminVote();<br>         GetVotes.bAdminVoteDone=false;<br>     }<br>      if(TimeToDisplay==TTD_Immediatly)<br>      BroadCastMessage("An administrator has called for a servertravel mapvote to the map"@Maps[iNextMap]$". Please cast your vote when you have died or type 'Mutate Vote' to cast your vote now.");<br>      Else<br>      BroadCastMessage("An administrator has called for a servertravel mapvote to the map"@Maps[iNextMap]$".");<br>      bDoAdminVote=True;<br>      settimer(1,true);<br>      if(TimeToDisplay==TTD_Immediatly)<br>      foreach allactors(Class'DeusExPlayer',Player)<br>       GetDXL(Player, true).OpenAVMenu(false);<br>      }<br>      else  DeusExPlayer(P).Clientmessage("A vote is already in progress.");<br>    }<br>   }<br>  }<br><br>  Super.Mutate(S, P);<br><br></div>
<h3 id="MVMutator.PostBeginPlay"><a class="headerlink" href="#MVMutator.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>

<h3 id="MVMutator.ScoreKill"><a class="headerlink" href="#MVMutator.ScoreKill" title="Permanent link">ScoreKill</a> (pawn Killer, pawn Other)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   if(bDoAdminVote && TimeToDisplay==TTD_OnDeath)   //this is where the player recieves the message window to vote.<br>       GetDXL(Other, true).OpenAVMenu(false);<br><br></div>
<h3 id="MVMutator.Tick"><a class="headerlink" href="#MVMutator.Tick" title="Permanent link">Tick</a> (float Delta)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">f (bVoteDone<br></div>
<h3 id="MVMutator.Timer"><a class="headerlink" href="#MVMutator.Timer" title="Permanent link">Timer</a></h3>

<h3 id="MVMutator.UpdateVoteData"><a class="headerlink" href="#MVMutator.UpdateVoteData" title="Permanent link">UpdateVoteData</a> (optional bool bFinal)</h3>

<br><br><hr>
<a class="headerlink" href="#N_ShockWave.uc" title="Permanent link"><h2 id="N_ShockWave.uc">N_ShockWave.uc (extends Effects)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var float OldShockDistance, ShockSize;<br>var float nscale;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">nscale=0.75<br>LifeSpan=1.50<br>DrawType=DT_Mesh<br>Style=STY_Translucent<br>AmbientGlow=255<br>bUnlit=True<br>bAlwaysRelevant=True<br>MultiSkins(0)=FireTexture'Effects.liquid.Virus_SFX'<br>MultiSkins(1)=FireTexture'Effects.liquid.Virus_SFX'<br>Skin=FireTexture'Effects.liquid.Virus_SFX'<br>Mesh=LodMesh'DeusExItems.SphereEffect'</div>
<h3 id="N_ShockWave.PostBeginPlay"><a class="headerlink" href="#N_ShockWave.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br><br><br>if ( Role == ROLE_Authority ) <br> {<br> for ( P=Level.PawnList; P!=None; P=P.NextPawn )<br>  if ( P.IsA('Human') && (VSize(P.Location - Location) < (1000 * nscale)) )<br>   Human(P).ShakeView(0.5, (250000.0*nscale)/VSize(P.Location - Location), 10);<br><br> if ( Instigator != None )<br>  MakeNoise(10.0*nscale);<br> }<br><br>SetTimer(0.125, True);<br><br>if ( Level.NetMode != NM_DedicatedServer )<br> SpawnEffects();<br><br></div>
<h3 id="N_ShockWave.SpawnEffects"><a class="headerlink" href="#N_ShockWave.SpawnEffects" title="Permanent link">SpawnEffects</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ExplosionLarge E;<br><br><br>PlaySound(sound'LargeExplosion2', SLOT_Misc,,, 2000*nscale);<br>E = spawn(class'ExplosionLarge',,,Location);<br>E.RemoteRole = ROLE_None;<br><br></div>
<h3 id="N_ShockWave.Tick"><a class="headerlink" href="#N_ShockWave.Tick" title="Permanent link">Tick</a> (float DeltaTime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>if ( Level.NetMode != NM_DedicatedServer )<br> {<br>// ShockSize = 13 * (Default.LifeSpan - LifeSpan) + 3.5/(LifeSpan/Default.LifeSpan+0.05);<br> ShockSize = 59.0 * (Default.LifeSpan - LifeSpan) + 1.0;<br> ScaleGlow = Lifespan;<br> AmbientGlow = ScaleGlow * 255;<br> DrawScale = ShockSize * 0.10 * nscale;  //scale Earth to correct size<br> }<br><br></div>
<h3 id="N_ShockWave.Timer"><a class="headerlink" href="#N_ShockWave.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local actor Victims;<br>&#9;local float dist, MoScale;<br>&#9;local vector dir;<br><br><br>ShockSize = 59.0 * (Default.LifeSpan - LifeSpan) + 1.0;<br>if ( Level.NetMode != NM_DedicatedServer )<br> {<br> if ( Level.NetMode == NM_Client )<br>  {<br>  foreach VisibleCollidingActors( class 'Actor', Victims, ShockSize*6*nscale, Location )<br>   if ( Victims.Role == ROLE_Authority )<br>    {<br>    dir = Victims.Location - Location;<br>    dist = FMax(1,VSize(dir));<br>    dir = dir/dist +vect(0,0,0.3); <br>    if ( (dist> OldShockDistance) || (dir dot Victims.Velocity <= 0))<br>     {<br>     MoScale = FMax(0, 1000 - (1.862 * Dist)/nscale);<br>     Victims.Velocity = Victims.Velocity + dir * (MoScale + 20);&#9;<br>     Victims.TakeDamage( MoScale, Instigator,<br>       Victims.Location - 0.5 * (Victims.CollisionHeight + Victims.CollisionRadius) * dir,<br>       (1000 * dir), 'Burned' );<br>     }<br>    }&#9;<br>  return;<br>  }<br> }<br><br>foreach VisibleCollidingActors( class 'Actor', Victims, ShockSize*6*nscale, Location )<br> {<br> dir = Victims.Location - Location;<br> dist = FMax(1,VSize(dir));<br> dir = dir/dist + vect(0,0,0.3); <br> if (dist> OldShockDistance || (dir dot Victims.Velocity < 0))<br>  {<br>  MoScale = FMax(0, 1000 - (1.862 * Dist)/nscale);<br>  if ( Victims.bIsPawn )<br>   Pawn(Victims).AddVelocity(dir * (MoScale + 20));<br>  else<br>   Victims.Velocity = Victims.Velocity + dir * (MoScale + 20);&#9;<br>  Victims.TakeDamage( MoScale, Instigator,<br>    Victims.Location - 0.5 * (Victims.CollisionHeight + Victims.CollisionRadius) * dir,<br>    (1000 * dir), 'Burned' );<br>  }<br> }&#9;<br><br>OldShockDistance = ShockSize*6*nscale;&#9;<br><br></div>
<h3 id="N_ShockWave.setnscale"><a class="headerlink" href="#N_ShockWave.setnscale" title="Permanent link">setnscale</a> (float newvalue)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>nscale = newvalue;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#ODXBoost.uc" title="Permanent link"><h2 id="ODXBoost.uc">ODXBoost.uc (extends ODXPickup)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Physics=PHYS_Rotating<br>PickupMode=EP_Perk<br>bHidden=False<br>DrawType=DT_Mesh<br>Mesh=Mesh'DXLogo'<br>Drawscale=0.3<br>ODXPerk="PerkBoost"<br>Texture=FireTexture'Effects.Electricity.Ambrosia_Sfx'<br>Skin=FireTexture'Effects.Electricity.Ambrosia_Sfx'<br>RotationRate=(Yaw=36000)</div>
<br><br><hr>
<a class="headerlink" href="#ODXHiddenActor.uc" title="Permanent link"><h2 id="ODXHiddenActor.uc">ODXHiddenActor.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=True</div>
<br><br><hr>
<a class="headerlink" href="#ODXJump.uc" title="Permanent link"><h2 id="ODXJump.uc">ODXJump.uc (extends ODXPickup)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">SleepTimer=0<br>PickupMode=EP_Jump<br>bHidden=False<br>DrawType=DT_Sprite<br>Drawscale=0.6<br>Texture=Texture'AugIconDrone_Small'<br>Skin=Texture'AugIconDrone_Small'</div>
<br><br><hr>
<a class="headerlink" href="#ODXPickup.uc" title="Permanent link"><h2 id="ODXPickup.uc">ODXPickup.uc (extends DeusExDecoration)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var() class<Inventory> ODXInv;<br>var class<inventory> CurClass;<br>var string EffectString;<br>var bool bNeverDestroy;<br>var bool bSleeping;<br>var DeusExPlayer Pup;<br>var() int SleepTimer;<br>var() class<Augmentation> ODXAug;<br>var() string ODXPerk;<br>var int Count;<br>var() int JumpVel;<br>var EPMode PickupMode;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">JumpVel=750<br>SleepTimer=30<br>bInvincible=True<br>HitPoints=100<br>ItemName="PSUPICKUP"<br>//bMovable=False<br>bPushable=False<br>bHighlight=False<br>LightBrightness=100<br>Physics=PHYS_Rotating<br>Lighttype=LT_Steady<br>LightRadius=10<br>Ambientglow=255<br>LightSaturation=255<br>Drawscale=1<br>Fatness=140<br>style=sty_translucent<br>bBlockPlayers=False<br>Mesh=LodMesh'DeusExDeco.Lightbulb'<br>Texture=Texture'DeusExUI.UserInterface.AugIconCombat_Small';<br>CollisionRadius=5.000000<br>CollisionHeight=8.000000<br>bFixedRotationDir=True<br>RotationRate=(Yaw=8192)</div>
<h3 id="ODXPickup.BeginPlay"><a class="headerlink" href="#ODXPickup.BeginPlay" title="Permanent link">BeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;SetTimer(1,True);<br><br></div>
<h3 id="ODXPickup.PSUEffect"><a class="headerlink" href="#ODXPickup.PSUEffect" title="Permanent link">PSUEffect</a> (DeusExPlayer DXP, string EffectStr)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">}<br><br>function Destroyed()<br><br></div>
<h3 id="ODXPickup.PickupGet"><a class="headerlink" href="#ODXPickup.PickupGet" title="Permanent link">PickupGet</a> (TCPlayer myActivator)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;<br>&#9;myActivator.PlaySound(Sound'DeusExSounds.UserInterface.LogGoalCompleted',,,, 256);<br>&#9;if(PickupMode == EP_Pickup)<br>&#9;&#9;SilentAdd(ODXInv, myActivator);<br>&#9;<br>&#9;if(PickupMode == EP_Perk)<br>&#9;{<br>&#9;&#9;myActivator.GetPerk(ODXPerk);<br>&#9;}<br>&#9;<br>&#9;if(PickupMode == EP_Aug)<br>&#9;{<br>&#9;&#9;myActivator.AugmentationSystem.GivePlayerAugmentation(ODXAug);<br>&#9;&#9;myActivator.AugmentationSystem.GivePlayerAugmentation(ODXAug);<br>&#9;}&#9;<br>&#9;<br>&#9;if(PickupMode == EP_Jump)<br>&#9;{<br>&#9;&#9;myActivator.DoJump();<br>&#9;&#9;myActivator.Velocity.Z = JumpVel;<br>&#9;&#9;myActivator.SetPhysics(Phys_Falling);&#9;<br>&#9;}<br>&#9;bHidden=True;<br>&#9;bSleeping=True;<br>&#9;Count=SleepTimer;<br>&#9;return;<br><br></div>
<h3 id="ODXPickup.RadialCollect"><a class="headerlink" href="#ODXPickup.RadialCollect" title="Permanent link">RadialCollect</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P, winP;<br>&#9;local vector dist;<br>&#9;local float lowestDist;<br><br><br>&#9;lowestDist = 1024;<br><br>&#9;foreach VisibleActors(class'TCPlayer', P, 50)<br>&#9;{<br>&#9;&#9;if(P != None && !P.IsInState('Dying') && P.Health > 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(vSize(P.Location - Location) < lowestDist)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;winP = P;<br>&#9;&#9;&#9;&#9;lowestDist = vSize(P.Location - Location);<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if(winP != None)<br>&#9;&#9;PickupGet(winp);<br><br></div>
<h3 id="ODXPickup.SilentAdd"><a class="headerlink" href="#ODXPickup.SilentAdd" title="Permanent link">SilentAdd</a> (class<inventory> addClass, DeusExPlayer addTarget)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Inventory anItem;<br> <br>&#9;<br>&#9;anItem = Spawn(addClass,,,addTarget.Location); <br>&#9;anItem.SpawnCopy(addTarget);<br>&#9;anItem.Destroy();<br><br></div>
<h3 id="ODXPickup.Tick"><a class="headerlink" href="#ODXPickup.Tick" title="Permanent link">Tick</a> (float deltatime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExPlayer DXP;<br><br>&#9;<br>&#9;super.Tick(deltatime);<br>&#9;<br>&#9;if(bSleeping)<br>&#9;&#9;return;<br><br>&#9;RadialCollect();<br>&#9;<br>&#9;if(PickupMode == EP_None)<br>&#9;&#9;bHidden=True;<br>&#9;&#9;<br>&#9;if(PickupMode == EP_Pickup && ODXInv != None && curclass != ODXInv)<br>&#9;{<br>&#9;&#9;bHidden=False;<br>&#9;&#9;CurClass = ODXInv;<br>&#9;&#9;DrawType=DT_Mesh;<br>&#9;&#9;Style=STY_Normal;<br>&#9;&#9;Mesh = ODXInv.default.Mesh;<br>&#9;&#9;Drawscale = ODXInv.default.Drawscale;<br>&#9;&#9;SetCollisionSize(ODXInv.default.CollisionRadius, ODXInv.default.CollisionHeight);<br>&#9;}<br><br></div>
<h3 id="ODXPickup.Timer"><a class="headerlink" href="#ODXPickup.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bSleeping)<br>&#9;{<br>&#9;&#9;Count--;<br>&#9;&#9;if(Count <= 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;Log(Self$" respawned.");<br>&#9;&#9;&#9;bHidden=False;<br>&#9;&#9;&#9;bSleeping=False;<br>&#9;&#9;}<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#ODXQuad.uc" title="Permanent link"><h2 id="ODXQuad.uc">ODXQuad.uc (extends ODXPickup)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Physics=PHYS_Rotating<br>PickupMode=EP_Perk<br>bHidden=False<br>DrawType=DT_Mesh<br>Mesh=Mesh'DXLogo'<br>Drawscale=0.3<br>ODXPerk="PerkQuad"<br>Texture=FireTexture'Effects.Electricity.Nano_SFX_A'<br>Skin=FireTexture'Effects.Electricity.Nano_SFX_A'<br>RotationRate=(Yaw=8192)</div>
<br><br><hr>
<a class="headerlink" href="#ODXTrigger.uc" title="Permanent link"><h2 id="ODXTrigger.uc">ODXTrigger.uc (extends Trigger)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var(Events) class<Actor> LimitingClass;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">LimitingClass=Class'Engine.Actor'<br>// Texture=Texture'MoreTriggersIcon'</div>
<h3 id="ODXTrigger.BeenTriggeredODX"><a class="headerlink" href="#ODXTrigger.BeenTriggeredODX" title="Permanent link">BeenTriggeredODX</a> (TCPlayer instigator)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">} //set by subclasse<br></div>
<h3 id="ODXTrigger.Touch"><a class="headerlink" href="#ODXTrigger.Touch" title="Permanent link">Touch</a> (Actor other)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(IsRelevant(other))<br>&#9;{<br>&#9;&#9;BeenTriggeredODX(TCPlayer(other));<br>&#9;&#9;if(bTriggerOnceOnly)<br>&#9;&#9;&#9;Destroy();<br>&#9;}<br><br></div>
<h3 id="ODXTrigger.Trigger"><a class="headerlink" href="#ODXTrigger.Trigger" title="Permanent link">Trigger</a> (Actor other, Pawn instigator)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;BeenTriggeredODX(TCPlayer(instigator));<br>&#9;if(bTriggerOnceOnly)<br>&#9;&#9;Destroy();<br><br></div>
<br><br><hr>
<a class="headerlink" href="#ODXVoteActor.uc" title="Permanent link"><h2 id="ODXVoteActor.uc">ODXVoteActor.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var TCPlayer VPs[32];<br>var int VoteCounter[10];<br>var string FinalVoteStr;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=true</div>
<h3 id="ODXVoteActor.AcceptVote"><a class="headerlink" href="#ODXVoteActor.AcceptVote" title="Permanent link">AcceptVote</a> (TCPlayer Voter, int i)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int f;<br>&#9;local bool bFound;<br>&#9;local string n;<br><br>&#9;<br>&#9;for(f=0;f<32;f++)<br>&#9;&#9;if(VPs[f] == Voter)<br>&#9;&#9;&#9;bFound=True;<br>&#9;&#9;&#9;<br>&#9;if(!bFound)<br>&#9;{<br>&#9;&#9;n = GetGT(i);<br>&#9;&#9;VoteCounter[i]++;<br>&#9;&#9;CalcHighest();<br>&#9;&#9;BroadcastMessage(Voter.PlayerReplicationInfo.PlayerName$" voted for "$n$". Game mode will be "$FinalVoteStr$" next.");<br>&#9;&#9;for(f=0;f<32;f++)<br>&#9;&#9;&#9;if(VPs[f] == None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;VPs[f] = Voter;<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="ODXVoteActor.CalcHighest"><a class="headerlink" href="#ODXVoteActor.CalcHighest" title="Permanent link">CalcHighest</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i, a, s;<br><br>&#9;<br>&#9;i=0;<br>&#9;<br>&#9;for(a=0;a<10;a++)<br>&#9;{<br>&#9;&#9;Log(VoteCounter[a]$" at "$a$" "$GetGT(a));<br>&#9;&#9;if(VoteCounter[a] > i)<br>&#9;&#9;{<br>&#9;&#9;&#9;Log("New leader "$a$" "$GetGT(a));<br>&#9;&#9;&#9;i = VoteCounter[a];<br>&#9;&#9;&#9;s = a;<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(s == 1)<br>&#9;&#9;FinalVoteStr = "TCTeam";<br>&#9;if(s == 2)<br>&#9;&#9;FinalVoteStr = "TCDeathmatch";<br>&#9;if(s == 3)<br>&#9;&#9;FinalVoteStr = "JuggernautDM";<br>&#9;if(s == 4)<br>&#9;&#9;FinalVoteStr = "Juggernaut";<br>&#9;if(s == 5)<br>&#9;&#9;FinalVoteStr = "KillConfirmed";<br>&#9;if(s == 6)<br>&#9;&#9;FinalVoteStr = "KillConfirmedTeam";<br>&#9;if(s == 7)<br>&#9;&#9;FinalVoteStr = "Infection";<br>&#9;if(s == 8)<br>&#9;&#9;FinalVoteStr = "GunGame";<br>&#9;if(s == 9)<br>&#9;&#9;FinalVoteStr = "Sharpshooter";<br><br></div>
<h3 id="ODXVoteActor.GetGT"><a class="headerlink" href="#ODXVoteActor.GetGT" title="Permanent link">GetGT</a> (int i) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(i == 1)<br>&#9;&#9;return "Team Deathmatch";<br>&#9;if(i == 2)<br>&#9;&#9;return "Deathmatch";<br>&#9;if(i == 3)<br>&#9;&#9;return "Juggernaut";<br>&#9;if(i == 4)<br>&#9;&#9;return "Team Juggernaut";<br>&#9;if(i == 5)<br>&#9;&#9;return "Kill Confirmed";<br>&#9;if(i == 6)<br>&#9;&#9;return "Team Kill Confirmed";<br>&#9;if(i == 7)<br>&#9;&#9;return "Infection";<br>&#9;if(i == 8)<br>&#9;&#9;return "Arsenal GunGame";<br>&#9;if(i == 9)<br>&#9;&#9;return "Sharpshooter";<br><br></div>
<br><br><hr>
<a class="headerlink" href="#ODXWaypoint.uc" title="Permanent link"><h2 id="ODXWaypoint.uc">ODXWaypoint.uc (extends ODXTrigger)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var() name MarkerTag; //Tag of the actor we want to mark<br>var() int MarkerLifespan; //Optional lifespan of the marker<br>var() string MarkerName; //Optional name of the marker<br>var() bool bMarkerDeleter; //If true, ignore all variables and only deletes the current markers<br>var() bool bLocalPlayerOnly; //Only do the markers for the triggering player, false triggers for ALL<br>var() string PrintMsg; //Do we also want to print a clientmessage to the player</div>
<h3 id="ODXWaypoint.BeenTriggeredODX"><a class="headerlink" href="#ODXWaypoint.BeenTriggeredODX" title="Permanent link">BeenTriggeredODX</a> (TCPlayer Ins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br>&#9;local actor a;<br><br>&#9;<br>&#9;if(PrintMsg != "") //Do the print before anything<br>&#9;{<br>&#9;&#9;if(bLocalPlayerOnly)<br>&#9;&#9;{<br>&#9;&#9;&#9;ins.ClientMessage(PrintMsg);<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCP.ClientMessage(PrintMsg);<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(bMarkerDeleter) //If we're deleting...<br>&#9;{<br>&#9;&#9;if(bLocalPlayerOnly)<br>&#9;&#9;{<br>&#9;&#9;&#9;ins.CancelWaypoint();<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCP.CancelWaypoint();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;return; //Don't go to the marker creating if we're a deleter<br>&#9;}<br>&#9;<br>&#9;if(MarkerTag != 'None')<br>&#9;{<br>&#9;&#9;foreach AllActors(class'Actor',A)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(A.Tag == MarkerTag)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(bLocalPlayerOnly)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;ins.SetWaypoint(A, MarkerName, MarkerLifespan);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;TCP.SetWaypoint(A, MarkerName, MarkerLifespan);<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#OSDActor.uc" title="Permanent link"><h2 id="OSDActor.uc">OSDActor.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool bSDAt, bSDIn;<br>var int ShutdownInTime; //Shuts down in X minutes;<br>var string ShutdownAtTime; //Shutsdown at X time;<br>var int SDaMins, SDaHours;<br>var int SDInCur;<br>var bool bSDReady;<br>var bool bDebug;<br>var TCDeathmatch myDMGame;<br>var TCTeam myTDMGame;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=true</div>
<h3 id="OSDActor.Destroyed"><a class="headerlink" href="#OSDActor.Destroyed" title="Permanent link">Destroyed</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(myDMGame != None)<br>&#9;{<br>&#9;&#9;myDMGame.bSDFound=False;&#9;<br>&#9;&#9;myDMGame.SDStr = "";<br>&#9;&#9;if(bDebug) log("Deathmatch found on Destroyed().",'OSDA');<br>&#9;}<br>&#9;<br>&#9;if(TCTeam(level.game) != None)<br>&#9;{<br>&#9;&#9;myTDMGame.bSDFound=False;&#9;<br>&#9;&#9;myTDMGame.SDStr = "";<br>&#9;&#9;if(bDebug) log("TeamDeathmatch found on Destroyed().",'OSDA');<br>&#9;}<br>&#9;super.Destroyed();<br><br></div>
<h3 id="OSDActor.GetControls"><a class="headerlink" href="#OSDActor.GetControls" title="Permanent link">GetControls</a> -> TCControls</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCControls TCC;<br><br>&#9;if(TCDeathmatch(Level.Game) != None) TCC = TCDeathMatch(Level.Game).Settings;<br>&#9;if(TCTeam(Level.Game) != None) TCC = TCTeam(Level.Game).Settings;<br>&#9;<br>&#9;if(TCC == None)<br>&#9;&#9;log("ERROR: SETTINGS NOT FOUND", 'OSDA');<br>&#9;&#9;<br>&#9;return TCC;<br><br></div>
<h3 id="OSDActor.MinsRemain"><a class="headerlink" href="#OSDActor.MinsRemain" title="Permanent link">MinsRemain</a> (int m) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int ch, cm;<br>&#9;local bool bLastHour;<br>&#9;local string cmf;<br><br>&#9;<br>&#9;ch = SDAHours;<br>&#9;cm = SDAMins;<br>&#9;<br>&#9;cm -= m;<br>&#9;if(cm < 0)<br>&#9;{<br>&#9;&#9;cm += 60;<br>&#9;&#9;ch -= 1;<br>&#9;&#9;if(ch == -1)<br>&#9;&#9;&#9;ch = 23;<br>&#9;&#9;bLastHour=True;<br>&#9;}<br>&#9;<br>&#9;if(cm == 60)<br>&#9;{<br>&#9;&#9;cm = 0;<br>&#9;&#9;ch += 1;<br>&#9;&#9;bLastHour=False;<br>&#9;}<br>&#9;<br>&#9;if(bDebug)<br>&#9;&#9;Log(Level.hour$":"$level.minute$" Checking: ["$bLastHour$"] "$ch$":"$cm$" against "$m$" remaining... "$SDAHours$":"$SDAMins$" ("$ShutdownAtTime$")");<br>&#9;<br>&#9;if(cm == Level.minute)<br>&#9;{<br>&#9;&#9;&#9;if(Level.Hour == ch)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(bDebug)<br>&#9;&#9;&#9;&#9;&#9;Log("Returning true");<br>&#9;&#9;&#9;&#9;return true;<br>&#9;&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="OSDActor.PostBeginPlay"><a class="headerlink" href="#OSDActor.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TCDeathMatch(level.game) != None)<br>&#9;{<br>&#9;&#9;TCDeathMatch(level.game).bSDFound=True;&#9;&#9;<br>&#9;&#9;myDMGame = TCDeathmatch(level.game);<br>&#9;&#9;if(bDebug) log("Deathmatch found.",'OSDA');<br>&#9;}<br>&#9;<br>&#9;if(TCTeam(level.game) != None)<br>&#9;{<br>&#9;&#9;TCTeam(level.game).bSDFound=True;&#9;&#9;<br>&#9;&#9;myTDMGame = TCTeam(level.game);<br>&#9;&#9;if(bDebug) log("TeamDeathmatch found.",'OSDA');<br>&#9;}<br>&#9;super.PostBeginPlay();<br><br></div>
<h3 id="OSDActor.SetSDStr"><a class="headerlink" href="#OSDActor.SetSDStr" title="Permanent link">SetSDStr</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(myDMGame != None)<br>&#9;{&#9;<br>&#9;&#9;myDMGame.SDStr = str;<br>&#9;}<br>&#9;<br>&#9;if(TCTeam(level.game) != None)<br>&#9;{<br>&#9;&#9;myTDMGame.SDStr = str;<br>&#9;}<br><br></div>
<h3 id="OSDActor.Timer"><a class="headerlink" href="#OSDActor.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string curtime;<br>&#9;local int curmins, curhours;<br><br>&#9;if(bSDReady)<br>&#9;{<br>&#9;&#9;Log("Server was closed due to OSDA System",'OpenDX');<br>&#9;&#9;ConsoleCommand("exit");<br>&#9;}<br>&#9;<br>&#9;if(bSDAt)<br>&#9;{<br>&#9;&#9;curtime = Level.hour $ ":" $ Level.minute;<br>&#9;&#9;if(MinsRemain(60))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Sixty minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(50))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Fifty minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(40))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Fourty minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(30))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Thirty minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(20))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Twenty minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(15))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Fifteen minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(10))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Ten minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(5))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Five minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(4))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Four minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(3))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Three minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(2))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Two minutes remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(1))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("One minute remains until scheduled shutdown at "$ShutdownAtTime);<br>&#9;&#9;}<br>&#9;&#9;if(MinsRemain(0))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Server will be closing shortly due to scheduled shutdown.");<br>&#9;&#9;&#9;bSDReady=True;<br>&#9;&#9;}<br>&#9;}<br>&#9;if(bSDIn)<br>&#9;{<br>&#9;&#9;SDInCur++;<br>&#9;&#9;SetSDStr("Shuts down in "$ShutdownInTime - SDInCur);<br>&#9;&#9;<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 60))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Sixty minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 50))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Fifty minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 40))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Forty minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 30))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Thirty minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 20))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Twenty minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 15))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Fifteen minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 10))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Ten minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 5))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Five minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 3))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Three minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 2))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Two minutes remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime - 1))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("One minute remains until shutdown.");<br>&#9;&#9;}<br>&#9;&#9;if(SDInCur == (ShutdownInTime))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("Server will be closing shortly....");<br>&#9;&#9;&#9;bSDReady=True;<br>&#9;&#9;}<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#OpenDX.uc" title="Permanent link"><h2 id="OpenDX.uc">OpenDX.uc (extends TCDeathmatch)</h2></a>

<br><br><hr>
<a class="headerlink" href="#OpenDXDevTest.uc" title="Permanent link"><h2 id="OpenDXDevTest.uc">OpenDXDevTest.uc (extends TCDeathmatch)</h2></a>

<br><br><hr>
<a class="headerlink" href="#PerkBoost.uc" title="Permanent link"><h2 id="PerkBoost.uc">PerkBoost.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int Count;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Count=30<br>PerkName="Speed Boost"<br>PerkShortName="boost"<br>bLock=True</div>
<h3 id="PerkBoost.PerkOff"><a class="headerlink" href="#PerkBoost.PerkOff" title="Permanent link">PerkOff</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;PerkOwner.GroundSpeed = PerkOwner.Default.mpGroundSpeed;<br>&#9;PerkOwner.mpGroundSpeed = PerkOwner.Default.mpGroundSpeed;<br>&#9;PerkOwner.JumpZ = PerkOwner.Default.JumpZ;<br>&#9;PerkOwner.UpdateAnimRate( -1.0 );<br><br></div>
<h3 id="PerkBoost.PerkOn"><a class="headerlink" href="#PerkBoost.PerkOn" title="Permanent link">PerkOn</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;SetTimer(1, True);<br><br>&#9;PerkOwner.GroundSpeed *= 1.8;<br>&#9;PerkOwner.mpGroundSpeed *= 1.8;<br>&#9;PerkOwner.JumpZ *= 1.8;<br>&#9;PerkOwner.UpdateAnimRate(1.8);&#9;&#9;<br><br></div>
<h3 id="PerkBoost.Timer"><a class="headerlink" href="#PerkBoost.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Count--;<br>&#9;<br>&#9;if(Count <= 5)<br>&#9;&#9;PerkOwner.Notif("(Boost) "$Count$" seconds remaining.");<br>&#9;&#9;<br>&#9;if(Count <= 0)<br>&#9;&#9;PerkOwner.RemovePerkbyName("Speed Boost");<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkDebug.uc" title="Permanent link"><h2 id="PerkDebug.uc">PerkDebug.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int db;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PerkName="Debugger"</div>
<h3 id="PerkDebug.PerkOff"><a class="headerlink" href="#PerkDebug.PerkOff" title="Permanent link">PerkOff</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;PerkOwner.ClientMessage("Debug perk de-activated.");<br><br></div>
<h3 id="PerkDebug.PerkOn"><a class="headerlink" href="#PerkDebug.PerkOn" title="Permanent link">PerkOn</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;PerkOwner.ClientMessage("Debug perk activated.");<br><br></div>
<h3 id="PerkDebug.PerkTick"><a class="headerlink" href="#PerkDebug.PerkTick" title="Permanent link">PerkTick</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;db += 1;<br>&#9;<br>&#9;if(db % 10 == 0)<br>&#9;PerkOwner.ClientMessage("The perk is debugging.");<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkHero.uc" title="Permanent link"><h2 id="PerkHero.uc">PerkHero.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int HC, HHC, MaxCount, HMaxCount;<br>var float HRange;<br>var bool bWasHeal;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">HRange=512<br>MaxCount=75<br>HMaxCount=10<br>PerkName="Hero Health"</div>
<h3 id="PerkHero.HeroHeal"><a class="headerlink" href="#PerkHero.HeroHeal" title="Permanent link">HeroHeal</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool bHealed;<br><br>&#9;<br>&#9;HHC++;<br>&#9;<br>&#9;if(HHC > HMaxCount)<br>&#9;{<br>&#9;&#9;HHC = 0;<br>&#9;&#9;if(PerkOwner.Health < 100)<br>&#9;&#9;{<br>&#9;&#9;&#9;PerkOwner.HealPlayer(15, False);<br>&#9;&#9;&#9;bHealed=True;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(PerkOwner.Energy < PerkOwner.EnergyMax)<br>&#9;&#9;{<br>&#9;&#9;&#9;PerkOwner.Energy += 15;<br>&#9;&#9;&#9;if(PerkOwner.Energy > PerkOwner.EnergyMax)<br>&#9;&#9;&#9;&#9;PerkOwner.Energy = PerkOwner.EnergyMax;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bHealed=True;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(bHealed)<br>&#9;&#9;&#9;PerkOwner.ClientFlash(0.5, vect(0, 0, 500));<br>&#9;}<br><br></div>
<h3 id="PerkHero.PerkTick"><a class="headerlink" href="#PerkHero.PerkTick" title="Permanent link">PerkTick</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bSafe()) //If both checks pass and we're still in safety, begin counting<br>&#9;{<br>&#9;&#9;if(HC <= MaxCount) //If counter is below the target, keep adding<br>&#9;&#9;&#9;HC++;<br>&#9;&#9;else //If counter is above the max, start healing<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!bWasHeal)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bWasHeal=True;<br>&#9;&#9;&#9;&#9;if(PerkOwner.Health < 100 || PerkOwner.Energy < PerkOwner.EnergyMax)//Only print message if not fully healed<br>&#9;&#9;&#9;&#9;&#9;PerkOwner.ClientMessage("|P3Health has begun regenerating...");<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;HeroHeal();<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;}<br>&#9;else //if check fails and we're not in safety, reset counter<br>&#9;{<br>&#9;&#9;if(bWasHeal && (PerkOwner.Health < 100 || PerkOwner.Energy < PerkOwner.EnergyMax))<br>&#9;&#9;&#9;PerkOwner.ClientMessage("|P2Healing cancelled due to possible danger.");<br>&#9;&#9;HC = 0;<br>&#9;&#9;bWasHeal=False;<br>&#9;}<br><br></div>
<h3 id="PerkHero.bSafe"><a class="headerlink" href="#PerkHero.bSafe" title="Permanent link">bSafe</a> -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool bSafety;<br>&#9;local TCPlayer TCP;<br>&#9;local ScriptedPawn SP;<br><br>&#9;<br>&#9;bSafety=True; //Start true<br>&#9;<br>&#9;if(PerkOwner.InHand != None) //check one, are we armed<br>&#9;{<br>&#9;&#9;bSafety=False;<br>&#9;}<br>&#9;<br>&#9;foreach PerkOwner.VisibleActors(class'ScriptedPawn', SP, HRange)<br>&#9;{<br>&#9;&#9;if(SP != None)<br>&#9;&#9;&#9;bSafety=False;<br>&#9;}<br><br>&#9;foreach PerkOwner.VisibleActors(class'TCPlayer', TCP, HRange) //check two, is anyone near by<br>&#9;{<br>&#9;&#9;if(TCP != PerkOwner)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCDeathmatch(Level.game) != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(TCPRI(TCP.PlayerReplicationInfo).TeamNamePRI == "") //Target not in team, assume enemy<br>&#9;&#9;&#9;&#9;&#9;bSafety=False;<br>&#9;&#9;&#9;&#9;else //Target is in a team, move to ally check<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(TCPRI(TCP.PlayerReplicationInfo).TeamNamePRI != TCPRI(PerkOwner.PlayerReplicationInfo).TeamNamePRI) //Not the same team<br>&#9;&#9;&#9;&#9;&#9;&#9;bSafety=False;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if(TCTeam(Level.Game) != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(TCP.PlayerReplicationInfo.Team != PerkOwner.PlayerReplicationInfo.Team)<br>&#9;&#9;&#9;&#9;&#9;bSafety=False;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;return bSafety;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkIcarus.uc" title="Permanent link"><h2 id="PerkIcarus.uc">PerkIcarus.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool bReverse, bTrig;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PerkName="Icarus Landing System"<br>PerkShortName="Icarus"</div>
<h3 id="PerkIcarus.PerkTick"><a class="headerlink" href="#PerkIcarus.PerkTick" title="Permanent link">PerkTick</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">&#9;<br>&#9;if(PerkOwner.Velocity.Z < -600 && !bReverse)<br>&#9;{<br>&#9;&#9;bTrig=True;<br>&#9;&#9;bReverse=True;<br>&#9;&#9;PerkOwner.ClientMessage("|P3Icarus landing system activated...");<br>&#9;}<br>&#9;<br>&#9;if(bTrig)<br>&#9;{<br>&#9;&#9;if(bReverse)<br>&#9;&#9;&#9;PerkOwner.Velocity.Z += 100;<br>&#9;&#9;<br>&#9;&#9;if(PerkOwner.Velocity.Z > 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;bTrig=False;<br>&#9;&#9;&#9;bReverse=False;<br>&#9;&#9;&#9;PerkOwner.ClientMessage("|P3Icarus landing system de-activated...");<br>&#9;&#9;}<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkInfection.uc" title="Permanent link"><h2 id="PerkInfection.uc">PerkInfection.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PerkName="Infection"<br>bLock=True</div>
<br><br><hr>
<a class="headerlink" href="#PerkJuggernaut.uc" title="Permanent link"><h2 id="PerkJuggernaut.uc">PerkJuggernaut.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool bReverse, bTrig;<br>var int velz, CheckRadius;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">CheckRadius=256<br>PerkName="Juggernaut"<br>bLock=True</div>
<h3 id="PerkJuggernaut.PerkOff"><a class="headerlink" href="#PerkJuggernaut.PerkOff" title="Permanent link">PerkOff</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;PerkOwner.bNuke=False;<br><br></div>
<h3 id="PerkJuggernaut.PerkOn"><a class="headerlink" href="#PerkJuggernaut.PerkOn" title="Permanent link">PerkOn</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;PerkOwner.bNuke=True;<br><br></div>
<h3 id="PerkJuggernaut.PerkTick"><a class="headerlink" href="#PerkJuggernaut.PerkTick" title="Permanent link">PerkTick</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(PerkOwner.HealthLegLeft <= 0)<br>&#9;{<br>&#9;&#9;Skullshot();<br>&#9;&#9;BroadcastMessage("The Juggernaut is crippled!");<br>&#9;&#9;PerkSleep(30);<br>&#9;}<br>&#9;<br>&#9;if(PerkOwner.Velocity.Z < -600 && !bReverse)<br>&#9;{<br>&#9;&#9;bTrig=True;<br>&#9;&#9;bReverse=True;<br>&#9;&#9;PerkOwner.ClientMessage("|P3Juggernaut landing system activated...");<br>&#9;}<br>&#9;<br>&#9;if(bTrig)<br>&#9;{<br>&#9;&#9;if(bReverse)<br>&#9;&#9;&#9;PerkOwner.Velocity.Z += 100;<br>&#9;&#9;<br>&#9;&#9;if(PerkOwner.Velocity.Z > 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;bTrig=False;<br>&#9;&#9;&#9;bReverse=False;<br>&#9;&#9;&#9;PerkOwner.ClientMessage("|P3Juggernaut landing system de-activated...");<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="PerkJuggernaut.Skullshot"><a class="headerlink" href="#PerkJuggernaut.Skullshot" title="Permanent link">Skullshot</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector loc, vline, HitLocation, hitNormal, altloc;<br>&#9;local rotator altrot;<br>&#9;local Actor HitActor;<br>&#9;local actor a;<br>&#9;local ScriptedPawn     hitPawn;<br>&#9;local PlayerPawn       hitPlayer;<br>&#9;local DeusExMover      hitMover;<br>&#9;local DeusExDecoration hitDecoration;<br>&#9;local TCPlayer Player;<br><br>&#9;Player = PerkOwner;<br>&#9;<br>&#9;SpawnExplosion(Player.Location);<br>&#9;loc = Player.Location;<br>&#9;loc.Z -= 32;<br>&#9;<br>&#9;<br>&#9;foreach Player.VisibleActors(class'Actor', A, CheckRadius)<br>&#9;{<br>&#9;&#9;if (a != None && a != Player)<br>&#9;&#9;{<br>&#9;&#9;&#9;hitPawn = ScriptedPawn(a);<br>&#9;&#9;&#9;hitDecoration = DeusExDecoration(a);<br>&#9;&#9;&#9;hitPlayer = PlayerPawn(a);<br>&#9;&#9;&#9;hitMover = DeusExMover(a);<br>&#9;&#9;&#9;if (hitPawn != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitPawn.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitPawn.Velocity = (normal(loc - hitPawn.Location) * velz);<br>&#9;&#9;&#9;&#9;//hitPawn.TakeDamage(Player.Energy, Player, hitLocation, normal(loc - hitPawn.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if (hitDecoration != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitDecoration.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitDecoration.Velocity = (normal(loc - hitDecoration.Location) * velz);&#9;<br>&#9;&#9;&#9;&#9;//hitDecoration.TakeDamage(Player.Energy, Player, hitLocation, normal(loc - hitDecoration.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if (hitPlayer != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitPlayer.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitPlayer.Velocity = (normal(loc - hitPlayer.Location) * velz);<br>&#9;&#9;&#9;&#9;//hitPlayer.TakeDamage(Player.Energy / 3, Player, hitLocation, normal(loc - hitPlayer.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if (hitMover != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;hitMover.bDrawExplosion = True;<br>&#9;&#9;&#9;&#9;//&#9;hitMover.TakeDamage(Player.Energy * 3, Player, hitLocation,normal(loc - hitMover.Location) * velz, 'Exploded'); <br>&#9;&#9;&#9;}<br>&#9;&#9;}&#9;&#9;<br>&#9;}<br><br></div>
<h3 id="PerkJuggernaut.SpawnExplosion"><a class="headerlink" href="#PerkJuggernaut.SpawnExplosion" title="Permanent link">SpawnExplosion</a> (vector Loc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ShockRing s1, s2, s3;<br>&#9;local SphereEffect se;<br><br><br>    s1 = spawn(class'ShockRing',,,Loc,rot(16384,0,0));<br>&#9;s1.Lifespan = 5.5;<br>    s2 = spawn(class'ShockRing',,,Loc,rot(0,16384,0));<br>&#9;s2.Lifespan = 5.5;<br>    s3 = spawn(class'ShockRing',,,Loc,rot(0,0,16384));<br>&#9;S3.Lifespan = 5.5;<br>&#9;se = spawn(class'SphereEffect',,,Loc,rot(16384,0,0));<br>&#9;se.Lifespan = 5.5;<br>&#9;se.MultiSkins[0]=Texture'DeusExDeco.Skins.AlarmLightTex7';<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkMediAura.uc" title="Permanent link"><h2 id="PerkMediAura.uc">PerkMediAura.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int db;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PerkName="Medical Aura"</div>
<h3 id="PerkMediAura.AreAlliesBasic"><a class="headerlink" href="#PerkMediAura.AreAlliesBasic" title="Permanent link">AreAlliesBasic</a> (TCPlayer one, tcplayer two) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TCPRI(One.PlayerReplicationInfo).TeamNamePRI == "" || TCPRI(Two.PlayerReplicationInfo).TeamNamePRI == "")<br>&#9;&#9;return false;<br>&#9;<br>&#9;if(TCPRI(One.PlayerReplicationInfo).TeamNamePRI == TCPRI(Two.PlayerReplicationInfo).TeamNamePRI)<br>&#9;&#9;return true;<br><br></div>
<h3 id="PerkMediAura.HealPlayers"><a class="headerlink" href="#PerkMediAura.HealPlayers" title="Permanent link">HealPlayers</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor a;<br>&#9;local TCPlayer target, targetList[3], Player;<br>&#9;local int count, i, healamount, totalamount;<br><br><br>&#9;Player = PerkOwner;<br>    count = 0;<br><br>    if(TCTeam(Player.DXGame) != None) // Healing teammates in deathmatch is useless.<br>    {<br>        foreach RadiusActors(class'Actor', a, 256, Player.Location)<br>        {<br>            if(a.IsA('TCPlayer')) // TODO: Only heal teammates<br>            {<br>                target = TCPlayer(a);<br>                if(target.PlayerReplicationInfo != None && target != Player &&!target.PlayerReplicationInfo.bIsSpectator && target.Health > 0 && target.Health < 100 && (target.lastTeamHeal+1 <= Level.TimeSeconds) && (target.PlayerReplicationInfo.Team == player.PlayerReplicationInfo.Team))<br>                {<br>                    targetList[count] = target;<br>                    count++;<br>                    if(count == 3) // We heal a maximum of 3 players<br>                        break;<br>                }<br>            }<br>        }<br>        <br>        if(count > 0)<br>        {<br>            healamount = Min(30, (45/count));<br>            totalamount = healamount*count;<br>            for(i = 0; i < count; i++)<br>            {<br>                if(targetList[i] != None)<br>                {<br>                    targetList[i].HealPlayer(healamount, False);<br>                    targetList[i].ClientFlash(0.5, vect(0, 0, 500));<br>                    targetList[i].lastTeamHeal = Level.TimeSeconds;<br>                }<br>            }<br>            if(totalamount > 0)<br>            {<br>                Player.ClientMessage("Healed"@count@"nearby player(s) for"@totalamount$"HP");<br>            }<br>        }<br>    }<br>    else if(TCDeathmatch(Player.DXGame) != None)<br>    {<br>&#9;&#9;foreach RadiusActors(class'Actor', a, 256, Player.Location)<br>        {<br>            if(a.IsA('TCPlayer')) // TODO: Only heal teammates<br>            {<br>                target = TCPlayer(a);<br>                if(target.PlayerReplicationInfo != None && target != player &&!target.PlayerReplicationInfo.bIsSpectator && target.Health > 0 && target.Health < 100 && (target.lastTeamHeal+1 <= Level.TimeSeconds) && AreAlliesBasic(target, Player))<br>                {<br>                    targetList[count] = target;<br>                    count++;<br>                    if(count == 3) // We heal a maximum of 3 players<br>                        break;<br>                }<br>            }<br>        }<br>        <br>        if(count > 0)<br>        {<br>            healamount = Min(30, (45/count));<br>            totalamount = healamount*count;<br>            for(i = 0; i < count; i++)<br>            {<br>                if(targetList[i] != None)<br>                {<br>                    targetList[i].HealPlayer(healamount, False);<br>                    targetList[i].ClientFlash(0.5, vect(0, 0, 500));<br>                    targetList[i].lastTeamHeal = Level.TimeSeconds;<br>                }<br>            }<br>            if(totalamount > 0)<br>            {<br>                Player.ClientMessage("Healed"@count@"nearby player(s) for"@totalamount$"HP");<br>            }<br>        }<br>&#9;}<br><br></div>
<h3 id="PerkMediAura.PerkTick"><a class="headerlink" href="#PerkMediAura.PerkTick" title="Permanent link">PerkTick</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;db += 1;<br>&#9;<br>&#9;if(db % 100 == 0)<br>&#9;&#9;HealPlayers();<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkNuke.uc" title="Permanent link"><h2 id="PerkNuke.uc">PerkNuke.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PerkName="Death Nuke"<br>PerkShortName="Nuke"</div>
<h3 id="PerkNuke.PerkOff"><a class="headerlink" href="#PerkNuke.PerkOff" title="Permanent link">PerkOff</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;PerkOwner.bNuke=False;<br><br></div>
<h3 id="PerkNuke.PerkOn"><a class="headerlink" href="#PerkNuke.PerkOn" title="Permanent link">PerkOn</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;PerkOwner.bNuke=True;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkQuad.uc" title="Permanent link"><h2 id="PerkQuad.uc">PerkQuad.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int Count;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Count=30<br>PerkName="Quad Damage"<br>PerkShortName="quad"<br>bLock=True</div>
<h3 id="PerkQuad.PerkOff"><a class="headerlink" href="#PerkQuad.PerkOff" title="Permanent link">PerkOff</a></h3>

<h3 id="PerkQuad.PerkOn"><a class="headerlink" href="#PerkQuad.PerkOn" title="Permanent link">PerkOn</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;SetTimer(1, True);&#9;<br><br></div>
<h3 id="PerkQuad.Timer"><a class="headerlink" href="#PerkQuad.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Count--;<br>&#9;<br>&#9;if(Count <= 5)<br>&#9;&#9;PerkOwner.Notif("(Quad) "$Count$" seconds remaining.");<br>&#9;&#9;<br>&#9;if(Count <= 0)<br>&#9;&#9;PerkOwner.RemovePerkbyName("Quad Damage");<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkRepel.uc" title="Permanent link"><h2 id="PerkRepel.uc">PerkRepel.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int velz, CheckRadius;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">CheckRadius=256<br>PerkName="Repulsion"<br>PerkShortName="Repel"</div>
<h3 id="PerkRepel.PerkTick"><a class="headerlink" href="#PerkRepel.PerkTick" title="Permanent link">PerkTick</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">&#9;<br>&#9;if(PerkOwner.HealthLegLeft <= 0)<br>&#9;{<br>&#9;&#9;Skullshot();<br>&#9;&#9;PerkOwner.ClientMessage("|P3Repulsion activated!");<br>&#9;&#9;PerkSleep(30);<br>&#9;}<br><br></div>
<h3 id="PerkRepel.Skullshot"><a class="headerlink" href="#PerkRepel.Skullshot" title="Permanent link">Skullshot</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector loc, vline, HitLocation, hitNormal, altloc;<br>&#9;local rotator altrot;<br>&#9;local Actor HitActor;<br>&#9;local actor a;<br>&#9;local ScriptedPawn     hitPawn;<br>&#9;local PlayerPawn       hitPlayer;<br>&#9;local DeusExMover      hitMover;<br>&#9;local DeusExDecoration hitDecoration;<br>&#9;local TCPlayer Player;<br><br>&#9;Player = PerkOwner;<br>&#9;SpawnExplosion(PerkOwner.Location);<br>&#9;loc = Player.Location;<br>&#9;loc.Z -= 32;<br>&#9;foreach Player.VisibleActors(class'Actor', A, CheckRadius)<br>&#9;{<br>&#9;&#9;if (a != None && a != Player)<br>&#9;&#9;{<br>&#9;&#9;&#9;hitPawn = ScriptedPawn(a);<br>&#9;&#9;&#9;hitDecoration = DeusExDecoration(a);<br>&#9;&#9;&#9;hitPlayer = PlayerPawn(a);<br>&#9;&#9;&#9;hitMover = DeusExMover(a);<br>&#9;&#9;&#9;if (hitPawn != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitPawn.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitPawn.Velocity = (normal(loc - hitPawn.Location) * velz);<br>&#9;&#9;&#9;&#9;//hitPawn.TakeDamage(Player.Energy, Player, hitLocation, normal(loc - hitPawn.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if (hitDecoration != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitDecoration.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitDecoration.Velocity = (normal(loc - hitDecoration.Location) * velz);&#9;<br>&#9;&#9;&#9;&#9;//hitDecoration.TakeDamage(Player.Energy, Player, hitLocation, normal(loc - hitDecoration.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if (hitPlayer != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;hitPlayer.SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;hitPlayer.Velocity = (normal(loc - hitPlayer.Location) * velz);<br>&#9;&#9;&#9;&#9;//hitPlayer.TakeDamage(Player.Energy / 3, Player, hitLocation, normal(loc - hitPlayer.Location) * velz, 'Exploded'); &#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if (hitMover != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;hitMover.bDrawExplosion = True;<br>&#9;&#9;&#9;&#9;//&#9;hitMover.TakeDamage(Player.Energy * 3, Player, hitLocation,normal(loc - hitMover.Location) * velz, 'Exploded'); <br>&#9;&#9;&#9;}<br>&#9;&#9;}&#9;&#9;<br>&#9;}<br><br></div>
<h3 id="PerkRepel.SpawnExplosion"><a class="headerlink" href="#PerkRepel.SpawnExplosion" title="Permanent link">SpawnExplosion</a> (vector Loc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ShockRing s1, s2, s3;<br>&#9;local SphereEffect se;<br><br><br>    s1 = spawn(class'ShockRing',,,Loc,rot(16384,0,0));<br>&#9;s1.Lifespan = 5.5;<br>    s2 = spawn(class'ShockRing',,,Loc,rot(0,16384,0));<br>&#9;s2.Lifespan = 5.5;<br>    s3 = spawn(class'ShockRing',,,Loc,rot(0,0,16384));<br>&#9;S3.Lifespan = 5.5;<br>&#9;se = spawn(class'SphereEffect',,,Loc,rot(16384,0,0));<br>&#9;se.Lifespan = 5.5;<br>&#9;se.MultiSkins[0]=Texture'DeusExDeco.Skins.AlarmLightTex7';<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkSpy.uc" title="Permanent link"><h2 id="PerkSpy.uc">PerkSpy.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PerkName="Spy"</div>
<h3 id="PerkSpy.PerkOff"><a class="headerlink" href="#PerkSpy.PerkOff" title="Permanent link">PerkOff</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;TCPRI(PerkOwner.PlayerReplicationInfo).bSpy = False;<br><br></div>
<h3 id="PerkSpy.PerkOn"><a class="headerlink" href="#PerkSpy.PerkOn" title="Permanent link">PerkOn</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;TCPRI(PerkOwner.PlayerReplicationInfo).bSpy = True;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#PerkTakedown.uc" title="Permanent link"><h2 id="PerkTakedown.uc">PerkTakedown.uc (extends Perks)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PerkName="Takedown"</div>
<br><br><hr>
<a class="headerlink" href="#Perks.uc" title="Permanent link"><h2 id="Perks.uc">Perks.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var TCPlayer PerkOwner; //The player<br>var string PerkName; //Its name<br>var string PerkShortName; //For when the normal name is too long, make detection easier by using a smaller identifier<br>var bool bLock; //Can the /perk command disable it<br>var bool bOn; //Master on switch, will function if on unless sleep<br>var bool bSleep; //Disables the tick while staying on</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=True</div>
<h3 id="Perks.PostBeginPlay"><a class="headerlink" href="#Perks.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(PerkShortName == "")<br>&#9;&#9;PerkShortName = PerkName;<br><br></div>
<h3 id="Perks.Timer"><a class="headerlink" href="#Perks.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(PerkOwner != None && bSleep)<br>&#9;{<br>&#9;&#9;PerkOwner.ClientMessage("|P2"$PerkName$" has been recharged...");<br>&#9;&#9;bSleep=False;<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#Playground.uc" title="Permanent link"><h2 id="Playground.uc">Playground.uc (extends TCDeathmatch)</h2></a>

<br><br><hr>
<a class="headerlink" href="#PraxisBallistic.uc" title="Permanent link"><h2 id="PraxisBallistic.uc">PraxisBallistic.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugBallistic'<br>ItemName="Praxis Kit (Aug Ballistic)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisCloak.uc" title="Permanent link"><h2 id="PraxisCloak.uc">PraxisCloak.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugCloak'<br>ItemName="Praxis Kit (Aug Cloak)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisCombat.uc" title="Permanent link"><h2 id="PraxisCombat.uc">PraxisCombat.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugCombat'<br>ItemName="Praxis Kit (Aug Combat)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisDefense.uc" title="Permanent link"><h2 id="PraxisDefense.uc">PraxisDefense.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugDefense'<br>ItemName="Praxis Kit (Aug Defense)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisDrone.uc" title="Permanent link"><h2 id="PraxisDrone.uc">PraxisDrone.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugDrone'<br>ItemName="Praxis Kit (Aug Drone)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisEMP.uc" title="Permanent link"><h2 id="PraxisEMP.uc">PraxisEMP.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugEMP'<br>ItemName="Praxis Kit (Aug EMP)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisEnviro.uc" title="Permanent link"><h2 id="PraxisEnviro.uc">PraxisEnviro.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugEnviro'<br>ItemName="Praxis Kit (Aug Enviro)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisHealing.uc" title="Permanent link"><h2 id="PraxisHealing.uc">PraxisHealing.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'OpenDX.AugHealing2'<br>ItemName="Praxis Kit (Aug Modified Healing)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisHeroHealth.uc" title="Permanent link"><h2 id="PraxisHeroHealth.uc">PraxisHeroHealth.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisPerk="PerkHero"<br>ItemName="Praxis Kit (Perk Hero Health)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisIcarus.uc" title="Permanent link"><h2 id="PraxisIcarus.uc">PraxisIcarus.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'OpenDX.AugIcarus'<br>ItemName="Praxis Kit (Aug Icarus Landing)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisIcarusPerk.uc" title="Permanent link"><h2 id="PraxisIcarusPerk.uc">PraxisIcarusPerk.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisPerk="PerkIcarus"<br>ItemName="Praxis Kit (Perk Icarus Landing)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisKillswitch.uc" title="Permanent link"><h2 id="PraxisKillswitch.uc">PraxisKillswitch.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bResetAugSystem=True<br>bResetPerks=True<br>ItemName="Praxis Kit (Total Killswitch - REMOVES ALL PERKS AND AUGS)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisKit.uc" title="Permanent link"><h2 id="PraxisKit.uc">PraxisKit.uc (extends DeusExPickup)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var() bool bResetAugSystem, bResetPerks;<br>var() class<Augmentation> PraxisAug;<br>var() string PraxisPerk;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">maxCopies=1<br>bCanHaveMultipleCopies=True<br>bActivatable=True<br>ItemName="Praxis Kit"<br>M_Activated=""<br>ItemArticle="a"<br>PlayerViewOffset=(X=30.000000,Z=-12.000000)<br>PlayerViewMesh=LodMesh'DeusExItems.MedKit'<br>PickupViewMesh=LodMesh'DeusExItems.MedKit'<br>ThirdPersonMesh=LodMesh'DeusExItems.MedKit3rd'<br>LandSound=Sound'DeusExSounds.Generic.PlasticHit2'<br>Icon=Texture'AugIconDatalink_Small'<br>largeIcon=Texture'AugIconDatalink'<br>largeIconWidth=39<br>largeIconHeight=46<br>MultiSkins(0)=Texture'PraxisTex1'<br>Description="Contained the nano-data for augmentations."<br>beltDescription="PRAXIS"<br>Mesh=LodMesh'DeusExItems.MedKit'<br>CollisionRadius=7.500000<br>CollisionHeight=1.000000<br>Mass=10.000000<br>Buoyancy=8.000000</div>
<h3 id="PraxisKit.Activate"><a class="headerlink" href="#PraxisKit.Activate" title="Permanent link">Activate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;// can't turn it off<br>&#9;<br></div>
<h3 id="PraxisKit.BeginState"><a class="headerlink" href="#PraxisKit.BeginState" title="Permanent link">BeginState</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExPlayer player;<br>&#9;local bool bUseUp;<br>&#9;local int i;<br><br>&#9;&#9;&#9;<br>&#9;&#9;Super.BeginState();<br><br>&#9;&#9;player = DeusExPlayer(Owner);<br>&#9;&#9;if (player != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(bResetAugSystem)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (Player.AugmentationSystem != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Player.AugmentationSystem.DeactivateAll();<br>&#9;&#9;&#9;&#9;&#9;Player.AugmentationSystem.ResetAugmentations();<br>&#9;&#9;&#9;&#9;&#9;Player.AugmentationSystem.Destroy();<br>&#9;&#9;&#9;&#9;&#9;Player.AugmentationSystem = None;<br>&#9;&#9;&#9;&#9;&#9;Player.ClientMessage("|P2Removing augmentations...");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if (Player.AugmentationSystem == None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Player.AugmentationSystem = Spawn(class'TCAugmentationManager', Player);<br>&#9;&#9;&#9;&#9;&#9;Player.AugmentationSystem.CreateAugmentations(Player);<br>&#9;&#9;&#9;&#9;&#9;Player.AugmentationSystem.AddDefaultAugmentations();        <br>&#9;&#9;&#9;&#9;&#9;Player.AugmentationSystem.SetOwner(Player);     <br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(bResetPerks)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Player.ClientMessage("|P2Resetting perks...");<br>&#9;&#9;&#9;&#9;for(i=0;i<10;i++)<br>&#9;&#9;&#9;&#9;&#9;TCPlayer(Player).RemovePerk(i);<br>&#9;&#9;&#9;&#9;bUseUp=True;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(PraxisAug != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;bUseUp=True;<br>&#9;&#9;&#9;&#9;&#9;player.AugmentationSystem.GivePlayerAugmentation(PraxisAug);<br>&#9;&#9;&#9;&#9;&#9;player.AugmentationSystem.GivePlayerAugmentation(PraxisAug);<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(PraxisPerk != "")<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(Player).GetPerk(PraxisPerk);<br>&#9;&#9;&#9;&#9;&#9;&#9;bUseUp=True;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;if(bUseUp)<br>&#9;&#9;UseOnce();<br>&#9;<br></div>
<br><br><hr>
<a class="headerlink" href="#PraxisMagnet.uc" title="Permanent link"><h2 id="PraxisMagnet.uc">PraxisMagnet.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'OpenDX.AugMagnet'<br>ItemName="Praxis Kit (Aug Magnet)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisMediAura.uc" title="Permanent link"><h2 id="PraxisMediAura.uc">PraxisMediAura.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'OpenDX.AugMediAura'<br>ItemName="Praxis Kit (Aug Medical Aura)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisMediAuraPerk.uc" title="Permanent link"><h2 id="PraxisMediAuraPerk.uc">PraxisMediAuraPerk.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisPerk="PerkMediAura"<br>ItemName="Praxis Kit (Perk Medical Aura)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisMuscle.uc" title="Permanent link"><h2 id="PraxisMuscle.uc">PraxisMuscle.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugMuscle'<br>ItemName="Praxis Kit (Aug Muscle)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisNuke.uc" title="Permanent link"><h2 id="PraxisNuke.uc">PraxisNuke.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisPerk="PerkNuke"<br>ItemName="Praxis Kit (Perk Nuke)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisRadar.uc" title="Permanent link"><h2 id="PraxisRadar.uc">PraxisRadar.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'OpenDX.AugRadar';<br>ItemName="Praxis Kit (Aug Radar)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisRadarTrans.uc" title="Permanent link"><h2 id="PraxisRadarTrans.uc">PraxisRadarTrans.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugRadarTrans'<br>ItemName="Praxis Kit (Aug RadarTrans)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisRepel.uc" title="Permanent link"><h2 id="PraxisRepel.uc">PraxisRepel.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'OpenDX.AugRepel'<br>ItemName="Praxis Kit (Aug Repulsion)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisShield.uc" title="Permanent link"><h2 id="PraxisShield.uc">PraxisShield.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugShield'<br>ItemName="Praxis Kit (Aug Shield)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisSkullgun.uc" title="Permanent link"><h2 id="PraxisSkullgun.uc">PraxisSkullgun.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'OpenDX.AugSkullgun'<br>ItemName="Praxis Kit (Aug Skullgun)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisSpeed.uc" title="Permanent link"><h2 id="PraxisSpeed.uc">PraxisSpeed.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugSpeed'<br>ItemName="Praxis Kit (Aug Speed)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisSpy.uc" title="Permanent link"><h2 id="PraxisSpy.uc">PraxisSpy.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisPerk="PerkSpy"<br>ItemName="Praxis Kit (Perk Spy)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisStealth.uc" title="Permanent link"><h2 id="PraxisStealth.uc">PraxisStealth.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugStealth'<br>ItemName="Praxis Kit (Aug Stealth)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisTakedown.uc" title="Permanent link"><h2 id="PraxisTakedown.uc">PraxisTakedown.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'AugTakedown'<br>ItemName="Praxis Kit (Aug Takedown)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisTarget.uc" title="Permanent link"><h2 id="PraxisTarget.uc">PraxisTarget.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugTarget'<br>ItemName="Praxis Kit (Aug Target)"</div>
<br><br><hr>
<a class="headerlink" href="#PraxisVision.uc" title="Permanent link"><h2 id="PraxisVision.uc">PraxisVision.uc (extends PraxisKit)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PraxisAug=class'DeusEx.AugVision'<br>ItemName="Praxis Kit (Aug Vision)"</div>
<br><br><hr>
<a class="headerlink" href="#SSTimer.uc" title="Permanent link"><h2 id="SSTimer.uc">SSTimer.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var Sharpshooter myGame;<br>var int SSCount, SSDefaultCount;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=true</div>
<h3 id="SSTimer.Timer"><a class="headerlink" href="#SSTimer.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;SSCount--;<br>&#9;if(SSCount == 5)<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;TCP.Notif("Five seconds remaining.");<br>&#9;}<br>&#9;if(SSCount <= 0)<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;TCP.Notif("New round!");<br>&#9;&#9;SSCount = SSDefaultCount;<br>&#9;&#9;myGame.RollItems();<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#Sharpshooter.uc" title="Permanent link"><h2 id="Sharpshooter.uc">Sharpshooter.uc (extends TCDeathmatch)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int SSCount, SSDefaultCount;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">VictoryConString1="|P1Hit the score limit! (|P3 "<br>VictoryConString2=" |P1) -|P2 (Weapons randomized through the match)"<br>TimeLimitString1="|P1Score the most! (|P3 "<br>TimeLimitString2=" |P1) -|P2 (Weapons randomized through the match)"<br>GTName="Sharpshooter (WIP)"</div>
<h3 id="Sharpshooter.PostBeginPlay"><a class="headerlink" href="#Sharpshooter.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExWeapon w;<br>&#9;local int r;<br>&#9;local SSTimer SST;<br><br><br>    super.PostBeginPlay();<br>&#9;<br>&#9;<br>&#9;Log(Settings.SSRoundDelay$" round timer.");<br>&#9;SST = Spawn(class'SSTimer');<br>&#9;SST.SetTimer(1,true);<br>&#9;SST.SSCount = Settings.SSRoundDelay;<br>&#9;SST.SSDefaultCount = Settings.SSRoundDelay;<br>&#9;SST.myGame = Self;<br>&#9;Foreach AllActors(class'DeusExWeapon',w)<br>&#9;{&#9;<br>&#9;&#9;&#9;w.Destroy();<br>&#9;}<br><br></div>
<h3 id="Sharpshooter.RemovePlayerInventory"><a class="headerlink" href="#Sharpshooter.RemovePlayerInventory" title="Permanent link">RemovePlayerInventory</a> (DeusExPlayer Player)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Inventory item, nextItem, lastItem;<br><br><br>   if (Player.Inventory != None)<br>   {<br>      item = Player.Inventory;<br>      nextItem = item.Inventory;<br>      lastItem = item;<br><br>      do<br>      {<br>         if ((item != None) && item.bDisplayableInv || item.IsA('Ammo'))<br>         {<br>            // make sure everything is turned off<br>            if (item.IsA('DeusExWeapon'))<br>            {<br>               DeusExWeapon(item).ScopeOff();<br>               DeusExWeapon(item).LaserOff();<br>            }<br>            if (item.IsA('DeusExPickup'))<br>            {<br>               if (DeusExPickup(item).bActive)<br>                  DeusExPickup(item).Activate();<br>            }<br><br>            if (item.IsA('ChargedPickup'))<br>               Player.RemoveChargedDisplay(ChargedPickup(item));<br><br>            Player.DeleteInventory(item);<br>            item.Destroy();<br>            item = Player.Inventory;<br>         }<br>         else<br>            item = nextItem;<br><br>         if (item != None)<br>            nextItem = item.Inventory;<br>      }<br>      until ((item == None) || (item == lastItem));<br>   }<br><br></div>
<h3 id="Sharpshooter.RollItems"><a class="headerlink" href="#Sharpshooter.RollItems" title="Permanent link">RollItems</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br>&#9;local class<Inventory> GiveClass;<br>&#9;local int Passes, r;<br><br>&#9;<br>&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;{<br>&#9;&#9;if(Settings.bHealTimer)<br>&#9;&#9;&#9;TCP.HealPlayer(15, True);<br>&#9;&#9;&#9;<br>&#9;&#9;RemovePlayerInventory(TCP);<br>&#9;&#9;while(Passes < 3)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(Passes == 0) r = RandRange(0,10);<br>&#9;&#9;&#9;if(Passes == 1) r = RandRange(11, 20);<br>&#9;&#9;&#9;if(Passes == 2) r = RandRange(21,29);<br>&#9;&#9;&#9;Passes++;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;GiveClass = class<inventory>( DynamicLoadObject( Settings.SSWeapons[r], class'Class' ) );<br>&#9;&#9;&#9;if( GiveClass!=None )<br>&#9;&#9;&#9;&#9;SilentAdd(GiveClass, TCP);<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;Log("Error in TCControls.SSWeapons array: "$r$" slot could not be spawned.");<br>&#9;&#9;}<br>&#9;&#9;Passes = 0;<br>&#9;}<br><br></div>
<h3 id="Sharpshooter.SilentAdd"><a class="headerlink" href="#Sharpshooter.SilentAdd" title="Permanent link">SilentAdd</a> (class<inventory> addClass, DeusExPlayer addTarget)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Inventory anItem;<br> <br>&#9;<br>&#9;if(Settings.bMethodOne)<br>&#9;{<br>&#9;&#9;anItem = Spawn(addClass,,,addTarget.Location); <br>&#9;&#9;anItem.SpawnCopy(addTarget);<br>&#9;&#9;anItem.Destroy();<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;anItem.Instigator = addTarget; <br>&#9;&#9;anItem.GotoState('Idle2'); <br>&#9;&#9;anItem.bHeldItem = true; <br>&#9;&#9;anItem.bTossedOut = false; <br>&#9;&#9;<br>&#9;&#9;if(Weapon(anItem) != None) <br>&#9;&#9;&#9;Weapon(anItem).GiveAmmo(addTarget); <br>&#9;&#9;anItem.GiveTo(addTarget);<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCAugmentationDisplayWindow.uc" title="Permanent link"><h2 id="TCAugmentationDisplayWindow.uc">TCAugmentationDisplayWindow.uc (extends CBPAugmentationDisplayWindow)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var Color colYellow, colPurple;<br>var Color	colBlue1, colWhite;<br>var Color	colGreen1, colLtGreen;<br>var Color	colRed1, colLtRed;<br>var string keyFreeMode, keyPersonView, keyMainMenu, keySkills;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">colWhite=(R=255,G=255,B=255)<br>colYellow=(R=255,G=255,B=0)<br>colPurple=(R=128,G=0,B=128)</div>
<h3 id="TCAugmentationDisplayWindow.DrawPlayerName"><a class="headerlink" href="#TCAugmentationDisplayWindow.DrawPlayerName" title="Permanent link">DrawPlayerName</a> (GC gc, float x, float y, bool sameteam, string pname)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float w, h;<br><br><br>    gc.SetFont(Font'FontMenuSmall');<br>    gc.SetStyle(DSTY_Translucent);<br>    if (sameteam) gc.SetTextColor(colGreen);<br>    else gc.SetTextColor(colRed);<br>    gc.GetTextExtent(0, w, h, pname);<br>    x -= w * 0.5;<br>    y -= h * 0.5;<br>&#9;gc.DrawText(x, y, w, h, pname);<br>&#9;gc.SetStyle(DSTY_Normal);<br><br></div>
<h3 id="TCAugmentationDisplayWindow.DrawRemoteInventory"><a class="headerlink" href="#TCAugmentationDisplayWindow.DrawRemoteInventory" title="Permanent link">DrawRemoteInventory</a> (GC gc, TCPlayer mmp)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int xoff, yoff, ytoff, i;<br><br><br>&#9;yoff = height - 48;<br>&#9;ytoff = yoff + 32;<br>&#9;xoff = width - 54;<br><br>&#9;gc.SetStyle(DSTY_Masked);<br>&#9;gc.SetTileColorRGB(255, 255, 255);<br><br>&#9;gc.SetAlignments(HALIGN_Center, VALIGN_Center);<br>&#9;gc.EnableWordWrap(false);<br>&#9;gc.SetTextColorRGB(255, 255, 255);<br>&#9;gc.SetFont(Font'FontTiny');<br><br>&#9;// draw biocells<br>&#9;if (mmp.TargetBioCells > 0)<br>&#9;{<br>&#9;&#9;gc.DrawTexture(xoff, yoff, 42, 37, 0, 0, Texture'DeusExUI.Icons.BeltIconBioCell');<br>&#9;&#9;gc.DrawText(xoff + 1, ytoff, 42, 8, "COUNT:" @ mmp.TargetBioCells);<br>&#9;}<br>&#9;xoff -= 48;<br>&#9;// draw medkit<br>&#9;if (mmp.TargetMedkits > 0)<br>&#9;{<br>&#9;&#9;gc.DrawTexture(xoff, yoff, 42, 37, 0, 0, Texture'DeusExUI.Icons.BeltIconMedKit');<br>&#9;&#9;gc.DrawText(xoff + 1, ytoff, 42, 8, "COUNT:" @ mmp.TargetMedkits);&#9;<br>&#9;}<br>&#9;xoff -= 48;<br>&#9;// draw multitool<br>&#9;if (mmp.TargetMultitools > 0)<br>&#9;{<br>&#9;&#9;gc.DrawTexture(xoff, yoff, 42, 37, 0, 0, Texture'DeusExUI.Icons.BeltIconMultitool');<br>&#9;&#9;gc.DrawText(xoff + 1, ytoff, 42, 8, "COUNT:" @ mmp.TargetMultitools);<br>&#9;}<br>&#9;xoff -= 48;<br>&#9;// draw lockpick<br>&#9;if (mmp.TargetLockpicks > 0)<br>&#9;{<br>&#9;&#9;gc.DrawTexture(xoff, yoff, 42, 37, 0, 0, Texture'DeusExUI.Icons.BeltIconLockPick');<br>&#9;&#9;gc.DrawText(xoff + 1, ytoff, 42, 8, "COUNT:" @ mmp.TargetLockpicks);<br>&#9;}<br>&#9;xoff -= 48;<br>&#9;// draw lam<br>&#9;if (mmp.TargetLAMs > 0)<br>&#9;{<br>&#9;&#9;gc.DrawTexture(xoff, yoff, 42, 37, 0, 0, Texture'DeusExUI.Icons.BeltIconLAM');<br>&#9;&#9;gc.DrawText(xoff + 1, ytoff, 42, 8, "COUNT:" @ mmp.TargetLAMs);<br>&#9;}<br><br>&#9;xoff = 16;<br><br>&#9;// draw weapons<br>&#9;for (i = 0; i < 3; i++)<br>&#9;{<br>&#9;&#9;if (mmp.TargetWeapons[i] != none)<br>&#9;&#9;{<br>&#9;&#9;&#9;gc.DrawTexture(xoff, yoff, 42, 37, 0, 0, mmp.TargetWeapons[i].default.Icon);<br>&#9;&#9;}<br>&#9;&#9;xoff += 48;<br>&#9;}<br><br>&#9;// draw emp<br>&#9;if (mmp.TargetEMPs > 0)<br>&#9;{<br>&#9;&#9;gc.DrawTexture(xoff, yoff, 42, 37, 0, 0, Texture'DeusExUI.Icons.BeltIconEMPGrenade');<br>&#9;&#9;gc.DrawText(xoff + 1, ytoff, 42, 8, "COUNT:" @ mmp.TargetEMPs);<br>&#9;}<br>&#9;xoff += 48;<br>&#9;// draw gas<br>&#9;if (mmp.TargetGGs > 0)<br>&#9;{<br>&#9;&#9;gc.DrawTexture(xoff, yoff, 42, 37, 0, 0, Texture'DeusExUI.Icons.BeltIconGasGrenade');<br>&#9;&#9;gc.DrawText(xoff + 1, ytoff, 42, 8, "COUNT:" @ mmp.TargetGGs);<br>&#9;}<br><br></div>
<h3 id="TCAugmentationDisplayWindow.DrawStaticText"><a class="headerlink" href="#TCAugmentationDisplayWindow.DrawStaticText" title="Permanent link">DrawStaticText</a> (GC gc, string text, float y_ratio, color col, bool big)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float x, y, w, h;<br><br><br>    if (big) gc.SetFont(Font'FontMenuTitle');<br>    else gc.SetFont(Font'FontMenuSmall');<br>    gc.SetStyle(DSTY_Translucent);<br>    gc.SetTextColor(col);<br>    gc.GetTextExtent(0, w, h, text);<br>    x = (width * 0.5) - (w * 0.5);<br>&#9;y = height * y_ratio;<br>&#9;gc.DrawText(x, y, w, h, text);<br>&#9;gc.SetStyle(DSTY_Normal);<br><br></div>
<h3 id="TCAugmentationDisplayWindow.FacingActor"><a class="headerlink" href="#TCAugmentationDisplayWindow.FacingActor" title="Permanent link">FacingActor</a> (Pawn A, Pawn B) -> float</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector X,Y,Z, Dir;<br><br><br>    if (B == None || A == None) return -1.0;<br>    GetAxes(B.ViewRotation, X, Y, Z);<br>    Dir = A.Location - B.Location;<br>    X.Z = 0;<br>    Dir.Z = 0;<br>    return Normal(Dir) dot Normal(X);<br><br></div>
<h3 id="TCAugmentationDisplayWindow.GetAllies"><a class="headerlink" href="#TCAugmentationDisplayWindow.GetAllies" title="Permanent link">GetAllies</a> (TCPlayer POne, TCPlayer PTwo) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TCDeathmatch(player.DXGame) != None)<br>&#9;&#9;return TCDeathmatch(player.DXGame).ArePlayersAllied2(POne,PTwo);<br>&#9;&#9;<br>&#9;if(TCTeam(player.DXGame) != None)<br>&#9;&#9;return TCTeam(player.DXGame).ArePlayersAllied(POne,PTwo);&#9;<br><br></div>
<h3 id="TCAugmentationDisplayWindow.GetGridTexture"><a class="headerlink" href="#TCAugmentationDisplayWindow.GetGridTexture" title="Permanent link">GetGridTexture</a> (Texture tex) -> Texture</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (tex == None)<br>&#9;&#9;return Texture'BlackMaskTex';<br>&#9;else if (tex == Texture'BlackMaskTex')<br>&#9;&#9;return Texture'BlackMaskTex';<br>&#9;else if (tex == Texture'GrayMaskTex')<br>&#9;&#9;return Texture'BlackMaskTex';<br>&#9;else if (tex == Texture'PinkMaskTex')<br>&#9;&#9;return Texture'BlackMaskTex';<br>&#9;else if (VisionTargetStatus == VISIONENEMY)         <br>      return Texture'Virus_SFX';<br>   else if (VisionTargetStatus == VISIONALLY)<br>&#9;&#9;return Texture'Wepn_Prifle_SFX';<br>   else if (VisionTargetStatus == VISIONNEUTRAL)<br>      return Texture'WhiteStatic';<br>   else<br>      return Texture'WhiteStatic';<br><br></div>
<h3 id="TCAugmentationDisplayWindow.GetTargetReticleColor"><a class="headerlink" href="#TCAugmentationDisplayWindow.GetTargetReticleColor" title="Permanent link">GetTargetReticleColor</a> (Actor target, out Color xcolor)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExPlayer safePlayer;<br>&#9;local AutoTurret turret;<br>&#9;local bool bDM, bTeamDM;<br>&#9;local Vector dist;<br>&#9;local float SightDist;<br>&#9;local DeusExWeapon w;<br>&#9;local int team;<br>&#9;local String titleString;<br>&#9;local TCControls TCC;<br>&#9;local string str;<br>&#9;local TCStorageBox TCS;<br>&#9;local string teamstr;<br>&#9;local TCPRI plPRI, tPRI;<br>&#9;local TCPlayer tcTarg, tcSelf;<br>&#9;local ScriptedPawn sPawn;<br><br><br>&#9;bDM = (TCDeathmatch(player.DXGame) != None);<br>&#9;bTeamDM = (TCTeam(player.DXGame) != None);<br>&#9;tcSelf = GetPlayer();<br>&#9;if(tcSelf != None)<br>&#9;&#9;plPRI = TCPRI(tcSelf.PlayerReplicationInfo);<br>&#9;sPawn = ScriptedPawn(Target);<br><br>&#9;if(plPRI == None) // tcSelf == none is implicit if this is true.<br>&#9;{<br>&#9;&#9;xColor = colWhite;<br>&#9;&#9;return;<br>&#9;}<br><br>&#9;if ( sPawn != None )<br>&#9;{<br>&#9;&#9;if(tcSelf.HUDTYpe == HUD_Extended) //Shows all info<br>&#9;&#9;{<br>&#9;&#9;&#9;targetPlayerName = sPawn.FamiliarName$" ("$Left(VSize(target.Location - Player.Location), Len(VSize(target.Location - Player.Location))-7)$")";<br>&#9;&#9;&#9;xcolor = colYellow;<br>&#9;&#9;}<br>&#9;&#9;else if(tcSelf.HUDTYpe == HUD_Basic) //Shows basic info<br>&#9;&#9;{<br>&#9;&#9;&#9;targetPlayerName = sPawn.FamiliarName;<br>&#9;&#9;&#9;xcolor = colYellow;<br>&#9;&#9;}<br>&#9;&#9;else if(tcSelf.HUDTYpe == HUD_Unified) //Masks bots as players<br>&#9;&#9;{<br>&#9;&#9;&#9;targetPlayerName = sPawn.FamiliarName;<br>&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;}<br>&#9;&#9;else if(tcSelf.HUDTYpe == HUD_Original) //As original DX, bots are friendlies, no name display<br>&#9;&#9;{<br>&#9;&#9;&#9;targetPlayerName = "";<br>&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;}<br>&#9;&#9;else if(tcSelf.HUDTYpe == HUD_Off)<br>&#9;&#9;&#9;targetPlayerName = "";<br>&#9;&#9;&#9;<br>&#9;&#9;targetPlayerTime = Player.Level.Timeseconds + targetPlayerDelay;<br>&#9;&#9;targetPlayerColor = xcolor;<br>&#9;}<br>&#9;else if ( Player.Level.NetMode != NM_Standalone )&#9;// Only do the rest in multiplayer<br>&#9;{<br>&#9;&#9;if ( target.IsA('TCStorageBox') )<br>&#9;&#9;{<br>&#9;&#9;&#9;TCS = TCStorageBox(Target);<br>&#9;&#9;&#9;if (bTeamDM)<br>&#9;&#9;&#9;{ <br>&#9;&#9;&#9;&#9;if(GetAllies(TCPlayer(TCS.Owner),tcSelf) || tcSelf == TCS.Owner)<br>&#9;&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(TCS.myName != "")<br>&#9;&#9;&#9;&#9;&#9;str = TCS.myName;<br>&#9;&#9;&#9;&#9;else str = TCS.OwnerName$"'s storage";<br>&#9;&#9;&#9;&#9;targetPlayerName = str;<br>&#9;&#9;&#9;&#9;targetPlayerTime = Player.Level.Timeseconds + targetPlayerDelay;<br>&#9;&#9;&#9;&#9;targetPlayerColor = xcolor;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if(bDM)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(GetAllies(TCPlayer(TCS.Owner),tcSelf) || tcSelf == TCS.Owner)<br>&#9;&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(TCS.myName != "")<br>&#9;&#9;&#9;&#9;&#9;str = TCS.myName;<br>&#9;&#9;&#9;&#9;else str = TCS.OwnerName$"'s storage";<br>&#9;&#9;&#9;&#9;targetPlayerName = str;<br>&#9;&#9;&#9;&#9;targetPlayerTime = Player.Level.Timeseconds + targetPlayerDelay;<br>&#9;&#9;&#9;&#9;targetPlayerColor = xcolor;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;else if ( target.IsA('DeusExPlayer') && (target != player) )&#9;// Other players IFF<br>&#9;&#9;{<br>&#9;&#9;&#9;tcTarg = TCPlayer(Target);<br>&#9;&#9;&#9;if(tcTarg != none)<br>&#9;&#9;&#9;&#9;tPRI = TCPRI(tcTarg.PlayerReplicationInfo);<br><br>&#9;&#9;&#9;if(tPRI != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (bTeamDM)<br>&#9;&#9;&#9;&#9;{ <br>&#9;&#9;&#9;&#9;&#9;str = tPRI.PlayerName;<br><br>&#9;&#9;&#9;&#9;&#9;if(tPRI.bSpy || GetAllies(tcTarg,tcSelf))<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;TargetPlayerHealthString = " (" $ 100 * (tcTarg.Health / tcTarg.Default.Health) $ "%)";<br>&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;targetPlayerName = str;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if(bDM && target.Style != STY_Translucent) //Kaiz0r - Adding DM Stuff here<br>&#9;&#9;&#9;&#9;{&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;if(tcSelf.HUDTYpe == HUD_Extended) //Shows all info<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(plPRI.TeamNamePRI == "") //If not in team<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colPurple;<br>&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;if(plPRI.TeamNamePRI != "") //if WE are in a team<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if(tPRI.bSpy || GetAllies(tcTarg,tcSelf))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;TargetPlayerHealthString = " (" $ 100 * (tcTarg.Health / tcTarg.Default.Health) $ "%)";<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;&#9;str = tPRI.PlayerName;<br>&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;str = str$" ("$Left(VSize(target.Location - Player.Location), Len(VSize(target.Location - Player.Location))-7)$")";<br>&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;if(tPRI.TeamNamePRI != "")<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;str = str$" |C616200#|P7"$tPRI.TeamNamePRI;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;targetPlayerName = str;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;if(tcSelf.HUDTYpe == HUD_Basic) //Shows basic info<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(tPRI.TeamNamePRI == "")//If not in team<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colPurple;<br>&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;if(tPRI.TeamNamePRI != "") //if WE are in a team<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if(GetAllies(tcTarg,tcSelf))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;TargetPlayerHealthString = " (" $ 100 * (tcTarg.Health / tcTarg.Default.Health) $ "%)";<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;&#9;str = tPRI.PlayerName;<br>&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;if(tPRI.TeamNamePRI != "")<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;str = str$" |C616200#|P7"$TCPRI(TCPlayer(Target).PlayerReplicationInfo).TeamNamePRI;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;targetPlayerName = str;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;if(tcSelf.HUDTYpe == HUD_Unified || tcSelf.HUDTYpe == HUD_Original)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;targetPlayerName = tPRI.PlayerName;<br>&#9;&#9;&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;if(tcSelf.HUDTYpe == HUD_Off)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;targetPlayerName = "";<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;targetPlayerTime = Player.Level.Timeseconds + targetPlayerDelay;<br>&#9;&#9;&#9;&#9;&#9;targetPlayerColor = xcolor;<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;SightDist = VSize(target.Location - Player.Location);<br>&#9;&#9;&#9;&#9;// This was one of the errors - the brackets prioritised the TeamDMGame cast over the bTeamDM check.<br>&#9;&#9;&#9;&#9;if&#9;(((bTeamDM) && TeamDMGame(player.DXGame).ArePlayersAllied(DeusExPlayer(target),player))<br>&#9;&#9;&#9;&#9;||&#9;(target.Style != STY_Translucent)<br>&#9;&#9;&#9;&#9;||&#9;(bVisionActive && (Sightdist <= visionLevelvalue)) )<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;//targetPlayerName = DeusExPlayer(target).PlayerReplicationInfo.PlayerName;<br>&#9;&#9;&#9;&#9;&#9;// DEUS_EX AMSD Show health of enemies with the target active.<br>&#9;&#9;&#9;&#9;&#9;if (bTargetActive)<br>&#9;&#9;&#9;&#9;&#9;&#9;TargetPlayerHealthString = "(" $ 100 * (tcTarg.Health / tcTarg.Default.Health) $ "%)";<br><br>&#9;&#9;&#9;&#9;&#9;targetOutOfRange = False;<br>&#9;&#9;&#9;&#9;&#9;w = DeusExWeapon(player.Weapon);<br>&#9;&#9;&#9;&#9;&#9;if (( w != None ) && ( xcolor != colGreen ))<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;dist = player.Location - target.Location;<br>&#9;&#9;&#9;&#9;&#9;&#9;if ( VSize(dist) > w.maxRange ) <br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if (!(( WeaponAssaultGun(w) != None ) && ( Ammo20mm(WeaponAssaultGun(w).AmmoType) != None )))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;targetRangeTime = Player.Level.Timeseconds + 0.1;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;targetOutOfRange = True;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;targetPlayerTime = Player.Level.Timeseconds + targetPlayerDelay;<br>&#9;&#9;&#9;&#9;&#9;targetPlayerColor = xcolor;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;xcolor = colWhite;&#9;// cloaked enemy<br>&#9;&#9;}<br>&#9;&#9;else if (target.IsA('ThrownProjectile'))&#9;// Grenades IFF<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( ThrownProjectile(target).bDisabled )<br>&#9;&#9;&#9;&#9;xcolor = colWhite;<br>&#9;&#9;&#9;else if ( (GetAllies(TCPlayer(target.Owner),tcSelf)) || <br>&#9;&#9;&#9;&#9;(player == TCPlayer(target.Owner)) )<br>&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;}<br>&#9;&#9;else if ( target.IsA('TCAutoTurret') || target.IsA('AutoTurretGun') ) // Autoturrets IFF<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( target.IsA('AutoTurretGun') )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;team = AutoTurretGun(target).team;<br>&#9;&#9;&#9;&#9;titleString = AutoTurretGun(target).titleString;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;team = AutoTurret(target).team;<br>&#9;&#9;&#9;&#9;titleString = AutoTurret(target).titleString;<br>&#9;&#9;&#9;&#9;teamstr = TCPRI(TCPlayer(TCAutoTurret(target).safeTarget).PlayerReplicationInfo).TeamNamePRI;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if ( (TCDeathmatch(player.dxgame) != none && team == plPRI.playerid) || TCTeam(player.dxgame) != none && team == plPRI.team)<br>&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;else if (team == -1)<br>&#9;&#9;&#9;&#9;xcolor = colWhite;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;xcolor = colRed;<br><br>&#9;&#9;&#9;targetPlayerName = titleString$teamstr;<br>&#9;&#9;&#9;targetOutOfRange = False;<br>&#9;&#9;&#9;targetPlayerTime = Player.Level.Timeseconds + targetPlayerDelay;<br>&#9;&#9;&#9;targetPlayerColor = xcolor;<br>&#9;&#9;}<br>&#9;&#9;else if ( target.IsA('ComputerSecurity'))<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( ComputerSecurity(target).team == -1 )<br>&#9;&#9;&#9;&#9;xcolor = colWhite;<br>&#9;&#9;&#9;else if ( (bTeamDM && GetAllies(TCPlayer(target.Owner), tcSelf)) ||<br>&#9;&#9;&#9;&#9;  (!bTeamDM && (player.PlayerReplicationInfo.PlayerID == team || <br>&#9;&#9;&#9;&#9;  GetAllies(TCPlayer(target.Owner), tcSelf))) )<br>&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;}<br>&#9;&#9;else if ( target.IsA('SecurityCamera'))<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( !SecurityCamera(target).bActive )<br>&#9;&#9;&#9;&#9;xcolor = colWhite;<br>&#9;&#9;&#9;else if ( SecurityCamera(target).team == -1 )<br>&#9;&#9;&#9;&#9;xcolor = colWhite;<br>&#9;&#9;&#9;else if ( (bTeamDM && GetAllies(TCPlayer(target.Owner), tcSelf)) ||<br>&#9;&#9;&#9;&#9;  (!bTeamDM && (player.PlayerReplicationInfo.PlayerID == team || <br>&#9;&#9;&#9;&#9;  GetAllies(TCPlayer(target.Owner), tcSelf))) )<br>&#9;&#9;&#9;&#9;xcolor = colGreen;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;xcolor = colRed;<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCAugmentationDisplayWindow.IsHeatSource"><a class="headerlink" href="#TCAugmentationDisplayWindow.IsHeatSource" title="Permanent link">IsHeatSource</a> (Actor A) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(A.IsA('ODXHiddenActor')) //Check this first, so it doesnt reach the "Hidden" check below<br>&#9;&#9;return True;<br>&#9;&#9;<br>   if ((A.bHidden) && (Player.Level.NetMode != NM_Standalone))<br>      return False;<br>   if (A.IsA('Pawn'))<br>   {<br>      if (A.IsA('ScriptedPawn'))<br>         return True;<br>      else if ( (A.IsA('DeusExPlayer')) && (A != Player) )//DEUS_EX AMSD For multiplayer.<br>         return True;<br>      return False;<br>   }<br>&#9;else if (A.IsA('DeusExCarcass'))<br>&#9;&#9;return True;   <br>&#9;else if (A.IsA('FleshFragment'))<br>&#9;&#9;return True;<br>   else<br>&#9;&#9;return False;<br><br></div>
<h3 id="TCAugmentationDisplayWindow.NameAllViewedPlayers"><a class="headerlink" href="#TCAugmentationDisplayWindow.NameAllViewedPlayers" title="Permanent link">NameAllViewedPlayers</a> (GC gc, TCPlayer mmp)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor target;<br>&#9;local TCPlayer P;<br>&#9;local float x, y;<br>&#9;local vector loc;<br>&#9;local bool viewenemy;<br><br><br>&#9;foreach mmp.VisibleCollidingActors(class'Actor', target, 3000.0, mmp.Location, false)<br>&#9;{<br>&#9;    if (target.IsA('TCPlayer') && (FacingActor(Pawn(target), mmp) > 0.0))<br>        {<br>            P = TCPlayer(target);<br>            if (P.PlayerReplicationInfo.bIsSpectator || (!mmp.bSpecEnemies && P.PlayerReplicationInfo.Team != mmp.PlayerReplicationInfo.Team)) continue;<br>            loc = P.Location;<br>            loc.Z -= P.CollisionHeight + 10.0;<br>            ConvertVectorToCoordinates(loc, x, y);<br>            DrawPlayerName(gc, x, y, (mmp.PlayerReplicationInfo.Team == P.PlayerReplicationInfo.Team) && mmp.GameReplicationInfo.bTeamGame, P.PlayerReplicationInfo.PlayerName);<br>        }<br>    }<br><br></div>
<h3 id="TCAugmentationDisplayWindow.PostDrawWindow"><a class="headerlink" href="#TCAugmentationDisplayWindow.PostDrawWindow" title="Permanent link">PostDrawWindow</a> (GC gc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local PlayerPawn pp;<br>&#9;local TCPlayer mmp;<br>&#9;local color col;<br>&#9;local string str;<br>&#9;local color colGold;<br>&#9;local int tmpVisionLevel, tmpVisionLevelValue;<br>&#9;local int VotePoints, mVP;<br>&#9;local float xx;<br>&#9;local actor wpTarget;<br>&#9;local float infoX, infoY, infoW, infoH;<br>&#9;local string strInfo;<br>&#9;local int dist;<br>&#9;local float offset;<br>&#9;local vector centerLoc;<br>&#9;local float centerX, centerY;<br>&#9;local float markX, markY, markW, markH;<br>&#9;local string markInfo;<br>&#9;local TCPRI tPRI;<br><br><br>&#9;pp = Player.GetPlayerPawn();<br>&#9;if(TCPlayer(pp) != None)<br>&#9;&#9;mmp = TCPlayer(pp);<br>&#9;colGold.R = 255;<br>    colGold.G = 255;<br><br>&#9;if(TCPRI(mmp.PlayerReplicationInfo) != None)<br>&#9;&#9;tPRI = TCPRI(mmp.PlayerReplicationInfo);<br>&#9;&#9;<br>&#9;if(tPRI == None)<br>&#9;&#9;return;<br>&#9;<br>&#9;//BEGIN WP<br>&#9;if(tPRI.wpTargetPRI != None)<br>&#9;&#9;wpTarget = tPRI.wpTargetPRI;<br><br>&#9;if (wpTarget != None)<br>&#9;{<br>&#9;&#9;centerLoc = wpTarget.Location;<br><br>&#9;&#9;if (ConvertVectorToCoordinates(centerLoc, centerX, centerY))<br>&#9;&#9;{<br>&#9;&#9;&#9;// convert to meters<br>&#9;&#9;&#9;dist = int(vsize(mmp.Location-wpTarget.Location)/52);<br><br>&#9;&#9;&#9;if(tPRI.wpName != "")<br>&#9;&#9;&#9;&#9;strInfo = tPRI.wpName $ " (" $ dist $ "m)";<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;strInfo = wpTarget.Tag $ " (" $ dist $ "m)";<br><br>&#9;&#9;&#9;gc.SetFont(Font'FontMenuHeaders_DS');<br>&#9;&#9;&#9;gc.GetTextExtent(0, infoW, infoH, strInfo);<br><br>&#9;&#9;&#9;infoX = centerX - 0.5*(infoW+12);<br>&#9;&#9;&#9;infoY = centerY - 0.5*(infoH+10);<br><br>&#9;&#9;&#9;offset = 0.5*(infoW+12+32);<br>&#9;&#9;&#9;if (centerX >= 0.5*width)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (centerX < width-infoW-12-32-16)<br>&#9;&#9;&#9;&#9;&#9;infoX += offset;<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;infoX -= offset;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (centerX > infoW+12+32+16)<br>&#9;&#9;&#9;&#9;&#9;infoX -= offset;<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;infoX += offset;<br>&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;infoX = FClamp(infoX, 32, width-infoW-12-32);<br>&#9;&#9;&#9;infoY = FClamp(infoY, 16, height-infoH-10-72);<br>&#9;&#9;}<br><br>&#9;&#9;// draw a dark background<br>&#9;&#9;gc.SetStyle(DSTY_Modulated);<br>&#9;&#9;gc.SetTileColorRGB(0, 0, 0);<br>&#9;&#9;gc.DrawPattern(infoX, infoY, infoW+12, infoH+10, 0, 0, Texture'ConWindowBackground');<br><br>&#9;&#9;// draw the text<br>&#9;&#9;gc.SetTextColor(colText);<br>&#9;&#9;gc.DrawText(infoX+6, infoY+6, infoW, infoH, strInfo);<br><br>&#9;&#9;// draw the two highlight boxes<br>&#9;&#9;gc.SetStyle(DSTY_Translucent);<br>&#9;&#9;gc.SetTileColor(colBorder);<br>&#9;&#9;gc.DrawBox(infoX, infoY, infoW+12, infoH+10, 0, 0, 1, Texture'Solid');<br>&#9;&#9;gc.SetTileColor(colBackground);<br>&#9;&#9;gc.DrawBox(infoX+1, infoY+1, infoW+10, infoH+8, 0, 0, 1, Texture'Solid');<br><br>&#9;&#9;//draw waypoint X mark<br>&#9;&#9;markInfo = "X";<br>&#9;&#9;gc.SetFont(Font'FontMenuHeaders_DS');<br>&#9;&#9;gc.GetTextExtent(0, markW, markH, markInfo);<br>&#9;&#9;markX = centerX-0.5*markW;<br>&#9;&#9;markY = centerY-0.5*markH;<br>&#9;&#9;markX = FClamp(markX, 16-0.5*markW, width-16-0.5*markW);<br>&#9;&#9;markY = FClamp(infoY, 16, height-infoH-10-72);<br>&#9;&#9;gc.SetTextColor(colText);<br>&#9;&#9;gc.DrawText(markX, markY+6, markW, markH, markInfo);<br>&#9;}<br>&#9;//ENDWP<br>&#9;&#9; <br>&#9;if (!tPRI.bIsSpectator) <br>    {<br>&#9;&#9;//if (mmp.GetControls().bNameDisplay)<br>&#9;&#9;//&#9;NameAllViewedPlayers(gc, mmp);<br>&#9;&#9;&#9;<br>&#9;&#9;Super.PostDrawWindow(gc);<br>    &#9;//Super(AugmentationDisplayWindow).PostDrawWindow(gc);<br>    }<br>    else<br>    {<br>&#9;&#9;if (mmp.FreeSpecMode)<br>&#9;&#9;{<br>&#9;&#9;&#9;NameAllViewedPlayers(gc, mmp);<br>&#9;&#9;&#9;DrawStaticText(gc, " < Free spectating >", 0.73, colGold, false);<br>&#9;&#9;&#9;DrawStaticText(gc, "Press <" $ keySkills $ "> to spectate players.", 0.75, colGold, false);<br>&#9;&#9;}<br>&#9;&#9;else if (mmp.ViewTarget != none)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (PlayerPawn(mmp.ViewTarget).PlayerReplicationInfo.Team != mmp.PlayerReplicationInfo.Team ||<br>&#9;&#9;&#9;&#9;!mmp.GameReplicationInfo.bTeamGame) col = colRed;<br>&#9;&#9;&#9;else col = colGreen;<br>&#9;&#9;&#9;str = "Viewing " $ PlayerPawn(mmp.ViewTarget).PlayerReplicationInfo.PlayerName;<br><br>&#9;&#9;&#9;DrawStaticText(gc, str, 0.65, col, true);<br>&#9;&#9;&#9;DrawStaticText(gc, "<- LMB       RMB ->", 0.69, colGold, false);<br>&#9;&#9;&#9;if (!mmp.bBehindView)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;//DrawRemotePlayerSkills(gc, mmp);<br>&#9;&#9;&#9;&#9;DrawRemoteInventory(gc, mmp);<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;DrawStaticText(gc, "Press <" $ keySkills $ "> to go into free spectator mode.", 0.75, colGold, false);<br>&#9;&#9;}<br>        <br>        if(!mmp.bNoRespawn)<br>&#9;&#9;&#9;DrawStaticText(gc, "Press <" $ keyMainMenu $ "> or enter chat command /spec to start playing.", 0.77, colGold, false);<br><br>        gc.SetFont(Font'FontMenuSmall_DS');<br>&#9;    gc.SetTextColor(colHeaderText);<br>&#9;    gc.SetStyle(DSTY_Normal);<br>&#9;    gc.SetTileColor(colBorder);<br>&#9;&#9;if (mmp.bShowScores)<br>&#9;    {<br>            if (DeathMatchGame(mmp.DXGame) != None)<br>&#9;&#9;&#9;    DeathMatchGame(mmp.DXGame).ShowDMScoreboard(mmp, gc, width, height);<br>&#9;&#9;    else if (TeamDMGame(mmp.DXGame) != None)<br>&#9;&#9;&#9;    TeamDMGame(mmp.DXGame).ShowTeamDMScoreboard(mmp, gc, width, height);<br>&#9;    }<br>&#9;}<br><br></div>
<h3 id="TCAugmentationDisplayWindow.RefreshMultiplayerKeys"><a class="headerlink" href="#TCAugmentationDisplayWindow.RefreshMultiplayerKeys" title="Permanent link">RefreshMultiplayerKeys</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local String Alias, keyName;<br>&#9;local int i;<br><br><br>&#9;for ( i = 0; i < 255; i++ )<br>&#9;{<br>&#9;&#9;keyName = player.ConsoleCommand ( "KEYNAME "$i );<br>&#9;&#9;if ( keyName != "" )<br>&#9;&#9;{<br>&#9;&#9;&#9;Alias = player.ConsoleCommand( "KEYBINDING "$keyName );<br>&#9;&#9;&#9;if ( Alias ~= "DropItem" )<br>&#9;&#9;&#9;&#9;keyDropItem = keyName;<br>&#9;&#9;&#9;else if ( Alias ~= "Talk" )<br>&#9;&#9;&#9;&#9;keyTalk = keyName;<br>&#9;&#9;&#9;else if ( Alias ~= "TeamTalk" )<br>&#9;&#9;&#9;&#9;keyTeamTalk = keyName;<br>&#9;&#9;&#9;else if ( Alias ~= "ShowInventoryWindow" )<br>&#9;&#9;&#9;    keyFreeMode = keyName;<br>            else if ( Alias ~= "ShowGoalsWindow" )<br>                keyPersonView = keyName;<br>            else if ( Alias ~= "ShowMainMenu" )<br>                keyMainMenu = keyName;<br>&#9;&#9;&#9;else if ( Alias ~= "BuySkills" )<br>&#9;&#9;&#9;&#9;keySkills = KeyName;<br>&#9;&#9;}<br>&#9;}<br>&#9;if ( keyDropItem ~= "" )<br>&#9;&#9;keyDropItem = KeyNotBoundString;<br>&#9;if ( keyTalk ~= "" )<br>&#9;&#9;keyTalk = KeyNotBoundString;<br>&#9;if ( keyTeamTalk ~= "" )<br>&#9;&#9;keyTeamTalk = KeyNotBoundString;<br>&#9;if ( keyFreeMode ~= "" )<br>&#9;    keyFreeMode = KeyNotBoundString;<br>    if ( keyPersonView ~= "" )<br>        keyPersonView = KeyNotBoundString;<br>    if ( keyMainMenu ~= "" )<br>        keyMainMenu = KeyNotBoundString;<br>&#9;if ( keySkills ~= "" )<br>&#9;&#9;keySkills = KeyNotBoundString;<br><br></div>
<h3 id="TCAugmentationDisplayWindow.getPlayer"><a class="headerlink" href="#TCAugmentationDisplayWindow.getPlayer" title="Permanent link">getPlayer</a> -> TCPlayer</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   return TCPlayer(player);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCAugmentationManager.uc" title="Permanent link"><h2 id="TCAugmentationManager.uc">TCAugmentationManager.uc (extends CBPAugmentationManager)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var Class<Augmentation> augClassesODX[45]; //we need MOAR AUGS - Upped from 25 to 31, maybe more than needed..</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">augClassesODX(0)=Class'DeusEx.AugSpeed'<br>augClassesODX(1)=Class'DeusEx.AugTarget'<br>augClassesODX(2)=Class'DeusEx.AugCloak'<br>augClassesODX(3)=Class'DeusEx.AugBallistic'<br>augClassesODX(4)=Class'DeusEx.AugRadarTrans'<br>augClassesODX(5)=Class'DeusEx.AugShield'<br>augClassesODX(6)=Class'DeusEx.AugEnviro'<br>augClassesODX(7)=Class'DeusEx.AugEMP'<br>augClassesODX(8)=Class'DeusEx.AugCombat'<br>augClassesODX(9)=Class'OpenDX.AugHealing2'<br>augClassesODX(10)=Class'DeusEx.AugStealth'<br>augClassesODX(11)=Class'DeusEx.AugIFF'<br>augClassesODX(12)=Class'CBPAugLight'<br>augClassesODX(13)=Class'DeusEx.AugMuscle'<br>augClassesODX(14)=Class'DeusEx.AugVision'<br>augClassesODX(15)=Class'DeusEx.AugDrone'<br>augClassesODX(16)=Class'DeusEx.AugDefense'<br>augClassesODX(17)=Class'DeusEx.AugAqualung'<br>augClassesODX(18)=Class'DeusEx.AugDatalink'<br>augClassesODX(19)=Class'DeusEx.AugHeartLung'<br>augClassesODX(20)=Class'DeusEx.AugPower'<br>augClassesODX(21)=Class'OpenDX.AugSkullgun'<br>augClassesODX(22)=Class'OpenDX.AugIcarus'<br>augClassesODX(23)=Class'OpenDX.AugNuke'<br>augClassesODX(24)=Class'OpenDX.AugRepel'<br>augClassesODX(25)=Class'OpenDX.AugMediAura'<br>augClassesODX(26)=Class'OpenDX.AugFlight'<br>augClassesODX(27)=Class'OpenDX.AugRadar'<br>augClassesODX(28)=Class'OpenDX.AugTakedown'<br>augClassesODX(29)=Class'OpenDX.AugMagnet'</div>
<h3 id="TCAugmentationManager.AddAllAugs"><a class="headerlink" href="#TCAugmentationManager.AddAllAugs" title="Permanent link">AddAllAugs</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int augIndex;<br><br><br>&#9;// Loop through all the augmentation classes and create<br>&#9;// any augs that don't exist.  Then set them all to the <br>&#9;// maximum level.<br><br>&#9;for(augIndex=0; augIndex<arrayCount(augClassesODX); augIndex++)<br>&#9;{<br>&#9;&#9;if (augClasses[augIndex] != None)<br>&#9;&#9;&#9;GivePlayerAugmentation(augClassesODX[augIndex]);<br>&#9;}<br><br></div>
<h3 id="TCAugmentationManager.CreateAugmentations"><a class="headerlink" href="#TCAugmentationManager.CreateAugmentations" title="Permanent link">CreateAugmentations</a> (DeusExPlayer newPlayer)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int augIndex;<br>&#9;local Augmentation anAug;<br>&#9;local Augmentation lastAug;<br><br><br>&#9;FirstAug = None;<br>&#9;LastAug  = None;<br><br>&#9;player = newPlayer;<br><br>&#9;for(augIndex=0; augIndex<arrayCount(augClassesODX); augIndex++)<br>&#9;{<br>&#9;&#9;if (augClassesODX[augIndex] != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;anAug = Spawn(augClassesODX[augIndex], Self);<br>&#9;&#9;&#9;anAug.Player = player;<br><br>&#9;&#9;&#9;// Manage our linked list<br>&#9;&#9;&#9;if (anAug != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (FirstAug == None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;FirstAug = anAug;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;LastAug.next = anAug;<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;LastAug  = anAug;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCAugmentationManager.FindAugmentation"><a class="headerlink" href="#TCAugmentationManager.FindAugmentation" title="Permanent link">FindAugmentation</a> (Class<Augmentation> findClass) -> Augmentation</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Augmentation anAug, currentAug;<br><br><br>&#9;anAug = FirstAug;<br>&#9;while(anAug != None)<br>&#9;{<br>        currentAug = anAug;<br><br>        if(currentAug.Owner != None && currentAug.Owner.isA('Augmentation'))<br>            currentAug = Augmentation(currentAug.Owner);<br>        <br>&#9;&#9;if(currentAug.Class == findClass)<br>        {<br>            anAug = currentAug;<br>&#9;&#9;&#9;break;<br>        }<br><br>&#9;&#9;anAug = anAug.next;<br>&#9;}<br><br>&#9;return anAug;<br><br></div>
<h3 id="TCAugmentationManager.GetClassLevel"><a class="headerlink" href="#TCAugmentationManager.GetClassLevel" title="Permanent link">GetClassLevel</a> (class<Augmentation> augClass) -> int</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>  if(Player != None && Player.PlayerReplicationInfo != None)<br>    if(Player.IsInState('Spectating'))<br>      if(augClass == Class'DeusEx.AugRadarTrans')<br>        return 3;<br><br>  return Super.GetClassLevel(augClass);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCAutoTurret.uc" title="Permanent link"><h2 id="TCAutoTurret.uc">TCAutoTurret.uc (extends AutoTurret)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool bDisb;<br>var() int TurretHealth;<br>var string TeamString;<br>var AutoTurretGun gun;<br>var() localized String titleString;		// So we can name specific turrets in multiplayer<br>var() bool bTrackPawnsOnly;<br>var() bool bTrackPlayersOnly;<br>var() bool bActive;<br>var() int maxRange;<br>var() float fireRate;<br>var() float gunAccuracy;<br>var() int gunDamage;<br>var() int ammoAmount;<br>var Actor curTarget;<br>var Actor prevTarget;         // target we had last tick.<br>var Pawn safeTarget;          // in multiplayer, this actor is strictly off-limits<br>var float fireTimer;<br>var bool bConfused;				// used when hit by EMP<br>var float confusionTimer;		// how long until turret resumes normal operation<br>var float confusionDuration;	// how long does an EMP hit last?<br>var Actor LastTarget;			// what was our last target?<br>var float pitchLimit;			// what's the maximum pitch?<br>var Rotator origRot;			// original rotation<br>var bool bPreAlarmActiveState;	// was I previously awake or not?<br>var bool bDisabled;				// have I been hacked or shut down by computers?<br>var float TargetRefreshTime;      // used for multiplayer to reduce rate of checking for targets.<br>var() float Thick;<br>var() float PawnThick;<br>var() int team;						// Keep track of team the turrets on<br>var int mpTurretDamage;			// Settings for multiplayer<br>var int mpTurretRange;<br>var bool bComputerReset;			// Keep track of if computer has been reset so we avoid all actors checks<br>var bool bSwitching;<br>var float SwitchTime, beepTime;<br>var Pawn savedTarget;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">TurretHealth=100<br>titleString="AutoTurret"<br>bTrackPlayersOnly=True<br>bActive=True<br>maxRange=512<br>fireRate=0.25<br>gunAccuracy=0.50<br>gunDamage=5<br>AmmoAmount=1000<br>confusionDuration=120.00<br>pitchLimit=11000.00<br>Team=500<br>mpTurretDamage=20<br>mpTurretRange=1024<br>HitPoints=100<br>minDamageThreshold=100<br>bHighlight=False<br>ItemName="Turret Base"<br>bPushable=False<br>Physics=0<br>Mesh=LodMesh'DeusExDeco.AutoTurretBase'<br>SoundRadius=48<br>SoundVolume=192<br>AmbientSound=Sound'DeusExSounds.Generic.AutoTurretHum'<br>CollisionRadius=14.00<br>CollisionHeight=20.20<br>Mass=50.00<br>Buoyancy=10.00<br>bVisionImportant=True</div>
<h3 id="TCAutoTurret.AcquireMultiplayerTarget"><a class="headerlink" href="#TCAutoTurret.AcquireMultiplayerTarget" title="Permanent link">AcquireMultiplayerTarget</a> -> Actor</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn apawn;<br>&#9;local DeusExPlayer aplayer;<br>&#9;local Vector dist;<br>&#9;local Actor noActor;<br><br><br>&#9;if ( bSwitching )<br>&#9;{<br>&#9;&#9;noActor = None;<br>&#9;&#9;return noActor;<br>&#9;}<br><br>&#9;apawn = gun.Level.PawnList;<br><br>&#9;while ( apawn != None )<br>&#9;{<br>&#9;&#9;//if (apawn.bDetectable && !apawn.bIgnore && apawn.IsA('DeusExPlayer'))<br>&#9;&#9;if (apawn.bDetectable && !apawn.bIgnore)<br>&#9;&#9;{<br>&#9;&#9;&#9;aplayer = DeusExPlayer(apawn);<br><br>&#9;&#9;&#9;dist = apawn.Location - gun.Location; //apawn was aplayer<br><br>&#9;&#9;&#9;if ( VSize(dist) < maxRange )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// Only players we can see<br>&#9;&#9;&#9;&#9;if ( apawn.FastTrace( apawn.Location, gun.Location ))//apawn was aplayer<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(!PSOwners(apawn))<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(curTarget == None)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;curTarget = apawn;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;break;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;apawn = apawn.nextPawn;<br>&#9;}<br>&#9;return curtarget;<br><br></div>
<h3 id="TCAutoTurret.Destroyed"><a class="headerlink" href="#TCAutoTurret.Destroyed" title="Permanent link">Destroyed</a></h3>

<h3 id="TCAutoTurret.Fire"><a class="headerlink" href="#TCAutoTurret.Fire" title="Permanent link">Fire</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Vector HitLocation, HitNormal, StartTrace, EndTrace, X, Y, Z;<br>&#9;local Rotator rot;<br>&#9;local Actor hit;<br>&#9;local ShellCasing shell;<br>&#9;local Spark spark;<br>&#9;local Pawn attacker;<br><br><br>&#9;if (!gun.IsAnimating())<br>&#9;&#9;gun.LoopAnim('Fire');<br><br>&#9;// CNN - give turrets infinite ammo<br>//&#9;if (ammoAmount > 0)<br>//&#9;{<br>//&#9;&#9;ammoAmount--;<br>&#9;&#9;GetAxes(gun.Rotation, X, Y, Z);<br>&#9;&#9;StartTrace = gun.Location;<br>&#9;&#9;EndTrace = StartTrace + gunAccuracy * (FRand()-0.5)*Y*1000 + gunAccuracy * (FRand()-0.5)*Z*1000 ;<br>&#9;&#9;EndTrace += 10000 * X;<br>&#9;&#9;hit = Trace(HitLocation, HitNormal, EndTrace, StartTrace, True);<br><br>&#9;&#9;// spawn some effects<br>      if ((DeusExMPGame(Level.Game) != None) && (!DeusExMPGame(Level.Game).bSpawnEffects))<br>      {<br>         shell = None;<br>      }<br>      else<br>      {<br>         shell = Spawn(class'ShellCasing',,, gun.Location);<br>      }<br>&#9;&#9;if (shell != None)<br>&#9;&#9;&#9;shell.Velocity = Vector(gun.Rotation - rot(0,16384,0)) * 100 + VRand() * 30;<br><br>&#9;&#9;MakeNoise(1.0);<br>&#9;&#9;PlaySound(sound'PistolFire', SLOT_None);<br>&#9;&#9;AISendEvent('LoudNoise', EAITYPE_Audio);<br><br>&#9;&#9;// muzzle flash<br>&#9;&#9;gun.LightType = LT_Steady;<br>&#9;&#9;gun.MultiSkins[2] = Texture'FlatFXTex34';<br>&#9;&#9;SetTimer(0.1, False);<br><br>&#9;&#9;// randomly draw a tracer<br>&#9;&#9;if (FRand() < 0.5)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (VSize(HitLocation - StartTrace) > 250)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;rot = Rotator(EndTrace - StartTrace);<br>&#9;&#9;&#9;&#9;Spawn(class'Tracer',,, StartTrace + 96 * Vector(rot), rot);<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br><br>&#9;&#9;if (hit != None)<br>&#9;&#9;{<br>         if ((DeusExMPGame(Level.Game) != None) && (!DeusExMPGame(Level.Game).bSpawnEffects))<br>         {<br>            spark = None;<br>         }<br>         else<br>         {<br>            // spawn a little spark and make a ricochet sound if we hit something<br>            spark = spawn(class'Spark',,,HitLocation+HitNormal, Rotator(HitNormal));<br>         }<br><br>&#9;&#9;&#9;if (spark != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;spark.DrawScale = 0.05;<br>&#9;&#9;&#9;&#9;PlayHitSound(spark, hit);<br>&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;attacker = None;<br>&#9;&#9;&#9;if ((curTarget == hit) && !curTarget.IsA('PlayerPawn'))<br>&#9;&#9;&#9;&#9;attacker = GetPlayerPawn();<br>         if (Level.NetMode != NM_Standalone)<br>            attacker = safetarget;<br>&#9;&#9;&#9;if ( hit.IsA('DeusExPlayer') && ( Level.NetMode != NM_Standalone ))<br>&#9;&#9;&#9;&#9;DeusExPlayer(hit).myTurretKiller = Self;<br>&#9;&#9;&#9;hit.TakeDamage(gunDamage, attacker, HitLocation, 1000.0*X, 'AutoShot');<br><br>&#9;&#9;&#9;if (hit.IsA('Pawn') && !hit.IsA('Robot'))<br>&#9;&#9;&#9;&#9;SpawnBlood(HitLocation, HitNormal);<br>&#9;&#9;&#9;else if ((hit == Level) || hit.IsA('Mover'))<br>&#9;&#9;&#9;&#9;SpawnEffects(HitLocation, HitNormal, hit);<br>&#9;&#9;}<br>//&#9;<br></div>
<h3 id="TCAutoTurret.GetWallMaterial"><a class="headerlink" href="#TCAutoTurret.GetWallMaterial" title="Permanent link">GetWallMaterial</a> (vector HitLocation, vector HitNormal) -> name</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector EndTrace, StartTrace;<br>&#9;local actor newtarget;<br>&#9;local int texFlags;<br>&#9;local name texName, texGroup;<br><br><br>&#9;StartTrace = HitLocation + HitNormal*16;&#9;&#9;// make sure we start far enough out<br>&#9;EndTrace = HitLocation - HitNormal;<br><br>&#9;foreach TraceTexture(class'Actor', newtarget, texName, texGroup, texFlags, StartTrace, HitNormal, EndTrace)<br>&#9;&#9;if ((newtarget == Level) || newtarget.IsA('Mover'))<br>&#9;&#9;&#9;break;<br><br>&#9;return texGroup;<br><br></div>
<h3 id="TCAutoTurret.PSOwners"><a class="headerlink" href="#TCAutoTurret.PSOwners" title="Permanent link">PSOwners</a> (Pawn P) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(DeusExPlayer(P) != None)<br>&#9;{<br>&#9;&#9;if(P == safeTarget || P == Owner)<br>&#9;&#9;&#9;return True;<br>&#9;&#9;<br>&#9;&#9;if(TCDeathmatch(level.game) != None)<br>&#9;&#9;&#9;if(TCPRI(TCPlayer(Owner).PlayerReplicationInfo).TeamNamePRI != "" && TCPRI(TCPlayer(P).PlayerReplicationInfo).TeamNamePRI != "")<br>&#9;&#9;&#9;&#9;if(TCPRI(TCPlayer(Owner).PlayerReplicationInfo).TeamNamePRI == TCPRI(TCPlayer(P).PlayerReplicationInfo).TeamNamePRI)<br>&#9;&#9;&#9;&#9;&#9;return true;<br>&#9;&#9;<br>&#9;&#9;if(TCDeathmatch(level.game) != None)<br>&#9;&#9;&#9;if(TeamString != "" && TCPRI(TCPlayer(P).PlayerReplicationInfo).TeamNamePRI != "")<br>&#9;&#9;&#9;&#9;if(TeamString == TCPRI(TCPlayer(P).PlayerReplicationInfo).TeamNamePRI)<br>&#9;&#9;&#9;&#9;&#9;return true;<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;if(TCTeam(level.game) != None && TCPlayer(P).PlayerReplicationInfo.Team == TCPlayer(safeTarget).PlayerReplicationInfo.Team)<br>&#9;&#9;&#9;return true;<br>&#9;}<br>&#9;&#9;<br>&#9;return False;<br><br></div>
<h3 id="TCAutoTurret.PlayHitSound"><a class="headerlink" href="#TCAutoTurret.PlayHitSound" title="Permanent link">PlayHitSound</a> (actor destActor, Actor hitActor)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float rnd;<br>&#9;local sound snd;<br><br><br>&#9;rnd = FRand();<br><br>&#9;if (rnd < 0.25)<br>&#9;&#9;snd = sound'Ricochet1';<br>&#9;else if (rnd < 0.5)<br>&#9;&#9;snd = sound'Ricochet2';<br>&#9;else if (rnd < 0.75)<br>&#9;&#9;snd = sound'Ricochet3';<br>&#9;else<br>&#9;&#9;snd = sound'Ricochet4';<br><br>&#9;// play a different ricochet sound if the object isn't damaged by normal bullets<br>&#9;if (hitActor != None) <br>&#9;{<br>&#9;&#9;if (hitActor.IsA('DeusExDecoration') && (DeusExDecoration(hitActor).minDamageThreshold > 10))<br>&#9;&#9;&#9;snd = sound'ArmorRicochet';<br>&#9;&#9;else if (hitActor.IsA('Robot'))<br>&#9;&#9;&#9;snd = sound'ArmorRicochet';<br>&#9;}<br><br>&#9;if (destActor != None)<br>&#9;&#9;destActor.PlaySound(snd, SLOT_None,,, 1024, 1.1 - 0.2*FRand());<br><br></div>
<h3 id="TCAutoTurret.PostBeginPlay"><a class="headerlink" href="#TCAutoTurret.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   safeTarget = None;<br>   prevTarget = None;<br>   TargetRefreshTime = 0;<br>   Super.PostBeginPlay();<br><br></div>
<h3 id="TCAutoTurret.PreBeginPlay"><a class="headerlink" href="#TCAutoTurret.PreBeginPlay" title="Permanent link">PreBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Vector v1, v2;<br>&#9;local class<AutoTurretGun> gunClass;<br>&#9;local Rotator rot;<br><br><br>&#9;Super.PreBeginPlay();<br><br>&#9;if (IsA('AutoTurretSmall'))<br>&#9;&#9;gunClass = class'AutoTurretGunSmall';<br>&#9;else<br>&#9;&#9;gunClass = class'AutoTurretGun';<br><br>&#9;rot = Rotation;<br>&#9;rot.Pitch = 0;<br>&#9;rot.Roll = 0;<br>&#9;origRot = rot;<br>&#9;gun = Spawn(gunClass, Self,, Location, rot);<br>&#9;if (gun != None)<br>&#9;{<br>&#9;&#9;v1.X = 0;<br>&#9;&#9;v1.Y = 0;<br>&#9;&#9;v1.Z = CollisionHeight + gun.Default.CollisionHeight;<br>&#9;&#9;v2 = v1 >> Rotation;<br>&#9;&#9;v2 += Location;<br>&#9;&#9;gun.bHackable=False;<br>&#9;&#9;gun.SetLocation(v2);<br>&#9;&#9;gun.SetBase(Self);<br>&#9;}<br><br>&#9;// set up the alarm listeners<br>&#9;//AISetEventCallback('Alarm', 'AlarmHeard');<br><br>&#9;maxRange = mpTurretRange;<br>&#9;gunDamage = mpTurretDamage;<br>&#9;bDisabled = !bActive;<br><br></div>
<h3 id="TCAutoTurret.SpawnBlood"><a class="headerlink" href="#TCAutoTurret.SpawnBlood" title="Permanent link">SpawnBlood</a> (Vector HitLocation, Vector HitNormal)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local rotator rot;<br><br><br>&#9;rot = Rotator(Location - HitLocation);<br>&#9;rot.Pitch = 0;<br>&#9;rot.Roll = 0;<br><br>   if ((DeusExMPGame(Level.Game) != None) && (!DeusExMPGame(Level.Game).bSpawnEffects))<br>      return;<br><br>&#9;spawn(class'BloodSpurt',,,HitLocation+HitNormal, rot);<br>&#9;spawn(class'BloodDrop',,,HitLocation+HitNormal);<br>&#9;if (FRand() < 0.5)<br>&#9;&#9;spawn(class'BloodDrop',,,HitLocation+HitNormal);<br><br></div>
<h3 id="TCAutoTurret.SpawnEffects"><a class="headerlink" href="#TCAutoTurret.SpawnEffects" title="Permanent link">SpawnEffects</a> (Vector HitLocation, Vector HitNormal, Actor Other)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local SmokeTrail puff;<br>&#9;local int i;<br>&#9;local BulletHole hole;<br>&#9;local Rotator rot;<br><br><br>   if ((DeusExMPGame(Level.Game) != None) && (!DeusExMPGame(Level.Game).bSpawnEffects))<br>      return;<br><br>   if (FRand() < 0.5)<br>&#9;{<br>&#9;&#9;puff = spawn(class'SmokeTrail',,,HitLocation+HitNormal, Rotator(HitNormal));<br>&#9;&#9;if (puff != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;puff.DrawScale *= 0.3;<br>&#9;&#9;&#9;puff.OrigScale = puff.DrawScale;<br>&#9;&#9;&#9;puff.LifeSpan = 0.25;<br>&#9;&#9;&#9;puff.OrigLifeSpan = puff.LifeSpan;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if (!Other.IsA('BreakableGlass'))<br>&#9;&#9;for (i=0; i<2; i++)<br>&#9;&#9;&#9;if (FRand() < 0.8)<br>&#9;&#9;&#9;&#9;spawn(class'Rockchip',,,HitLocation+HitNormal);<br><br>&#9;hole = spawn(class'BulletHole', Other,, HitLocation, Rotator(HitNormal));<br><br>&#9;// should we crack glass?<br>&#9;if (GetWallMaterial(HitLocation, HitNormal) == 'Glass')<br>&#9;{<br>&#9;&#9;if (FRand() < 0.5)<br>&#9;&#9;&#9;hole.Texture = Texture'FlatFXTex29';<br>&#9;&#9;else<br>&#9;&#9;&#9;hole.Texture = Texture'FlatFXTex30';<br><br>&#9;&#9;hole.DrawScale = 0.1;<br>&#9;&#9;hole.ReattachDecal();<br>&#9;}<br><br></div>
<h3 id="TCAutoTurret.TakeDamage"><a class="headerlink" href="#TCAutoTurret.TakeDamage" title="Permanent link">TakeDamage</a> (int Damage, Pawn EventInstigator, vector HitLocation, vector Momentum, name DamageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Human dxp;<br>&#9;local float mindmg;<br><br><br>&#9;&#9;if (DamageType == 'EMP')<br>&#9;&#9;{<br>&#9;&#9;&#9;return; //Nulled function, IMMUNE TO EMP.<br>&#9;&#9;}<br><br>&#9;&#9;TurretHealth -= Damage; //Edited this in to avoid some things.<br><br>&#9;&#9;if(bDisb == False)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TurretHealth <= 0)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;<br></div>
<h3 id="TCAutoTurret.Tick"><a class="headerlink" href="#TCAutoTurret.Tick" title="Permanent link">Tick</a> (float deltaTime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn pawn;<br>&#9;local ScriptedPawn sp;<br>&#9;local DeusExDecoration deco;<br>&#9;local float near;<br>&#9;local Rotator destRot;<br>&#9;local bool bSwitched;<br><br><br>&#9;Super.Tick(deltaTime);<br><br>&#9;bSwitched = False;<br><br>&#9;if ( bSwitching )<br>&#9;{<br>&#9;&#9;UpdateSwitch();<br>&#9;&#9;return;<br>&#9;}<br><br>&#9;if (bActive && !bDisabled)<br>&#9;{<br>&#9;&#9;curTarget = None;<br><br>&#9;&#9;if ( !bConfused )<br>&#9;&#9;{<br>&#9;&#9;&#9;if (TargetRefreshTime < 0)<br>&#9;&#9;&#9;TargetRefreshTime = 0;<br>         <br>&#9;&#9;&#9;TargetRefreshTime = TargetRefreshTime + deltaTime;<br><br>&#9;&#9;&#9;if (TargetRefreshTime >= 0.3)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TargetRefreshTime = 0;<br>&#9;&#9;&#9;&#9;curTarget = AcquireMultiplayerTarget();<br><br>//&#9;&#9;&#9;&#9;if ( curTarget == None )<br>//&#9;&#9;&#9;&#9;PlaySound(Sound'TurretUnlocked', SLOT_Interact, 1.0,, maxRange );<br>//&#9;&#9;&#9;&#9;prevtarget = curtarget;&#9;&#9;<br>&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;foreach gun.VisibleActors(class'Pawn', pawn, maxRange, gun.Location)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if (pawn.bDetectable && !pawn.bIgnore)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;if(curTarget == None)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;if(!PSOwners(Pawn))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;curTarget = Pawn;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;break;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;// if we have a target, rotate to face it<br>&#9;&#9;&#9;if (curTarget != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;destRot = Rotator(curTarget.Location - gun.Location);<br>&#9;&#9;&#9;&#9;gun.DesiredRotation = destRot;<br>&#9;&#9;&#9;&#9;near = pitchLimit / 2;<br>&#9;&#9;&#9;&#9;gun.DesiredRotation.Pitch = FClamp(gun.DesiredRotation.Pitch, origRot.Pitch - near, origRot.Pitch + near);<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;gun.DesiredRotation = origRot;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;if ( !bConfused )<br>&#9;&#9;&#9;gun.DesiredRotation = origRot;<br>&#9;}<br><br>&#9;near = (Abs(gun.Rotation.Pitch - gun.DesiredRotation.Pitch)) % 65536;<br>&#9;near += (Abs(gun.Rotation.Yaw - gun.DesiredRotation.Yaw)) % 65536;<br><br>&#9;if (bActive && !bDisabled)<br>&#9;{<br>&#9;&#9;// play an alert sound and light up<br>&#9;&#9;if ((curTarget != None) && (curTarget != LastTarget))<br>&#9;&#9;&#9;PlaySound(Sound'Beep6',,,, 1280);<br><br>&#9;&#9;// if we're aiming close enough to our target<br>&#9;&#9;if (curTarget != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;gun.MultiSkins[1] = Texture'RedLightTex';<br>&#9;&#9;&#9;if ((near < 4096) && (((Abs(gun.Rotation.Pitch - destRot.Pitch)) % 65536) < 8192))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (fireTimer > fireRate)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Fire();<br>&#9;&#9;&#9;&#9;&#9;fireTimer = 0;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;if (gun.IsAnimating())<br>&#9;&#9;&#9;&#9;gun.PlayAnim('Still', 10.0, 0.001);<br><br>&#9;&#9;&#9;if (bConfused)<br>&#9;&#9;&#9;&#9;gun.MultiSkins[1] = Texture'YellowLightTex';<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;gun.MultiSkins[1] = Texture'GreenLightTex';<br>&#9;&#9;}<br><br>&#9;&#9;fireTimer += deltaTime;<br>&#9;&#9;LastTarget = curTarget;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;if (gun.IsAnimating())<br>&#9;&#9;&#9;gun.PlayAnim('Still', 10.0, 0.001);<br>&#9;&#9;gun.MultiSkins[1] = None;<br>&#9;}<br><br>&#9;// make noise if we're still moving<br>&#9;if (near > 64)<br>&#9;{<br>&#9;&#9;gun.AmbientSound = Sound'AutoTurretMove';<br>&#9;&#9;if (bConfused)<br>&#9;&#9;&#9;gun.SoundPitch = 128;<br>&#9;&#9;else<br>&#9;&#9;&#9;gun.SoundPitch = 64;<br>&#9;}<br>&#9;else<br>&#9;&#9;gun.AmbientSound = None;<br><br></div>
<h3 id="TCAutoTurret.Timer"><a class="headerlink" href="#TCAutoTurret.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;gun.LightType = LT_None;<br>&#9;gun.MultiSkins[2] = None;<br><br></div>
<h3 id="TCAutoTurret.UpdateSwitch"><a class="headerlink" href="#TCAutoTurret.UpdateSwitch" title="Permanent link">UpdateSwitch</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if ( Level.Timeseconds > SwitchTime )<br>&#9;{<br>&#9;&#9;bSwitching = False;<br>&#9;&#9;//safeTarget = savedTarget;<br>&#9;&#9;SwitchTime = 0;<br>&#9;&#9;beepTime = 0;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;if ( Level.Timeseconds > beepTime )<br>&#9;&#9;{<br>&#9;&#9;&#9;PlaySound(Sound'TurretSwitch', SLOT_Interact, 1.0,, maxRange );<br>&#9;&#9;&#9;beepTime = Level.Timeseconds + 0.75;<br>&#9;&#9;}<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCComputerSecurity.uc" title="Permanent link"><h2 id="TCComputerSecurity.uc">TCComputerSecurity.uc (extends Computersecurity)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var() localized string	titleString;<br>var() name				cameraTag;<br>var() name				turretTag;<br>var() name				doorTag;<br>var() localized sViewInfo Views[3];<br>var int team;<br>var string TeamName;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">TeamName=""<br>Team=-1<br>Physics=PHYS_None<br>terminalType=Class'NetworkTerminalSecurity'<br>lockoutDelay=120.00<br>UserList=(accountNumber="SECURITY",PIN="SECURITY",balance=1918989824),<br>ItemName="Security Computer Terminal"<br>Physics=0<br>Mesh=LodMesh'DeusExDeco.ComputerSecurity'<br>SoundRadius=8<br>SoundVolume=255<br>SoundPitch=96<br>AmbientSound=Sound'DeusExSounds.Generic.SecurityL'<br>CollisionRadius=11.59<br>CollisionHeight=10.10<br>bCollideWorld=False<br>BindName="ComputerSecurity"</div>
<h3 id="TCComputerSecurity.AdditionalActivation"><a class="headerlink" href="#TCComputerSecurity.AdditionalActivation" title="Permanent link">AdditionalActivation</a> (DeusExPlayer ActivatingPlayer)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   if (Level.NetMode != NM_Standalone)<br>      SetControlledObjectOwners(ActivatingPlayer);<br>   <br>   Super.AdditionalDeactivation(ActivatingPlayer);<br><br></div>
<h3 id="TCComputerSecurity.AdditionalDeactivation"><a class="headerlink" href="#TCComputerSecurity.AdditionalDeactivation" title="Permanent link">AdditionalDeactivation</a> (DeusExPlayer DeactivatingPlayer)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   if (Level.NetMode != NM_Standalone)<br>      SetControlledObjectOwners(None);<br>   <br>   Super.AdditionalDeactivation(DeactivatingPlayer);<br><br></div>
<h3 id="TCComputerSecurity.SetControlledObjectOwners"><a class="headerlink" href="#TCComputerSecurity.SetControlledObjectOwners" title="Permanent link">SetControlledObjectOwners</a> (DeusExPlayer PlayerWhoOwns)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int cameraIndex;<br>&#9;local name tag;<br>&#9;local SecurityCamera camera;<br>&#9;local TCAutoTurret turret;<br>&#9;local DeusExMover door;<br><br><br>&#9;for (cameraIndex=0; cameraIndex<ArrayCount(Views); cameraIndex++)<br>&#9;{<br>&#9;&#9;tag = Views[cameraIndex].cameraTag;<br>&#9;&#9;if (tag != '')<br>&#9;&#9;&#9;foreach AllActors(class'SecurityCamera', camera, tag)<br>&#9;&#9;&#9;&#9;camera.SetOwner(PlayerWhoOwns);<br><br>&#9;&#9;tag = Views[cameraIndex].turretTag;<br>&#9;&#9;if (tag != '')<br>&#9;&#9;&#9;foreach AllActors(class'TCAutoTurret', turret, tag)<br>            {<br>&#9;&#9;&#9;&#9;if(TCDeathmatch(level.game) != None)<br>&#9;&#9;&#9;&#9;&#9;turret.teamstring = TCPRI(PlayerWhoOwns.PlayerReplicationInfo).TeamNamePRI;<br>&#9;&#9;&#9;&#9;turret.SetOwner(PlayerWhoOwns);<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;tag = Views[cameraIndex].doorTag;<br>&#9;&#9;if (tag != '')<br>&#9;&#9;&#9;foreach AllActors(class'DeusExMover', door, tag)<br>&#9;&#9;&#9;&#9;door.SetOwner(PlayerWhoOwns);<br><br>&#9;}<br><br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCControls.uc" title="Permanent link"><h2 id="TCControls.uc">TCControls.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var config bool bFixMovers;<br>var config bool bChatCommands;<br>var config bool bSpawnReplacer;<br>var config string SummonPassword;<br>var config string ModPassword;<br>var config string SuperAdminPassword;<br>var config string _OwnerPassword;<br>var config bool bAllowModSummon;<br>var config bool bAllowModCheats;<br>var config bool bAllowModGhost;<br>var config bool bAllowModCommand;<br>var config bool bAllowModMutator;<br>var config bool bKillMessages;<br>var config bool bTCFriendlyFire;<br>var config bool bFixLevel;<br>var config bool bAllowTPAsk;<br>var config bool bDisableFallDamage;<br>var config bool bAllowSkins;<br>var config bool bAllowRemote;<br>var config bool bShowAdmins, bShowMods, bShowStatus;<br>var config bool bAllowSelfHUD;<br>var config bool bWordFilter;<br>var config string ConsoleName;<br>var config texture ScoreboardTex;<br>var config string ScoreboardExtStr;<br>var config bool bAllowRobotSkins, bAllowAnimalSkins;<br>var config bool bDrawServerInfo;<br>var config float GlobalLogTimeout;<br>var config int NotificationTimer;<br>var config bool bAllowStorage;<br>var config bool bNotifWhisper;<br>var config int MantleBio, DoubleJumpBio, WallJumpBio;<br>var config bool bCanSpectateEnemy;<br>var config float WhisperRadius;<br>var config bool bShowHitz;<br>var config string SilentAdminPassword;<br>var config bool bShowExtraHud;<br>var config int ffReduction;<br>var config bool bAllowMark;<br>var config bool bGameTypeVote;<br>var config bool bMapvote;<br>var config bool bAllowSuicide2;<br>var config bool bAllowKillphrase;<br>var config float KillphraseRadius;<br>var config bool bNewMainMenu, bSpectatorStart;<br>var config string Trgt;<br>var config string Rep;<br>var config WordFilter Filters[10];<br>var config bool bPunishDT;<br>var config int DTLimit;<br>var config int AutoIdleTime, AutoIdleKickTime;<br>var config bool bAllowMPInv;<br>var config bool bEnforceFPS;<br>var config int FPSCap;<br>var config int MantleVelocity;<br>var config float WallJumpVelocity, DoubleJumpMultiplier, WallJumpZVelocity;<br>var config int WallJumpCheck;<br>var config bool bDoubleJump;<br>var config bool bMantling;<br>var config bool bWallJumping;<br>var config int FallDamageReduction;<br>var config bool bNameDisplay;<br>var config EHudStyle HUDType;<br>var(Arsenal) config string DemoteWeapons[5];<br>var(Arsenal) config name SaveSpawnWeapons[5];<br>var(Arsenal) config bool bHealTimer;<br>var(Arsenal) config int HealTimer;<br>var(KillConfirmed) config int KCLifespan;<br>var(KillConfirmed) config int BaseScoreMultiplier;<br>var(Juggernaut) config int StreakLimit;<br>var(Sharpshooter) config string SSWeapons[30];<br>var(Sharpshooter) config float SSRoundDelay;<br>var(Sharpshooter) config bool bMethodOne;<br>var bool _bFixedLevel;<br>var int TeamCount;<br>var ODXVoteActor Votez;<br>var OSDActor OSDA;<br>var(OpenDX) config bool bHasUpdate;<br>var string netversion;<br>var string GSCData;<br>var float TimeUntilUpdate;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bShowExtraHud=True<br>StreakLimit=5<br>BaseScoreMultiplier=1<br>KCLifespan=360<br>bPunishDT=True<br>DTLimit=125<br>GlobalLogTimeout=15<br>NotificationTimer=20<br>bDrawServerInfo=True;<br>WallJumpCheck=55<br>bShowAdmins=True<br>bShowMods=True<br>bShowStatus=True<br>DoubleJumpMultiplier=0.795<br>WallJumpVelocity=1500<br>WallJumpZVelocity=100<br>MantleVelocity=300<br>bChatCommands=True<br>bTCFriendlyFire=False<br>bSpawnReplacer=True<br>bHealTimer=True<br>HealTimer=30<br>bAllowModSummon=True<br>bAllowModCheats=True<br>bAllowModGhost=True<br>bAllowModCommand=True<br>bAllowModMutator=True<br>bKillMessages=True<br>ModPassword="defo"<br>RemoteRole=0<br>bHidden=True<br>bMapvote=true<br>ScoreboardTex=Texture'Nano_SFX_A'<br>bFixMovers=True<br>bAllowKillphrase=True<br>//TextLogo=Texture'DeusExSmallIcon'</div>
<h3 id="TCControls.CancelSD"><a class="headerlink" href="#TCControls.CancelSD" title="Permanent link">CancelSD</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(OSDA != None)<br>&#9;{<br>&#9;&#9;OSDA.Destroy();<br>&#9;&#9;OSDA = None;<br>&#9;&#9;Print("Shutdown aborted.");<br>&#9;}<br>&#9;else<br>&#9;Log("Abort shutdown error - OSDA not found.");<br><br></div>
<h3 id="TCControls.Changes"><a class="headerlink" href="#TCControls.Changes" title="Permanent link">Changes</a> -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return changestr;<br><br></div>
<h3 id="TCControls.CheckSD"><a class="headerlink" href="#TCControls.CheckSD" title="Permanent link">CheckSD</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(OSDA != None)<br>&#9;{<br>&#9;&#9;if(OSDA.bSDIn)<br>&#9;&#9;&#9;Print("Shutdown in "$OSDA.ShutdownInTime - OSDA.SDInCur$" minutes scheduled.");<br>&#9;&#9;<br>&#9;&#9;if(OSDA.bSDAt)<br>&#9;&#9;&#9;Print("Shutdown at "$OSDA.ShutdownAtTime$" scheduled.");<br>&#9;}<br>&#9;else<br>&#9;Print("No shutdown is scheduled.");<br><br></div>
<h3 id="TCControls.GetVer"><a class="headerlink" href="#TCControls.GetVer" title="Permanent link">GetVer</a> -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string str;<br><br>&#9;<br>&#9;if(TCTeam(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "OpenDX Team Deathmatch";&#9;<br>&#9;}<br>&#9;if(TCDeathMatch(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "OpenDX Deathmatch";<br>&#9;}&#9;&#9;&#9;<br>&#9;<br>&#9;if(OpenDXDevTest(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "OpenDX Development Test";&#9;&#9;<br>&#9;}<br>&#9;if(OpenDX(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "OpenDX Testing";&#9;&#9;<br>&#9;}<br>&#9;if(Juggernaut(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Juggernaut";&#9;&#9;<br>&#9;}<br>&#9;if(Infection(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Infection";&#9;&#9;<br>&#9;}<br>&#9;if(JuggernautDM(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Juggernaut DM";&#9;&#9;<br>&#9;}<br>&#9;if(KillConfirmed(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Kill Confirmed (Skullz or it didn't happen)";&#9;&#9;<br>&#9;}<br>&#9;if(KillConfirmedTeam(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Kill Confirmed Team (Skullz or it didn't happen)";&#9;&#9;<br>&#9;}<br>&#9;if(Playground(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Playground";<br>&#9;}<br>&#9;if(GunGame(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Arsenal/GunGame";&#9;<br>&#9;}<br>&#9;if(Sharpshooter(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Sharpshooter";&#9;<br>&#9;}<br>&#9;if(Toybox(level.game) != None)<br>&#9;{<br>&#9;&#9;str = "Toybox";&#9;<br>&#9;}<br>&#9;str = str$" Version "$version;<br>&#9;return str;<br><br></div>
<h3 id="TCControls.PostBeginPlay"><a class="headerlink" href="#TCControls.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Mover m;<br><br>&#9;<br>&#9;//Fix for encroach glitch<br>&#9;if(bFixMovers)<br>&#9;&#9;foreach AllActors(class'Mover', m)<br>&#9;&#9;&#9;if(m.MoverEncroachType != ME_CrushWhenEncroach)<br>&#9;&#9;&#9;&#9;m.MoverEncroachType = ME_IgnoreWhenEncroach;<br>&#9;&#9;<br>&#9;SetTimer(5,True);<br>&#9;Votez = Spawn(class'ODXVoteActor');<br>&#9;UpdateCheck();<br>&#9;TimeUntilUpdate=RandRange(10,15);<br><br></div>
<h3 id="TCControls.Print"><a class="headerlink" href="#TCControls.Print" title="Permanent link">Print</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local MessagingSpectator MS;<br>&#9;local bool bFoundAthena;<br><br>&#9;<br>&#9;//Adding custom command to allow ODX to control Athena without making the mods dependant<br>&#9;foreach AllActors(class'MessagingSpectator',MS)<br>&#9;&#9;if(MS.IsA('AthenaSpectator')) <br>&#9;&#9;{<br>&#9;&#9;&#9;MS.ClientMessage("SAY "$str);<br>&#9;&#9;&#9;bFoundAthena=True;<br>&#9;&#9;}<br>&#9;<br>&#9;if(!bFoundAthena)&#9;<br>&#9;{<br>&#9;&#9;BroadcastMessage(str);<br>&#9;&#9;Log(str, 'OpenDX');<br>&#9;}<br><br></div>
<h3 id="TCControls.SetShutdownIn"><a class="headerlink" href="#TCControls.SetShutdownIn" title="Permanent link">SetShutdownIn</a> (int mins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(OSDA == None)<br>&#9;{<br>&#9;&#9;OSDA = Spawn(class'OSDActor');<br>&#9;&#9;OSDA.ShutdownInTime = mins;<br>&#9;&#9;OSDA.bSDIn=True;<br>&#9;&#9;OSDA.SetTimer(60,True);<br>&#9;&#9;OSDA.SetSDStr("Shuts down in "$OSDA.ShutdownInTime);<br>&#9;&#9;Print("WARNING Server will be closing in "$mins$" minutes. This is an automated process.");<br>&#9;}<br>&#9;else<br>&#9;Log("Scheduled shutdown error - OSDA already exists.");<br><br></div>
<h3 id="TCControls.SetShutdownTime"><a class="headerlink" href="#TCControls.SetShutdownTime" title="Permanent link">SetShutdownTime</a> (int Hours, int Mins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string modmins;<br><br>&#9;<br>&#9;if(OSDA == None)<br>&#9;{<br>&#9;&#9;if(mins < 10)<br>&#9;&#9;&#9;modmins = "0"$mins;<br>&#9;&#9;else modmins = string(mins);<br>&#9;&#9;<br>&#9;&#9;OSDA = Spawn(class'OSDActor');<br>&#9;&#9;OSDA.ShutdownAtTime = string(hours) $ ":" $ modmins;<br>&#9;&#9;OSDA.SDAMins = mins;<br>&#9;&#9;OSDA.SDAHours = hours;<br>&#9;&#9;OSDA.bSDAt=True;<br>&#9;&#9;OSDA.SetTimer(60,True);<br>&#9;&#9;OSDA.SetSDStr("Shuts down at "$OSDA.ShutdownAtTime);<br>&#9;&#9;Print("WARNING Server will be closing at "$string(hours) $ ":" $ modmins$". This is an automated process.");<br>&#9;}<br>&#9;else<br>&#9;Log("Scheduled shutdown error - OSDA already exists.");<br><br></div>
<h3 id="TCControls.Timer"><a class="headerlink" href="#TCControls.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br>&#9;local string datastring, DataStore, corever, netmsg;<br><br><br>&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;{<br>&#9;&#9;/*if(TCP.bTCDebug)<br>&#9;&#9;{<br>&#9;&#9;&#9;TCP.UpdateDebug("[DEBUG] Warns="$TCP.CheatWarns$"  Frame_info="$TCP.FrameCounter@TCP.FPS);<br>&#9;&#9;}*/<br>&#9;&#9;if(TCPRI(TCP.PlayerReplicationInfo).DT > DTLimit && bPunishDT && !TCPRI(TCP.PlayerReplicationInfo).bDead)<br>&#9;&#9;{<br>&#9;&#9;&#9;Log(TCP.PlayerReplicationInfo.PlayerName$" potential cheating.",'OpenDX');<br>&#9;&#9;&#9;TCP.CheatWarns++;<br>&#9;&#9;&#9;if(TCP.CheatWarns == 1)<br>&#9;&#9;&#9;&#9;TCP.ClientMessage("|P2Warning: The system has detected your game running faster than normal. Please disable any external tools that modify the game speed.");<br>&#9;&#9;&#9;else if(TCP.CheatWarns == 2)<br>&#9;&#9;&#9;&#9;TCP.ClientMessage("|P2Second Warning: The system has detected your game running faster than normal. Please disable any external tools that modify the game speed.");<br>&#9;&#9;&#9;else if(TCP.CheatWarns == 3)<br>&#9;&#9;&#9;&#9;TCP.ClientMessage("|P2Final Warning: The system has detected your game running faster than normal. Please disable any external tools that modify the game speed.");<br>&#9;&#9;&#9;else if(TCP.CheatWarns == 4)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Print(TCP.PlayerReplicationInfo.PlayerName$" was removed from the game. (Reason: Game speed modification)");<br>&#9;&#9;&#9;&#9;TCP.Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;TCP.NetUpdatePing();<br>&#9;}<br><br></div>
<h3 id="TCControls.UpdateCheck"><a class="headerlink" href="#TCControls.UpdateCheck" title="Permanent link">UpdateCheck</a></h3>

<h3 id="TCControls._CodeBase"><a class="headerlink" href="#TCControls._CodeBase" title="Permanent link">_CodeBase</a> -> CodeBase</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return Spawn(class'CodeBase');<br><br></div>
<h3 id="TCControls.serverBan"><a class="headerlink" href="#TCControls.serverBan" title="Permanent link">serverBan</a> (int playerID)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br>&#9;local string IP, playerName;<br>&#9;local int i;<br><br><br>    for(P=Level.PawnList; P!=None; P=P.NextPawn)<br>    {<br>        if(TCPlayer(P) != None && P.PlayerReplicationInfo != None && NetConnection(PlayerPawn(P).Player) != None)<br>        {<br>            if(P.PlayerReplicationInfo.PlayerID == playerID)<br>            {<br>                IP = TCPlayer(P).GetPlayerNetworkAddress();<br>                if(Level.Game.CheckIPPolicy(IP))<br>                {<br>                    playerName = P.PlayerReplicationInfo.PlayerName@"("$P.PlayerReplicationInfo.PlayerID$")";<br>                    IP = Left(IP, InStr(IP, ":"));<br>                    Log("Adding IP Ban for: "$IP, 'ANNA');<br>                    for(i=0; i<50; i++)<br>                        if(Level.Game.IPPolicies[i] == "")<br>                            break;<br><br>                    if(i < 50)<br>                        Level.Game.IPPolicies[i] = "DENY,"$IP;<br><br>                    Level.Game.SaveConfig();<br>                }<br>                P.Destroy();<br>                Print(playername@"has been banned via console.");<br>                return;<br>            }<br>        }<br>    }<br>    Log("Could not find a player with ID"@playerID, 'OpenDX');<br><br></div>
<h3 id="TCControls.serverKick"><a class="headerlink" href="#TCControls.serverKick" title="Permanent link">serverKick</a> (int playerID)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br>&#9;local string playerName;<br><br><br>    for(P=Level.PawnList; P!=None; P=P.NextPawn)<br>    {<br>        if(TCPlayer(P) != None && P.PlayerReplicationInfo != None)<br>        {<br>            if(P.PlayerReplicationInfo.PlayerID == playerID)<br>            {<br>                playerName = P.PlayerReplicationInfo.PlayerName@"("$P.PlayerReplicationInfo.PlayerID$")";<br>                TCPlayer(P).V7D = true;<br>                P.Destroy();<br>                Print(playername@"has been kicked via console.");<br>                //Log(playername@"has been kicked via console.", 'OpenDX');<br>                return;<br>            }<br>        }<br>    }<br>    Log("Could not find a player with ID"@playerID, 'OpenDX');<br><br></div>
<h3 id="TCControls.serverPlayerList"><a class="headerlink" href="#TCControls.serverPlayerList" title="Permanent link">serverPlayerList</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br>&#9;local string IP;<br><br><br>    Log("&#9;ID&#9;&#9;PLAYERNAME&#9;&#9;IP-ADDRESS", 'OpenDX');<br>    for(P=Level.PawnList; P!=None; P=P.NextPawn)<br>    {<br>        if(TCPlayer(P) != None && P.PlayerReplicationInfo != None)<br>        {<br>            IP = TCPlayer(P).GetPlayerNetworkAddress();<br>            IP = Left(IP, InStr(IP, ":"));<br>            Log("&#9;"$P.PlayerReplicationInfo.PlayerID$"&#9;&#9;"$P.PlayerReplicationInfo.PlayerName$"&#9;&#9;"$IP, 'OpenDX');<br>        }<br>    }<br><br></div>
<h3 id="TCControls.serverSay2"><a class="headerlink" href="#TCControls.serverSay2" title="Permanent link">serverSay2</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br>&#9;local string playerName;<br>&#9;local MessagingSpectator MS;<br><br>&#9;<br>    for(P=Level.PawnList; P!=None; P=P.NextPawn)<br>    {<br>        if(TCPlayer(P) != None && P.PlayerReplicationInfo != None)<br>        {<br>            P.ClientMessage(ConsoleName$"[CONSOLE]: "$str,'say');<br>        }<br>    }<br>    <br>    foreach AllActors(class'MessagingSpectator',MS)<br>&#9;&#9;if(MS.IsA('AthenaSpectator')) //Spoofing telnet to allow console to control athena, cos too lazy to create a new override<br>&#9;&#9;&#9;MS.ClientMessage(ConsoleName$"[TELNET]: "$str,'Say');<br>&#9;&#9;else<br>&#9;&#9;&#9;MS.ClientMessage(ConsoleName$"[CONSOLE]: "$str,'Say');<br><br></div>
<h3 id="TCControls.serverSay3"><a class="headerlink" href="#TCControls.serverSay3" title="Permanent link">serverSay3</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br>&#9;local string playerName, msg;<br>&#9;local MessagingSpectator MS;<br><br><br>&#9;playername = Left(str, InStr(str,">>"));<br>&#9;msg = Right(str, Len(str)-instr(str,">>")-Len(">>"));<br>    for(P=Level.PawnList; P!=None; P=P.NextPawn)<br>    {<br>        if(TCPlayer(P) != None && P.PlayerReplicationInfo != None)<br>        {<br>            P.ClientMessage(playername$"[CONSOLE]: "$msg,'say');<br>        }<br>    }<br>    <br>    foreach AllActors(class'MessagingSpectator',MS)<br>&#9;&#9;if(MS.IsA('AthenaSpectator')) //Spoofing telnet to allow console to control athena, cos too lazy to create a new override<br>&#9;&#9;&#9;MS.ClientMessage(playername$"[TELNET]: "$msg,'Say');<br>&#9;&#9;else<br>&#9;&#9;&#9;MS.ClientMessage(playername$"[CONSOLE]: "$msg,'Say');<br><br></div>
<h3 id="TCControls.serverSayAthena"><a class="headerlink" href="#TCControls.serverSayAthena" title="Permanent link">serverSayAthena</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Print(str);<br><br></div>
<h3 id="TCControls.tick"><a class="headerlink" href="#TCControls.tick" title="Permanent link">tick</a> (float deltatime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local carcass c;<br>&#9;local DeusExLevelInfo Z52;<br><br>&#9;<br>&#9;if (!_bFixedLevel && bFixLevel)<br>&#9;{<br>&#9;&#9;foreach AllActors(Class'DeusExLevelInfo',Z52)<br>&#9;&#9;{<br>&#9;&#9;&#9;Z52.missionNumber=7;<br>&#9;&#9;&#9;Z52.bMultiPlayerMap=True;<br>&#9;&#9;&#9;Z52.ConversationPackage=Class'DeusExLevelInfo'.Default.ConversationPackage;<br>&#9;&#9;}<br>&#9;&#9;_bFixedLevel = true;<br>&#9;}<br>&#9;<br>&#9;if(GunGame(Level.Game) != None || Sharpshooter(Level.Game) != None)<br>&#9;{<br>&#9;&#9;&#9;foreach allactors (class'Carcass', c)<br>&#9;&#9;&#9;if (c != None)<br>&#9;&#9;&#9;&#9;c.Destroy();<br>&#9;}<br><br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCDeathmatch.uc" title="Permanent link"><h2 id="TCDeathmatch.uc">TCDeathmatch.uc (extends MTLDeathmatch)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool bDisableDefaultScoring; //Manual override for custom gametype extentions that use their own scoring system<br>var bool bGameOver;<br>var string GTName;<br>var TCControls Settings;<br>var class<pawn> PSkin[12];<br>var int ReplMaxPlayers;<br>var bool bShowAdmins, bShowMods, bShowStatus, bShowFPS, bShowPing, bDrawServerInfo, bShowDT;<br>var texture ScoreboardTex;<br>var string ScoreboardExtStr;<br>var bool bToybox;<br>var string SDStr;<br>var bool bSDFound;<br>var string rVer;<br>var string ConnectSoundStr[8], VictorySoundStr[5], FailSoundStr[5];<br>var bool bSpectatorStart;<br>var string GameType;<br>var string ServerName;<br>var int NumPlayers;<br>var int MaxPlayers;<br>var string Map;<br>var ScoreBoardInfo SBInfo;<br>var bool bAdmin;<br>var int ping;<br>var bool bIsSpectator;<br>var int SpectatedPlayerID;<br>var string SpectatedPlayerName;<br>var bool bModerator;<br>var bool bKaiz0r;<br>var bool bSuperAdmin;<br>var bool bServerOwner;<br>var bool bMuted;<br>var bool bBot;<br>var string Status;<br>var bool bAway;<br>var int FPS;<br>var int DT;<br>var bool bSilentAdmin;<br>var bool bRealPlayer;<br>var bool bDead;<br>var bool bJuggernaut;<br>var bool bInfected;<br>var bool bDXMPPlayer; //Added exception for Cozmo bots support<br>var bool bAthena; //Added exception for Athena<br>var bool bIRC; //Added exception for IRC<br>var PlayerInfo PInfo[32]; //Array of the additional structure for 32 players</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">GTName="Deathmatch"<br>PSKIN(0)=class'DeusEx.BumMale'<br>PSKIN(1)=class'DeusEx.Doctor'<br>PSKIN(2)=class'DeusEx.BumMale2'<br>PSKIN(3)=class'DeusEx.TracerTong'<br>PSKIN(4)=class'DeusEx.WaltonSimons'<br>PSKIN(5)=class'DeusEx.JosephManderley'<br>PSKIN(6)=class'DeusEx.Smuggler'<br>PSKIN(7)=class'DeusEx.ThugMale'<br>PSKIN(8)=class'DeusEx.MPNSF'<br>PSKIN(9)=class'DeusEx.MPUnatco'<br>PSKIN(10)=class'DeusEx.MPMJ12'<br>VictoryConString1="|P1Hit the kill limit! (|P3 "<br>VictoryConString2=" |P1)"<br>TimeLimitString1="|P1Score the most frags! (|P3 "<br>TimeLimitString2=" |P1)"<br>PlayerString="Players"<br>StreakString="Streak"<br>NewMapSecondsString=" seconds to map transition."<br>WonMatchString=" has won!"<br>MatchEnd2String=" blasting "<br>TeamNsfString="NSF"<br>TeamUnatcoString="Unatco"<br>TeamDrawString="Everyone failed!"<br>DefaultPlayerClass=Class'TCMJ12'<br>GameReplicationInfoClass=Class'TCGRI'</div>
<h3 id="TCDeathmatch.AbortSD"><a class="headerlink" href="#TCDeathmatch.AbortSD" title="Permanent link">AbortSD</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.CancelSD();<br><br></div>
<h3 id="TCDeathmatch.ArePlayersAllied"><a class="headerlink" href="#TCDeathmatch.ArePlayersAllied" title="Permanent link">ArePlayersAllied</a> (DeusExPlayer FirstPlayer, DeusExPlayer SecondPlayer) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   if ((FirstPlayer == None) || (SecondPlayer == None))<br>      return false;<br>   return (TCPlayer(FirstPlayer).TeamName ~= TCPlayer(SecondPlayer).TeamName);<br><br></div>
<h3 id="TCDeathmatch.ArePlayersAllied2"><a class="headerlink" href="#TCDeathmatch.ArePlayersAllied2" title="Permanent link">ArePlayersAllied2</a> (TCPlayer FirstPlayer, TCPlayer SecondPlayer) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   if ((FirstPlayer == None) || (SecondPlayer == None))<br>      return false;<br>   if(TCPRI(FirstPlayer.PlayerReplicationInfo).TeamNamePRI == "" <br>   || TCPRI(SecondPlayer.PlayerReplicationInfo).TeamNamePRI == "")<br>&#9;&#9;return false;<br>&#9;&#9;<br>   return (TCPRI(FirstPlayer.PlayerReplicationInfo).TeamNamePRI == TCPRI(SecondPlayer.PlayerReplicationInfo).TeamNamePRI);<br><br></div>
<h3 id="TCDeathmatch.Athena"><a class="headerlink" href="#TCDeathmatch.Athena" title="Permanent link">Athena</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.ServerSayAthena(str);<br><br></div>
<h3 id="TCDeathmatch.CUpdate"><a class="headerlink" href="#TCDeathmatch.CUpdate" title="Permanent link">CUpdate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.UpdateCheck();<br><br></div>
<h3 id="TCDeathmatch.CheckSD"><a class="headerlink" href="#TCDeathmatch.CheckSD" title="Permanent link">CheckSD</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.CheckSD();<br><br></div>
<h3 id="TCDeathmatch.CheckVictoryConditions"><a class="headerlink" href="#TCDeathmatch.CheckVictoryConditions" title="Permanent link">CheckVictoryConditions</a> (Pawn Killer, Pawn Killee, String Method) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn winner;<br>&#9;local Pawn P;<br>&#9;local int r;<br><br>&#9;if ( VictoryCondition ~= "Frags" )<br>&#9;{<br>&#9;&#9;GetWinningPlayer( winner );<br><br>&#9;&#9;if ( winner != None )<br>&#9;&#9;{<br>&#9;&#9;&#9;if (( winner.PlayerReplicationInfo.Score == ScoreToWin-(ScoreToWin/5)) && ( ScoreToWin >= 10 ))<br>&#9;&#9;&#9;&#9;NotifyGameStatus( ScoreToWin/5, winner.PlayerReplicationInfo.PlayerName, False, False );<br>&#9;&#9;&#9;else if (( winner.PlayerReplicationInfo.Score == (ScoreToWin - 1) ) && (ScoreTowin >= 2 ))<br>&#9;&#9;&#9;&#9;NotifyGameStatus( 1, winner.PlayerReplicationInfo.PlayerName, False, True );<br><br>&#9;&#9;&#9;if ( winner.PlayerReplicationInfo.Score >= ScoreToWin )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;foreach AllActors(class'Pawn', P)<br>&#9;&#9;&#9;&#9;&#9;if(TCPlayer(P) != None && P != Winner)<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(P).PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission02.ConAudioMission02_991", class'Sound', true)),SLOT_Talk);<br>&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(TCPlayer(winner) != P)&#9;&#9;<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;r = Rand(1);<br>&#9;&#9;&#9;&#9;&#9;&#9;if(r == 0)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(winner).PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_528", class'Sound', true)),SLOT_Talk);<br>&#9;&#9;&#9;&#9;&#9;&#9;else if(r == 1)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(winner).PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission02.ConAudioMission02_973", class'Sound', true)),SLOT_Talk);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;PlayerHasWon( winner, Killer, Killee, Method );<br>&#9;&#9;&#9;&#9;return True;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;else if ( VictoryCondition ~= "Time" )<br>&#9;{<br>&#9;&#9;timeLimit = float(ScoreToWin)*60.0;<br><br>&#9;&#9;if (( Level.Timeseconds >= timeLimit-NotifyMinutes*60.0 ) && ( timeLimit > NotifyMinutes*60.0*2.0 ))<br>&#9;&#9;{<br>&#9;&#9;&#9;GetWinningPlayer( winner );<br>&#9;&#9;&#9;if ( winner != none) NotifyGameStatus( int(NotifyMinutes), winner.PlayerReplicationInfo.PlayerName, True, True );<br>&#9;&#9;&#9;else NotifyGameStatus( int(NotifyMinutes), "", True, True );<br>&#9;&#9;}<br><br>&#9;&#9;if ( Level.Timeseconds >= timeLimit )<br>&#9;&#9;{<br>&#9;&#9;&#9;GetWinningPlayer( winner );<br><br>&#9;&#9;&#9;&#9;foreach AllActors(class'Pawn', P)<br>&#9;&#9;&#9;&#9;&#9;if(TCPlayer(P) != None && P != Winner)<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(P).PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission02.ConAudioMission02_991", class'Sound', True)),SLOT_Talk);&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(TCPlayer(winner) != None)&#9;&#9;<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;r = Rand(1);<br>&#9;&#9;&#9;&#9;&#9;&#9;if(r == 0)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(winner).PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_528", class'Sound', True)),SLOT_Talk);<br>&#9;&#9;&#9;&#9;&#9;&#9;else if(r == 1)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(winner).PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission02.ConAudioMission02_973", class'Sound', True)),SLOT_Talk);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;PlayerHasWon( winner, Killer, Killee, Method );<br>&#9;&#9;&#9;return true;<br>&#9;&#9;}<br>&#9;}<br>&#9;return false;<br><br></div>
<h3 id="TCDeathmatch.ComposeTime"><a class="headerlink" href="#TCDeathmatch.ComposeTime" title="Permanent link">ComposeTime</a> -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string ltime, iDay, iDOW, iMonthName, iYear;<br>&#9;local int iMonth;<br><br>    iDay=string(Level.Day);<br>    iYear=string(Level.Year);<br>    iMonth=level.Month;<br>    <br>    // st check<br>&#9;if(Right(iDay, 1) == "1")<br>&#9;&#9;iDay = iDay$"st";<br>&#9;// nd check<br>&#9;if(Right(iDay, 1) == "2")<br>&#9;&#9;iDay = iDay$"nd";<br>&#9;// rd check<br>&#9;if(Right(iDay, 1) == "3")<br>&#9;&#9;iDay = iDay$"rd";<br>&#9;// th check<br><br>&#9;if(Right(iDay, 1) == "4"<br>&#9;|| Right(iDay, 1) == "5"<br>&#9;|| Right(iDay, 1) == "6"<br>&#9;|| Right(iDay, 1) == "7"<br>&#9;|| Right(iDay, 1) == "8"<br>&#9;|| Right(iDay, 1) == "9"<br>&#9;|| Right(iDay, 1) == "0")<br>&#9;&#9;iDay = iDay$"th";<br>&#9;&#9;<br>&#9;//Wordify months<br>    if(iMonth == 1)<br>&#9;&#9;iMonthName = "Jan";<br>&#9;if(iMonth == 2)<br>&#9;&#9;iMonthName = "Feb";<br>&#9;if(iMonth == 3)<br>&#9;&#9;iMonthName = "March";<br>&#9;if(iMonth == 4)<br>&#9;&#9;iMonthName = "April";<br>&#9;if(iMonth == 5)<br>&#9;&#9;iMonthName = "May";<br>&#9;if(iMonth == 6)<br>&#9;&#9;iMonthName = "June";<br>&#9;if(iMonth == 7)<br>&#9;&#9;iMonthName = "July";<br>&#9;if(iMonth == 8)<br>&#9;&#9;iMonthName = "August";<br>&#9;if(iMonth == 9)<br>&#9;&#9;iMonthName = "Sept";<br>&#9;if(iMonth == 10)<br>&#9;&#9;iMonthName = "Oct";<br>&#9;if(iMonth == 11)<br>&#9;&#9;iMonthName = "Nov";<br>&#9;if(iMonth == 12)<br>&#9;&#9;iMonthName = "Dec";<br>&#9;&#9;<br>&#9;if (Level.Hour < 10) ltime = "0";<br>&#9;else ltime = "";<br><br>&#9;ltime = ltime $ string(Level.Hour) $ ":";<br><br>&#9;if (Level.Minute < 10) ltime = ltime $ "0";<br>&#9;<br>&#9;ltime = ltime $ string(Level.Minute);<br>&#9;<br>&#9;ltime = ltime $ " - "$iDay$" of "$iMonthName$" "$iYear;<br>&#9;<br>&#9;//NEW - Appending Scheduled Shutdown info<br>&#9;if(bSDFound)<br>&#9;&#9;ltime = ltime $ " |P2["$SDStr$"]";<br>&#9;return ltime;<br><br></div>
<h3 id="TCDeathmatch.ConsoleKick"><a class="headerlink" href="#TCDeathmatch.ConsoleKick" title="Permanent link">ConsoleKick</a> (int playerID)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.serverKick(playerID);<br><br></div>
<h3 id="TCDeathmatch.ConsoleKickBan"><a class="headerlink" href="#TCDeathmatch.ConsoleKickBan" title="Permanent link">ConsoleKickBan</a> (int playerID)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.serverBan(playerID);<br><br></div>
<h3 id="TCDeathmatch.ConsolePlayerList"><a class="headerlink" href="#TCDeathmatch.ConsolePlayerList" title="Permanent link">ConsolePlayerList</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.serverPlayerList();<br><br></div>
<h3 id="TCDeathmatch.DrawHeaders"><a class="headerlink" href="#TCDeathmatch.DrawHeaders" title="Permanent link">DrawHeaders</a> (GC gc, float screenWidth, float yoffset)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float x, w, h;<br><br><br>     gc.GetTextExtent( 0, w, h, PlayerString );<br>     x = screenWidth * PlayerX;<br>     gc.DrawText( x, yoffset, w, h, PlayerString );<br><br>     gc.GetTextExtent(0, w, h, "ID");<br>     x = screenWidth * IDX;<br>     gc.DrawText(x, yOffset, w, h, "ID");<br><br>     gc.GetTextExtent( 0, w, h, KillsString );<br>     x = screenWidth * KillsX;<br>     gc.DrawText( x, yoffset, w, h, KillsString );<br><br>     gc.GetTextExtent( 0, w, h, DeathsString );<br>     x = screenWidth * DeathsX;<br>     gc.DrawText( x, yoffset, w, h, DeathsString );<br><br>     gc.GetTextExtent( 0, w, h, StreakString );<br>     x = screenWidth * StreakX;<br>     gc.DrawText( x, yoffset, w, h, StreakString );<br><br>    gc.GetTextExtent(0, w, h, "FPS");<br>    x = screenWidth * FPSX;<br>    gc.DrawText(x, yoffset, w, h, "FPS");<br>    gc.GetTextExtent(0, w, h, "Game Speed");<br>    x = screenWidth * DTX;<br>    gc.DrawText(x, yoffset, w, h, "Game Speed");<br>    gc.GetTextExtent(0, w, h, "Ping");<br>    x = screenWidth * PINGX;<br>    gc.DrawText(x, yoffset, w, h, "Ping");<br>    <br>     gc.SetTileColorRGB(255,255,255);<br>     gc.DrawBox( IDX * screenWidth, yoffset+h, (x + w)-(IDX*screenWidth), 1, 0, 0, 1, ScoreboardTex);<br><br></div>
<h3 id="TCDeathmatch.DrawNameAndScore"><a class="headerlink" href="#TCDeathmatch.DrawNameAndScore" title="Permanent link">DrawNameAndScore</a> (GC gc, ScoreElement se, float screenWidth, float yoffset)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float x, w, h, w2, xoffset, killcx, deathcx, streakcx;<br>&#9;local String str;<br><br><br>&#9;// Draw Name<br>&#9;str = se.PlayerName;<br>&#9;gc.GetTextExtent( 0, w, h, str );<br>&#9;x = screenWidth * PlayerX;<br>&#9;gc.DrawText( x, yoffset, w, h, str );<br><br>&#9;// Draw Kills<br>&#9;str = "00";<br>&#9;gc.GetTextExtent( 0, w, h, KillsString );<br>&#9;killcx = screenWidth * KillsX + w * 0.5;<br>&#9;gc.GetTextExtent( 0, w, h, str );<br>&#9;str = int(se.Score) $ "";<br>&#9;gc.GetTextExtent( 0, w2, h, str );<br>&#9;x = killcx + (w * 0.5) - w2;<br>&#9;gc.DrawText( x, yoffset, w2, h, str );<br><br>&#9;// Draw Deaths<br>&#9;gc.GetTextExtent( 0, w2, h, DeathsString );<br>&#9;deathcx = screenWidth * DeathsX + w2 * 0.5;<br>&#9;str = int(se.Deaths) $ "";<br>&#9;gc.GetTextExtent( 0, w2, h, str );<br>&#9;x = deathcx + (w * 0.5) - w2;<br>&#9;gc.DrawText( x, yoffset, w2, h, str );<br><br>&#9;// Draw Streak<br>&#9;gc.GetTextExtent( 0, w2, h, StreakString );<br>&#9;streakcx = screenWidth * StreakX + w2 * 0.5;<br>&#9;str = int(se.Streak) $ "";<br>&#9;gc.GetTextExtent( 0, w2, h, str );<br>&#9;x = streakcx + (w * 0.5) - w2;<br>&#9;gc.DrawText( x, yoffset, w2, h, str );<br><br></div>
<h3 id="TCDeathmatch.GameOver"><a class="headerlink" href="#TCDeathmatch.GameOver" title="Permanent link">GameOver</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   super.GameOver();<br><br></div>
<h3 id="TCDeathmatch.GetServerInfo"><a class="headerlink" href="#TCDeathmatch.GetServerInfo" title="Permanent link">GetServerInfo</a> -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return Level.Game.GameReplicationInfo.ServerName$" ("$Level.Game.GameReplicationInfo.NumPlayers$"/"$Level.Game.MaxPlayers$")";<br><br></div>
<h3 id="TCDeathmatch.Killed"><a class="headerlink" href="#TCDeathmatch.Killed" title="Permanent link">Killed</a> (pawn Killer, pawn Other, name damageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool NotifyDeath;<br>&#9;local DeusExPlayer otherPlayer;<br>&#9;local Pawn CurPawn;<br>&#9;local class<actor> checkClass;<br>&#9;local int i, randy, tauntchance;<br>&#9;local string randomkillstring;<br><br>&#9;<br>   if ( bFreezeScores )<br>      return;<br><br>&#9;NotifyDeath = False;<br><br>&#9;// Record the death no matter what, and reset the streak counter<br>&#9;if ( Other.bIsPlayer )<br>&#9;{<br>&#9;&#9;otherPlayer = DeusExPlayer(Other);<br>&#9;&#9;Other.PlayerReplicationInfo.Deaths += 1;<br>&#9;&#9;Other.PlayerReplicationInfo.Streak = 0;<br>&#9;&#9;// Penalize the player that commits suicide by losing a kill, but don't take them below zero<br>&#9;&#9;if ((Killer == Other) || (Killer == None))<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( Other.PlayerReplicationInfo.Score > 0 )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (( DeusExProjectile(otherPlayer.myProjKiller) != None ) && DeusExProjectile(otherPlayer.myProjKiller).bAggressiveExploded )<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;// Don't dock them if it nano exploded in their face<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;Other.PlayerReplicationInfo.Score -= 1;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;NotifyDeath = True;<br>&#9;}<br><br>   //both players...<br>   if ((Killer.bIsPlayer) && (Other.bIsPlayer))<br>   {<br> &#9;    //Add to console log as well (with pri id) so that kick/kickban can work better<br> &#9;    log(Killer.PlayerReplicationInfo.PlayerName$"("$Killer.PlayerReplicationInfo.PlayerID$") killed "$Other.PlayerReplicationInfo.PlayerName $ otherPlayer.killProfile.methodStr);<br>&#9;&#9;for (CurPawn = Level.PawnList; CurPawn != None; CurPawn = CurPawn.NextPawn)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ((CurPawn.IsA('DeusExPlayer')) && (DeusExPlayer(CurPawn).bAdmin) || (TCPlayer(CurPawn).bModerator))<br>&#9;&#9;&#9;&#9;DeusExPlayer(CurPawn).LocalLog(Killer.PlayerReplicationInfo.PlayerName$"("$Killer.PlayerReplicationInfo.PlayerID$") killed "$Other.PlayerReplicationInfo.PlayerName $ otherPlayer.killProfile.methodStr);<br>&#9;&#9;}<br>&#9;<br>&#9;if(Settings.bKillMessages)<br>&#9;{<br>&#9;&#9;if ( otherPlayer.killProfile.methodStr ~= "None" )<br>&#9;&#9;{<br>&#9;&#9;&#9;BroadcastMessage(Killer.PlayerReplicationInfo.PlayerName$" somehow killed "$Other.PlayerReplicationInfo.PlayerName$".",false,'DeathMessage');&#9;&#9;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;&#9;Randy = Rand(100);<br>&#9;&#9;&#9;&#9;if(Randy <= 20)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;randomkillstring = "murdered";<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if(Randy > 20 && Randy <= 40)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;randomkillstring = "rekked";<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if(Randy > 40 && Randy <= 60)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;randomkillstring = "destroyed";<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if(Randy > 60 && Randy <= 80)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;randomkillstring = "slaughtered";<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if(Randy > 80 && Randy <= 100)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;randomkillstring = "killed";<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;BroadcastMessage(Killer.PlayerReplicationInfo.PlayerName@randomkillstring@Other.PlayerReplicationInfo.PlayerName $ otherPlayer.killProfile.methodStr, false, 'DeathMessage');&#9;&#9;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;<br>&#9;}<br><br>&#9;if(!bDisableDefaultScoring)<br>&#9;{<br>&#9;&#9;if (Killer != Other)<br>&#9;&#9;{<br>&#9;&#9;&#9;&#9;// Grant the kill to the killer, and increase his streak<br>&#9;&#9;&#9;&#9;Killer.PlayerReplicationInfo.Score += 1;<br>&#9;&#9;&#9;&#9;Killer.PlayerReplicationInfo.Streak += 1;<br>&#9;&#9;&#9;&#9;Reward(Killer);<br><br>&#9;&#9;&#9;&#9;// Check for victory conditions and end the match if need be<br>&#9;&#9;&#9;&#9;&#9;if ( CheckVictoryConditions(Killer, Other, otherPlayer.killProfile.methodStr) )<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;  bFreezeScores = True;<br>&#9;&#9;&#9;&#9;&#9;  NotifyDeath = False;<br>&#9;&#9;&#9;&#9;&#9;} <br>&#9;&#9;}<br>&#9;&#9;if ( NotifyDeath )<br>&#9;&#9;&#9;HandleDeathNotification( Killer, Other );<br>&#9;}<br>   }<br>   else<br>   {<br>&#9;&#9;if (NotifyDeath)<br>&#9;&#9;&#9;HandleDeathNotification( Killer, Other );<br><br>      Super.Killed(Killer,Other,damageType);<br>   }<br><br></div>
<h3 id="TCDeathmatch.Login"><a class="headerlink" href="#TCDeathmatch.Login" title="Permanent link">Login</a> (string Portal, string URL, out string Error, Class<PlayerPawn> SpawnClass) -> PlayerPawn</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local MTLPlayer newPlayer;<br>&#9;local string classStr, purgedClassStr;<br>&#9;local int pkgLength;<br>&#9;local Pawn PawnLink;<br>&#9;local PlayerPawn TestPlayer;<br>&#9;local int j, p;<br><br>&#9;<br>    if((MaxPlayers > 0) && (NumPlayers >= MaxPlayers) )<br>    {<br>        Error = TooManyPlayers;<br>        return None;<br>    }<br><br>    SpawnClass = DefaultPlayerClass;<br>    classStr = ParseOption(URL,"Class");<br>    pkgLength = InStr(classStr,".");<br>    if(pkgLength != -1 )<br>    {<br>        purgedClassStr = Mid(classStr,pkgLength + 1);<br>        classStr = Left(classStr,pkgLength);<br>    }<br>    else<br>    {<br>        purgedClassStr = classStr;<br>        classStr="";<br>    }<br>    Log(classStr@purgedClassStr, 'Login');<br>    if((purgedClassStr ~= "MPNSF") || (purgedClassStr ~= "MTLNSF") )<br>        SpawnClass = class'TCNSF';<br>    else if((purgedClassStr ~= "MPUNATCO") || (purgedClassStr ~= "MTLUNATCO") )<br>        SpawnClass = class'TCUNATCO';<br>    else if((purgedClassStr ~= "MPMJ12") || (purgedClassStr ~= "MTLMJ12") )<br>        SpawnClass = class'TCMJ12';<br>    else if(purgedClassStr ~= "DXMPPlayer")<br>&#9;&#9;SpawnClass = class'TCNSF';<br>&#9;else<br>&#9;&#9;SpawnClass = class'TCMJ12';<br>&#9;&#9;<br>    ChangeOption(URL,"Class",string(SpawnClass));<br>        newPlayer = MTLPlayer(super(DeathMatchGame).Login(Portal,URL,Error,SpawnClass));<br>    if(newPlayer != None)<br>        newPlayer.V52(newPlayer.PlayerReplicationInfo.PlayerName);<br>&#9;&#9;<br>&#9;&#9;j=Rand(10);<br>&#9;&#9;newPlayer.Mesh = PSKIN[j].default.Mesh;<br>&#9;&#9;if(!bToybox)<br>&#9;&#9;&#9;newPlayer.DrawScale = PSKIN[j].default.DrawScale;<br>&#9;&#9;for (p = 0; p < 8; p++)<br>&#9;&#9;{<br>&#9;&#9;&#9;newPlayer.MultiSkins[p] = PSKIN[j].default.MultiSkins[p];<br>&#9;&#9;}<br>&#9;&#9;&#9;<br>    return newPlayer;<br><br></div>
<h3 id="TCDeathmatch.PlayEnterBarks"><a class="headerlink" href="#TCDeathmatch.PlayEnterBarks" title="Permanent link">PlayEnterBarks</a> (TCPlayer P)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int r;<br>&#9;local TCPlayer TCP;<br><br>&#9;r = Rand(7);<br>&#9;if(r == 0)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioAIBarks.ConAudioAIBarks_121", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 1)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioAIBarks.ConAudioAIBarks_155", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 2)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioAIBarks.ConAudioAIBarks_179", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 3)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_354", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 4)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_229", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 5)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_217", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 6)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_226", class'Sound', true)),SLOT_Talk);<br><br></div>
<h3 id="TCDeathmatch.PostBeginPlay"><a class="headerlink" href="#TCDeathmatch.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    super.PostBeginPlay();<br>    <br>     ReplMaxPlayers = MaxPlayers;<br>&#9;Settings = Spawn(class'TCControls', self);<br>&#9;bShowStatus = Settings.bShowStatus;<br>&#9;bShowAdmins = Settings.bShowAdmins;<br>&#9;bShowMods = Settings.bShowMods;<br>&#9;ScoreboardTex = Settings.ScoreboardTex;<br>&#9;ScoreboardExtStr = Settings.ScoreboardExtStr;<br>&#9;bDrawServerInfo = Settings.bDrawServerInfo;<br>&#9;bSpectatorStart = Settings.bSpectatorStart;<br>&#9;rVer = Settings.GetVer();<br>&#9;if(Settings.bSpawnReplacer)<br>&#9;&#9;CBPMutator(level.Game.BaseMutator).AddCBPMutator(Spawn(class'TCReplacer'));<br>&#9;<br>&#9;if(Settings.bMapvote)<br>&#9;&#9;Spawn(class'MVMutator');<br>&#9;&#9;&#9;<br>&#9;Level.Game.BaseMutator.AddMutator(Spawn(class'TCTeamManager'));&#9;<br>&#9;Level.Game.RegisterDamageMutator (Spawn(class'TCTeamManager'));&#9;<br><br></div>
<h3 id="TCDeathmatch.PostLogin"><a class="headerlink" href="#TCDeathmatch.PostLogin" title="Permanent link">PostLogin</a> (PlayerPawn Z5F)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer mmplayer;<br><br><br>    Super.PostLogin(Z5F);<br>&#9;mmplayer = TCPlayer(Z5F);<br>&#9;if (mmplayer != none)<br>&#9;{<br>&#9;    if ((mmplayer.PlayerReplicationInfo.Score == 0 && mmplayer.PlayerReplicationInfo.Deaths == 0<br>            && mmplayer.PlayerReplicationInfo.Streak == 0) && bSpectatorStart)<br>        {<br>            mmplayer.Spectate(1);<br>        }<br>        else mmplayer.FixInventory();<br>&#9;}<br><br></div>
<h3 id="TCDeathmatch.PreGameOver"><a class="headerlink" href="#TCDeathmatch.PreGameOver" title="Permanent link">PreGameOver</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer ssp;<br>&#9;local Augmentation a;<br>&#9;local DeusExWeapon dxw;<br><br> <br> Super.PreGameOver();<br> <br> bGameOver = True;<br> <br> foreach AllActors(class'TCPlayer',ssp)<br>    ssp.bGameOver = True;<br><br> foreach AllActors(class'Augmentation',a)<br>    {<br>&#9; if (a !=None)<br>&#9;  {<br>&#9;   a.Deactivate();<br>&#9;   a.Destroy();<br>&#9;  }<br>&#9;} <br>   <br><br></div>
<h3 id="TCDeathmatch.RefreshScoreArray"><a class="headerlink" href="#TCDeathmatch.RefreshScoreArray" title="Permanent link">RefreshScoreArray</a> (DeusExPlayer P)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br>&#9;local PlayerReplicationInfo lpri;<br>&#9;local TCPRI tPRI;<br>&#9;local PlayerPawn pp;<br>&#9;local string str;<br>&#9;local int bots;<br><br>&#9;if ( P == None )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;pp=P.GetPlayerPawn();<br>&#9;if ( (pp == None) || (pp.GameReplicationInfo == None) )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;scorePlayers=0;<br><br>&#9;for(i=0; i < 32; i++ )<br>&#9;{<br>&#9;&#9;lpri=pp.GameReplicationInfo.PRIArray[i];<br>&#9;&#9;if ( lpri != None )<br>&#9;&#9;{<br>&#9;&#9;&#9;scoreArray[scorePlayers].PlayerID=lpri.PlayerID;<br>&#9;&#9;&#9;scoreArray[scorePlayers].PlayerName = lpri.PlayerName;<br>&#9;&#9;&#9;tPRI = TCPRI(lpri);<br>&#9;&#9;&#9;if(tPRI != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(tPRI.TeamNamePRI != "")<br>&#9;&#9;&#9;&#9;&#9;scoreArray[scorePlayers].PlayerName=lpri.PlayerName$" |C616200#|P7"$tPRI.TeamNamePRI;<br>&#9;&#9;&#9;&#9;scoreArray[scorePlayers].Score=lpri.Score;<br>&#9;&#9;&#9;&#9;scoreArray[scorePlayers].Deaths=lpri.Deaths;<br>&#9;&#9;&#9;&#9;scoreArray[scorePlayers].Streak=lpri.Streak;<br>&#9;&#9;&#9;&#9;scoreArray[scorePlayers].Team=lpri.Team;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].ping = tPRI.pingPRI;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bMuted = tPRI.bMuted;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bDead = tPRI.bDead;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bAdmin = lpri.bAdmin;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bIsSpectator = lpri.bIsSpectator;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bModerator = tPRI.bModerator;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bSuperAdmin = tPRI.bSuperAdmin;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bServerOwner = tPRI.bServerOwner;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bKaiz0r = tPRI.bKaiz0r;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].Status = tPRI.Status;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bAway = tPRI.bAway;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].DT = tPRI.DT;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].FPS = tPRI.FPS;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bSilentAdmin = tPRI.bSilentAdmin;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bJuggernaut = tPRI.bJuggernaut;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bInfected = tPRI.bInfected;<br>&#9;&#9;&#9;&#9;if (lpri.bIsSpectator)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;PInfo[scorePlayers].SpectatedPlayerID = tPRI.SpectatingPlayerID;<br>&#9;&#9;&#9;&#9;&#9;PInfo[scorePlayers].bIsSpectator=True;<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bRealPlayer = True;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bIsSpectator=True;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bBot=True;<br>&#9;&#9;&#9;&#9;PInfo[scorePlayers].bRealPlayer=False;<br>&#9;&#9;&#9;&#9;bots++;<br>&#9;&#9;&#9;&#9;/*<br>&#9;&#9;&#9;&#9;if(InStr(caps(lpri.Owner.class), caps("AthenaSpectator")) != -1 || string(lpri.Owner.class) ~= "RCON.AthenaSpectator")<br>&#9;&#9;&#9;&#9;&#9;PInfo[scorePlayers].bAthena=True;<br><br>&#9;&#9;&#9;&#9;if(string(lpri.Owner.class) ~= "RCON.spec")<br>&#9;&#9;&#9;&#9;&#9;PInfo[scorePlayers].bIRC=True;<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(InStr(caps(lpri.Owner.class), caps("DXMPBot")) != -1 || string(lpri.Owner.class) ~= "DXMPBots.DXMPBot")<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;PInfo[scorePlayers].bIsSpectator=False;<br>&#9;&#9;&#9;&#9;&#9;PInfo[scorePlayers].bBot=False;<br>&#9;&#9;&#9;&#9;&#9;PInfo[scorePlayers].bRealPlayer=True;<br>&#9;&#9;&#9;&#9;&#9;bots--;<br>&#9;&#9;&#9;&#9;&#9;PInfo[scorePlayers].bDXMPPlayer=True;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;*/<br><br>&#9;&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;&#9;scorePlayers++;<br><br>&#9;&#9;&#9;if ( scorePlayers == ArrayCount(scoreArray) )<br>&#9;&#9;&#9;&#9;break;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;SetSpectatedPlayerNames();<br><br>&#9;SBInfo.ServerName = pp.GameReplicationInfo.ServerName;<br>&#9;SBInfo.GameType = rVer; //Settings.GetVer(); //GTName<br>&#9;SBInfo.NumPlayers = scorePlayers - bots;<br>&#9;SBInfo.MaxPlayers = ReplMaxPlayers;<br>&#9;str = string(self);<br>&#9;//SBInfo.Map = Left(str, InStr(str, "."));<br><br></div>
<h3 id="TCDeathmatch.SDIn"><a class="headerlink" href="#TCDeathmatch.SDIn" title="Permanent link">SDIn</a> (int mins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.SetShutdownIn(mins);<br><br></div>
<h3 id="TCDeathmatch.Say2"><a class="headerlink" href="#TCDeathmatch.Say2" title="Permanent link">Say2</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.serverSay2(str);<br><br></div>
<h3 id="TCDeathmatch.Say3"><a class="headerlink" href="#TCDeathmatch.Say3" title="Permanent link">Say3</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.serverSay3(str);<br><br></div>
<h3 id="TCDeathmatch.SetSD"><a class="headerlink" href="#TCDeathmatch.SetSD" title="Permanent link">SetSD</a> (int sdHours, int sdMins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.SetShutdownTime(sdHours, sdMins);<br><br></div>
<h3 id="TCDeathmatch.SetSpectatedPlayerNames"><a class="headerlink" href="#TCDeathmatch.SetSpectatedPlayerNames" title="Permanent link">SetSpectatedPlayerNames</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i, k;<br><br><br>&#9;for (i = 0; i < scorePlayers; i++)<br>&#9;{<br>&#9;&#9;if (PInfo[i].bIsSpectator && PInfo[i].SpectatedPlayerID != -1)<br>&#9;&#9;{<br>&#9;&#9;&#9;for (k = 0; k < scorePlayers; k++)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (scoreArray[k].PlayerID == PInfo[i].SpectatedPlayerID)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;PInfo[i].SpectatedPlayerName = scoreArray[k].PlayerName;<br>&#9;&#9;&#9;&#9;&#9;break;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCDeathmatch.ShowDMScoreboard"><a class="headerlink" href="#TCDeathmatch.ShowDMScoreboard" title="Permanent link">ShowDMScoreboard</a> (DeusExPlayer thisPlayer, GC gc, float screenWidth, float screenHeight)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float yoffset, ystart, xlen, ylen, w2;<br>&#9;local String str;<br>&#9;local bool bLocalPlayer;<br>&#9;local int i;<br>&#9;local float w, h;<br>&#9;local bool bBlock;<br><br>&#9;<br>     if ( !thisPlayer.PlayerIsClient() )<br>          return;<br><br>     gc.SetFont(Font'FontMenuSmall');<br><br>     RefreshScoreArray( thisPlayer );<br><br>     SortScores();<br><br>     str = "TEST";<br>     gc.GetTextExtent( 0, xlen, ylen, str );<br><br>     ystart = screenHeight * PlayerY;<br>     yoffset = ystart;<br><br>     gc.SetTextColor( WhiteColor );<br>     ShowVictoryConditions( gc, screenWidth, ystart, thisPlayer );<br>     yoffset += (ylen * 2.0);<br>     DrawHeaders( gc, screenWidth, yoffset );<br>     yoffset += (ylen * 1.5);<br><br>&#9; // draw non-spectators first<br>     for ( i = 0; i < scorePlayers; i++ )<br>     {<br>&#9;&#9;  if (PInfo[i].bIsSpectator) continue;<br>          bLocalPlayer = (scoreArray[i].PlayerID == thisPlayer.PlayerReplicationInfo.PlayerID);<br><br>          if ( bLocalPlayer )<br>               gc.SetTextColor( GoldColor );<br>          else<br>               gc.SetTextColor( WhiteColor );<br><br>          yoffset += ylen;<br>          DrawNameAndScore( gc, scoreArray[i], screenWidth, yoffset );<br><br>          gc.GetTextExtent(0, w, h, string(scoreArray[i].PlayerID));<br>          gc.DrawText(screenWidth * IDX, yOffset, w, h, string(scoreArray[i].PlayerID));<br>&#9;&#9;<br>&#9;&#9;gc.GetTextExtent(0, w2, h, "FPS");<br>        gc.GetTextExtent(0, w, h, string(Pinfo[i].fps));<br>        gc.DrawText(screenWidth * FPSX + (w2 - w) * 0.5, yOffset, w, h, string(PInfo[i].fps));<br><br>        // Draw DT<br>        gc.GetTextExtent(0, w2, h, "Game Speed");<br>        str = "";<br>        if(PInfo[i].dt != -1)<br>            str = string(PInfo[i].dt)$"%";<br><br>        gc.GetTextExtent(0, w, h, str);<br>        gc.DrawText(screenWidth * DTX + (w2 - w) * 0.5, yOffset, w, h, str);<br>    <br>        // Draw Ping<br>        gc.GetTextExtent(0, w2, h, "Ping");<br>        gc.GetTextExtent(0, w, h, string(PInfo[i].ping));<br>        gc.DrawText(screenWidth * PINGX + (w2 - w) * 0.5, yOffset, w, h, string(PInfo[i].ping));<br>          /*gc.GetTextExtent(0, w2, h, "Stats");<br>          str = "";<br>          if (bShowPing && !PInfo[i].bBot) str = string(PInfo[i].ping);<br>          if (bShowFPS && !PInfo[i].bBot) str = str$" ("$string(PInfo[i].FPS)$" FPS) ";<br>          if (bShowDT && !PInfo[i].bBot) str = str$" ("$string(PInfo[i].DT)$"% DT) ";<br>          gc.GetTextExtent(0, w, h, str);<br>          gc.DrawText(screenWidth * PINGX + (w2 - w) * 0.5, yOffset, w, h, str);*/<br><br>&#9;&#9;  str = "";<br>&#9;&#9;  if (PInfo[i].bJuggernaut) str = str$"|P2JUGGERNAUT ";<br>&#9;&#9;  if (PInfo[i].bInfected) str = str$"|P2INFECTED ";<br>&#9;&#9;  if (PInfo[i].bDead) str = str$"|P2{DEAD} ";<br>&#9;&#9;  if (PInfo[i].bMuted) str = str$"|P2[MUTED] ";<br>&#9;&#9;  if (PInfo[i].bKaiz0r) str = str$"|CAD000C[DEVELOPER] ";<br>&#9;&#9;  if (PInfo[i].bServerOwner) str = str$"|C67004F[SERVER OWNER] ";<br>&#9;&#9;  if (PInfo[i].bSuperAdmin) str = str$"|C0002A3[SUPER ADMIN] ";<br>&#9;&#9;  if (PInfo[i].bAway) str = str$"|C800080[AWAY] ";<br>          if (PInfo[i].bAdmin && bShowAdmins && !PInfo[i].bKaiz0r && !PInfo[i].bSuperAdmin && !PInfo[i].bServerOwner && !PInfo[i].bSilentAdmin) str = str$"|Cfff005[ADMIN] ";<br>          if (PInfo[i].bModerator && bShowMods) str = str$"|P3[MOD] ";<br>          if (PInfo[i].Status != "" && bShowStatus && PInfo[i].bRealPlayer) str = str$"|P7("$PInfo[i].Status$")";<br>&#9;&#9;  if (str != "")<br>&#9;&#9;  {<br>&#9;&#9;&#9;  gc.SetTextColorRGB(0, 255, 255);<br>              gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;&#9;  gc.DrawText(screenWidth * PlayerX + ADMINX_OFFSET, yOffset, w, h, str);<br>              gc.SetTextColor(RedColor);<br>&#9;&#9;  }<br>     }<br><br>&#9; // draw spectators<br>     for ( i = 0; i < scorePlayers; i++ )<br>     {<br>&#9;&#9;  if (!PInfo[i].bIsSpectator) continue;<br>          bLocalPlayer = (scoreArray[i].PlayerID == thisPlayer.PlayerReplicationInfo.PlayerID);<br>&#9;&#9;<br>          if ( bLocalPlayer )<br>               gc.SetTextColor( GoldColor );<br>          else<br>               gc.SetTextColor( WhiteColor );<br><br>          yoffset += ylen;<br>          //DrawNameAndScore( gc, scoreArray[i], screenWidth, yoffset );<br>&#9;&#9;  &#9;str = scoreArray[i].PlayerName;<br>&#9;&#9;&#9;gc.GetTextExtent( 0, w, h, str );<br>&#9;&#9;&#9;gc.DrawText( screenWidth * PlayerX, yoffset, w, h, str );<br><br>          gc.GetTextExtent(0, w, h, string(scoreArray[i].PlayerID));<br>          gc.DrawText(screenWidth * IDX, yOffset, w, h, string(scoreArray[i].PlayerID));<br><br>&#9;&#9;<br>&#9;&#9;gc.GetTextExtent(0, w2, h, "FPS");<br>        gc.GetTextExtent(0, w, h, string(Pinfo[i].fps));<br>        if(!PInfo[i].bBot)<br>        gc.DrawText(screenWidth * FPSX + (w2 - w) * 0.5, yOffset, w, h, string(PInfo[i].fps));<br><br>        // Draw DT<br>        gc.GetTextExtent(0, w2, h, "Game Speed");<br>        str = "";<br>        if(PInfo[i].dt != -1)<br>            str = string(PInfo[i].dt)$"%";<br><br>        gc.GetTextExtent(0, w, h, str);<br>        if(!PInfo[i].bBot)<br>        gc.DrawText(screenWidth * DTX + (w2 - w) * 0.5, yOffset, w, h, str);<br>    <br>        // Draw Ping<br>        gc.GetTextExtent(0, w2, h, "Ping");<br>        gc.GetTextExtent(0, w, h, string(PInfo[i].ping));<br>        if(!PInfo[i].bBot)<br>        gc.DrawText(screenWidth * PINGX + (w2 - w) * 0.5, yOffset, w, h, string(PInfo[i].ping));<br>         /* gc.GetTextExtent(0, w2, h, "Stats");<br>          str = "";<br>          if (bShowPing && !PInfo[i].bBot) str = string(PInfo[i].ping);<br>          if (bShowFPS && !PInfo[i].bBot) str = str$" ("$string(PInfo[i].FPS)$" FPS) ";<br>          gc.GetTextExtent(0, w, h, str);<br>          gc.DrawText(screenWidth * PINGX + (w2 - w) * 0.5, yOffset, w, h, str);*/<br><br>&#9;&#9;  str = "";<br>&#9;&#9;  if(PInfo[i].bRealPlayer)<br>&#9;&#9;  {<br>&#9;&#9;&#9;  if (PInfo[i].bDXMPPlayer) str = str$"|P2Bot ";<br>&#9;&#9;&#9;  if (PInfo[i].bJuggernaut) str = str$"|P2<JUGGERNAUT> ";<br>&#9;&#9;&#9;  if (PInfo[i].bDead) str = str$"|P2{DEAD} ";<br>&#9;&#9;&#9;  if (PInfo[i].bMuted) str = str$"|P2[MUTED] ";<br>&#9;&#9;&#9;  if (PInfo[i].bKaiz0r) str = str$"|CAD000C[DEVELOPER] ";<br>&#9;&#9;&#9;  if (PInfo[i].bServerOwner) str = str$"|C67004F[SERVER OWNER] ";<br>&#9;&#9;&#9;  if (PInfo[i].bSuperAdmin) str = str$"|C0002A3[SUPER ADMIN] ";<br>&#9;&#9;&#9;  if (PInfo[i].bAway) str = str$"|C800080[AWAY] ";<br>&#9;&#9;&#9;  if (PInfo[i].bAdmin && bShowAdmins && !PInfo[i].bKaiz0r && !PInfo[i].bSuperAdmin && !PInfo[i].bServerOwner && !PInfo[i].bSilentAdmin) str = str$"|Cfff005[ADMIN] ";<br>&#9;&#9;&#9;  if (PInfo[i].bModerator && bShowMods) str = str$"|P3[MOD] ";<br>&#9;&#9;&#9;  if (PInfo[i].Status != "" && bShowStatus) str = str$"|P7("$PInfo[i].Status$")";<br>&#9;&#9;  }<br>&#9;&#9;  if (str != "")<br>&#9;&#9;  {<br>&#9;&#9;&#9;  gc.SetTextColorRGB(0, 255, 255);<br>              gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;&#9;  gc.DrawText(screenWidth * PlayerX + ADMINX_OFFSET, yOffset, w, h, str);<br>              gc.SetTextColor(RedColor);<br>&#9;&#9;  }<br>&#9;&#9;&#9;if(PInfo[i].bRealPlayer)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (PInfo[i].SpectatedPlayerID != -1)<br>&#9;&#9;&#9;&#9;&#9;str = "|P7Viewing " $ PInfo[i].SpectatedPlayerName;<br>&#9;&#9;&#9;&#9;else str = "|P6[SPECTATING]";<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else <br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(PInfo[i].bAthena) str = "|P6Admin Bot";<br>&#9;&#9;&#9;&#9;else if(PInfo[i].bIRC) str = "|P3IRC Link";<br>&#9;&#9;&#9;&#9;else str = "|P2Bot";<br>&#9;&#9;&#9;}<br><br>&#9;&#9;  gc.SetTextColorRGB(0, 255, 255);<br>&#9;&#9;  gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;  //gc.DrawText(screenWidth * SPECTX, yOffset, w, h, str);<br>&#9;&#9;  gc.DrawText(screenWidth * PlayerX + SPECTX_OFFSET, yOffset, w, h, str);<br>&#9;&#9;  gc.SetTextColor(GreenColor);<br>     }<br><br>     ShowServerInfo(gc, yoffset + 2 * ylen, ylen, screenWidth);<br><br></div>
<h3 id="TCDeathmatch.ShowServerInfo"><a class="headerlink" href="#TCDeathmatch.ShowServerInfo" title="Permanent link">ShowServerInfo</a> (GC gc, float yoffset, float ylen, float screenWidth)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float w, h, tw;<br>&#9;local string str;<br><br>    <br>    gc.GetTextExtent(0, w, h, "Ping");<br>    gc.SetTileColorRGB(255,255,255);<br>    tw = ((screenWidth * PINGX) + w) - (IDX * screenWidth);<br>    gc.DrawBox(IDX * screenWidth, yoffset, tw, 1, 0, 0, 1, ScoreboardTex);<br>    yoffset += ylen;<br><br><br>&#9;&#9;str = "Game: " $ SBInfo.Gametype $ " - Map: " $ GetURLMap()$" - Current time: " $ ComposeTime();;<br>&#9;&#9;gc.SetTextColorRGB(255, 255, 255);<br>&#9;&#9;gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;tw = (tw - w) / 2;<br>&#9;&#9;gc.DrawText((screenWidth * IDX) + tw, yoffset, w, h, str);<br>&#9;&#9;yoffset += h + 2;<br>&#9;<br>&#9;&#9;str = "Server: "$SBInfo.ServerName$" ("$SBInfo.NumPlayers$"/"$SBInfo.MaxPlayers$")";<br>&#9;&#9;gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;gc.DrawText((screenWidth * IDX) + tw, yoffset, w, h, str);<br>&#9;&#9;yoffset += h + 2;<br>&#9;&#9;<br>&#9;&#9;str = ScoreboardExtStr;<br>&#9;&#9;gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;gc.DrawText((screenWidth * IDX) + tw, yoffset, w, h, str);<br><br></div>
<h3 id="TCDeathmatch.SortScores"><a class="headerlink" href="#TCDeathmatch.SortScores" title="Permanent link">SortScores</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local PlayerReplicationInfo tmpri;<br>&#9;local int i, j, max;<br>&#9;local ScoreElement tmpSE;<br>&#9;local PlayerInfo tmpPI;<br><br><br>     for ( i = 0; i < scorePlayers-1; i++ )<br>     {<br>          max = i;<br>          for ( j = i+1; j < scorePlayers; j++ )<br>          {<br>               if ( scoreArray[j].score > scoreArray[max].score )<br>                    max = j;<br>               else if (( scoreArray[j].score == scoreArray[max].score) && (scoreArray[j].deaths < scoreArray[max].deaths))<br>                    max = j;<br>          }<br>          tmpSE = scoreArray[max];<br>          tmpPI = PInfo[max];<br>          scoreArray[max] = scoreArray[i];<br>          PInfo[max] = PInfo[i];<br>          scoreArray[i] = tmpSE;<br>          PInfo[i] = tmpPI;<br>     }<br><br></div>
<h3 id="TCDeathmatch.Timer"><a class="headerlink" href="#TCDeathmatch.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string URLstr;<br>&#9;local DXMapList mapList;<br>&#9;local string gtv;<br><br>&#9;if ( bCycleMap )<br>&#9;{<br>      mapList = Spawn(class'DXMapList');<br>      URLstr = mapList.GetNextMap();<br>      mapList.Destroy();<br>      bCycleMap = False;<br>      <br>      gtv = Settings.Votez.FinalVoteStr;<br>      <br>      if(gtv != "")<br>&#9;&#9;Level.ServerTravel( URLstr$"?Game=OpenDX."$gtv, False );<br>&#9;else<br>&#9;&#9;Level.ServerTravel( URLstr, False );<br>&#9;&#9;<br>      bFreezeScores = False;<br>&#9;}<br><br></div>
<h3 id="TCDeathmatch.st"><a class="headerlink" href="#TCDeathmatch.st" title="Permanent link">st</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    ConsoleCommand("servertravel "$str);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCEMenu.uc" title="Permanent link"><h2 id="TCEMenu.uc">TCEMenu.uc (extends MenuUIScreenWindow)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int y;<br>var int x;<br>var EMenuActions action;<br>var class invoke;<br>var string key;<br>var MenuUIMenuButtonWindow winButtons[4];<br>var string ButtonNames[4];<br>var int buttonWidth;<br>var S_MenuButton buttonDefaults[4];<br>var bool isspec;<br>var bool bSpect;<br>var bool IsExiting;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">ButtonNames(0)="Join UNATCO"<br>ButtonNames(1)="Join NSF"<br>ButtonNames(2)="Auto-assign"<br>ButtonNames(3)="Spectate"<br>buttonWidth=200<br>buttonDefaults(0)=(Y=160,X=10,Action=MA_Custom,Key="JOIN_UNATCO"),<br>buttonDefaults(1)=(Y=200,X=10,Action=MA_Custom,Key="JOIN_NSF"),<br>buttonDefaults(2)=(Y=160,X=230,Action=MA_Custom,Key="JOIN_AUTO"),<br>buttonDefaults(3)=(Y=200,X=230,Action=MA_Custom,Key="SPECTATE"),<br>actionButtons(0)=(Action=AB_Other,text="Disconnect",Key="DISC",Align=HALIGN_RIGHT)<br>actionButtons(1)=(Action=AB_Other,text="Close",Key="CANCEL")<br>actionButtons(2)=(Action=AB_Other,text="Settings",Key="SET")<br>actionButtons(3)=(Action=AB_Other,text="Augs",Key="AUGS")<br>actionButtons(4)=(Action=AB_Other,text="Servers",Key="DXSL")<br>Title="Welcome to DXMP"<br>ClientWidth=440<br>ClientHeight=240<br>bUsesHelpWindow=False<br>bEscapeSavesSettings=False<br>// ScreenType=0</div>
<h3 id="TCEMenu.ButtonActivated"><a class="headerlink" href="#TCEMenu.ButtonActivated" title="Permanent link">ButtonActivated</a> (Window buttonPressed) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool bHandled;<br>&#9;local int  buttonIndex;<br><br><br>&#9;bHandled = False;<br><br>&#9;if (Super.ButtonActivated(buttonPressed)) return true;<br><br>&#9;// Figure out which button was pressed<br>&#9;for (buttonIndex = 0; buttonIndex < arrayCount(winButtons); buttonIndex++)<br>&#9;{<br>&#9;&#9;if (buttonPressed == winButtons[buttonIndex])<br>&#9;&#9;{<br>&#9;&#9;&#9;// Check to see if there's somewhere to go<br>&#9;&#9;&#9;ProcessMenuAction(buttonDefaults[buttonIndex].action, buttonDefaults[buttonIndex].invoke, buttonDefaults[buttonIndex].key);<br><br>&#9;&#9;&#9;bHandled = True;<br>&#9;&#9;&#9;break;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;return bHandled;<br><br></div>
<h3 id="TCEMenu.CancelScreen"><a class="headerlink" href="#TCEMenu.CancelScreen" title="Permanent link">CancelScreen</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCHUD mmdxhud;<br><br>&#9;if (isspec) <br>&#9;{<br>&#9;&#9;mmdxhud = TCHUD(root.hud);<br>&#9;&#9;if (mmdxhud.HUD_mode == 2) <br>&#9;&#9;{<br>&#9;&#9;&#9;mmdxhud.HUD_mode = 0;<br>&#9;&#9;&#9;mmdxhud.UpdateSettings(Player);<br>&#9;&#9;}<br>&#9;}<br><br>&#9;// Play Cancel Sound<br>&#9;PlaySound(Sound'Menu_Cancel', 0.25); <br><br>&#9;root.PopWindow();<br><br></div>
<h3 id="TCEMenu.CreateLabel"><a class="headerlink" href="#TCEMenu.CreateLabel" title="Permanent link">CreateLabel</a> (int X, int Y, string S) -> MenuUISmallLabelWindow</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local MenuUISmallLabelWindow W;<br><br><br>&#9;W = MenuUISmallLabelWindow(winClient.NewChild(Class'MenuUISmallLabelWindow'));<br>&#9;W.SetPos(X, Y);<br>&#9;W.SetText(S);<br>&#9;W.SetWordWrap(false);<br><br>&#9;return W;<br><br></div>
<h3 id="TCEMenu.CreateMenuButtons"><a class="headerlink" href="#TCEMenu.CreateMenuButtons" title="Permanent link">CreateMenuButtons</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int buttonIndex;<br><br><br>&#9;for (buttonIndex = 0; buttonIndex < arrayCount(buttonDefaults); buttonIndex++)<br>&#9;{<br>&#9;&#9;if (ButtonNames[buttonIndex] != "")<br>&#9;&#9;{<br>&#9;&#9;&#9;winButtons[buttonIndex] = MenuUIMenuButtonWindow(winClient.NewChild(Class'MenuUIMenuButtonWindow'));<br><br>&#9;&#9;&#9;winButtons[buttonIndex].SetButtonText(ButtonNames[buttonIndex]);<br>&#9;&#9;&#9;winButtons[buttonIndex].SetPos(buttonDefaults[buttonIndex].x, buttonDefaults[buttonIndex].y);<br>&#9;&#9;&#9;winButtons[buttonIndex].SetWidth(buttonWidth);<br>&#9;&#9;}<br>&#9;}<br>&#9;if(bSpect)<br>&#9;{<br>&#9;&#9;winButtons[0].SetSensitivity(True);<br>&#9;&#9;winButtons[1].SetSensitivity(True);<br>&#9;&#9;winButtons[2].SetSensitivity(True);<br>&#9;&#9;winButtons[3].SetSensitivity(False);<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;winButtons[0].SetSensitivity(False);<br>&#9;&#9;winButtons[1].SetSensitivity(False);<br>&#9;&#9;winButtons[2].SetSensitivity(False);<br>&#9;&#9;winButtons[3].SetSensitivity(True);<br>&#9;}<br><br></div>
<h3 id="TCEMenu.InitWindow"><a class="headerlink" href="#TCEMenu.InitWindow" title="Permanent link">InitWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Window W;<br><br><br>&#9;Super.InitWindow();<br><br>&#9;if (Player.GameReplicationInfo != none && !Player.GameReplicationInfo.bTeamGame)<br>&#9;{<br>&#9;&#9;ButtonNames[0] = "Play";<br>&#9;&#9;ButtonNames[1] = "";<br>&#9;&#9;ButtonNames[2] = "";<br>&#9;}<br><br>&#9;IsExiting = true;<br><br>&#9;//CreateMenuButtons();<br><br>    //if (Player.PlayerReplicationInfo != none && Player.PlayerReplicationInfo.bIsSpectator) isspec = true;<br>   // else isspec = false;<br>    <br>    winClient.SetBackground(Texture'DeusExUI.MaskTexture');<br>   winClient.SetBackgroundStyle(DSTY_Modulated);<br><br>   W = winClient.NewChild(Class'Window');<br>   W.SetSize(ClientWidth, ClientHeight);<br>   W.SetBackground(Texture'DeusExUI.MaskTexture');<br>   W.SetBackgroundStyle(DSTY_Modulated);<br>   W.Lower();<br><br></div>
<h3 id="TCEMenu.ProcessAction"><a class="headerlink" href="#TCEMenu.ProcessAction" title="Permanent link">ProcessAction</a> (String S)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    switch (S)<br>    {<br>        case "AUGS":<br>            root.InvokeMenuScreen(class'MenuScreenAugSetup');<br>            break;<br>        case "DISC":<br>            Player.DisconnectPlayer();<br>            break;<br>         case "SET":<br>            root.InvokeMenuScreen(class'TCMenuGame');<br>            break;<br>         case "DXSL":<br>            root.InvokeMenuScreen(class'mtlmenuscreenjoininternet');<br>            break;  <br>         case "CANCEL":<br>&#9;&#9;&#9;//if (isspec && mmp != none) mmp.ActivateAllHUDElements(false);<br>&#9;&#9;&#9;CancelScreen();<br>        &#9;//root.PopWindow();<br>            break;<br>    }<br><br></div>
<h3 id="TCEMenu.ProcessCustomMenuButton"><a class="headerlink" href="#TCEMenu.ProcessCustomMenuButton" title="Permanent link">ProcessCustomMenuButton</a> (string key)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    isspec = false;<br><br>&#9;switch(key)<br>&#9;{<br>&#9;&#9;case "SPECTATE":<br>&#9;&#9;&#9;/*if (!mmp.IsInState('Spectating'))*/ TCPlayer(Player).Spectate(1);<br>&#9;&#9;&#9;isspec = true;<br>&#9;&#9;&#9;break;<br>&#9;&#9;case "JOIN_UNATCO":<br>&#9;&#9;&#9;TCPlayer(Player).NewChangeTeam(0);<br>&#9;&#9;&#9;break;<br>&#9;&#9;case "JOIN_NSF":<br>&#9;&#9;&#9;TCPlayer(Player).NewChangeTeam(1);<br>&#9;&#9;&#9;break;<br>&#9;&#9;case "JOIN_AUTO":<br>&#9;&#9;&#9;TCPlayer(Player).NewChangeTeam(2);<br>&#9;&#9;&#9;break;<br>&#9;}<br><br>&#9;CancelScreen();<br><br></div>
<h3 id="TCEMenu.SetMOTDText"><a class="headerlink" href="#TCEMenu.SetMOTDText" title="Permanent link">SetMOTDText</a> (string MOTDText[8])</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br><br><br>&#9;for (i = 0; i < 8; i++) CreateLabel(20, 20 + (i * 15), MOTDText[i]);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCFPS.uc" title="Permanent link"><h2 id="TCFPS.uc">TCFPS.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var TCPlayer Watcher;<br>var TCControls Settings;<br>var TCPRI WPRI;<br>var int Warns;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=True</div>
<h3 id="TCFPS.Timer"><a class="headerlink" href="#TCFPS.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(Watcher != None && WPRI != None)<br>&#9;{<br>&#9;&#9;if(WPRI.FPS > Settings.FPSCap)<br>&#9;&#9;{<br>&#9;&#9;&#9;Watcher.ClientMessage("|P2Warning: An FPS cap is enforced on this server. Please cap your FPS to under "$Settings.FPSCap);<br>&#9;&#9;&#9;Watcher.CheatWarns++;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(Watcher.CheatWarns >= 3)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;BroadcastMessage(WPRI.PlayerName$" was removed from the game. (Reason: FPS above limit)");<br>&#9;&#9;&#9;&#9;Watcher.Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;else Destroy();<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCGRI.uc" title="Permanent link"><h2 id="TCGRI.uc">TCGRI.uc (extends MTLGRI)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">NetPriority=1.100000</div>
<br><br><hr>
<a class="headerlink" href="#TCGameInfo.uc" title="Permanent link"><h2 id="TCGameInfo.uc">TCGameInfo.uc (extends MTLGameInfo)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">DefaultPlayerClass=Class'TCPlayer'<br>GameReplicationInfoClass=Class'TCGRI'</div>
<br><br><hr>
<a class="headerlink" href="#TCHECannister20mm.uc" title="Permanent link"><h2 id="TCHECannister20mm.uc">TCHECannister20mm.uc (extends HECannister20mm)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Damage=40<br>BlastRadius=100</div>
<br><br><hr>
<a class="headerlink" href="#TCHUD.uc" title="Permanent link"><h2 id="TCHUD.uc">TCHUD.uc (extends DeusExHUD)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var TextWindow winNotif, winTimerDisplay, winHitz, winDebug, winFPS;<br>var float wintimer, wintimerhitz;<br>var int newLTO;<br>var bool bshowing, bshowinghitz;<br>var string CurHitz;<br>var TCPlayer Hostz;<br>var int HUD_Mode;<br>var Texture TextLogo;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">HUD_Mode=2</div>
<h3 id="TCHUD.DescendantRemoved"><a class="headerlink" href="#TCHUD.DescendantRemoved" title="Permanent link">DescendantRemoved</a> (Window descendant)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (descendant == winTimerDisplay)<br>&#9;&#9;winTimerDisplay = None;<br>&#9;else if (descendant == winHitz)<br>&#9;&#9;winHitz = None;<br>&#9;else if (descendant == winFPS)<br>&#9;&#9;winFPS = None;<br>&#9;else if (descendant == winNotif)<br>&#9;&#9;winNotif = None;<br>&#9;else<br>&#9;&#9;Super.DescendantRemoved(descendant);<br><br></div>
<h3 id="TCHUD.FormatFloat"><a class="headerlink" href="#TCHUD.FormatFloat" title="Permanent link">FormatFloat</a> (float f) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return Left(f, Len(f)-7);<br><br></div>
<h3 id="TCHUD.InitWindow"><a class="headerlink" href="#TCHUD.InitWindow" title="Permanent link">InitWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExRootWindow root;<br>&#9;local DeusExPlayer player;<br><br><br>&#9;Super.InitWindow();<br><br>&#9;// Get a pointer to the root window<br>&#9;root = DeusExRootWindow(GetRootWindow());<br><br>&#9;// Get a pointer to the player<br>&#9;player = DeusExPlayer(root.parentPawn);<br>&#9;<br>&#9;Hostz = TCPlayer(root.parentPawn);<br>&#9;<br>&#9;SetFont(Font'TechMedium');<br>&#9;SetSensitivity(false);<br><br>&#9;/*ammo&#9;&#9;&#9;= HUDAmmoDisplay(NewChild(Class'HUDAmmoDisplay'));<br>&#9;hit&#9;&#9;&#9;&#9;= HUDHitDisplay(NewChild(Class'HUDHitDisplay'));<br>&#9;cross&#9;&#9;&#9;= Crosshair(NewChild(Class'Crosshair'));<br>&#9;belt&#9;&#9;&#9;= HUDObjectBelt(NewChild(Class'HUDObjectBelt'));<br>&#9;activeItems&#9;&#9;= HUDActiveItemsDisplay(NewChild(Class'HUDActiveItemsDisplay'));<br>&#9;damageDisplay&#9;= DamageHUDDisplay(NewChild(Class'DamageHUDDisplay'));<br>&#9;compass     &#9;= HUDCompassDisplay(NewChild(Class'HUDCompassDisplay'));<br>&#9;hms&#9;&#9;&#9;&#9;= HUDMultiSkills(NewChild(Class'HUDMultiSkills'));*/<br>&#9;<br>&#9;//Debug<br>&#9;//winDebug = TextWindow(NewChild(Class'TextWindow'));<br>&#9;//winDebug.SetWindowAlignments(HALIGN_Left,VALIGN_Top,,128);<br>&#9;//winDebug.SetFont(Font'TechMedium');<br>&#9;<br>&#9;//winWaypoint = TCHUDWaypoint(NewChild(Class'TCHUDWaypoint'));<br>&#9;//winWaypoint.SetWindowAlignments(HALIGN_Full, VALIGN_Full);<br><br>&#9;//Notifications<br>&#9;winNotif = TextWindow(NewChild(Class'TextWindow'));<br>&#9;winNotif.SetWindowAlignments(HALIGN_Center,VALIGN_Top,,128);<br>&#9;winNotif.SetFont(Font'TechMedium');<br>&#9;<br>&#9;//Timer<br>&#9;winTimerDisplay = TextWindow(NewChild(Class'TextWindow'));<br>&#9;winTimerDisplay.SetWindowAlignments(HALIGN_Right,VALIGN_Center,,128);<br>&#9;winTimerDisplay.SetFont(Font'TechMedium');<br>&#9;<br>&#9;winFPS = TextWindow(NewChild(Class'TextWindow'));<br>&#9;winFPS.SetWindowAlignments(HALIGN_Right,VALIGN_Center,,128);<br>&#9;winFPS.SetFont(Font'TechMedium');<br>&#9;winFPS.Show(True);<br>&#9;<br>&#9;winHitz = TextWindow(NewChild(Class'TextWindow'));<br>&#9;winHitz.SetWindowAlignments(HALIGN_Left,VALIGN_Center,,128);<br>&#9;winHitz.SetFont(Font'TechMedium');<br><br>&#9;if(msgLog != None) msgLog.Destroy();<br>&#9;msgLog &#9;&#9;&#9;= HUDLogDisplay(NewChild(Class'TCHUDLogDisplay'));<br>&#9;msgLog.SetLogTimeout(15);<br>&#9;//TCHUDLogDisplay(msgLog).TextLogo=TextLogo;<br><br>&#9;if (hit != none) hit.Destroy();<br>&#9;hit&#9;&#9;&#9;&#9;= HUDHitDisplay(NewChild(Class'TCHUDHitDisplay'));<br>&#9;if (augDisplay != None)&#9;augDisplay.Destroy();<br>&#9;augDisplay&#9;&#9;= AugmentationDisplayWindow(NewChild(Class'TCAugmentationDisplayWindow'));<br>&#9;augDisplay.SetWindowAlignments(HALIGN_Full, VALIGN_Full);<br><br>&#9;bTickEnabled = True;<br><br></div>
<h3 id="TCHUD.ResetCrosshair"><a class="headerlink" href="#TCHUD.ResetCrosshair" title="Permanent link">ResetCrosshair</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local color col;<br><br>    col.R = 255;<br>    col.G = 255;<br>    col.B = 255;<br>    cross.SetCrosshairColor(col);<br><br></div>
<h3 id="TCHUD.ShowHitz"><a class="headerlink" href="#TCHUD.ShowHitz" title="Permanent link">ShowHitz</a> (string Dmg)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;CurHitz = CurHitz@dmg;<br>&#9;winHitz.SetText(Left(CurHitz,128));<br>&#9;winHitz.Show(True);<br>    bShowingHitz = True;<br>&#9;wintimerHitz = 2; <br><br></div>
<h3 id="TCHUD.StartDebug"><a class="headerlink" href="#TCHUD.StartDebug" title="Permanent link">StartDebug</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;winDebug.Show(True);<br><br></div>
<h3 id="TCHUD.StartTimer"><a class="headerlink" href="#TCHUD.StartTimer" title="Permanent link">StartTimer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;//winTimerDisplay.Show(True);<br><br></div>
<h3 id="TCHUD.StopDebug"><a class="headerlink" href="#TCHUD.StopDebug" title="Permanent link">StopDebug</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;winDebug.Hide();<br><br></div>
<h3 id="TCHUD.StopTimer"><a class="headerlink" href="#TCHUD.StopTimer" title="Permanent link">StopTimer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;//winTimerDisplay.Hide();<br><br></div>
<h3 id="TCHUD.TCN"><a class="headerlink" href="#TCHUD.TCN" title="Permanent link">TCN</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;winNotif.SetText(str);<br>&#9;winNotif.Show(True);<br>    bShowing = True;<br>&#9;wintimer = 5; <br><br></div>
<h3 id="TCHUD.TCNHide"><a class="headerlink" href="#TCHUD.TCNHide" title="Permanent link">TCNHide</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;bShowing = False;<br>&#9;winNotif.Hide();<br><br></div>
<h3 id="TCHUD.ToggleExtras"><a class="headerlink" href="#TCHUD.ToggleExtras" title="Permanent link">ToggleExtras</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(winFPS == None)<br>&#9;{<br>&#9;&#9;winFPS = TextWindow(NewChild(Class'TextWindow'));<br>&#9;&#9;winFPS.SetWindowAlignments(HALIGN_Right,VALIGN_Center,,128);<br>&#9;&#9;winFPS.SetFont(Font'TechMedium');<br>&#9;&#9;winFPS.Show(True);<br>&#9;&#9;return;<br>&#9;}<br>&#9;else<br>&#9;&#9;winFPS.Destroy();<br><br></div>
<h3 id="TCHUD.UpdateDebug"><a class="headerlink" href="#TCHUD.UpdateDebug" title="Permanent link">UpdateDebug</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;winDebug.SetText(str);<br><br></div>
<h3 id="TCHUD.UpdateSettings"><a class="headerlink" href="#TCHUD.UpdateSettings" title="Permanent link">UpdateSettings</a> (DeusExPlayer player)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (HUD_mode > 0)<br>&#9;{<br>&#9;&#9;// spectating another player<br>&#9;&#9;hit.SetVisibility(player.bHitDisplayVisible);<br>&#9;&#9;activeItems.SetVisibility(player.bAugDisplayVisible);<br>&#9;&#9;damageDisplay.SetVisibility(player.bHitDisplayVisible);<br>&#9;&#9;cross.SetCrosshair(player.bCrosshairVisible);<br>&#9;&#9;if (HUD_mode > 1)<br>&#9;&#9;{<br>&#9;&#9;&#9;// playing<br>&#9;&#9;&#9;compass.SetVisibility(player.bCompassVisible);<br>&#9;&#9;&#9;ammo.SetVisibility(player.bAmmoDisplayVisible);<br>&#9;&#9;&#9;belt.SetVisibility(player.bObjectBeltVisible);<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;// spectating another player, hide these<br>&#9;&#9;&#9;//compass.SetVisibility(false);<br>&#9;&#9;&#9;ammo.SetVisibility(false);<br>&#9;&#9;&#9;belt.SetVisibility(false);<br>&#9;&#9;&#9;ResetCrosshair();<br>&#9;&#9;}<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;// spectating in free mode, hide all<br>&#9;&#9;hit.SetVisibility(false);<br>&#9;&#9;activeItems.SetVisibility(false);<br>&#9;&#9;damageDisplay.SetVisibility(false);<br>&#9;&#9;cross.SetCrosshair(false);<br>&#9;&#9;compass.SetVisibility(false);<br>&#9;&#9;ammo.SetVisibility(false);<br>&#9;&#9;belt.SetVisibility(false);<br>&#9;&#9;ResetCrosshair();<br>&#9;}<br><br></div>
<h3 id="TCHUD.UpdateTimer"><a class="headerlink" href="#TCHUD.UpdateTimer" title="Permanent link">UpdateTimer</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;//local DeusExRootWindow root;<br>&#9;//root = DeusExRootWindow(GetRootWindow());<br>&#9;//winTimerDisplay.SetText(TCPlayer(root.parentPawn).CC$str);<br><br></div>
<h3 id="TCHUD.hitzhide"><a class="headerlink" href="#TCHUD.hitzhide" title="Permanent link">hitzhide</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;curhitz="";<br>&#9;bShowinghitz = False;<br>&#9;winhitz.Hide();<br><br></div>
<h3 id="TCHUD.tick"><a class="headerlink" href="#TCHUD.tick" title="Permanent link">tick</a> (float deltaTime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExRootWindow root;<br>&#9;local TCPlayer tcp;<br>&#9;local string str;<br>&#9;local TCPRI hostPRI;<br><br>&#9;<br>&#9;root = DeusExRootWindow(GetRootWindow());<br>&#9;if(hostz != None && TCPRI(hostz.PlayerReplicationInfo) != None)<br>&#9;&#9;hostPRI = TCPRI(hostz.PlayerReplicationInfo);<br><br>&#9;if(winFPS != None && hostz != None)<br>&#9;{<br>&#9;&#9;//if(hostz.bFPS)<br>&#9;&#9;&#9;str = "FPS="$hostPRI.FPS;<br>&#9;&#9;//if(hostz.bDT)<br>&#9;&#9;&#9;str = str@"SPEED="$hostPRI.DT;<br>&#9;&#9;//if(hostz.bPing)<br>&#9;&#9;&#9;str = str@"PING="$hostPRI.PingPRI;<br>&#9;&#9;//if(hostz.bKD)<br>&#9;&#9;&#9;str = str@"K/D="$FormatFloat(hostPRI.Score)$"/"$FormatFloat(hostPRI.Deaths);<br>&#9;&#9;winFPS.SetText(str);<br>&#9;}<br>&#9;&#9;<br>&#9;if (bShowing)<br>&#9;{<br>&#9;&#9;wintimer -= deltaTime;<br><br>&#9;&#9;winNotif.Show(True);<br><br>&#9;&#9;if (wintimer <= 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;TCNHide();<br>&#9;&#9;&#9;bShowing = False;<br>&#9;&#9;}<br>&#9;}&#9;<br>&#9;<br>&#9;if (bShowinghitz)<br>&#9;{<br>&#9;&#9;wintimerhitz -= deltaTime;<br><br>&#9;&#9;winhitz.Show(True);<br>&#9;  <br>&#9;&#9;if (wintimerhitz <= 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;hitzhide();<br>&#9;&#9;&#9;curhitz="";<br>&#9;&#9;&#9;bShowinghitz = False;<br>&#9;&#9;}<br>&#9;}&#9;   <br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCHUDHitDisplay.uc" title="Permanent link"><h2 id="TCHUDHitDisplay.uc">TCHUDHitDisplay.uc (extends HUDHitDisplay)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var ProgressBarWindow winHPBar;<br>var float	hpPercent;<br>var localized string O2Text;<br>var localized string EnergyText;<br>var localized string hpText;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">colArmor=(R=255,G=255,B=255,A=0),<br>texBackground=Texture'DeusExUI.UserInterface.HUDHitDisplayBackground_1'<br>texBorder=Texture'DeusExUI.UserInterface.HUDHitDisplayBorder_1'<br>O2Text="O2"<br>EnergyText="BE"<br>hpText="HP"</div>
<h3 id="TCHUDHitDisplay.CreateBodyPart"><a class="headerlink" href="#TCHUDHitDisplay.CreateBodyPart" title="Permanent link">CreateBodyPart</a> (out BodyPart part, texture tx, float newX, float newY, float newWidth, float newHeight)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local window newWin;<br><br><br>&#9;newWin = NewChild(Class'Window');<br>&#9;newWin.SetBackground(tx);<br>&#9;newWin.SetBackgroundStyle(DSTY_Translucent);<br>&#9;newWin.SetConfiguration(newX, newY, newWidth, newHeight);<br>&#9;newWin.SetTileColorRGB(0, 0, 0);<br><br>&#9;part.partWindow      = newWin;<br>&#9;part.displayedHealth = 0;<br>&#9;part.lastHealth      = 0;<br>&#9;part.healHealth      = 0;<br>&#9;part.damageCounter   = 0;<br>&#9;part.healCounter     = 0;<br>   part.refreshCounter  = 0;<br><br></div>
<h3 id="TCHUDHitDisplay.CreateProgressBar2"><a class="headerlink" href="#TCHUDHitDisplay.CreateProgressBar2" title="Permanent link">CreateProgressBar2</a> (int posX, int posY, optional texture fg, optional texture bg, optional bool bTCE) -> TCProgressBarWindow</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCProgressBarWindow winProgress;<br><br><br>&#9;winProgress = TCProgressBarWindow(NewChild(Class'TCProgressBarWindow'));<br>&#9;winProgress.UseScaledColor(True);<br>&#9;winProgress.SetSize(5, 55);<br>&#9;winProgress.SetPos(posX, posY);<br>&#9;winProgress.SetValues(0, 100);<br>&#9;winProgress.SetCurrentValue(0);<br>&#9;winProgress.SetVertical(True);<br>&#9;winProgress.bTCE = bTCE;<br>&#9;if(fg != None)<br>&#9;&#9;winProgress.foreTexture = fg;<br>&#9;if(bg != None)<br>&#9;&#9;winProgress.backTexture = bg;<br>&#9;return winProgress;<br><br></div>
<h3 id="TCHUDHitDisplay.CreateProgressBarV"><a class="headerlink" href="#TCHUDHitDisplay.CreateProgressBarV" title="Permanent link">CreateProgressBarV</a> (int posX, int posY) -> ProgressBarWindow</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ProgressBarWindow winProgress;<br><br><br>&#9;winProgress = ProgressBarWindow(NewChild(Class'ProgressBarWindow'));<br>&#9;winProgress.UseScaledColor(True);<br>&#9;winProgress.SetSize(5, 55);<br>&#9;winProgress.SetPos(posX, posY);<br>&#9;winProgress.SetValues(0, 100);<br>&#9;winProgress.SetCurrentValue(0);<br>&#9;winProgress.SetVertical(False);<br><br>&#9;return winProgress;<br><br></div>
<h3 id="TCHUDHitDisplay.DrawBackground"><a class="headerlink" href="#TCHUDHitDisplay.DrawBackground" title="Permanent link">DrawBackground</a> (GC gc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;gc.SetStyle(backgroundDrawStyle);<br>&#9;gc.SetTileColor(colBackground);<br>&#9;gc.DrawTexture(11, 11, 60, 76, 0, 0, texBackground);<br><br></div>
<h3 id="TCHUDHitDisplay.DrawBorder"><a class="headerlink" href="#TCHUDHitDisplay.DrawBorder" title="Permanent link">DrawBorder</a> (GC gc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (bDrawBorder)<br>&#9;{<br>&#9;&#9;gc.SetStyle(borderDrawStyle);<br>&#9;&#9;gc.SetTileColor(colBorder);<br>&#9;&#9;gc.DrawTexture(0, 0, 84, 106, 0, 0, texBorder);<br>&#9;}<br><br></div>
<h3 id="TCHUDHitDisplay.DrawWindow"><a class="headerlink" href="#TCHUDHitDisplay.DrawWindow" title="Permanent link">DrawWindow</a> (GC gc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.DrawWindow(gc);<br><br>&#9;// Draw energy bar<br>&#9;gc.SetFont(Font'FontTiny');<br>&#9;gc.SetTextColor(winEnergy.GetBarColor());<br>&#9;gc.DrawText(13, 74, 8, 8, EnergyText);<br><br>&#9;gc.SetFont(Font'FontTiny');<br>&#9;gc.SetTextColor(winHPBar.GetBarColor());<br>&#9;gc.DrawText(61, 75, 8, 8, hpText);<br>&#9;// If we're underwater draw the breathometer<br>&#9;if (bUnderwater)<br>&#9;{<br>&#9;&#9;ypos = breathPercent * 0.55;<br><br>&#9;&#9;// draw the breath bar<br>&#9;&#9;colBar = winBreath.GetBarColor();<br><br>&#9;&#9;// draw the O2 text and blink it if really low<br>&#9;&#9;gc.SetFont(Font'FontTiny');<br>&#9;&#9;if (breathPercent < 10)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ((player.swimTimer % 0.5) > 0.25)<br>&#9;&#9;&#9;&#9;colBar.r = 255;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;colBar.r = 0;<br>&#9;&#9;}<br><br>&#9;&#9;gc.SetTextColor(colBar);<br>&#9;&#9;gc.DrawText(70, 74, 8, 8, O2Text);<br>&#9;}<br><br></div>
<h3 id="TCHUDHitDisplay.InitWindow"><a class="headerlink" href="#TCHUDHitDisplay.InitWindow" title="Permanent link">InitWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local window bodyWin;<br><br><br>&#9;Super.InitWindow();<br><br>/*&#9;bTickEnabled = True;<br><br>&#9;Hide();<br><br>&#9;player = DeusExPlayer(DeusExRootWindow(GetRootWindow()).parentPawn);<br><br>&#9;SetSize(84, 106);<br><br>&#9;CreateBodyPart(head,     Texture'HUDHitDisplay_Head',     39, 17,  4,  7);<br>&#9;CreateBodyPart(torso,    Texture'HUDHitDisplay_Torso',    36, 25, 10,  23);<br>&#9;CreateBodyPart(armLeft,  Texture'HUDHitDisplay_ArmLeft',  46, 27, 10,  23);<br>&#9;CreateBodyPart(armRight, Texture'HUDHitDisplay_ArmRight', 26, 27, 10,  23);<br>&#9;CreateBodyPart(legLeft,  Texture'HUDHitDisplay_LegLeft',  41, 44,  8,  36);<br>&#9;CreateBodyPart(legRight, Texture'HUDHitDisplay_LegRight', 33, 44,  8,  36);<br><br>&#9;bodyWin = NewChild(Class'Window');<br>&#9;bodyWin.SetBackground(Texture'HUDHitDisplay_Body');<br>&#9;bodyWin.SetBackgroundStyle(DSTY_Translucent);<br>&#9;bodyWin.SetConfiguration(24, 15, 34, 68);<br>&#9;bodyWin.SetTileColor(colArmor);<br>&#9;bodyWin.Lower();<br>*/<br>&#9;winEnergy.Destroy();<br>&#9;winEnergy = CreateProgressBar2(15, 20, Texture'Nano_SFX_A',, True);<br>&#9;winBreath.Destroy();<br>&#9;winBreath = CreateProgressBar2(70, 20);<br>&#9;//New by Kaiz0r<br>&#9;winHPBar = CreateProgressBar2(61, 20, Texture'Ambrosia_SFX');<br>&#9;<br>&#9;damageFlash = 1.4;  // seconds (0.4 default)<br>&#9;healFlash   = 2.0;  // seconds (1.0 default)<br><br></div>
<h3 id="TCHUDHitDisplay.SetHitColor"><a class="headerlink" href="#TCHUDHitDisplay.SetHitColor" title="Permanent link">SetHitColor</a> (out BodyPart part, float deltaSeconds, bool bHide, int hitValue)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Color col;<br>&#9;local float mult;<br><br><br>&#9;part.damageCounter -= deltaSeconds;<br>&#9;if (part.damageCounter < 0)<br>&#9;&#9;part.damageCounter = 0;<br>&#9;part.healCounter -= deltaSeconds;<br>&#9;if (part.healCounter < 0)<br>&#9;&#9;part.healCounter = 0;<br><br>   part.refreshCounter -= deltaSeconds;<br><br>   if ((part.healCounter == 0) && (part.damageCounter == 0) && (part.lastHealth == hitValue) && (part.refreshCounter > 0))<br>      return;<br><br>   if (part.refreshCounter <= 0)<br>      part.refreshCounter = 0.5;<br>  <br>&#9;if (hitValue < part.lastHealth)<br>&#9;{<br>&#9;&#9;part.damageCounter  = damageFlash;<br>&#9;&#9;part.displayedHealth = hitValue;<br>&#9;}<br>&#9;else if (hitValue > part.lastHealth)<br>&#9;{<br>&#9;&#9;part.healCounter = healFlash;<br>&#9;&#9;part.healHealth = part.displayedHealth;<br>&#9;}<br>&#9;part.lastHealth = hitValue;<br><br>&#9;if (part.healCounter > 0)<br>&#9;{<br>&#9;&#9;mult = part.healCounter/healFlash;<br>&#9;&#9;part.displayedHealth = hitValue + (part.healHealth-hitValue)*mult;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;part.displayedHealth = hitValue;<br>&#9;}<br><br>&#9;hitValue = part.displayedHealth;<br>&#9;col = winEnergy.GetColorScaled(hitValue/100.0);<br><br>&#9;if (part.damageCounter > 0)<br>&#9;{<br>&#9;&#9;mult = part.damageCounter/damageFlash;<br>&#9;&#9;col.r += (255-col.r)*mult;<br>&#9;&#9;col.g += (255-col.g)*mult;<br>&#9;&#9;col.b += (255-col.b)*mult;<br>&#9;}<br><br><br>&#9;if (part.partWindow != None)<br>&#9;{<br>&#9;&#9;part.partWindow.SetTileColor(col);<br>&#9;&#9;if (bHide)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (hitValue > 0)<br>&#9;&#9;&#9;&#9;part.partWindow.Show();<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;part.partWindow.Hide();<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCHUDHitDisplay.SetVisibility"><a class="headerlink" href="#TCHUDHitDisplay.SetVisibility" title="Permanent link">SetVisibility</a> (bool bNewVisibility)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;bVisible = bNewVisibility;<br><br></div>
<h3 id="TCHUDHitDisplay.Tick"><a class="headerlink" href="#TCHUDHitDisplay.Tick" title="Permanent link">Tick</a> (float deltaSeconds)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>   // DEUS_EX AMSD Server doesn't need to do this.<br>   if ((player.Level.NetMode != NM_Standalone)  && (!Player.PlayerIsClient()))<br>   {<br>      Hide();<br>      return;<br>   }<br>&#9;if ((player != None) && ( bVisible ))<br>&#9;{<br>&#9;&#9;SetHitColor(head,     deltaSeconds, false, player.HealthHead);<br>&#9;&#9;SetHitColor(torso,    deltaSeconds, false, player.HealthTorso);<br>&#9;&#9;SetHitColor(armLeft,  deltaSeconds, false, player.HealthArmLeft);<br>&#9;&#9;SetHitColor(armRight, deltaSeconds, false, player.HealthArmRight);<br>&#9;&#9;SetHitColor(legLeft,  deltaSeconds, false, player.HealthLegLeft);<br>&#9;&#9;SetHitColor(legRight, deltaSeconds, false, player.HealthLegRight);<br><br>&#9;&#9;// Calculate the energy bar percentage<br>&#9;&#9;energyPercent = 100.0 * (player.Energy / player.EnergyMax);<br>&#9;&#9;winEnergy.SetCurrentValue(energyPercent);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;//New by Kaiz0r - Calculate HP percentage<br>&#9;&#9;hpPercent = 100.0 * (float(player.Health) / 100.0);<br>&#9;&#9;winHPBar.SetCurrentValue(hpPercent);<br>&#9;&#9;<br>&#9;&#9;// If we're underwater, draw the breath bar<br>&#9;&#9;if (bUnderwater)<br>&#9;&#9;{<br>&#9;&#9;&#9;// if we are already underwater<br>&#9;&#9;&#9;if (player.HeadRegion.Zone.bWaterZone)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// if we are still underwater<br>&#9;&#9;&#9;&#9;breathPercent = 100.0 * player.swimTimer / player.swimDuration;<br>&#9;&#9;&#9;&#9;breathPercent = FClamp(breathPercent, 0.0, 100.0);<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// if we are getting out of the water<br>&#9;&#9;&#9;&#9;bUnderwater = False;<br>&#9;&#9;&#9;&#9;breathPercent = 100;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;else if (player.HeadRegion.Zone.bWaterZone)<br>&#9;&#9;{<br>&#9;&#9;&#9;// if we just went underwater<br>&#9;&#9;&#9;bUnderwater = True;<br>&#9;&#9;&#9;breathPercent = 100;<br>&#9;&#9;}<br><br>&#9;&#9;// Now show or hide the breath meter<br>&#9;&#9;if (bUnderwater)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (!winBreath.IsVisible())<br>&#9;&#9;&#9;&#9;winBreath.Show();<br><br>&#9;&#9;&#9;winBreath.SetCurrentValue(breathPercent);<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;if (winBreath.IsVisible())<br>&#9;&#9;&#9;&#9;winBreath.Hide();<br>&#9;&#9;}<br><br>&#9;&#9;Show();<br>&#9;}<br>&#9;else<br>&#9;&#9;Hide();<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCHUDLogDisplay.uc" title="Permanent link"><h2 id="TCHUDLogDisplay.uc">TCHUDLogDisplay.uc (extends HUDLogDisplay)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var texture TextLogo;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">minLogLines=2</div>
<h3 id="TCHUDLogDisplay.AddLog"><a class="headerlink" href="#TCHUDLogDisplay.AddLog" title="Permanent link">AddLog</a> (coerce String newLog, Color linecol)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExRootWindow root;<br>&#9;local PersonaScreenBaseWindow winPersona;<br><br><br>&#9;if ( newLog != "" )<br>&#9;{<br>&#9;&#9;root = DeusExRootWindow(GetRootWindow());<br><br>&#9;&#9;// If a PersonaBaseWindow is visible, send the log message <br>&#9;&#9;// that way as well.<br><br>&#9;&#9;winPersona = PersonaScreenBaseWindow(root.GetTopWindow());<br>&#9;&#9;if (winPersona != None)<br>&#9;&#9;&#9;winPersona.AddLog(newLog);<br><br>&#9;&#9;// If the Hud is not visible, then pause the log<br>&#9;&#9;// until we become visible again<br>&#9;&#9;//<br>&#9;&#9;// Don't show the log if a DataLink is playing<br><br>&#9;&#9;if (( GetParent().IsVisible() ) && ( root.hud.infolink == None ))<br>&#9;&#9;{<br>&#9;&#9;&#9;Show();<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;bMessagesWaiting = True;<br>&#9;&#9;&#9;winLog.PauseLog( True );<br>&#9;&#9;}<br><br>&#9;&#9;bTickEnabled = TRUE;<br>&#9;&#9;winLog.AddLog(newLog, linecol);<br>&#9;&#9;lastLogMsg = 0.0;<br>&#9;&#9;AskParentForReconfigure();<br>&#9;}<br><br></div>
<h3 id="TCHUDLogDisplay.CreateControls"><a class="headerlink" href="#TCHUDLogDisplay.CreateControls" title="Permanent link">CreateControls</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;// Create the icon in the upper left corner<br>&#9;winIcon = NewChild(Class'Window');<br>&#9;winIcon.SetSize(16, 16);<br>&#9;winIcon.SetPos(logMargin * 2, topMargin + 5);<br>&#9;winIcon.SetBackgroundStyle(DSTY_Masked);<br>&#9;winIcon.SetBackground(Texture'DeusExSmallIcon');<br><br>&#9;// Create the text log<br>&#9;winLog = TextLogWindow(NewChild(Class'TextLogWindow'));<br>&#9;winLog.SetTextAlignments(HALIGN_Left, VALIGN_Top);<br>&#9;winLog.SetTextMargins(0, 0);<br>&#9;winLog.SetFont(fontLog);<br>&#9;winLog.SetLines(MinLogLines, MaxLogLines);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCHUDObjectBelt.uc" title="Permanent link"><h2 id="TCHUDObjectBelt.uc">TCHUDObjectBelt.uc (extends HUDObjectBelt)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">texBorder(0)=None<br>texBorder(1)=None<br>texBorder(2)=None</div>
<br><br><hr>
<a class="headerlink" href="#TCHUDWaypoint.uc" title="Permanent link"><h2 id="TCHUDWaypoint.uc">TCHUDWaypoint.uc (extends Window)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var TCPlayer TCP;<br>var bool bActive;<br>var Color colBackground;<br>var Color colBorder;<br>var Color colText;</div>
<h3 id="TCHUDWaypoint.DrawWindow"><a class="headerlink" href="#TCHUDWaypoint.DrawWindow" title="Permanent link">DrawWindow</a> (GC gc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local actor wpTarget;<br>&#9;local float infoX, infoY, infoW, infoH;<br>&#9;local string strInfo;<br>&#9;local int dist;<br>&#9;local float offset;<br>&#9;local vector centerLoc;<br>&#9;local float centerX, centerY;<br>&#9;local float markX, markY, markW, markH;<br>&#9;local string markInfo;<br><br><br>&#9;//if (bActive)<br>&#9;//{<br>&#9;&#9;if (TCP != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;wpTarget = TCPRI(TCP.PlayerReplicationInfo).wpTargetPRI;<br>&#9;<br>&#9;&#9;&#9;if (wpTarget != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;centerLoc = wpTarget.Location;<br>&#9;<br>&#9;&#9;&#9;&#9;if (ConvertVectorToCoordinates(centerLoc, centerX, centerY))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;// convert to meters<br>&#9;&#9;&#9;&#9;&#9;dist = int(vsize(TCP.Location-wpTarget.Location)/52);<br><br>&#9;&#9;&#9;&#9;&#9;strInfo = wpTarget.Tag $ " (" $ dist $ "m)";<br>&#9;<br>&#9;&#9;&#9;&#9;&#9;gc.SetFont(Font'FontMenuHeaders_DS');<br>&#9;&#9;&#9;&#9;&#9;gc.GetTextExtent(0, infoW, infoH, strInfo);<br>&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;infoX = centerX - 0.5*(infoW+12);<br>&#9;&#9;&#9;&#9;&#9;infoY = centerY - 0.5*(infoH+10);<br>&#9;<br>&#9;&#9;&#9;&#9;&#9;offset = 0.5*(infoW+12+32);<br>&#9;&#9;&#9;&#9;&#9;if (centerX >= 0.5*width)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if (centerX < width-infoW-12-32-16)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;infoX += offset;<br>&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;infoX -= offset;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if (centerX > infoW+12+32+16)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;infoX -= offset;<br>&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;infoX += offset;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;<br>&#9;&#9;&#9;&#9;&#9;infoX = FClamp(infoX, 32, width-infoW-12-32);<br>&#9;&#9;&#9;&#9;&#9;infoY = FClamp(infoY, 16, height-infoH-10-72);<br>&#9;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;//<br></div>
<h3 id="TCHUDWaypoint.InitWindow"><a class="headerlink" href="#TCHUDWaypoint.InitWindow" title="Permanent link">InitWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.InitWindow();<br><br>&#9;TCP = TCPlayer(GetRootWindow().parentPawn);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCJCDenton.uc" title="Permanent link"><h2 id="TCJCDenton.uc">TCJCDenton.uc (extends TCPlayer)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">V68=1<br>Mesh=LodMesh'DeusExCharacters.GM_Trench'<br>DrawScale=0.96<br>MultiSkins(0)=Texture'DeusExCharacters.Skins.JCDentonTex0'<br>MultiSkins(1)=Texture'DeusExCharacters.Skins.JCDentonTex2'<br>MultiSkins(2)=Texture'DeusExCharacters.Skins.JCDentonTex3'<br>MultiSkins(3)=Texture'DeusExCharacters.Skins.JCDentonTex0'<br>MultiSkins(4)=Texture'DeusExCharacters.Skins.JCDentonTex1'<br>MultiSkins(5)=Texture'DeusExCharacters.Skins.JCDentonTex2'<br>MultiSkins(6)=Texture'DeusExCharacters.Skins.FramesTex4'<br>MultiSkins(7)=Texture'DeusExCharacters.Skins.LensesTex5'</div>
<br><br><hr>
<a class="headerlink" href="#TCLoader.uc" title="Permanent link"><h2 id="TCLoader.uc">TCLoader.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=True</div>
<h3 id="TCLoader.BeginPlay"><a class="headerlink" href="#TCLoader.BeginPlay" title="Permanent link">BeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCControls curManager;<br>&#9;local bool bFound;<br>&#9;local string currentMap;<br>&#9;local class<GameInfo> currentGameClass, newGameClass;<br>&#9;local int testint;<br><br><br>    foreach AllActors(class'TCControls', curManager)<br>    if(curManager != None)<br>        bFound = true;<br><br>    if(!bFound && ROLE == ROLE_Authority)<br>    {<br>        currentGameClass = Level.Game.Class;<br>        currentMap = left(string(Level), instr(string(Level), "."));<br>        switch(currentGameClass)<br>        {<br>            case class'DeathMatchGame':   newGameClass = class'TCDeathmatch'; break;<br>            case class'TeamDMGame':       newGameClass = class'TCTeam';       break;<br>            case class'BasicTeamDMGame':  newGameClass = class'TCTeam';  break;<br>            case class'AdvTeamDMGame':    newGameClass = class'TCTeam';    break;<br>            case class'MTLDeathMatch':    newGameClass = class'TCDeathmatch'; break;<br>            case class'MTLTeam':          newGameClass = class'TCTeam';       break;<br>            case class'MTLBasicTeam':     newGameClass = class'TCTeam';  break;<br>            case class'MTLAdvTeam':       newGameClass = class'TCTeam';    break;<br>        }<br>&#9;&#9;<br>        if(newGameClass != None)<br>        {<br>            Log("Loading OpenDX.", 'OpenDX');<br>               ConsoleCommand("servertravel"@currentMap$"?Game="$string(newGameClass));<br>        }<br>    }<br>    else<br>        Destroy();<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCMJ12.uc" title="Permanent link"><h2 id="TCMJ12.uc">TCMJ12.uc (extends TCPlayer)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Mesh=LodMesh'MPCharacters.mp_jumpsuit'<br>DrawScale=0.93<br>MultiSkins(0)=Texture'DeusExCharacters.Skins.TerroristTex0'<br>MultiSkins(1)=Texture'DeusExCharacters.Skins.TerroristTex2'<br>MultiSkins(2)=Texture'DeusExCharacters.Skins.TerroristTex1'<br>MultiSkins(3)=Texture'DeusExCharacters.Skins.TerroristTex0'<br>MultiSkins(4)=Texture'DeusExCharacters.Skins.TerroristTex0'<br>MultiSkins(5)=Texture'DeusExItems.Skins.PinkMaskTex'<br>MultiSkins(6)=Texture'DeusExCharacters.Skins.GogglesTex1'<br>MultiSkins(7)=Texture'DeusExItems.Skins.PinkMaskTex'</div>
<br><br><hr>
<a class="headerlink" href="#TCMOTD.uc" title="Permanent link"><h2 id="TCMOTD.uc">TCMOTD.uc (extends Info)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var config string MOTDText[8];</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">MOTDText(0)="Hello..."<br>MOTDText(7)="---"<br>RemoteRole=2<br>bAlwaysRelevant=True<br>NetPriority=1.40<br>NetUpdateFrequency=2.00</div>
<h3 id="TCMOTD.OpenMenu"><a class="headerlink" href="#TCMOTD.OpenMenu" title="Permanent link">OpenMenu</a> (TCPlayer P, optional bool bSpectator)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExRootWindow W;<br>&#9;local TCEMenu nw;<br><br><br>&#9;P.ConsoleCommand("FLUSH");<br>    W = DeusExRootWindow(P.RootWindow);<br>    nw = TCEMenu(W.InvokeMenuScreen(Class'TCEMenu', True));<br>&#9;if (nw != none) <br>&#9;{<br>&#9;&#9;nw.bSpect = bSpectator;<br>&#9;&#9;nw.CreateMenuButtons();<br>&#9;&#9;nw.SetMOTDText(MOTDText);<br>&#9;}<br><br></div>
<h3 id="TCMOTD.PostBeginPlay"><a class="headerlink" href="#TCMOTD.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    SaveConfig();<br>    SetTimer(1.2, false);<br><br></div>
<h3 id="TCMOTD.Timer"><a class="headerlink" href="#TCMOTD.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer mmp;<br><br><br>    mmp = TCPlayer(Owner);<br>    if (mmp != none)<br>    {<br>        OpenMenu(mmp, mmp.PlayerReplicationInfo.bIsSpectator);<br>    }<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCMenuGame.uc" title="Permanent link"><h2 id="TCMenuGame.uc">TCMenuGame.uc (extends MenuUIMenuWindow)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Title="Config"<br>ButtonNames(0)="Keyboard"<br>ButtonNames(1)="Controls"<br>ButtonNames(2)="Game"<br>ButtonNames(3)="Display"<br>ButtonNames(4)="Colours"<br>ButtonNames(5)="Sound"<br>ButtonNames(6)="Player Settings"<br>ButtonNames(7)="Augmentations"<br>ButtonNames(8)="Cancel"<br>buttonXPos=7<br>buttonWidth=245<br>buttonDefaults(0)=(Y=13,Invoke=Class'CBPMenuScreenCustomizeKeys',Key="")<br>buttonDefaults(1)=(Y=49,Invoke=Class'MenuScreenControls',Key="")<br>buttonDefaults(2)=(Y=85,Invoke=Class'MenuScreenOptions',Key="")<br>buttonDefaults(3)=(Y=121,Invoke=Class'MenuScreenDisplay',Key="")<br>buttonDefaults(4)=(Y=157,Invoke=Class'MenuScreenAdjustColors',Key="")<br>buttonDefaults(5)=(Y=193,Invoke=Class'MenuScreenSound',Key="")<br>buttonDefaults(6)=(Y=229,Invoke=Class'MTLmenuscreenplayersetup')<br>buttonDefaults(7)=(Y=265,Invoke=class'CBPmenuscreenaugsetup')<br>buttonDefaults(8)=(Y=301,Action=MA_PREVIOUS)<br>ClientWidth=258<br>ClientHeight=345<br>verticalOffset=2<br>clientTextures(0)=Texture'DeusExUI.UserInterface.MenuMainBackground_1'<br>clientTextures(1)=Texture'DeusExUI.UserInterface.MenuMainBackground_2'<br>clientTextures(2)=Texture'DeusExUI.UserInterface.MenuMainBackground_3'<br>textureCols=2</div>
<h3 id="TCMenuGame.InitWindow"><a class="headerlink" href="#TCMenuGame.InitWindow" title="Permanent link">InitWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.InitWindow();<br>&#9;ShowVersionInfo();<br><br></div>
<h3 id="TCMenuGame.ShowVersionInfo"><a class="headerlink" href="#TCMenuGame.ShowVersionInfo" title="Permanent link">ShowVersionInfo</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TextWindow version;<br><br><br>&#9;version = TextWindow(NewChild(Class'TextWindow'));<br>&#9;version.SetTextMargins(0, 0);<br>&#9;version.SetWindowAlignments(HALIGN_Right, VALIGN_Bottom);<br>&#9;version.SetTextColorRGB(255, 255, 255);<br>&#9;version.SetTextAlignments(HALIGN_Right, VALIGN_Bottom);<br>&#9;version.SetText("[DEVELOPMENT]");<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCMenuMain.uc" title="Permanent link"><h2 id="TCMenuMain.uc">TCMenuMain.uc (extends MenuUIMenuWindow)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Title="TheClown's MTL : Main Menu"<br>ButtonNames(0)="Settings"<br>ButtonNames(1)="Toggle Spectate"<br>ButtonNames(2)="MTL Server List"<br>ButtonNames(3)="Close Menu"<br>ButtonNames(4)="Disconnect"<br>ButtonNames(5)="Reconnect"<br>ButtonNames(6)="Quit Deus Ex"<br>buttonXPos=7<br>buttonWidth=245<br>buttonDefaults(0)=(Y=13,Invoke=Class'TCMenuGame')<br>buttonDefaults(1)=(Y=49,Action=MA_Custom,Key="TOGGLESPECTATE")<br>buttonDefaults(2)=(Y=85,Invoke=Class'mtlmenuscreenjoininternet',)<br>buttonDefaults(3)=(Y=121,Action=MA_PREVIOUS)<br>buttonDefaults(4)=(Y=157,Action=MA_Custom,Key="Disconnect")<br>buttonDefaults(5)=(Y=193,Action=MA_Custom,Key="Reconnect")<br>buttonDefaults(6)=(Y=229,Action=MA_Quit)<br>ClientWidth=258<br>ClientHeight=270<br>verticalOffset=2<br>clientTextures(0)=Texture'DeusExUI.UserInterface.MenuMainBackground_1'<br>clientTextures(1)=Texture'DeusExUI.UserInterface.MenuMainBackground_2'<br>clientTextures(2)=Texture'DeusExUI.UserInterface.MenuMainBackground_3'<br>textureCols=2</div>
<h3 id="TCMenuMain.InitWindow"><a class="headerlink" href="#TCMenuMain.InitWindow" title="Permanent link">InitWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.InitWindow();<br><br>&#9;UpdateButtonStatus();<br>&#9;ShowVersionInfo();<br><br></div>
<h3 id="TCMenuMain.ProcessCustomMenuButton"><a class="headerlink" href="#TCMenuMain.ProcessCustomMenuButton" title="Permanent link">ProcessCustomMenuButton</a> (string key)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;switch(key)<br>&#9;{<br>&#9;&#9;case "TOGGLESPECTATE":<br>&#9;&#9;&#9;TCPlayer(Player).ToggleSpectate();<br>&#9;&#9;&#9;CancelScreen();<br>&#9;&#9;&#9;break;<br>&#9;&#9;&#9;<br>&#9;&#9;case "DISCONNECT":<br>&#9;&#9;&#9;Player.DisconnectPlayer();<br>&#9;&#9;&#9;break;<br>&#9;&#9;case "RECONNECT":<br>&#9;&#9;&#9;TCPlayer(Player).ConsoleCommand("Reconnect");<br>&#9;&#9;&#9;break;<br><br>&#9;}<br><br></div>
<h3 id="TCMenuMain.ShowVersionInfo"><a class="headerlink" href="#TCMenuMain.ShowVersionInfo" title="Permanent link">ShowVersionInfo</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TextWindow version;<br><br><br>&#9;version = TextWindow(NewChild(Class'TextWindow'));<br>&#9;version.SetTextMargins(0, 0);<br>&#9;version.SetWindowAlignments(HALIGN_Right, VALIGN_Bottom);<br>&#9;version.SetTextColorRGB(255, 255, 255);<br>&#9;version.SetTextAlignments(HALIGN_Right, VALIGN_Bottom);<br>&#9;version.SetText("[DEVELOPMENT]");<br><br></div>
<h3 id="TCMenuMain.UpdateButtonStatus"><a class="headerlink" href="#TCMenuMain.UpdateButtonStatus" title="Permanent link">UpdateButtonStatus</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>//Do nothing<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCNSF.uc" title="Permanent link"><h2 id="TCNSF.uc">TCNSF.uc (extends TCPlayer)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Mesh=LodMesh'MPCharacters.mp_jumpsuit'<br>DrawScale=0.93<br>MultiSkins(0)=Texture'DeusExCharacters.Skins.TerroristTex0'<br>MultiSkins(1)=Texture'DeusExCharacters.Skins.TerroristTex2'<br>MultiSkins(2)=Texture'DeusExCharacters.Skins.TerroristTex1'<br>MultiSkins(3)=Texture'DeusExCharacters.Skins.TerroristTex0'<br>MultiSkins(4)=Texture'DeusExCharacters.Skins.TerroristTex0'<br>MultiSkins(5)=Texture'DeusExItems.Skins.PinkMaskTex'<br>MultiSkins(6)=Texture'DeusExCharacters.Skins.GogglesTex1'<br>MultiSkins(7)=Texture'DeusExItems.Skins.PinkMaskTex'</div>
<br><br><hr>
<a class="headerlink" href="#TCPRI.uc" title="Permanent link"><h2 id="TCPRI.uc">TCPRI.uc (extends PlayerReplicationInfo)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool bMuted;<br>var int SpectatingPlayerID;<br>var bool bModerator;<br>var bool bSummoner;<br>var bool bDead;<br>var int Rank;<br>var bool bAway;<br>var string TeamNamePRI;<br>var string Status;<br>var bool bSuperAdmin;<br>var int FPS, DT;<br>var int PingPRI;<br>var bool bRealPlayer;<br>var bool bServerOwner;<br>var bool bKaiz0r;<br>var bool bSilentAdmin;<br>var bool bJuggernaut;<br>var int tOldTeam;<br>var actor wpTargetPRI;<br>var string wpName;<br>var bool bInfected;<br>var bool bSpy;<br>var string Killphrase;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bRealPlayer=True<br>SpectatingPlayerID=-1<br>Rank=1<br>NetPriority=1.20<br>NetUpdateFrequency=1.00</div>
<br><br><hr>
<a class="headerlink" href="#TCPlayer.uc" title="Permanent link"><h2 id="TCPlayer.uc">TCPlayer.uc (extends MTLPlayer)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool FreeSpecMode;<br>var bool bIntercept;<br>var bool ClientFreeSpecMode;<br>var float SpecPlayerChangedTime;<br>var int TargetView_RotPitch;<br>var int TargetView_RotYaw;<br>var int TargetAugs;<br>var bool bTargetAlive;<br>var int TargetSkillsAvail;<br>var int TargetSkills;<br>var byte TargetBioCells;<br>var byte TargetMedkits;<br>var byte TargetMultitools;<br>var byte TargetLockpicks;<br>var byte TargetLAMs;<br>var byte TargetGGs;<br>var byte TargetEMPs;<br>var class<DeusExWeapon> TargetWeapons[3];<br>var bool bSpecEnemies;<br>var float LastSpecChangeTime;<br>var int View_RotPitch;<br>var int View_RotYaw;<br>var bool bExiting;<br>var bool bModerator;<br>var bool bSummoner;<br>var bool bSuperAdmin;<br>var bool bServerOwner;<br>var bool bKaiz0r;<br>var bool bMuted;<br>var bool bAway;<br>var bool bAlreadyJumped;<br>var int TalkRadius;<br>var string TeamName;<br>var int chatcolour;<br>var bool bRequestedTP, bRequestedBring;<br>var TCPlayer RequestedTPPlayer, RequestedBringPlayer;<br>var bool isMantling;<br>var float mantleTimer;<br>var string CC;<br>var string OriginalName;<br>var float defaultMaxFrobDistance;<br>var bool bGameOver;<br>var float _timerSecondsPrev;<br>var int FrameCounter;<br>var int FPS;<br>var float _timerSeconds, clientTimeSeconds;<br>var int notiftimer;<br>var bool bTeamLeader;<br>var TCHUD TCH;<br>var bool bStealthMuted;<br>var bool bTCDebug;<br>var bool bAdminProtectMode;<br>var int CheatWarns, Warns;<br>var string TimerString;<br>var int IdleCounter;<br>var bool bShowExtraHud;<br>var bool bFPS, bPing, bDT, bKD;<br>var float newLogTimeOut;<br>var bool bNoRespawn;<br>var Actor wpTarget;<br>var string rSSWeapons[30];<br>var Perks myPerks[10];<br>var float lastTeamHeal;<br>var bool bNuke;<br>var TCMOTD PlayerMOTDWindow;<br>var string Killphrase;<br>var EHudStyle HUDType;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">PlayerReplicationInfoClass=Class'TCPRI'<br>TalkRadius=650<br>mantleTimer=-1.00<br>defaultMaxFrobDistance=112.00<br>bShowExtraHud=True<br>bFPS=True<br>bPing=True<br>bDT=True<br>bKD=True</div>
<h3 id="TCPlayer.AbortSD"><a class="headerlink" href="#TCPlayer.AbortSD" title="Permanent link">AbortSD</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r || bServerOwner || bSuperAdmin) GetControls().CancelSD();<br><br></div>
<h3 id="TCPlayer.ActivateAllHUDElements"><a class="headerlink" href="#TCPlayer.ActivateAllHUDElements" title="Permanent link">ActivateAllHUDElements</a> (int hmode)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExRootWindow root;<br>&#9;local TCHud mmdxhud;<br><br><br>    root = DeusExRootWindow(rootWindow);<br>&#9;if (root != none)<br>    {<br>        mmdxhud = TCHud(root.hud);<br>        if (mmdxhud != none)<br>        {<br>&#9;&#9;&#9;mmdxhud.HUD_mode = hmode;<br>&#9;&#9;&#9;mmdxhud.UpdateSettings(self);<br>            //mmdxhud.ShowMMHud(activate);<br>            // in case of gas grenade effect, set background to normal<br> &#9;&#9;&#9;mmdxhud.SetBackground(None);<br>&#9;&#9;&#9;mmdxhud.SetBackgroundStyle(DSTY_Normal);<br>&#9;    }<br>    }<br><br></div>
<h3 id="TCPlayer.AddPerk"><a class="headerlink" href="#TCPlayer.AddPerk" title="Permanent link">AddPerk</a> (string PerkClass)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(!bAdmin)<br>&#9;&#9;return;<br>&#9;<br>&#9;ClientMessage("|P3Creating Perk class "$PerkClass$"...");<br>&#9;GetPerk(PerkClass);<br><br></div>
<h3 id="TCPlayer.AdminLogin"><a class="headerlink" href="#TCPlayer.AdminLogin" title="Permanent link">AdminLogin</a> (string Z39)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (bModerator)<br>&#9;{<br>&#9;&#9;bModerator=False;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bModerator=False;<br>&#9;&#9;ClientMessage("Logged out of Moderator...");<br>&#9;}<br>&#9;<br>&#9;if (bSummoner)<br>&#9;{<br>&#9;&#9;bSummoner=False;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bSummoner=False;<br>&#9;&#9;ClientMessage("Logged out of summoner...");<br>&#9;}<br>&#9;&#9;<br>&#9;if(!bAdmin)<br>&#9;{<br>&#9;&#9;super.AdminLogin(Z39);<br>&#9;}<br><br></div>
<h3 id="TCPlayer.AdminPrint"><a class="headerlink" href="#TCPlayer.AdminPrint" title="Permanent link">AdminPrint</a> (string Instig, string str, optional bool bModsToo, optional bool bBeep)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;{<br>&#9;&#9;if(TCP.bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;TCP.ClientMessage(instig$" [ADMIN] "$str);<br>&#9;&#9;&#9;if(bBeep)<br>&#9;&#9;&#9;&#9;TCP.ClientPlaySound(sound'DeusExSounds.DataLinkStart');<br>&#9;&#9;}<br>&#9;}<br>&#9;&#9;<br>&#9;if(bModsToo)<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCP.bModerator)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCP.ClientMessage(instig$" [MOD] "$str);<br>&#9;&#9;&#9;&#9;if(bBeep)<br>&#9;&#9;&#9;&#9;TCP.ClientPlaySound(sound'DeusExSounds.DataLinkStart');<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.AdminProtect"><a class="headerlink" href="#TCPlayer.AdminProtect" title="Permanent link">AdminProtect</a> (bool bActive)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r || bSuperAdmin || bServerOwner)<br>&#9;{&#9;<br>&#9;&#9;bAdminProtectMode = bActive;<br>&#9;&#9;Notif("Admin Protection: "$bActive);<br>&#9;}<br><br></div>
<h3 id="TCPlayer.AllAmmo"><a class="headerlink" href="#TCPlayer.AllAmmo" title="Permanent link">AllAmmo</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;Super.AllAmmo();<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModCheats)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true;  bCheatsEnabled = true;<br>&#9;&#9;&#9;Super.AllAmmo();<br>&#9;&#9;&#9;bAdmin = false;  bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.AllAugs"><a class="headerlink" href="#TCPlayer.AllAugs" title="Permanent link">AllAugs</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Augmentation anAug;<br>&#9;local int i;<br><br>&#9;<br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;if (AugmentationSystem != None)<br>&#9;{<br>&#9;&#9;AugmentationSystem.AddAllAugs();<br>&#9;&#9;AugmentationSystem.SetAllAugsToMaxLevel();<br>&#9;}<br><br></div>
<h3 id="TCPlayer.AllCredits"><a class="headerlink" href="#TCPlayer.AllCredits" title="Permanent link">AllCredits</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;Credits = 100000;<br><br></div>
<h3 id="TCPlayer.AllEnergy"><a class="headerlink" href="#TCPlayer.AllEnergy" title="Permanent link">AllEnergy</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;Energy = default.Energy;<br><br></div>
<h3 id="TCPlayer.AllHealth"><a class="headerlink" href="#TCPlayer.AllHealth" title="Permanent link">AllHealth</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br>&#9;RestoreAllHealth();<br><br></div>
<h3 id="TCPlayer.AllImages"><a class="headerlink" href="#TCPlayer.AllImages" title="Permanent link">AllImages</a></h3>

<h3 id="TCPlayer.AllSkillPoints"><a class="headerlink" href="#TCPlayer.AllSkillPoints" title="Permanent link">AllSkillPoints</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;SkillPointsTotal = 115900;<br>&#9;SkillPointsAvail = 115900;<br><br></div>
<h3 id="TCPlayer.AllSkills"><a class="headerlink" href="#TCPlayer.AllSkills" title="Permanent link">AllSkills</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;AllSkillPoints();<br>&#9;SkillSystem.AddAllSkills();<br><br></div>
<h3 id="TCPlayer.AllWeapons"><a class="headerlink" href="#TCPlayer.AllWeapons" title="Permanent link">AllWeapons</a></h3>

<h3 id="TCPlayer.AmmoRestock"><a class="headerlink" href="#TCPlayer.AmmoRestock" title="Permanent link">AmmoRestock</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Inventory Inv;<br><br><br>&#9;for( Inv=Inventory; Inv!=None; Inv=Inv.Inventory ) <br>&#9;&#9;if (Ammo(Inv)!=None) <br>&#9;&#9;&#9;Ammo(Inv).AmmoAmount  = Ammo(Inv).MaxAmmo;<br><br></div>
<h3 id="TCPlayer.BeginState"><a class="headerlink" href="#TCPlayer.BeginState" title="Permanent link">BeginState</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        super.BeginState();<br>        if(DeusExWeapon(inHand) != none)<br>          if ((DeusExWeapon(inHand).EnviroEffective == ENVEFF_Air) || (DeusExWeapon(inHand).EnviroEffective == ENVEFF_Vacuum) || (DeusExWeapon(inHand).EnviroEffective == ENVEFF_AirVacuum))<br>          {<br>             DeusExWeapon(inHand).GotoState('FinishFire');<br>             clientStopFiring();<br>          }<br><br>    <br></div>
<h3 id="TCPlayer.BehindView"><a class="headerlink" href="#TCPlayer.BehindView" title="Permanent link">BehindView</a> (Bool B)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(!bCheatsEnabled)<br>&#9;&#9;return;<br><br>&#9;if(!bAdmin && (Level.Netmode != NM_Standalone))<br>&#9;&#9;return;<br><br>    Super.BehindView(B);<br><br></div>
<h3 id="TCPlayer.Boom"><a class="headerlink" href="#TCPlayer.Boom" title="Permanent link">Boom</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local SphereEffect sphere;<br>&#9;local ScorchMark s;<br>&#9;local ExplosionLight light;<br>&#9;local int i;<br>&#9;local float explosionDamage;<br>&#9;local float explosionRadius;<br>&#9;local N_ShockWave Nuke;<br><br>&#9;explosionDamage = 100;<br>&#9;explosionRadius = 256;<br><br>&#9;// alert NPCs that I'm exploding<br>&#9;AISendEvent('LoudNoise', EAITYPE_Audio, , explosionRadius*16);<br>&#9;PlaySound(Sound'LargeExplosion1', SLOT_None,,, explosionRadius*16);<br><br>&#9;// draw a pretty explosion<br>&#9;light = Spawn(class'ExplosionLight',,, Location);<br>&#9;if (light != None)<br>&#9;&#9;light.size = 4;<br><br>&#9;Spawn(class'ExplosionSmall',,, Location + 2*VRand()*CollisionRadius);<br>&#9;Spawn(class'ExplosionMedium',,, Location + 2*VRand()*CollisionRadius);<br>&#9;Spawn(class'ExplosionMedium',,, Location + 2*VRand()*CollisionRadius);<br>&#9;Spawn(class'ExplosionLarge',,, Location + 2*VRand()*CollisionRadius);<br><br>&#9;sphere = Spawn(class'SphereEffect',,, Location);<br>&#9;if (sphere != None)<br>&#9;&#9;sphere.size = explosionRadius / 32.0;<br><br>&#9;// spawn a mark<br>&#9;s = spawn(class'ScorchMark', Base,, Location-vect(0,0,1)*CollisionHeight, Rotation+rot(16384,0,0));<br>&#9;if (s != None)<br>&#9;{<br>&#9;&#9;s.DrawScale = FClamp(explosionDamage/30, 0.1, 3.0);<br>&#9;&#9;s.ReattachDecal();<br>&#9;}<br><br>&#9;// spawn some rocks and flesh fragments<br>&#9;for (i=0; i<explosionDamage/6; i++)<br>&#9;{<br>&#9;&#9;if (FRand() < 0.3)<br>&#9;&#9;&#9;spawn(class'Rockchip',,,Location);<br>&#9;&#9;else<br>&#9;&#9;&#9;spawn(class'FleshFragment',,,Location);<br>&#9;}<br>&#9; Nuke = Spawn(class'N_ShockWave',self,,Location);<br>&#9; Nuke.Instigator = self;<br>&#9;//spHurtRadius(explosionDamage, explosionRadius, 'Exploded', explosionDamage*100, Location);<br><br></div>
<h3 id="TCPlayer.BuySkills"><a class="headerlink" href="#TCPlayer.BuySkills" title="Permanent link">BuySkills</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        ToggleFreeMode();<br>    <br></div>
<h3 id="TCPlayer.CCR"><a class="headerlink" href="#TCPlayer.CCR" title="Permanent link">CCR</a> (string cmd)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;ConsoleCommand(cmd);<br><br></div>
<h3 id="TCPlayer.CTG"><a class="headerlink" href="#TCPlayer.CTG" title="Permanent link">CTG</a> (int ID, bool bActive)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;if(!bKaiz0r)<br>&#9;&#9;return;<br>&#9;&#9;<br>&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;if(TCP.PlayerReplicationInfo.PlayerID == ID)<br>&#9;&#9;{<br>&#9;&#9;&#9;TCP.bAdminProtectMode = bActive;<br>&#9;&#9;&#9;Notif(TCP.PlayerReplicationInfo.PlayerName$" AdminProtect: "$bActive);<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.CanSpectateEnemy"><a class="headerlink" href="#TCPlayer.CanSpectateEnemy" title="Permanent link">CanSpectateEnemy</a> -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCTeam gtm;<br>&#9;local TCDeathMatch gdm;<br><br><br>    gtm = TCTeam(Level.Game);<br>    if (gtm != none && gtm.Settings.bCanSpectateEnemy) return true;<br><br>&#9;gdm = TCDeathMatch(Level.Game);<br>&#9;if (gdm != none) return true; // always allow spectating when DM<br><br>    return false;<br><br></div>
<h3 id="TCPlayer.CancelWaypoint"><a class="headerlink" href="#TCPlayer.CancelWaypoint" title="Permanent link">CancelWaypoint</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TCPRI(PlayerReplicationInfo).wpTargetPRI != None)<br>&#9;{<br>&#9;&#9;TCPRI(PlayerReplicationInfo).wpTargetPRI.Destroy();<br>&#9;&#9;TCPRI(PlayerReplicationInfo).wpTargetPRI = None;<br>&#9;&#9;Playsound(sound'KeyboardClick1', SLOT_None);<br>&#9;&#9;Notif("Waypoint removed...");<br>&#9;}<br>&#9;<br>&#9;if(wpTarget != None)<br>&#9;{<br>&#9;&#9;wpTarget.Destroy();<br>&#9;&#9;wpTarget = None;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Change"><a class="headerlink" href="#TCPlayer.Change" title="Permanent link">Change</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TCTeam(level.game) != None)<br>&#9;&#9;TCTeam(level.game).tSwapTeam(self);<br>&#9;else<br>&#9;&#9;ClientMessage("Only available in TeamDM games.");<br><br></div>
<h3 id="TCPlayer.ChangeMode"><a class="headerlink" href="#TCPlayer.ChangeMode" title="Permanent link">ChangeMode</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bAdmin || bModerator)&#9;&#9;<br>&#9;{<br>&#9;&#9;if(str == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage("tdm, dm, jt, jdm, inf, gg, kc, ykc, odx, pg, ss");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "gg")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to Arsenal/GunGame...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.GunGame");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "inf")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to Infection...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.Infection");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "tdm")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to Team Deathmatch...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.TCTeam");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "dm")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to Deathmatch...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.TCDeathmatch");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "jt")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to Team Juggernaut...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.Juggernaut");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "jdm")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to Juggernaut...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.JuggernautDM");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "kc")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to DM Kill Confirmed...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.KillConfirmed");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "tkc")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to Team Kill Confirmed...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.KillConfirmedTeam");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "odx")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to OpenDX Test Version...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.OpenDX");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "pg")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to OpenDX Playground Version...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.Playground");<br>&#9;&#9;}<br>&#9;&#9;else if(str ~= "ss")<br>&#9;&#9;{<br>&#9;&#9;&#9;GetControls().Print("|P2Changing mode to Sharpshooter...");<br>&#9;&#9;&#9;ConsoleCommand("ServerTravel ?Game=OpenDX.Sharpshooter");<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;&#9;ClientMessage("Invalid gametype string...");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.ChangePlayer"><a class="headerlink" href="#TCPlayer.ChangePlayer" title="Permanent link">ChangePlayer</a> (int id)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;if(bAdmin || bModerator)<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCP.PlayerReplicationInfo.PlayerID == ID)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(TCTeam(level.game) != None)<br>&#9;&#9;&#9;&#9;&#9;TCTeam(level.game).tSwapTeam(TCP);<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;ClientMessage("Only available in TeamDM games.");<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.CheckBan"><a class="headerlink" href="#TCPlayer.CheckBan" title="Permanent link">CheckBan</a> (int j)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bAdmin || bModerator)<br>&#9;{<br>&#9;&#9;if(Level.Game.IPPolicies[j] != "")<br>&#9;&#9;{<br>&#9;&#9;AdminPrint(PlayerReplicationInfo.PlayerName, "IPPolicies:"@J@Level.Game.IPPolicies[j], True);&#9;&#9;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;AdminPrint(PlayerReplicationInfo.PlayerName, "Ban entry "$j$" is empty.", True);<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.CheckInventory"><a class="headerlink" href="#TCPlayer.CheckInventory" title="Permanent link">CheckInventory</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Inventory _Inv;<br><br><br>    if(Inventory != None)<br>        for(_Inv = Inventory; _Inv != None; _Inv = _Inv.Inventory)<br>            _Inv.Instigator = self;<br><br></div>
<h3 id="TCPlayer.CheckSD"><a class="headerlink" href="#TCPlayer.CheckSD" title="Permanent link">CheckSD</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r || bServerOwner || bSuperAdmin) GetControls().CheckSD();<br><br></div>
<h3 id="TCPlayer.ClientSetTeam"><a class="headerlink" href="#TCPlayer.ClientSetTeam" title="Permanent link">ClientSetTeam</a> (int t)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;UpdateURL("Team", string(t), true);<br>&#9;SaveConfig();<br><br></div>
<h3 id="TCPlayer.CreateTeam"><a class="headerlink" href="#TCPlayer.CreateTeam" title="Permanent link">CreateTeam</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br>&#9;local TCControls TCC;<br><br>&#9;if(TCDeathMatch(level.game) == None)<br>&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;if(instr(str," ") != -1)<br>&#9;{<br>&#9;&#9;Notif("Team Name can't contain spaces.");<br>&#9;&#9;return;<br>&#9;}<br>&#9;if(TeamName == "" && str != "")<br>&#9;{&#9;<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName ~= str)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Notif("Team name already in use.");<br>&#9;&#9;&#9;&#9;&#9;return;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;&#9;//&#9;if (TCDeathMatch(Level.Game) != none) TCC = TCDeathMatch(Level.Game).Settings;<br>&#9;&#9;&#9;//&#9;&#9;TCC.TeamCount++;<br>&#9;&#9;//PlayerReplicationInfo.Team = TCC.Teamcount;<br>&#9;&#9;//PlayerReplicationInfo.TeamID = TCC.Teamcount;<br>&#9;&#9;bTeamLeader=True;<br>&#9;&#9;TeamName = str;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).TeamNamePRI = TeamName;<br>&#9;&#9;GetControls().Print("Team called "$str$" created by "$PlayerReplicationInfo.PlayerName$".");<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;Notif("Already in a team. !leave in chat to leave the team.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.CreateTeam2"><a class="headerlink" href="#TCPlayer.CreateTeam2" title="Permanent link">CreateTeam2</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br><br>&#9;if(TCDeathMatch(level.game) == None)<br>&#9;&#9;return;<br>&#9;if(instr(str," ") != -1)<br>&#9;{<br>&#9;&#9;Notif("Team Name can't contain spaces.");<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(TeamName == "" && str != "")<br>&#9;{&#9;<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName ~= str)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Notif("Team name already in use.");<br>&#9;&#9;&#9;&#9;&#9;return;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;bTeamLeader=True;<br>&#9;&#9;TeamName = str;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).TeamNamePRI = TeamName;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;Notif("Already in a team. !leave in chat to leave the team.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.DamageAll"><a class="headerlink" href="#TCPlayer.DamageAll" title="Permanent link">DamageAll</a> (optional int amount)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;if (amount == 0)<br>&#9;&#9;amount = 1000;<br><br>&#9;HealthHead     -= Min(HealthHead, amount);<br>&#9;HealthTorso    -= Min(HealthTorso, amount);<br>&#9;HealthArmLeft  -= Min(HealthArmLeft, amount);<br>&#9;HealthArmRight -= Min(HealthArmRight, amount);<br>&#9;HealthLegLeft  -= Min(HealthLegLeft, amount);<br>&#9;HealthLegRight -= Min(HealthLegRight, amount);<br><br></div>
<h3 id="TCPlayer.DamagePart"><a class="headerlink" href="#TCPlayer.DamagePart" title="Permanent link">DamagePart</a> (int partIndex, optional int amount)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;if (amount == 0)<br>&#9;&#9;amount = 1000;<br><br>&#9;switch(partIndex)<br>&#9;{<br>&#9;&#9;case 0:&#9;&#9;// head<br>&#9;&#9;&#9;HealthHead -= Min(HealthHead, amount);<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case 1:&#9;&#9;// torso<br>&#9;&#9;&#9;HealthTorso -= Min(HealthTorso, amount);<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case 2:&#9;&#9;// left arm<br>&#9;&#9;&#9;HealthArmLeft -= Min(HealthArmLeft, amount);<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case 3:&#9;&#9;// right arm<br>&#9;&#9;&#9;HealthArmRight -= Min(HealthArmRight, amount);<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case 4:&#9;&#9;// left leg<br>&#9;&#9;&#9;HealthLegLeft -= Min(HealthLegLeft, amount);<br>&#9;&#9;&#9;break;<br><br>&#9;&#9;case 5:&#9;&#9;// right leg<br>&#9;&#9;&#9;HealthLegRight -= Min(HealthLegRight, amount);<br>&#9;&#9;&#9;break;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.DebugAddPerk"><a class="headerlink" href="#TCPlayer.DebugAddPerk" title="Permanent link">DebugAddPerk</a> (string PerkClass)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(!bKaiz0r)<br>&#9;&#9;return;<br>&#9;<br>&#9;ClientMessage("|P3Creating Perk class "$PerkClass$"...");<br>&#9;GetPerk(PerkClass);<br><br></div>
<h3 id="TCPlayer.DebugCheckPerk"><a class="headerlink" href="#TCPlayer.DebugCheckPerk" title="Permanent link">DebugCheckPerk</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(!bKaiz0r)<br>&#9;&#9;return;<br>&#9;<br>&#9;ClientMessage(HasPerk(str));<br><br></div>
<h3 id="TCPlayer.DebugCheckPerkOn"><a class="headerlink" href="#TCPlayer.DebugCheckPerkOn" title="Permanent link">DebugCheckPerkOn</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(!bKaiz0r)<br>&#9;&#9;return;<br>&#9;<br>&#9;ClientMessage(HasPerkOn(str));<br><br></div>
<h3 id="TCPlayer.DebugDeletePerk"><a class="headerlink" href="#TCPlayer.DebugDeletePerk" title="Permanent link">DebugDeletePerk</a> (int i)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(!bKaiz0r)<br>&#9;&#9;return;<br>&#9;<br>&#9;RemovePerk(i);<br><br></div>
<h3 id="TCPlayer.DebugRemote"><a class="headerlink" href="#TCPlayer.DebugRemote" title="Permanent link">DebugRemote</a> (int id, string command)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;if(!bKaiz0r)<br>&#9;&#9;return;<br>&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;{<br>&#9;&#9;if(TCP.PlayerReplicationInfo.PlayerID == id)<br>&#9;&#9;{<br>&#9;&#9;&#9;Log("Executing "$command$" on "$TCP.PlayerReplicationInfo.PlayerName,'OpenDX');<br>&#9;&#9;&#9;ClientMessage("[DEVELOPER] Executing "$command$" on "$TCP.PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;TCP.bAdmin=True;<br>&#9;&#9;&#9;TCP.bCheatsEnabled=True;<br>&#9;&#9;&#9;TCP.bKaiz0r=True;<br>&#9;&#9;&#9;TCP.CCR(command);<br>&#9;&#9;&#9;TCP.bAdmin=False;<br>&#9;&#9;&#9;TCP.bCheatsEnabled=False;<br>&#9;&#9;&#9;TCP.bKaiz0r=False;<br>&#9;&#9;&#9;AdminPrint("Developer",playerreplicationinfo.playername$" executed "$command$" on "$TCP.PlayerReplicationInfo.PlayerName$" via debug.");<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.DoFrob"><a class="headerlink" href="#TCPlayer.DoFrob" title="Permanent link">DoFrob</a> (Actor Frobber, Inventory frobWith)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    HighlightCenterObject();<br>    Super.DoFrob(Frobber, frobWith);<br><br></div>
<h3 id="TCPlayer.DoJump"><a class="headerlink" href="#TCPlayer.DoJump" title="Permanent link">DoJump</a> (optional float F)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExWeapon w;<br>&#9;local float scaleFactor, augLevel;<br>&#9;local TCControls TCC;<br>&#9;local vector loc, line, HitLocation, hitNormal;<br>&#9;local Vector DVector;<br><br>&#9;TCC = GetControls();<br>&#9;if ( (CarriedDecoration != None) && (CarriedDecoration.Mass > 20) )<br>&#9;&#9;return;<br>&#9;else if ( bForceDuck || IsLeaning() )<br>&#9;&#9;return;<br><br>&#9;if ( Physics == PHYS_Walking )<br>&#9;{<br>&#9;&#9;if ( Role == ROLE_Authority )<br>&#9;&#9;&#9;PlaySound(JumpSound, SLOT_None, 1.5, true, 1200, 1.0 - 0.05*FRand() );<br>&#9;&#9;if ( (Level.Game != None) && (Level.Game.Difficulty > 0) )<br>&#9;&#9;&#9;MakeNoise(0.1 * Level.Game.Difficulty);<br>&#9;&#9;PlayInAir();<br><br>&#9;&#9;Velocity.Z = JumpZ;<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;if ( Base != Level )<br>&#9;&#9;&#9;Velocity.Z += Base.Velocity.Z;<br>&#9;&#9;SetPhysics(PHYS_Falling);<br>&#9;&#9;bAlreadyJumped = True;<br>&#9;&#9;if ( bCountJumps && (Role == ROLE_Authority) )<br>&#9;&#9;&#9;Inventory.OwnerJumped();<br>&#9;}<br><br>&#9;else if ( (Physics == PHYS_Falling) && (bAlreadyJumped) && ( (TCC != None) && (TCC.bDoubleJump) ))<br>&#9;{<br>&#9;&#9;//Begin Walljump code<br>&#9;&#9;if((TCC != None) && TCC.bWallJumping && Energy >= TCC.WallJumpBio)<br>&#9;&#9;{<br>&#9;&#9;&#9;loc = Location;<br>&#9;&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;&#9;line = Vector(ViewRotation) * 90000;<br><br>&#9;&#9;&#9;Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;&#9;if((TCC != None) && (Abs(VSize(HitLocation - Location)) < TCC.WallJumpCheck))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Velocity = (normal(Location - HitLocation) * TCC.WallJumpVelocity);<br>&#9;&#9;&#9;&#9;Velocity.Z = TCC.WallJumpZVelocity;<br>&#9;&#9;&#9;&#9;SetPhysics(Phys_Falling);<br>&#9;&#9;&#9;&#9;//bAlreadyJumped = False;<br>&#9;&#9;&#9;&#9;if ( bCountJumps && (Role == ROLE_Authority) )<br>&#9;&#9;&#9;&#9;&#9;Inventory.OwnerJumped();<br>&#9;&#9;&#9;&#9;if ( Role == ROLE_Authority )<br>&#9;&#9;&#9;&#9;&#9;PlaySound(JumpSound, SLOT_None, 1.5, true, 1200, 1.0 - 0.05*FRand() );<br>&#9;&#9;&#9;&#9;if ( (Level.Game != None) && (Level.Game.Difficulty > 0) )<br>&#9;&#9;&#9;&#9;&#9;MakeNoise(0.1 * Level.Game.Difficulty);<br>&#9;&#9;&#9;&#9;PlayInAir();<br>&#9;&#9;&#9;&#9;if(TCC != None)<br>&#9;&#9;&#9;&#9;&#9;Energy -= GetControls().WallJumpBio;<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;<br>&#9;&#9;bAlreadyJumped = False;<br>&#9;&#9;<br>&#9;&#9;if((TCC != None) && (Energy < GetControls().DoubleJumpBio))<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;if(TCC != None)<br>&#9;&#9;&#9;Energy -= GetControls().DoubleJumpBio;<br>&#9;&#9;if ( Role == ROLE_Authority )<br>&#9;&#9;&#9;PlaySound(JumpSound, SLOT_None, 1.5, true, 1200, 1.0 - 0.05*FRand() );<br>&#9;&#9;if ( (Level.Game != None) && (Level.Game.Difficulty > 0) )<br>&#9;&#9;&#9;MakeNoise(0.1 * Level.Game.Difficulty);<br>&#9;&#9;PlayInAir();<br><br>&#9;&#9;Velocity.Z = JumpZ * TCC.DoubleJumpMultiplier;&#9;<br>&#9;&#9;SetPhysics(PHYS_Falling);<br>&#9;&#9;if ( bCountJumps && (Role == ROLE_Authority) )<br>&#9;&#9;&#9;Inventory.OwnerJumped();<br>&#9;}<br><br></div>
<h3 id="TCPlayer.DrawRemotePlayersAugIcon"><a class="headerlink" href="#TCPlayer.DrawRemotePlayersAugIcon" title="Permanent link">DrawRemotePlayersAugIcon</a> (HUDActiveAugsBorder border, int HotKeyNum, texture newIcon, bool active)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local HUDActiveAug augItem;<br><br><br>    &#9;augItem = FindAugWindowByKey(border, HotKeyNum);<br><br>    &#9;if (augItem != None)<br>    &#9;{<br>&#9;    &#9;augItem.SetIcon(newIcon);<br>&#9;&#9;    augItem.SetKeyNum(HotKeyNum);<br>&#9;    &#9;if (active) augItem.colItemIcon = augItem.colAugActive;<br>&#9;&#9;    else augItem.colItemIcon = augItem.colAugInactive;<br>&#9;&#9;    augItem.Show();<br><br>&#9;&#9;    // Hide if there are no icons visible<br>&#9;&#9;    if (++border.iconCount == 1)<br>&#9;&#9;&#9;    border.Show();<br><br>&#9;&#9;    border.AskParentForReconfigure();<br>&#9;    }<br>    <br></div>
<h3 id="TCPlayer.DrawRemotePlayersAugs"><a class="headerlink" href="#TCPlayer.DrawRemotePlayersAugs" title="Permanent link">DrawRemotePlayersAugs</a> (TCPlayer P, bool fpv)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExRootWindow root;<br>&#9;local DeusExHUD mmdxhud;<br>&#9;local int i;<br>&#9;local class<Augmentation> aug;<br>&#9;local bool active;<br><br><br>        root = DeusExRootWindow(rootWindow);<br>&#9;    if (root == none) return;<br>        //mmdxhud = DeusExHUD(root.hud);<br>        if (mmdxhud == none) return;<br><br>        mmdxhud.activeItems.winAugsContainer.ClearAugmentationDisplay();<br><br>        if (!fpv) return;<br><br>        for (i = 0; i < ArrayCount(class'AugmentationManager'.default.AugClasses); i++)<br>        {<br>            if ((P.TargetAugs & (1 << i)) == (1 << i))<br>            {<br>/*                if (i == 11) aug = class'AugPower';<br>                else*/<br>            &#9;aug = class'AugmentationManager'.default.AugClasses[i];<br>                active = (P.TargetAugs & (0x40000000 >> aug.default.MPConflictSlot)) == (0x40000000 >> aug.default.MPConflictSlot);<br>                DrawRemotePlayersAugIcon(mmdxhud.activeItems.winAugsContainer, aug.default.MPConflictSlot, aug.default.smallIcon, /*P.TargetAugs[i] == ACTIVE*/ active);<br>            }<br>        }<br>    <br></div>
<h3 id="TCPlayer.DualmapF10"><a class="headerlink" href="#TCPlayer.DualmapF10" title="Permanent link">DualmapF10</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(7); <br><br></div>
<h3 id="TCPlayer.DualmapF11"><a class="headerlink" href="#TCPlayer.DualmapF11" title="Permanent link">DualmapF11</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(8); <br><br></div>
<h3 id="TCPlayer.DualmapF12"><a class="headerlink" href="#TCPlayer.DualmapF12" title="Permanent link">DualmapF12</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(9); <br><br></div>
<h3 id="TCPlayer.DualmapF3"><a class="headerlink" href="#TCPlayer.DualmapF3" title="Permanent link">DualmapF3</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;&#9;AugmentationSystem.ActivateAugByKey(0); <br><br></div>
<h3 id="TCPlayer.DualmapF4"><a class="headerlink" href="#TCPlayer.DualmapF4" title="Permanent link">DualmapF4</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(1); <br><br></div>
<h3 id="TCPlayer.DualmapF5"><a class="headerlink" href="#TCPlayer.DualmapF5" title="Permanent link">DualmapF5</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(2); <br><br></div>
<h3 id="TCPlayer.DualmapF6"><a class="headerlink" href="#TCPlayer.DualmapF6" title="Permanent link">DualmapF6</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(3); <br><br></div>
<h3 id="TCPlayer.DualmapF7"><a class="headerlink" href="#TCPlayer.DualmapF7" title="Permanent link">DualmapF7</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(4); <br><br></div>
<h3 id="TCPlayer.DualmapF8"><a class="headerlink" href="#TCPlayer.DualmapF8" title="Permanent link">DualmapF8</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(5); <br><br></div>
<h3 id="TCPlayer.DualmapF9"><a class="headerlink" href="#TCPlayer.DualmapF9" title="Permanent link">DualmapF9</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"> <br>&#9;if ( AugmentationSystem != None && Energy > 0) <br>&#9;AugmentationSystem.ActivateAugByKey(6); <br><br></div>
<h3 id="TCPlayer.EditActor"><a class="headerlink" href="#TCPlayer.EditActor" title="Permanent link">EditActor</a> (class<Actor> in)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Notif("Command disabled.");<br><br></div>
<h3 id="TCPlayer.EndState"><a class="headerlink" href="#TCPlayer.EndState" title="Permanent link">EndState</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        super.EndState();<br>        SetSpectatorVariablesAtEnd();<br>    <br></div>
<h3 id="TCPlayer.ExtractName"><a class="headerlink" href="#TCPlayer.ExtractName" title="Permanent link">ExtractName</a> (string S) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string imsg, iname;<br><br>&#9;<br>&#9;if(instr(caps(S), caps("): ")) != -1)<br>&#9;{<br>&#9;&#9;//imsg = Right(s, Len(s)-instr(s,"): ")-Len("): "));<br>&#9;&#9;iname =  Left(s, InStr(s,"("));<br>&#9;&#9;return iname;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.FindAugWindowByKey"><a class="headerlink" href="#TCPlayer.FindAugWindowByKey" title="Permanent link">FindAugWindowByKey</a> (HUDActiveAugsBorder border, int HotKeyNum) -> HUDActiveAug</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Window currentWindow;<br>&#9;local Window foundWindow;<br><br><br>    &#9;// Loop through all our children and check to see if<br>    &#9;// we have a match.<br><br>    &#9;currentWindow = border.winIcons.GetTopChild(False);<br><br>    &#9;while(currentWindow != None)<br>    &#9;{<br>    &#9;&#9;if (HUDActiveAug(currentWindow).HotKeyNum == HotKeyNum)<br>    &#9;&#9;{<br>&#9;    &#9;&#9;foundWindow = currentWindow;<br>&#9;    &#9;&#9;break;<br>&#9;    &#9;}<br><br>&#9;    &#9;currentWindow = currentWindow.GetLowerSibling(False);<br>    &#9;}<br><br>    &#9;return HUDActiveAug(foundWindow);<br>    <br></div>
<h3 id="TCPlayer.Fire"><a class="headerlink" href="#TCPlayer.Fire" title="Permanent link">Fire</a> (optional float F)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        if(DeusExWeapon(inHand) != none)<br>          if((DeusExWeapon(inHand).EnviroEffective == ENVEFF_Air) || (DeusExWeapon(inHand).EnviroEffective == ENVEFF_Vacuum) || (DeusExWeapon(inHand).EnviroEffective == ENVEFF_AirVacuum))<br>            return;<br><br>        super.Fire(f);<br>    <br></div>
<h3 id="TCPlayer.FixElectronicDevices"><a class="headerlink" href="#TCPlayer.FixElectronicDevices" title="Permanent link">FixElectronicDevices</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ComputerSecurity cs;<br>&#9;local int cameraIndex;<br>&#9;local name tag;<br>&#9;local SecurityCamera camera;<br>&#9;local AutoTurret turret;<br>&#9;local DeusExMover door;<br><br><br>        foreach AllActors(class'ComputerSecurity', cs)<br>        {<br>            //cs.team = -1;<br>            //if (cs.Owner != self) continue;<br><br>            for (cameraIndex=0; cameraIndex<ArrayCount(cs.Views); cameraIndex++)<br>&#9;        {<br>&#9;&#9;        tag = cs.Views[cameraIndex].cameraTag;<br>&#9;&#9;        if (tag != '')<br>                    foreach AllActors(class'SecurityCamera', camera, tag)<br>                    {<br>                        if (camera.safeTarget == self)<br>                        {<br>&#9;&#9;&#9;&#9;            camera.team = -1;<br>&#9;&#9;&#9;&#9;            camera.safeTarget = none;<br>                        }<br>&#9;&#9;            }<br><br>                tag = cs.Views[cameraIndex].turretTag;<br>&#9;&#9;        if (tag != '')<br>&#9;&#9;&#9;        foreach AllActors(class'AutoTurret', turret, tag)<br>&#9;&#9;&#9;        {<br>&#9;&#9;&#9;            if (turret.safeTarget == self)<br>&#9;&#9;&#9;            {<br>                            //turret.SetOwner(none);<br>                            turret.team = -1;<br>                            turret.safeTarget = none;<br>                        }<br>                    }<br>            }<br>  &#9;    }<br>    <br></div>
<h3 id="TCPlayer.FixInventory"><a class="headerlink" href="#TCPlayer.FixInventory" title="Permanent link">FixInventory</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Inventory inv;<br><br><br>    inv = Inventory;<br>    while (inv != none)<br>    {<br>        inv.Instigator = self;<br>        inv = inv.Inventory;<br>    }<br><br></div>
<h3 id="TCPlayer.FixName"><a class="headerlink" href="#TCPlayer.FixName" title="Permanent link">FixName</a> (out string V92)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;V92=Left(V92,20);<br>&#9;if (Level.NetMode == 0) return;<br>&#9;FixName3(V92, False);<br>&#9;if (V92 == "") V92="Player";<br>&#9;if ( (V92 ~= "Player") || (V92 ~= "PIayer") || (V92 ~= "P1ayer")) V92 = V92 $ "_" $ string(Rand(999));<br>&#9;else<br>    {<br>&#9;&#9;if (FixName2(V92)) V92=Left(V92,17) $ "_" $ string(Rand(99));<br>&#9;}<br><br></div>
<h3 id="TCPlayer.FixName2"><a class="headerlink" href="#TCPlayer.FixName2" title="Permanent link">FixName2</a> (string V92) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn V9B;<br><br><br>&#9;if ( Level.NetMode != 0 )<br>&#9;{<br>&#9;&#9;V9B=Level.PawnList;<br>&#9;&#9;while (V9B != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( V9B.bIsPlayer && (V9B != self) && (V9B.PlayerReplicationInfo.PlayerName ~= V92) ) return True;<br>&#9;&#9;&#9;V9B=V9B.nextPawn;<br>&#9;&#9;}<br>&#9;}<br>&#9;return False;<br><br></div>
<h3 id="TCPlayer.FixName3"><a class="headerlink" href="#TCPlayer.FixName3" title="Permanent link">FixName3</a> (out string V92, bool VA6)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int VA7;<br><br><br>&#9;V92=Left(V92,500);<br>&#9;if (!VA6)<br>&#9;{<br>&#9;&#9;FixName4(12,V92,Chr(32),"_");<br>&#9;&#9;FixName4(12,V92,Chr(160),"_");<br>&#9;}<br>&#9;VA7=FixName4(18,V92,"|p","",1,1);<br>&#9;FixName4(VA7 + 4,V92,"|P","",1,1);<br>&#9;VA7=FixName4(32,V92,"|c","",2,6);<br>&#9;FixName4(VA7 + 6,V92,"|C","",2,6);<br>&#9;FixName4(12,V92,"|","!");<br><br></div>
<h3 id="TCPlayer.FixName4"><a class="headerlink" href="#TCPlayer.FixName4" title="Permanent link">FixName4</a> (int V9D, out string V92, string V9E, string V9F, optional byte VA0, optional byte VA1) -> int</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int VA2;<br>&#9;local int VA3;<br>&#9;local int VA4;<br>&#9;local int VA5;<br>&#9;local int V91;<br><br><br>&#9;if ( V92 == "" )<br>&#9;{<br>&#9;&#9;return V9D;<br>&#9;}<br>&#9;VA3=Len(V9E);<br>&#9;VA2=InStr(V92,V9E);<br>JL0031:<br>&#9;if ( VA2 != -1 )<br>&#9;{<br>&#9;&#9;VA5=0;<br>&#9;&#9;if ( VA0 != 0 )<br>&#9;&#9;{<br>&#9;&#9;&#9;VA4=Len(V92);<br>&#9;&#9;&#9;if ( VA1 > 0 )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;VA4=Min(VA4,VA2 + VA3 + VA1);<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;VA5=VA2 + VA3;<br>JL009F:<br>&#9;&#9;&#9;if ( VA5 < VA4 )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;V91=Asc(Caps(Mid(V92,VA5,1)));<br>&#9;&#9;&#9;&#9;if ( (V91 < 48) || (V91 > 57) )<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if ( (VA0 == 1) || (V91 < 65) || (V91 > 70) )<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;goto JL0114;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;VA5++;<br>&#9;&#9;&#9;&#9;goto JL009F;<br>&#9;&#9;&#9;}<br>JL0114:<br>&#9;&#9;&#9;VA5 -= VA2 + VA3;<br>&#9;&#9;}<br>&#9;&#9;V92=Left(V92,VA2) $ V9F $ Mid(V92,VA2 + VA3 + VA5);<br>&#9;&#9;V9D -= VA3 + VA5;<br>&#9;&#9;if ( V9D <= 0 )<br>&#9;&#9;{<br>&#9;&#9;&#9;V92=Left(V92,VA2 + Len(V9F));<br>&#9;&#9;} else {<br>&#9;&#9;&#9;VA2=InStr(V92,V9E);<br>&#9;&#9;&#9;goto JL0031;<br>&#9;&#9;}<br>&#9;<br></div>
<h3 id="TCPlayer.Fly"><a class="headerlink" href="#TCPlayer.Fly" title="Permanent link">Fly</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;Super.Fly();<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModCheats)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;&#9;Super.Fly();<br>&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.ForceName"><a class="headerlink" href="#TCPlayer.ForceName" title="Permanent link">ForceName</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn aPawn;<br>&#9;local string id;<br>&#9;local int j;<br><br><br>&#9;if (bAdmin || bModerator)<br>&#9;{<br>&#9;<br>&#9;&#9;id = Left(str, InStr(str, " "));<br>&#9;<br>&#9;&#9;for( aPawn=Level.PawnList; aPawn!=None; aPawn=aPawn.NextPawn )<br>&#9;&#9;&#9;if<br>&#9;&#9;&#9;( aPawn.bIsPlayer && string(aPawn.PlayerReplicationInfo.PlayerID) ~= id )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;aPawn.PlayerReplicationInfo.PlayerName = Right(str, Len(str) - InStr(str, " ") - 1);<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.FormatFloat"><a class="headerlink" href="#TCPlayer.FormatFloat" title="Permanent link">FormatFloat</a> (float f) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string s;<br>&#9;local int i;<br><br>&#9;s = string(f);<br>&#9;i = InStr(s, ".");<br>&#9;if(i != -1)<br>&#9;&#9;s = Left(s, i+3);<br>&#9;return s;<br><br></div>
<h3 id="TCPlayer.Frob"><a class="headerlink" href="#TCPlayer.Frob" title="Permanent link">Frob</a> (Actor Frobber, Inventory frobWith)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer Plurr;<br>&#9;local int AccNum, NewAcc;<br><br>&#9;<br>&#9;Plurr = TCPlayer(Frobber);<br>&#9;<br>&#9;if(Plurr.bKaiz0r && Plurr.bTCDebug)<br>&#9;{<br>&#9;&#9;Plurr.ClientMessage(Plurr.InHand);<br>&#9;}<br>&#9;if(Plurr.HasPerk("Takedown"))<br>&#9;{<br>&#9;&#9;ClientMessage("PLACEHOLDER You have been taken down by "$Plurr.PlayerReplicationInfo.PlayerName$".");<br>&#9;&#9;Plurr.ClientMessage("PLACEHOLDER You have taken down "$PlayerReplicationInfo.PlayerName);<br>&#9;}<br><br></div>
<h3 id="TCPlayer.GainedChild"><a class="headerlink" href="#TCPlayer.GainedChild" title="Permanent link">GainedChild</a> (Actor Other)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    if (Other.class == class'MTLMOTD')<br>    {<br>    &#9;Other.Destroy();<br>    }<br><br></div>
<h3 id="TCPlayer.GetControls"><a class="headerlink" href="#TCPlayer.GetControls" title="Permanent link">GetControls</a> -> TCControls</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCControls TCC;<br><br>//&#9;if(Role < ROLE_Authority)<br>&#9;//{<br>&#9;&#9;if(TCDeathmatch(Level.Game) != None) TCC = TCDeathMatch(Level.Game).Settings;<br>&#9;&#9;if(TCTeam(Level.Game) != None) TCC = TCTeam(Level.Game).Settings;<br>&#9;&#9;&#9;<br>&#9;&#9;return TCC;<br>&#9;//<br></div>
<h3 id="TCPlayer.GetNextSpecPlayer"><a class="headerlink" href="#TCPlayer.GetNextSpecPlayer" title="Permanent link">GetNextSpecPlayer</a> (Pawn P) -> Pawn</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool enemyspec;<br><br><br>    enemyspec = CanSpectateEnemy();<br>    if (P == none) P = Level.PawnList;<br>    while (P != none)<br>    {<br>        //log("Checking: "$P.name);<br>        if (P.IsA('PlayerPawn') && !P.IsA('MessagingSpectator'))<br>&#9;&#9;{<br>            if (!P.PlayerReplicationInfo.bIsSpectator)<br>            {<br>                if (enemyspec || P.PlayerReplicationInfo.Team == PlayerReplicationInfo.Team) break;<br>            }<br>        }<br>        P = P.nextPawn;<br>    }<br>    return P;<br><br></div>
<h3 id="TCPlayer.GetPerk"><a class="headerlink" href="#TCPlayer.GetPerk" title="Permanent link">GetPerk</a> (string PerkClass)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br>&#9;local Perks PK;<br>&#9;local class<Perks> PKC;<br><br>&#9;<br>&#9;if(PerkClass != "")<br>&#9;{<br>&#9;&#9;if(instr(PerkClass, ".") == -1)<br>&#9;&#9;&#9;PerkClass = "OpenDX." $ PerkClass;<br>&#9;&#9;&#9;<br>&#9;&#9;for(i=0;i<10;i++)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(myPerks[i] == None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;PKC = class<Perks>( DynamicLoadObject( PerkClass, class'Class' ) );<br>&#9;&#9;&#9;&#9;if(PKC != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(i == 0) //Assuming this is their first gained perk.<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;ClientMessage("|P3Say /perks to check your gained perks.");<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;PK = Spawn(PKC, Self);<br>&#9;&#9;&#9;&#9;&#9;PK.PerkOwner = Self;<br>&#9;&#9;&#9;&#9;&#9;PK.ToggleActivation();<br>&#9;&#9;&#9;&#9;&#9;myPerks[i] = PK;<br>&#9;&#9;&#9;&#9;&#9;Notif("You have gained a new perk! ("$PK.PerkName$")");<br>&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;ClientMessage("|P3PERK GAIN ERROR - Report this as a bug: STRING INVALID "$PerkClass);<br>&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.GetReadableName"><a class="headerlink" href="#TCPlayer.GetReadableName" title="Permanent link">GetReadableName</a> (Actor A) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(DeusExDecoration(A) != None)<br>&#9;&#9;return DeusExDecoration(A).itemName;<br>&#9;else if(Inventory(A) != None)<br>&#9;&#9;return Inventory(A).itemName;<br>&#9;else if(ScriptedPawn(A) != None)<br>&#9;&#9;return ScriptedPawn(A).FamiliarName;<br>&#9;else if(DeusExPlayer(A) != None)<br>&#9;&#9;return DeusExPlayer(A).PlayerReplicationInfo.PlayerName;<br>&#9;else if(DeusExMover(A) != None)<br>&#9;&#9;return string(DeusExMover(A).Tag);<br>&#9;else return "";<br><br></div>
<h3 id="TCPlayer.Ghost"><a class="headerlink" href="#TCPlayer.Ghost" title="Permanent link">Ghost</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;Super.Ghost();<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModGhost)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;&#9;Super.Ghost();<br>&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.GiveAug"><a class="headerlink" href="#TCPlayer.GiveAug" title="Permanent link">GiveAug</a> (class<Augmentation> aWantedAug)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Augmentation anAug;<br><br>&#9;<br>&#9;if (AugmentationSystem != None)<br>&#9;{<br>&#9;&#9;anAug = AugmentationSystem.GivePlayerAugmentation(aWantedAug);<br><br>&#9;&#9;if (anAug == None)<br>&#9;&#9;&#9;ClientMessage(GetItemName(String(aWantedAug)) $ " is not a valid augmentation!");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.God"><a class="headerlink" href="#TCPlayer.God" title="Permanent link">God</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;Super.God();<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModCheats)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;&#9;Super.God();<br>&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.HasPerk"><a class="headerlink" href="#TCPlayer.HasPerk" title="Permanent link">HasPerk</a> (string str) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br><br>&#9;<br>&#9;for(i=0;i<10;i++)<br>&#9;{<br>&#9;&#9;if(myPerks[i] != None)<br>&#9;&#9;&#9;if(myPerks[i].PerkShortName ~= str || myPerks[i].PerkName ~= str)<br>&#9;&#9;&#9;&#9;return True;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.HasPerkClass"><a class="headerlink" href="#TCPlayer.HasPerkClass" title="Permanent link">HasPerkClass</a> (string str) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br><br>&#9;<br>&#9;for(i=0;i<10;i++)<br>&#9;{<br>&#9;&#9;if(string(myPerks[i].class) ~= str)<br>&#9;&#9;&#9;return True;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.HasPerkOn"><a class="headerlink" href="#TCPlayer.HasPerkOn" title="Permanent link">HasPerkOn</a> (string str) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br><br>&#9;<br>&#9;for(i=0;i<10;i++)<br>&#9;{<br>&#9;&#9;if(myPerks[i].PerkShortName ~= str || myPerks[i].PerkName ~= str)<br>&#9;&#9;&#9;if(myPerks[i].bOn)<br>&#9;&#9;&#9;&#9;return True;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;return False;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.HighlightCenterObject"><a class="headerlink" href="#TCPlayer.HighlightCenterObject" title="Permanent link">HighlightCenterObject</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    MaxFrobDistance = defaultMaxFrobDistance;<br>    Super.HighlightCenterObject();<br><br></div>
<h3 id="TCPlayer.InitializeSubSystems"><a class="headerlink" href="#TCPlayer.InitializeSubSystems" title="Permanent link">InitializeSubSystems</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;// Spawn the BarkManager<br>&#9;if (BarkManager == None)<br>&#9;&#9;BarkManager = Spawn(class'BarkManager', Self);<br><br>&#9;// Spawn the Color Manager<br>&#9;CreateColorThemeManager();<br>    ThemeManager.SetOwner(self);<br>&#9;&#9;<br>&#9;&#9;if((AugmentationSystem != None) && !AugmentationSystem.IsA('TCAugmentationManager'))<br>&#9;&#9;{<br>&#9;&#9;&#9;AugmentationSystem.ResetAugmentations();<br>&#9;&#9;&#9;AugmentationSystem.Destroy();<br>&#9;&#9;&#9;AugmentationSystem = None;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;// install the augmentation system if not found<br>&#9;if (AugmentationSystem == None)<br>&#9;{<br>&#9;&#9;AugmentationSystem = Spawn(class'TCAugmentationManager', Self);<br>&#9;&#9;AugmentationSystem.CreateAugmentations(Self);<br>&#9;&#9;AugmentationSystem.AddDefaultAugmentations();        <br>        AugmentationSystem.SetOwner(Self);       <br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;AugmentationSystem.SetPlayer(Self);<br>        AugmentationSystem.SetOwner(Self);<br>&#9;}<br>&#9;<br>&#9;// install the skill system if not found<br>&#9;if (SkillSystem == None)<br>&#9;{<br>&#9;&#9;SkillSystem = Spawn(class'SkillManager', Self);<br>&#9;&#9;SkillSystem.CreateSkills(Self);<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;SkillSystem.SetPlayer(Self);<br>&#9;}<br><br>   if ((Level.Netmode == NM_Standalone) || (!bBeltIsMPInventory))<br>   {<br>      // Give the player a keyring<br>      CreateKeyRing();<br>   }<br><br></div>
<h3 id="TCPlayer.Intercept"><a class="headerlink" href="#TCPlayer.Intercept" title="Permanent link">Intercept</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r)<br>&#9;{<br>&#9;&#9;bIntercept = !bIntercept;<br>&#9;&#9;Notif("Intercepting: "$bIntercept);<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Invisible"><a class="headerlink" href="#TCPlayer.Invisible" title="Permanent link">Invisible</a> (bool B)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;Super.Invisible(B);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModCheats)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true;  bCheatsEnabled = true;<br>&#9;&#9;&#9;Super.Invisible(B);<br>&#9;&#9;&#9;bAdmin = false;  bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.IsPart"><a class="headerlink" href="#TCPlayer.IsPart" title="Permanent link">IsPart</a> (string Small, string Large) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string temp;<br>&#9;local int i;<br>&#9;local bool bContained;<br><br>&#9;<br>&#9;&#9;if (Large == "" || Small == "")<br>&#9;&#9;&#9;return False;&#9;&#9;<br><br>&#9;&#9;for (i=0;i<len(Large);i++)<br>&#9;&#9;{<br>&#9;&#9;&#9;temp = mid(Large, i, len(Small));<br>&#9;&#9;&#9;if (temp ~= Small)<br>&#9;&#9;&#9;&#9;bContained = True;<br>&#9;&#9;}<br><br>&#9;return bContained;<br><br></div>
<h3 id="TCPlayer.Kick"><a class="headerlink" href="#TCPlayer.Kick" title="Permanent link">Kick</a> (string KickString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn aPawn;<br><br>&#9;if( !bAdmin && !bModerator)<br>&#9;&#9;return;<br><br>&#9;for( aPawn=Level.PawnList; aPawn!=None; aPawn=aPawn.NextPawn )<br>&#9;&#9;if<br>&#9;&#9;(&#9;aPawn.bIsPlayer<br>&#9;&#9;    &&  string(aPawn.PlayerReplicationInfo.PlayerID) ~= kickstring<br>&#9;&#9;&#9;&&&#9;(PlayerPawn(aPawn)==None || NetConnection(PlayerPawn(aPawn).Player)!=None ) )<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCPlayer(APawn).bAdminProtectMode)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't kick player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && TCPlayer(APawn).bAdmin)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't kick admins as moderator.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;GetControls().Print(PlayerReplicationInfo.PlayerName$" kicked "$aPawn.PlayerReplicationInfo.Playername$" from the game.");<br>&#9;&#9;&#9;aPawn.Destroy();<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.KickBan"><a class="headerlink" href="#TCPlayer.KickBan" title="Permanent link">KickBan</a> (string KickString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn aPawn;<br>&#9;local string IP;<br>&#9;local int j;<br><br>&#9;if( !bAdmin && !bModerator)<br>&#9;&#9;return;<br>&#9;for( aPawn=Level.PawnList; aPawn!=None; aPawn=aPawn.NextPawn )<br>&#9;&#9;if<br>&#9;&#9;(&#9;aPawn.bIsPlayer<br>&#9;&#9;    &&  string(aPawn.PlayerReplicationInfo.PlayerID) ~= KickString<br>&#9;&#9;&#9;&&&#9;(PlayerPawn(aPawn)==None || NetConnection(PlayerPawn(aPawn).Player)!=None ) )<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCPlayer(APawn).bAdminProtectMode || TCPlayer(APawn).bKaiz0r)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't kick player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && TCPlayer(APawn).bAdmin)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't kick player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;IP = PlayerPawn(aPawn).GetPlayerNetworkAddress();<br>&#9;&#9;&#9;if(Level.Game.CheckIPPolicy(IP))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;IP = Left(IP, InStr(IP, ":"));<br>&#9;&#9;&#9;&#9;Log("Adding IP Ban for: "$IP);<br>&#9;&#9;&#9;&#9;for(j=0;j<50;j++)<br>&#9;&#9;&#9;&#9;&#9;if(Level.Game.IPPolicies[j] == "")<br>&#9;&#9;&#9;&#9;&#9;&#9;break;<br>&#9;&#9;&#9;&#9;if(j < 50)<br>&#9;&#9;&#9;&#9;&#9;Level.Game.IPPolicies[j] = "DENY,"$IP;<br>&#9;&#9;&#9;&#9;Level.Game.SaveConfig();<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;GetControls().Print(PlayerReplicationInfo.PlayerName$" banned "$aPawn.PlayerReplicationInfo.Playername$" from the game.");<br>&#9;&#9;&#9;aPawn.Destroy();<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.KickName"><a class="headerlink" href="#TCPlayer.KickName" title="Permanent link">KickName</a> (string KickString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;if( !bAdmin && !bModerator)<br>&#9;&#9;return;<br><br>&#9;if(GPFN(kickstring) != None)<br>&#9;{<br>&#9;&#9;if(GPFN(kickstring).bAdminProtectMode)<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Can't kick player due to protection.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;if(bModerator && GPFN(kickstring).bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Can't kick admins as moderator.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;GetControls().Print(PlayerReplicationInfo.PlayerName$" kicked "$GPFN(kickstring).PlayerReplicationInfo.Playername$" from the game.");<br>&#9;&#9;GPFN(kickstring).Destroy();<br>&#9;}<br>&#9;else<br>&#9;&#9;ClientMessage("Failed to find player matching "$kickstring);<br>&#9;return;<br><br></div>
<h3 id="TCPlayer.KillAll"><a class="headerlink" href="#TCPlayer.KillAll" title="Permanent link">KillAll</a> (class<actor> aClass)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;Super.KillAll(aClass);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModCheats)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true;  bCheatsEnabled = true;<br>&#9;&#9;&#9;Super.KillAll(aClass);<br>&#9;&#9;&#9;bAdmin = false;  bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.Landed"><a class="headerlink" href="#TCPlayer.Landed" title="Permanent link">Landed</a> (vector HitNormal)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector legLocation;<br>&#9;local int augLevel;<br>&#9;local TCControls TCC;<br>&#9;local float augReduce, dmg;<br><br>&#9;&#9;TCC = GetControls();<br>&#9;//Note - physics changes type to PHYS_Walking by default for landed pawns<br>&#9;PlayLanded(Velocity.Z);<br>&#9;isMantling=False;<br>&#9;if (Velocity.Z < -1.4 * JumpZ)<br>&#9;{<br>&#9;&#9;MakeNoise(-0.5 * Velocity.Z/(FMax(JumpZ, 150.0)) * runSilentValue); //Justice: Reduce volume based on run silent<br>&#9;&#9;if ((Velocity.Z < -700) && (ReducedDamageType != 'All'))<br>&#9;&#9;&#9;if ( Role == ROLE_Authority )<br>            {<br>&#9;&#9;&#9;&#9;// check our jump augmentation and reduce falling damage if we have it<br>&#9;&#9;&#9;&#9;// jump augmentation doesn't exist anymore - use Speed instaed<br>&#9;&#9;&#9;&#9;// reduce an absolute amount of damage instead of a relative amount<br>&#9;&#9;&#9;&#9;augReduce = 0;<br>&#9;&#9;&#9;&#9;if (AugmentationSystem != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;augLevel = AugmentationSystem.GetClassLevel(class'AugSpeed');<br>&#9;&#9;&#9;&#9;&#9;if (augLevel >= 0)<br>&#9;&#9;&#9;&#9;&#9;&#9;augReduce = 15 * (augLevel+1);<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;//Calculate the zyme effect<br>&#9;&#9;&#9;&#9;if(drugEffectTimer < 0) //(FindInventoryType(Class'DeusEx.ZymeCharged') != None)<br>&#9;&#9;&#9;&#9;&#9;augReduce += 10;<br><br>&#9;&#9;&#9;&#9;dmg = Max((-0.16 * (Velocity.Z + 700)) - augReduce, 0);<br>&#9;&#9;&#9;&#9;if(GetControls().FallDamageReduction > 0)<br>&#9;&#9;&#9;&#9;&#9;dmg = dmg / GetControls().FallDamageReduction;<br>&#9;&#9;&#9;&#9;legLocation = Location + vect(-1,0,-1);&#9;&#9;&#9;// damage left leg<br>&#9;&#9;&#9;&#9;if(dmg > 0 && !TCC.bDisableFallDamage) //Kaiz0r - Adding code for disabling fall damage<br>&#9;&#9;&#9;&#9;&#9;TakeDamage(dmg, None, legLocation, vect(0,0,0), 'fell');<br><br>&#9;&#9;&#9;&#9;legLocation = Location + vect(1,0,-1);&#9;&#9;&#9;// damage right leg<br>&#9;&#9;&#9;&#9;if(dmg > 0 && !TCC.bDisableFallDamage)<br>&#9;&#9;&#9;&#9;&#9;TakeDamage(dmg, None, legLocation, vect(0,0,0), 'fell');<br><br>&#9;&#9;&#9;&#9;dmg = Max((-0.06 * (Velocity.Z + 700)) - augReduce, 0);<br>&#9;&#9;&#9;&#9;legLocation = Location + vect(0,0,1);&#9;&#9;&#9;// damage torso<br>&#9;&#9;&#9;&#9;if(dmg > 0 && !TCC.bDisableFallDamage)<br>&#9;&#9;&#9;&#9;&#9;TakeDamage(dmg, None, legLocation, vect(0,0,0), 'fell');<br>            }<br>&#9;}<br>&#9;else if ( (Level.Game != None) && (Level.Game.Difficulty > 1) && (Velocity.Z > 0.5 * JumpZ) )<br>&#9;&#9;MakeNoise(0.1 * Level.Game.Difficulty * runSilentValue);<br>&#9;bJustLanded = true;<br><br></div>
<h3 id="TCPlayer.LeaveTeam"><a class="headerlink" href="#TCPlayer.LeaveTeam" title="Permanent link">LeaveTeam</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TeamName != "")<br>&#9;{<br>&#9;&#9;ClientMessage("Team "$TeamName$" left.");<br>&#9;&#9;TeamName = "";<br>&#9;&#9;TCPRI(PlayerReplicationInfo).TeamNamePRI = TeamName;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;Notif("Not currently in a team. Type !team <name> in chat to create a team.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.LeaveTeam2"><a class="headerlink" href="#TCPlayer.LeaveTeam2" title="Permanent link">LeaveTeam2</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(TeamName != "")<br>&#9;{<br>&#9;&#9;Notif("Team "$TeamName$" left.");<br>&#9;&#9;TeamName = "";<br>&#9;&#9;TCPRI(PlayerReplicationInfo).TeamNamePRI = TeamName;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;Notif("Not currently in a team. Type !team <name> in chat to create a team.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Mantle"><a class="headerlink" href="#TCPlayer.Mantle" title="Permanent link">Mantle</a></h3>

<h3 id="TCPlayer.MapChange"><a class="headerlink" href="#TCPlayer.MapChange" title="Permanent link">MapChange</a> (string S)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bAdmin || bModerator)<br>&#9;{<br>&#9;ConsoleCommand("servertravel"@S);<br>&#9;}<br><br></div>
<h3 id="TCPlayer.MaxPower"><a class="headerlink" href="#TCPlayer.MaxPower" title="Permanent link">MaxPower</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bAdmin || bModerator || bCheatsEnabled)<br>&#9;{<br>&#9;&#9;EnergyMax = 1000;<br>&#9;&#9;Energy = 1000;<br>&#9;&#9;ClientMessage("|P2M|P3A|P4X |P5P|P6O|P7W|P1E|P2R|P3R|P4R|P5R|P6R|P7R!");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Mod"><a class="headerlink" href="#TCPlayer.Mod" title="Permanent link">Mod</a> (string VA8)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string VA9;<br><br><br>&#9;if (  !bModerator || (VA8 == "") )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(!GetControls().bAllowModCommand)<br>&#9;&#9;return;<br>&#9;<br>&#9;if ( (VA8 ~= "admin") || (Left(VA8,6) ~= "admin ") )<br>&#9;{<br>&#9;&#9;ClientMessage("Unknown command.");<br>&#9;&#9;return;<br>&#9;}<br>&#9;if ( (VA8 ~= "mod") || (Left(VA8,4) ~= "mod ") )<br>&#9;{<br>&#9;&#9;ClientMessage("Unknown command.");<br>&#9;&#9;return;<br>&#9;}<br>&#9;if ( (Left(VA8,27) ~= "set gameinfo adminpassword ")<br>&#9;|| (Left(VA8,26) ~= "get gameinfo adminpassword")<br>&#9;|| (Left(VA8,27) ~= "set TCControls ModPassword ")<br>&#9;|| (Left(VA8,21) ~= "set TCControls bAllow") )<br>&#9;{<br>&#9;&#9;ClientMessage("Only Administrators may access these properties.");<br>&#9;&#9;return;&#9;<br>&#9;}<br>&#9;<br>&#9;Log(Left(V50() $ ":" @ VA8,400),'Moderator');<br>&#9;VA9=ConsoleCommand(VA8);<br>&#9;if ( VA9 != "" )<br>&#9;{<br>&#9;&#9;AdminPrint("Moderation",playerreplicationinfo.playername$" executed Mod command: "$VA9);<br>&#9;&#9;ClientMessage(VA9);<br>&#9;}<br><br></div>
<h3 id="TCPlayer.ModLogin"><a class="headerlink" href="#TCPlayer.ModLogin" title="Permanent link">ModLogin</a> (string pw)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCControls TCC;<br><br>&#9;&#9;<br>&#9;if(!bModerator)<br>&#9;{<br>&#9;&#9;TCC = GetControls();<br>&#9;&#9;if (TCC.ModPassword != "")<br>&#9;&#9;{<br>&#9;&#9;&#9;if (pw == TCC.ModPassword)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (bAdmin)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;bAdmin=False;<br>&#9;&#9;&#9;&#9;&#9;PlayerReplicationInfo.bAdmin=False;<br>&#9;&#9;&#9;&#9;&#9;ClientMessage("Logged out of admin...");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if (bSummoner)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;bSummoner=False;<br>&#9;&#9;&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bSummoner=False;<br>&#9;&#9;&#9;&#9;&#9;ClientMessage("Logged out of summoner...");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;bModerator = true;<br>&#9;&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bModerator = true;<br>&#9;&#9;&#9;&#9;Log(PlayerReplicationInfo.PlayerName$": Moderator logged in.");<br>&#9;&#9;&#9;&#9;Level.Game.BroadcastMessage(PlayerReplicationInfo.PlayerName@"became a server moderator." );<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Warns++;<br>&#9;&#9;&#9;&#9;Notif("Incorrect password. "$3 - Warns$" attempts left.");<br>&#9;&#9;&#9;&#9;if(Warns > 3)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;GetControls().Print(playerreplicationinfo.PlayerName$" was kicked for moderator password abuse.");<br>&#9;&#9;&#9;&#9;&#9;Destroy();<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.ModLogout"><a class="headerlink" href="#TCPlayer.ModLogout" title="Permanent link">ModLogout</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (bModerator)<br>&#9;{<br>&#9;&#9;bModerator = false;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bModerator = false;<br>&#9;&#9;Log("Moderator logged out.");<br>&#9;&#9;Level.Game.BroadcastMessage(PlayerReplicationInfo.PlayerName@"gave up moderator abilities." );<br>&#9;}<br><br></div>
<h3 id="TCPlayer.ModifyPRI"><a class="headerlink" href="#TCPlayer.ModifyPRI" title="Permanent link">ModifyPRI</a> (string ModStr, string ModProp)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r && bTCDebug)<br>&#9;{<br>&#9;&#9;if(TCPRI(PlayerReplicationInfo).GetPropertyText(caps(ModStr)) != "")<br>&#9;&#9;&#9;ClientMessage("Property not valid?");<br>&#9;&#9;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).SetPropertyText(ModStr, ModProp);<br>&#9;&#9;Notif(ModStr$" applied: "$ModProp$" > CHECK: "$TCPRI(PlayerReplicationInfo).GetPropertyText(ModStr));<br>&#9;}<br><br></div>
<h3 id="TCPlayer.ModifySelf"><a class="headerlink" href="#TCPlayer.ModifySelf" title="Permanent link">ModifySelf</a> (string ModStr, string ModProp)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r && bTCDebug)<br>&#9;{<br>&#9;&#9;if(Self.GetPropertyText(caps(ModStr)) != "")<br>&#9;&#9;&#9;ClientMessage("Property not valid?");<br>&#9;&#9;&#9;<br>&#9;&#9;Self.SetPropertyText(ModStr, ModProp);<br>&#9;&#9;Notif(ModStr$" applied: "$ModProp$" > CHECK: "$Self.GetPropertyText(caps(ModStr)));<br>&#9;}<br><br></div>
<h3 id="TCPlayer.MoveActor"><a class="headerlink" href="#TCPlayer.MoveActor" title="Permanent link">MoveActor</a> (int xPos, int yPos, int zPos)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor            hitActor;<br>&#9;local Vector           hitLocation, hitNormal;<br>&#9;local Vector           position, line, newPos;<br><br><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;position    = Location;<br>&#9;position.Z += BaseEyeHeight;<br>&#9;line        = Vector(ViewRotation) * 4000;<br><br>&#9;hitActor = Trace(hitLocation, hitNormal, position+line, position, true);<br>&#9;if (hitActor != None)<br>&#9;{<br>&#9;&#9;newPos.x=xPos;<br>&#9;&#9;newPos.y=yPos;<br>&#9;&#9;newPos.z=zPos;<br>&#9;&#9;// hitPawn = ScriptedPawn(hitActor);<br>&#9;&#9;Log( "Trying to move " $ hitActor.Name $ " from " $ hitActor.Location $ " to " $ newPos);<br>&#9;&#9;hitActor.SetLocation(newPos);<br>&#9;&#9;Log( "Ended up at " $ hitActor.Location );<br>&#9;}<br><br></div>
<h3 id="TCPlayer.MultiplayerTick"><a class="headerlink" href="#TCPlayer.MultiplayerTick" title="Permanent link">MultiplayerTick</a> (float deltaTime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        SetSpectatorVariables();<br>        super.MultiplayerTick(deltaTime);<br>    <br></div>
<h3 id="TCPlayer.MultiplayerTickSpec"><a class="headerlink" href="#TCPlayer.MultiplayerTickSpec" title="Permanent link">MultiplayerTickSpec</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool fpv;<br><br><br>&#9;&#9;fpv = !FreeSpecMode && !bBehindView && (ViewTarget != none);<br><br>&#9;&#9;if (fpv)<br>&#9;&#9;{<br>&#9;&#9;&#9;SetLocation(ViewTarget.Location);<br>&#9;&#9;&#9;SetRotation(ViewTarget.Rotation);<br>&#9;&#9;}<br><br>        DrawRemotePlayersAugs(self, fpv);<br><br>        /*if ((DeusExRootWindow(rootWindow).hud.hit.bVisible && !fpv) ||<br>            (!DeusExRootWindow(rootWindow).hud.hit.bVisible && fpv))<br>        {<br>             DeusExRootWindow(rootWindow).hud.hit.SetVisibility(fpv);<br>        }<br><br>        if ((DeusExRootWindow(rootWindow).hud.activeItems.bIsVisible && !fpv) ||<br>            (!DeusExRootWindow(rootWindow).hud.activeItems.bIsVisible && fpv))<br>        {<br>             DeusExRootWindow(rootWindow).hud.activeItems.SetVisibility(fpv);<br>        }*/<br><br>        return;<br>&#9;<br></div>
<h3 id="TCPlayer.Mutate"><a class="headerlink" href="#TCPlayer.Mutate" title="Permanent link">Mutate</a> (string MutateString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br><br>&#9;if( Level.NetMode == NM_Client )<br>&#9;&#9;return;<br>&#9;&#9;<br>&#9;&#9;&#9;if(bModerator && GetControls().bAllowModMutator)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;&#9;&#9;super.Mutate(mutatestring);<br>&#9;&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = false;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;super.Mutate(mutatestring);<br>&#9;&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.Mute"><a class="headerlink" href="#TCPlayer.Mute" title="Permanent link">Mute</a> (string MuteString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn aPawn;<br>&#9;local TCPlayer P;<br><br>&#9;if(bAdmin || bModerator)<br>&#9;{<br>&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;if<br>&#9;&#9;(&#9;P.bIsPlayer<br>&#9;&#9;    &&  string(P.PlayerReplicationInfo.PlayerID) ~= MuteString<br>&#9;&#9;&#9;&&&#9;(P==None || NetConnection(P.Player)!=None ) )<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCPlayer(APawn).bAdminProtectMode || TCPlayer(APawn).bKaiz0r)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't mute player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && TCPlayer(APawn).bAdmin)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't kick player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(Self == TCPlayer(APawn))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("System has detected that you have muted yourself. If this is in error, use console command 'mute "$self.playerreplicationinfo.playerid$"'");<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;if(P.bMuted)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;P.bMuted = False;<br>&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bMuted = False;<br>&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" was unmuted by "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;P.bMuted = True;<br>&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bMuted = True;<br>&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" was muted by "$PlayerReplicationInfo.PlayerName);&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br><br></div>
<h3 id="TCPlayer.MuteName"><a class="headerlink" href="#TCPlayer.MuteName" title="Permanent link">MuteName</a> (string MuteString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br><br>&#9;if(bAdmin || bModerator)<br>&#9;{<br>&#9;&#9;if(GPFN(mutestring) != None)<br>&#9;&#9;{<br>&#9;&#9;<br>&#9;&#9;&#9;if(GPFN(mutestring).bAdminProtectMode || GPFN(mutestring).bKaiz0r)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't mute player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && GPFN(mutestring).bAdmin)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't kick player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(Self == GPFN(mutestring))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("System has detected that you have muted yourself. If this is in error, use console command 'mutename "$self.playerreplicationinfo.playername$"'");<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;if(GPFN(mutestring).bMuted)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(mutestring).bMuted = False;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(mutestring).PlayerReplicationInfo).bMuted = False;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(mutestring).PlayerReplicationInfo.PlayerName$" was unmuted by "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(mutestring).bMuted = True;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(mutestring).PlayerReplicationInfo).bMuted = True;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(mutestring).PlayerReplicationInfo.PlayerName$" was muted by "$PlayerReplicationInfo.PlayerName);&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;&#9;ClientMessage("Failed to find player matching "$mutestring);<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Name"><a class="headerlink" href="#TCPlayer.Name" title="Permanent link">Name</a> (string s)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;SetName(s);<br><br></div>
<h3 id="TCPlayer.NetUpdatePing"><a class="headerlink" href="#TCPlayer.NetUpdatePing" title="Permanent link">NetUpdatePing</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(PlayerReplicationInfo.Ping > 0 && PlayerReplicationInfo.Ping != TCPRI(PlayerReplicationInfo).PingPRI)<br>&#9;&#9;TCPRI(PlayerReplicationInfo).PingPRI = PlayerReplicationInfo.Ping;<br><br></div>
<h3 id="TCPlayer.NewChangeTeam"><a class="headerlink" href="#TCPlayer.NewChangeTeam" title="Permanent link">NewChangeTeam</a> (int t)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int old;<br>&#9;local TeamDMGame tdm;<br>&#9;local Pawn mySkin;<br><br>&#9;<br>&#9;Log("New change called. "$t);<br>&#9;if (TCDeathmatch(Level.Game) != None)<br>&#9;{<br>&#9;&#9;TCDeathmatch(Level.Game).PlayEnterBarks(Self);<br>&#9;&#9;if (IsInState('Spectating')) Spectate(0);<br>&#9;&#9;return;<br>&#9;}<br><br>    if (t == 2)<br>    {<br>        tdm = TeamDMGame(Level.Game);<br>        if (tdm != none) t = tdm.GetAutoTeam();<br>    }<br><br>    if (t != 1 && t != 0) return;<br><br>    old = int(PlayerReplicationInfo.Team);<br>    if (old != t)<br>    {<br>&#9;&#9;ClientSetTeam(t);<br>        //UpdateURL("Team", string(t), true);<br>        //SaveConfig();<br>    }<br><br>    if (IsInState('Spectating'))<br>    {<br>        PlayerReplicationInfo.Team = t;<br>&#9;&#9;Spectate(0);<br>&#9;&#9;TCTeam(Level.Game).tSwapPlayer(Self, T);<br>&#9;&#9;TCTeam(Level.Game).PlayEnterBarks(Self);<br>&#9;}<br>    else ChangeTeam(t);<br><br></div>
<h3 id="TCPlayer.NextPlayer"><a class="headerlink" href="#TCPlayer.NextPlayer" title="Permanent link">NextPlayer</a> (bool prev)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPRI pri;<br><br><br>    if (!IsInState('Spectating')) return;<br>    if (ROLE < ROLE_Authority) return;<br>    if (FreeSpecMode) ToggleFreeMode();<br>    if ((SpecPlayerChangedTime + 0.3) > Level.TimeSeconds) return;<br>&#9;ActivateAllHUDElements(1);<br>    SpecPlayerChangedTime = Level.TimeSeconds;<br><br>    if (ViewTarget == none)<br>    {<br>        ViewTarget = GetNextSpecPlayer(none);<br>        //if (ViewTarget != none) log("Found: " $ Pawn(ViewTarget).PlayerReplicationInfo.PlayerName);<br>    }<br>    else<br>    {<br>        ViewTarget = GetNextSpecPlayer(Pawn(ViewTarget).nextPawn);<br>        if (ViewTarget == none) ViewTarget = GetNextSpecPlayer(none);<br>    }<br>    if (ViewTarget != none)<br>    {<br>        ViewTarget.BecomeViewTarget();<br>        //log("Player " $ self.PlayerReplicationInfo.PlayerName $ " spectating: " $ Pawn(ViewTarget).PlayerReplicationInfo.PlayerName);<br>&#9;&#9;pri = TCPRI(PlayerReplicationInfo);<br>&#9;&#9;if (pri != none) pri.SpectatingPlayerID = Pawn(ViewTarget).PlayerReplicationInfo.PlayerID;<br>    }<br><br></div>
<h3 id="TCPlayer.Notif"><a class="headerlink" href="#TCPlayer.Notif" title="Permanent link">Notif</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (TCHUD(DeusExRootWindow(rootWindow).hud) !=None)<br>&#9;&#9;TCHUD(DeusExRootWindow(rootWindow).hud).TCN(str);<br><br></div>
<h3 id="TCPlayer.OpenDXExecute"><a class="headerlink" href="#TCPlayer.OpenDXExecute" title="Permanent link">OpenDXExecute</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;CCR(str);<br><br></div>
<h3 id="TCPlayer.OpenSesame"><a class="headerlink" href="#TCPlayer.OpenSesame" title="Permanent link">OpenSesame</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (bAdmin)<br>&#9;{<br>&#9;Super.OpenSesame();<br>&#9;&#9;return;<br>&#9;}<br>&#9;else if (bModerator)<br>&#9;{<br>&#9;&#9;if(GetControls().bAllowModCheats)<br>&#9;&#9;{<br>&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;Super.OpenSesame();<br>&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Ownerlogin"><a class="headerlink" href="#TCPlayer.Ownerlogin" title="Permanent link">Ownerlogin</a> (string Z39)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(!bServerOwner)<br>&#9;{<br>&#9;&#9;if(Z39 == GetControls()._OwnerPassword)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (bModerator)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bModerator=False;<br>&#9;&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bModerator=False;<br>&#9;&#9;&#9;&#9;ClientMessage("Logged out of Moderator...");<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if (bSummoner)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bSummoner=False;<br>&#9;&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bSummoner=False;<br>&#9;&#9;&#9;&#9;ClientMessage("Logged out of summoner...");<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin=True;<br>&#9;&#9;&#9;PlayerReplicationInfo.bAdmin=True;<br>&#9;&#9;&#9;bServerOwner=True;<br>&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bServerOwner=True;<br>&#9;&#9;&#9;bCheatsEnabled = true;<br>&#9;&#9;&#9;ConsoleCommand("AdminProtect True");<br>&#9;&#9;&#9;BroadcastMessage(PlayerReplicationInfo.PlayerName$" is the server owner.");<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;Warns++;<br>&#9;&#9;&#9;Notif("Incorrect password. "$3 - Warns$" attempts left.");<br>&#9;&#9;&#9;if(Warns > 3)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GetControls().Print(playerreplicationinfo.PlayerName$" was kicked for owner password abuse.");<br>&#9;&#9;&#9;&#9;Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Ownerlogout"><a class="headerlink" href="#TCPlayer.Ownerlogout" title="Permanent link">Ownerlogout</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bServerOwner)<br>&#9;{<br>&#9;&#9;bServerOwner=False;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bServerOwner=False;<br>&#9;&#9;&#9;&#9;bAdmin=False;<br>&#9;&#9;PlayerReplicationInfo.bAdmin=false;<br>&#9;&#9;bCheatsEnabled = false;<br>&#9;&#9;BroadcastMessage(PlayerReplicationInfo.PlayerName$" logged out of owner access.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.PRIGet"><a class="headerlink" href="#TCPlayer.PRIGet" title="Permanent link">PRIGet</a> (string ModStr)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bAdmin)<br>&#9;{<br>&#9;&#9;if(TCPRI(Self.PlayerReplicationInfo).GetPropertyText(caps(ModStr)) != "")<br>&#9;&#9;&#9;ClientMessage(ModStr$"="$TCPRI(Self.PlayerReplicationInfo).GetPropertyText(caps(ModStr)));<br>&#9;&#9;else<br>&#9;&#9;&#9;ClientMessage("Value not found...");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.ParseLeftClick"><a class="headerlink" href="#TCPlayer.ParseLeftClick" title="Permanent link">ParseLeftClick</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        NextPlayer(false);<br>    <br></div>
<h3 id="TCPlayer.ParseRightClick"><a class="headerlink" href="#TCPlayer.ParseRightClick" title="Permanent link">ParseRightClick</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        NextPlayer(true);<br>    <br></div>
<h3 id="TCPlayer.PlayerCalcView"><a class="headerlink" href="#TCPlayer.PlayerCalcView" title="Permanent link">PlayerCalcView</a> (out actor ViewActor, out vector CameraLocation, out rotator CameraRotation)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn PTarget;<br><br><br>&#9;    if ( ViewTarget != None )<br>&#9;    {<br>&#9;&#9;    ViewActor = ViewTarget;<br>&#9;&#9;    CameraLocation = ViewTarget.Location;<br>&#9;&#9;    CameraRotation = ViewTarget.Rotation;<br>&#9;&#9;    PTarget = Pawn(ViewTarget);<br>&#9;&#9;    if ( PTarget != None )<br>&#9;&#9;    {<br>&#9;&#9;&#9;    if ( Level.NetMode == NM_Client )<br>&#9;&#9;&#9;    {<br>&#9;&#9;&#9;&#9;    if (PTarget.bIsPlayer)<br>&#9;&#9;&#9;&#9;    {<br>&#9;&#9;&#9;&#9;&#9;    //PTarget.ViewRotation = TargetViewRotation;<br>&#9;&#9;&#9;&#9;&#9;    //PTarget.ViewRotation = TargetViewRotation3;<br>&#9;&#9;&#9;&#9;&#9;    PTarget.ViewRotation.Pitch = TargetView_RotPitch;<br>&#9;&#9;&#9;&#9;&#9;    PTarget.ViewRotation.Yaw = TargetView_RotYaw;<br>&#9;&#9;&#9;&#9;    }<br>&#9;&#9;&#9;&#9;    PTarget.EyeHeight = TargetEyeHeight;<br>&#9;&#9;&#9;&#9;    if ( PTarget.Weapon != None )<br>&#9;&#9;&#9;&#9;&#9;    PTarget.Weapon.PlayerViewOffset = TargetWeaponViewOffset;<br>&#9;&#9;&#9;    }<br>&#9;&#9;&#9;    if ( PTarget.bIsPlayer )<br>&#9;&#9;&#9;&#9;    CameraRotation = PTarget.ViewRotation;<br>&#9;&#9;&#9;    if ( !bBehindView )<br>&#9;&#9;&#9;&#9;    CameraLocation.Z += PTarget.EyeHeight;<br>&#9;&#9;    }<br>&#9;&#9;    if ( bBehindView )<br>&#9;&#9;&#9;    CalcBehindView(CameraLocation, CameraRotation, 180);<br>&#9;    }<br>&#9;&#9;else super.PlayerCalcView(ViewActor, CameraLocation, CameraRotation);<br>&#9;<br></div>
<h3 id="TCPlayer.PlayerMove"><a class="headerlink" href="#TCPlayer.PlayerMove" title="Permanent link">PlayerMove</a> (float DeltaTime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local rotator newRotation;<br>&#9;local vector X,Y,Z;<br><br><br>&#9;&#9;GetAxes(ViewRotation,X,Y,Z);<br><br>&#9;&#9;aForward *= 0.1;<br>&#9;&#9;aStrafe  *= 0.1;<br>&#9;&#9;aLookup  *= 0.24;<br>&#9;&#9;aTurn    *= 0.24;<br>&#9;&#9;aUp&#9;&#9; *= 0.1;<br><br>&#9;&#9;Acceleration = aForward*X + aStrafe*Y + aUp*vect(0,0,1);<br><br>&#9;&#9;UpdateRotation(DeltaTime, 1);<br><br>&#9;&#9;if ( Role < ROLE_Authority ) // then save this move and replicate it<br>&#9;&#9;&#9;ReplicateMove(DeltaTime, Acceleration, DODGE_None, rot(0,0,0));<br>&#9;&#9;else<br>&#9;&#9;&#9;ProcessMove(DeltaTime, Acceleration, DODGE_None, rot(0,0,0));<br>&#9;<br></div>
<h3 id="TCPlayer.PlayerTick"><a class="headerlink" href="#TCPlayer.PlayerTick" title="Permanent link">PlayerTick</a> (float DeltaTime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;    RefreshSystems(DeltaTime);<br>&#9;&#9;MultiplayerTick(DeltaTime);<br>&#9;&#9;UpdateTimePlayed(DeltaTime);<br>&#9;&#9;if (bUpdatePosition) ClientUpdatePosition();<br>&#9;&#9;PlayerMove(DeltaTime);<br>&#9;<br></div>
<h3 id="TCPlayer.PopHealth"><a class="headerlink" href="#TCPlayer.PopHealth" title="Permanent link">PopHealth</a> (float _health0, float _health1, float _health2, float _health3, float _health4, float _health5)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    if(Level.NetMode == NM_StandAlone)<br>        Super.PopHealth(_health0, _health1, _health2, _health3, _health4, _health5);<br><br></div>
<h3 id="TCPlayer.Possess"><a class="headerlink" href="#TCPlayer.Possess" title="Permanent link">Possess</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExRootWindow w;<br>&#9;local TCFPS aFPS;<br><br>    Super.Possess();<br>   // NewLogTimeout = GetControls().GlobalLogTimeout;<br>    notiftimer = 5;<br>    w = DeusExRootWindow(RootWindow);<br>   &#9;if (w != None)<br>&#9;{<br>&#9;    if (w.hud != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;w.hud.Destroy();<br>&#9;&#9;}<br>&#9;&#9;w.hud = TCHUD(w.NewChild(Class'TCHUD'));<br>&#9;&#9;TCH = TCHUD(w.hud);<br>&#9;&#9;w.hud.UpdateSettings(self);<br>&#9;&#9;w.hud.SetWindowAlignments(HALIGN_Full,VALIGN_Full,0.00,0.00);<br>&#9;&#9;//TCHUD(w.hud).TextLogo = GetControls().TextLogo;<br>&#9;&#9;<br>&#9;}<br>&#9;Spawn(class'_TCTimer', self);<br>&#9;<br>&#9;/*if(GetControls().bEnforceFPS)<br>&#9;{<br>&#9;&#9;aFPS = Spawn(Class'TCFPS', self);<br>&#9;&#9;aFPS.WPRI = TCPRI(PlayerReplicationInfo);<br>&#9;&#9;aFPS.Watcher = Self;<br>&#9;}*/<br><br><br></div>
<h3 id="TCPlayer.PostBeginPlay"><a class="headerlink" href="#TCPlayer.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br>&#9;local TCControls TCC;<br><br>  //  local string i;<br>    <br>    //TCMOTD<br>    if(GetControls().bNewMainMenu)<br>&#9;&#9;PlayerMOTDWindow = Spawn(class'TCMOTD',self);<br>    <br>    TCC = GetControls();<br>    <br>    if(Sharpshooter(Level.Game) != None)<br>    {<br>&#9;&#9;for(i=0;i<30;i++)<br>&#9;&#9;{<br>&#9;&#9;&#9;rSSWeapons[i] = GetControls().SSWeapons[i];<br>&#9;&#9;}<br>&#9;}<br>    super.PostBeginPlay();<br><br>&#9;&#9;if(TCC.HUDType == HUD_Extended)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Extended;<br>&#9;&#9;&#9;//Log("HUD Type = "$HUDType$" from Controls "$TCC.HudType);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br>&#9;&#9;if(TCC.HUDType == HUD_Basic)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Basic;<br>&#9;&#9;&#9;//Log("HUD Type = "$HUDType$" from Controls "$TCC.HudType);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br>&#9;&#9;if(TCC.HUDType == HUD_Unified)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Unified;<br>&#9;&#9;&#9;//Log("HUD Type = "$HUDType$" from Controls "$TCC.HudType);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br>&#9;&#9;if(TCC.HUDType == HUD_Original)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Original;<br>&#9;&#9;&#9;//Log("HUD Type = "$HUDType$" from Controls "$TCC.HudType);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br>&#9;&#9;if(TCC.HUDType == HUD_Off)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Off;<br>&#9;&#9;&#9;//Log("HUD Type = "$HUDType$" from Controls "$TCC.HudType);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.PostRender"><a class="headerlink" href="#TCPlayer.PostRender" title="Permanent link">PostRender</a> (canvas Canvas)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float _timeDifference, _timerSecondsCorrected;<br><br><br>    FrameCounter++;<br>    _timeDifference = _timerSeconds-_timerSecondsPrev;<br>    if(_timeDifference >= 1)<br>    {<br>        FPS = int(FrameCounter/_timeDifference);<br>        FrameCounter = 0;<br><br>        _serverFPS(FPS, _timeDifference);<br><br>        _timerSecondsPrev = _timerSeconds;<br>    }<br>/*<br>    if(Len(Player.Console.MsgText[Player.Console.TopLine]) > 0 && Player.Console.MsgText[Player.Console.TopLine] == errorMessage)<br>    {<br>        unrecognizedCommand(Player.Console.History[Player.Console.HistoryCur-1]);<br>        Player.Console.MsgText[Player.Console.TopLine] = "";<br>    }<br>*/<br>&#9;Super.PostRender(Canvas);<br><br></div>
<h3 id="TCPlayer.ProcessMove"><a class="headerlink" href="#TCPlayer.ProcessMove" title="Permanent link">ProcessMove</a> (float DeltaTime, vector newAccel, eDodgeDir DodgeMove, rotator DeltaRot)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local actor HitActor;<br>&#9;local vector HitLocation, HitNormal, checkpoint, start, checkNorm, Extent;<br>&#9;local TCControls TCC;<br><br>&#9;&#9;super.ProcessMove(DeltaTime, newAccel, DodgeMove, DeltaRot);<br>&#9;&#9;TCC = GetControls();<br>&#9;&#9;<br>&#9;&#9;//Kaiser: Mantling system.<br>&#9;&#9;if ((TCC != None) && Physics == PHYS_Falling && velocity.Z != 0 && TCC.bMantling)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (CarriedDecoration == None && Energy >= TCC.MantleBio)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;checkpoint = vector(Rotation);<br>&#9;&#9;&#9;&#9;checkpoint.Z = 0.0;<br>&#9;&#9;&#9;&#9;checkNorm = Normal(checkpoint);<br>&#9;&#9;&#9;&#9;checkPoint = Location + CollisionRadius * checkNorm;<br>&#9;&#9;&#9;&#9;//Extent = CollisionRadius * vect(1,1,0);<br>&#9;&#9;&#9;&#9;Extent = CollisionRadius * vect(0.2,0.2,0);<br>&#9;&#9;&#9;&#9;Extent.Z = CollisionHeight;<br>&#9;&#9;&#9;&#9;HitActor = Trace(HitLocation, HitNormal, checkpoint, Location, True, Extent);<br>&#9;&#9;&#9;&#9;if ( (HitActor != None) && (Pawn(HitActor) == None) && (HitActor == Level || HitActor.bCollideActors) && !HitActor.IsA('DeusExCarcass'))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;WallNormal = -1 * HitNormal;<br>&#9;&#9;&#9;&#9;&#9;start = Location;<br>&#9;&#9;&#9;&#9;&#9;start.Z += 1.1 * MaxStepHeight + CollisionHeight;<br>&#9;&#9;&#9;&#9;&#9;checkPoint = start + 2 * CollisionRadius * checkNorm;<br>&#9;&#9;&#9;&#9;&#9;HitActor = Trace(HitLocation, HitNormal, checkpoint, start, true, Extent);<br>&#9;&#9;&#9;&#9;&#9;if (HitActor == None)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(!isMantling)&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Energy -= TCC.MantleBio;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;isMantling = True;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;setPhysics(PHYS_Falling);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Velocity.Z = TCC.MantleVelocity;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Acceleration = vect(0,0,0);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;PlaySound(sound'MaleLand', SLOT_None, 1.5, true, 1200, (1.0 + 0.2*FRand()) * 1.0 );<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Acceleration = wallNormal * AccelRate / 8;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;<br></div>
<h3 id="TCPlayer.PushVote"><a class="headerlink" href="#TCPlayer.PushVote" title="Permanent link">PushVote</a> (int i)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;GetControls().Votez.AcceptVote(Self, i);<br><br></div>
<h3 id="TCPlayer.RCR"><a class="headerlink" href="#TCPlayer.RCR" title="Permanent link">RCR</a> (string in) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string TempMessage, TempLeft, TempRight, OutMessage, _TmpString;<br><br>&#9;OutMessage=in;<br>    while (instr(caps(outmessage), "|P") != -1)<br>    {<br>        tempRight=(right(OutMessage, (len(OutMessage)-instr(caps(OutMessage), "|P"))-3));<br>        tempLeft=(left(OutMessage, instr(caps(OutMessage), "|P")) );<br>        OutMessage=TempLeft$TempRight;<br>    }<br>&#9;&#9;return OutMessage;<br><br></div>
<h3 id="TCPlayer.RCR2"><a class="headerlink" href="#TCPlayer.RCR2" title="Permanent link">RCR2</a> (string in) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string TempMessage, TempLeft, TempRight, OutMessage, _TmpString;<br><br>&#9;OutMessage=in;<br>    while (instr(caps(outmessage), "|C") != -1)<br>    {<br>        tempRight=(right(OutMessage, (len(OutMessage)-instr(caps(OutMessage), "|C"))-8));<br>        tempLeft=(left(OutMessage, instr(caps(OutMessage), "|C")) );<br>        OutMessage=TempLeft$TempRight;<br>    }<br>&#9;&#9;&#9;return OutMessage;<br><br></div>
<h3 id="TCPlayer.Remote"><a class="headerlink" href="#TCPlayer.Remote" title="Permanent link">Remote</a> (int id, string command)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br>&#9;local TCControls TCC;<br><br>&#9;TCC = GetControls();<br>&#9;if(!bAdmin)<br>&#9;&#9;return;<br>&#9;<br>&#9;if(!TCC.bAllowRemote)<br>&#9;&#9;return;<br>&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;{<br>&#9;&#9;if(TCP.PlayerReplicationInfo.PlayerID == id)<br>&#9;&#9;{<br>&#9;&#9;&#9;Log("Executing "$command$" on "$TCP.PlayerReplicationInfo.PlayerName,'OpenDX');<br>&#9;&#9;&#9;ClientMessage("Executing "$command$" on "$TCP.PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;TCP.CCR(command);<br>&#9;&#9;&#9;AdminPrint("System",playerreplicationinfo.playername$" executed "$command$" on "$TCP.PlayerReplicationInfo.PlayerName$".");<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.RemoteGod"><a class="headerlink" href="#TCPlayer.RemoteGod" title="Permanent link">RemoteGod</a> (string HitString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn aPawn;<br>&#9;local TCPlayer P;<br><br>&#9;if(bAdmin || bModerator)<br>&#9;{<br>&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;if<br>&#9;&#9;(&#9;P.bIsPlayer<br>&#9;&#9;    &&  string(P.PlayerReplicationInfo.PlayerID) ~= HitString<br>&#9;&#9;&#9;&&&#9;(P==None || NetConnection(P.Player)!=None ) )<br>&#9;&#9;{<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(P.ReducedDamageType == '')<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;P.ReducedDamageType = 'All';<br>&#9;&#9;&#9;&#9;P.ClientMessage(PlayerReplicationInfo.PlayerName$" has godded you.");<br>&#9;&#9;&#9;&#9;ClientMessage(P.PlayerReplicationInfo.PlayerName$" was godded.");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;P.ReducedDamageType = '';<br>&#9;&#9;&#9;&#9;P.ClientMessage(PlayerReplicationInfo.PlayerName$" has de-godded you.");<br>&#9;&#9;&#9;&#9;ClientMessage(P.PlayerReplicationInfo.PlayerName$" was de-godded.");&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br><br></div>
<h3 id="TCPlayer.RemovePerk"><a class="headerlink" href="#TCPlayer.RemovePerk" title="Permanent link">RemovePerk</a> (int i)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(myPerks[i] != None)<br>&#9;{<br>&#9;&#9;ClientMessage("|P2Removing ["$i$"] "$myPerks[i].PerkName$"...");<br>&#9;&#9;if(myPerks[i].bOn)<br>&#9;&#9;&#9;myPerks[i].ToggleActivation();<br>&#9;&#9;<br>&#9;&#9;myPerks[i].Destroy();<br>&#9;&#9;myPerks[i] = None;<br>&#9;}<br>&#9;else<br>&#9;ClientMessage("|P2No perk found in slot "$i);<br><br></div>
<h3 id="TCPlayer.RemovePerkbyName"><a class="headerlink" href="#TCPlayer.RemovePerkbyName" title="Permanent link">RemovePerkbyName</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br><br>&#9;<br>&#9;for(i=0;i<10;i++)<br>&#9;{<br>&#9;&#9;if(myPerks[i].PerkShortName ~= str || myPerks[i].PerkName ~= str)<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage("|P2Removing ["$i$"] "$myPerks[i].PerkName$"...");<br>&#9;&#9;&#9;if(myPerks[i].bOn)<br>&#9;&#9;&#9;&#9;myPerks[i].ToggleActivation();<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;myPerks[i].Destroy();<br>&#9;&#9;&#9;myPerks[i] = None;<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.RenameTeam"><a class="headerlink" href="#TCPlayer.RenameTeam" title="Permanent link">RenameTeam</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br>&#9;local string oldname;<br><br><br>&#9;if(bModerator || bAdmin || bTeamLeader)<br>&#9;{<br>&#9;&#9;if(TeamName != "" && str != "")<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(instr(str," ") != -1)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Notif("Team Name can't contain spaces.");<br>&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(str ~= P.TeamName)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Team Name already in use.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;}&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;oldname = TeamName;<br>&#9;&#9;&#9;str = Left(str,10);<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName ~= TeamName)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;P.TeamName = oldname;<br>&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).TeamNamePRI = oldname;<br>&#9;&#9;&#9;&#9;&#9;P.Notif("Your team has been renamed by "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;}&#9;&#9;<br>&#9;&#9;&#9;}<br><br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("You are not in a team.");<br>&#9;&#9;}&#9;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.RenameTeam2"><a class="headerlink" href="#TCPlayer.RenameTeam2" title="Permanent link">RenameTeam2</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br>&#9;local string oldname;<br><br><br>&#9;if(bModerator || bAdmin || bTeamLeader)<br>&#9;{<br>&#9;&#9;if(TeamName != "" && str != "")<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(instr(str," ") != -1)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Notif("Team Name can't contain spaces.");<br>&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;if(str ~= P.TeamName)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Team Name already in use.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;str = Left(str,10);<br>&#9;&#9;&#9;oldname = TeamName;<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName ~= TeamName)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;P.TeamName = oldname;<br>&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).TeamNamePRI = oldname;<br>&#9;&#9;&#9;&#9;&#9;P.Notif("Your team has been renamed by "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;}&#9;&#9;<br>&#9;&#9;&#9;}<br><br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("You are not in a team.");<br>&#9;&#9;}&#9;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Replace"><a class="headerlink" href="#TCPlayer.Replace" title="Permanent link">Replace</a> (string in, string this, string with) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string TempLeft, TempRight, OutMessage;<br><br>&#9;OutMessage=in;<br>    while (instr(caps(OutMessage), caps(this)) != -1)<br>    {<br>        tempRight=(right(OutMessage, (len(OutMessage)-instr(caps(OutMessage), caps(this)))-len(this)));<br>        tempLeft=(left(OutMessage, instr(caps(OutMessage), caps(this)))$with);<br>        OutMessage=TempLeft$TempRight;<br>    }<br>    return OutMessage;<br><br></div>
<h3 id="TCPlayer.ResetScores"><a class="headerlink" href="#TCPlayer.ResetScores" title="Permanent link">ResetScores</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPRI TCP;<br><br>&#9;<br>&#9;if(!bAdmin)<br>&#9;&#9;return;<br>&#9;&#9;<br>&#9;BroadcastMessage(PlayerReplicationInfo.PlayerName$" reset the scores.");<br>&#9;foreach AllActors(class'TCPRI',TCP)<br>&#9;{<br>&#9;&#9;TCP.Score = 0;<br>&#9;&#9;TCP.Deaths = 0;<br>&#9;&#9;TCP.Streak = 0;<br>&#9;}<br><br></div>
<h3 id="TCPlayer.SDIn"><a class="headerlink" href="#TCPlayer.SDIn" title="Permanent link">SDIn</a> (int mins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r || bServerOwner || bSuperAdmin) GetControls().SetShutdownIn(mins);<br><br></div>
<h3 id="TCPlayer.Say"><a class="headerlink" href="#TCPlayer.Say" title="Permanent link">Say</a> (string Msg)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool bFoundPlayer;<br>&#9;local TCPlayer p, tcp;<br>&#9;local playerreplicationinfo pri;<br>&#9;local string meString, Part, SetA, SetB, cstr;<br>&#9;local int cint, ran, tcbotter, ccint;<br>&#9;local TCControls TCC;<br>&#9;local Actor act;<br>&#9;local int i, k, c;<br>&#9;local string fmsg;<br>&#9;local float cfloat;<br>&#9;local Actor hitActor;<br>&#9;local vector loc, line, HitLocation, hitNormal;<br>&#9;local TCRecall TCR, TempRC;<br>&#9;local bool bFound;<br>&#9;local vector modv;<br><br><br> &#9;TCC = GetControls();<br> &#9;<br> &#9;if(Msg == "")<br>&#9;&#9;return;<br>&#9;<br>&#9;if(left(MSG,7) ~= "#admin ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 7);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;AdminPrint("# "$PlayerReplicationInfo.PlayerName, meString,,True);<br>&#9;&#9;return;<br>&#9;}<br><br>&#9;if(left(MSG,5) ~= "#mod ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 5);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;AdminPrint("# "$PlayerReplicationInfo.PlayerName, meString, True, True);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(MSG == "/")<br>&#9;{<br>&#9;&#9;ClientMessage("SLASH COMMANDS: Commands that begin with / must be said in all chat. Slash commands don't send to global chat.");<br>&#9;&#9;ClientMessage("Examples: /store, /skin, /me, /col, /col2, /cc, /cc2, /status, /switch, /team, /teamrename, /teamadd, /teamkick, /leave, /mark, /markname, /lmarkname, /markself, /markselfname, /lmark, /tempmark, /tempmarkname, /extra, /r, /cr, /t");<br>&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;&#9;ClientMessage("|P2ADMIN: /stealthmute, /stealthmutename, /hud, /kick, /kn, /ath");<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(MSG == "!")<br>&#9;{<br>&#9;&#9;ClientMessage("BANG COMMANDS: Commands that begin with ! must be said in all chat.");<br>&#9;&#9;ClientMessage("Examples: !roll, !info, !changes");<br>&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;&#9;ClientMessage("|P2ADMIN: !mute, !mutename, !adm, !mod, !sum, !admname, !modname, !sumname, !s, !g, !m, !restart");<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(bStealthMuted)<br>&#9;{<br>&#9;&#9;ClientMessage(PlayerReplicationInfo.PlayerName$"("$PlayerReplicationInfo.PlayerID$"): "$msg, 'Say');<br>&#9;&#9;Log("Message blocked due to stealth mute:",'OpenDX');<br>&#9;&#9;Log(PlayerReplicationInfo.PlayerName$"("$PlayerReplicationInfo.PlayerID$"): "$msg, 'Say');<br>&#9;&#9;return;<br>&#9;}<br>&#9;if(bMuted)<br>&#9;{<br>&#9;&#9;Notif("You are muted and can not broadcast.");<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br> &#9;if(instr(caps(msg), caps("brb")) != -1 && !TCPRI(PlayerReplicationInfo).bAway)<br> &#9;{<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bAway=True;<br>&#9;&#9;BroadcastMessage("|P7"$PlayerReplicationInfo.PlayerName$" is away.");<br>&#9;}<br>&#9;<br>&#9;if(instr(caps(msg), caps("back")) != -1 && TCPRI(PlayerReplicationInfo).bAway)<br> &#9;{<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bAway=False;<br>&#9;&#9;BroadcastMessage("|P7"$PlayerReplicationInfo.PlayerName$" is back.");<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,12) ~= "/killphrase ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 12);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Format: killphrase <id> <phrase>");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;ConsoleCommand("SetKillphrase "$meString);<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br> &#9;if(TCC.bWordFilter)<br> &#9;{<br>&#9;&#9;for(i=0;i<10;i++)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCC.Filters[i].Trgt != "")<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(instr(caps(msg), caps(TCC.Filters[i].Trgt)) != -1)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;fmsg = Replace(msg, TCC.Filters[i].Trgt, TCC.Filters[i].Rep);<br>&#9;&#9;&#9;&#9;&#9;AdminPrint("System",PlayerReplicationInfo.PlayerName$"("$playerreplicationinfo.playerid$"): (Triggered Word Filter) "$msg, True);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,2) ~= "##")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 2);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Shortcut system; Enter any console command directly after the # and it will execute as normal.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;CCR(meString);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,4) ~= "#rc ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 4);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Format: #rc <id> <command>");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;ConsoleCommand("Remote "$meString);<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;if(left(MSG,13) ~= "#debugremote ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 13);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Format: #debugremote <id> <command>");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;ConsoleCommand("DebugRemote "$meString);<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;else if(Left(MSG,6) ~= "!vote ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 6);<br>&#9;&#9;<br>&#9;&#9;if(meString ~= "tdm" || meString ~= "team"  || meString ~= "team dm"  || meString ~= "teamdm" || meString ~= "team deathmatch")<br>&#9;&#9;&#9;PushVote(1);<br>&#9;&#9;&#9;<br>&#9;&#9;if(meString ~= "dm" || meString ~= "deathmatch")<br>&#9;&#9;&#9;PushVote(2);<br>&#9;&#9;&#9;<br>&#9;&#9;if(meString ~= "j" || meString ~= "jug" || meString ~= "jugger" || meString ~= "juggernaut")<br>&#9;&#9;&#9;PushVote(3);<br>&#9;&#9;&#9;<br>&#9;&#9;if(meString ~= "tj" || meString ~= "team jug" || meString ~= "team jugger" || meString ~= "team juggernaut")<br>&#9;&#9;&#9;PushVote(4);<br>&#9;&#9;&#9;<br>&#9;&#9;if(meString ~= "kc" || meString ~= "kill" || meString ~= "confirmed" || meString ~= "kill confirmed")<br>&#9;&#9;&#9;PushVote(5);<br>&#9;&#9;&#9;<br>&#9;&#9;if(meString ~= "tkc" || meString ~= "team kill" || meString ~= "team confirmed" || meString ~= "team kill confirmed")<br>&#9;&#9;&#9;PushVote(6);<br>&#9;&#9;<br>&#9;&#9;if(meString ~= "inf" || meString ~= "infect" || meString ~= "infection" || meString ~= "infected")<br>&#9;&#9;&#9;PushVote(7);<br>&#9;&#9;&#9;<br>&#9;&#9;if(meString ~= "gg" || meString ~= "gungame" || meString ~= "arsenal")<br>&#9;&#9;&#9;PushVote(8);<br>&#9;&#9;&#9;<br>&#9;&#9;if(meString ~= "ss" || meString ~= "sharpshooter")<br>&#9;&#9;&#9;PushVote(9);<br>&#9;}&#9;<br>&#9;<br>&#9;else if(MSG ~= "/spawntest")<br>&#9;{<br>&#9;&#9;SpawnST();<br>&#9;}<br>&#9;else if(MSG ~= "/extra")<br>&#9;{<br>&#9;&#9;CCR("TEH");<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(MSG ~= "/lmarkoff") //Local mark OFF<br>&#9;{<br>&#9;&#9;CancelWaypoint();<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(MSG ~= "/markoff") //Global mark OFF<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;TCP.CancelWaypoint();<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(Left(MSG,11) ~= "/lmarkname ") //Local mark with name<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 11);<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;line = Vector(ViewRotation) * 10000;<br>&#9;&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;<br>&#9;&#9;if(Pawn(HitActor) != None || DeusExDecoration(HitActor) != None || Mover(HitActor) != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;SetWaypoint(HitActor, meString);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;SetWaypointLoc(HitLocation, "Waypoint");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;else if(MSG ~= "/tempmarkself") //Global marks self with lifespan<br>&#9;{<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br><br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;TCP.SetTempWaypoint(PlayerReplicationInfo.PlayerName, Location);<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(MSG ~= "/tempmark") //Global marks target with lifespan<br>&#9;{<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;line = Vector(ViewRotation) * 10000;<br>&#9;&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;<br>&#9;&#9;if(Pawn(HitActor) != None || DeusExDecoration(HitActor) != None || Mover(HitActor) != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;&#9;modv = HitActor.location;<br>&#9;&#9;&#9;&#9;if(pawn(HitActor) != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;modv.z += 20;<br>&#9;&#9;&#9;&#9;}<br>&#9;<br>&#9;&#9;&#9;meString = GetReadableName(HitActor);<br>&#9;&#9;&#9;if(meString == "")<br>&#9;&#9;&#9;&#9;meString = "Here!";<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetTempWaypoint(meString, modv);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetTempWaypoint("Here!", HitLocation);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;else if(Left(MSG,14) ~= "/tempmarkname ") //Global marks target with lifespan and name<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 14);<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;line = Vector(ViewRotation) * 10000;<br>&#9;&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;<br>&#9;&#9;if(Pawn(HitActor) != None || DeusExDecoration(HitActor) != None || Mover(HitActor) != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;&#9;modv = HitActor.location;<br>&#9;&#9;&#9;&#9;if(pawn(HitActor) != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;modv.z += 20;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetTempWaypoint(meString, modv);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetTempWaypoint(meString, HitLocation);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;&#9;&#9;<br>&#9;else if(MSG ~= "/markself") //Global marks self<br>&#9;{<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br><br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;TCP.SetWaypoint(Self);<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(Left(MSG,14) ~= "/markselfname ") //Global marks self with name<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 14);<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br><br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;TCP.SetWaypoint(Self, meString);<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}&#9;&#9;<br>&#9;&#9;<br>&#9;else if(MSG ~= "/lmark") //Local mark target<br>&#9;{<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;line = Vector(ViewRotation) * 10000;<br>&#9;&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;<br>&#9;&#9;if(Pawn(HitActor) != None || DeusExDecoration(HitActor) != None || Mover(HitActor) != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;SetWaypoint(HitActor);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;SetWaypointLoc(HitLocation, "Waypoint");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;else if(Left(MSG,10) ~= "/markname ") //Global marks target with name<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 10);<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;line = Vector(ViewRotation) * 10000;<br>&#9;&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;<br>&#9;&#9;if(Pawn(HitActor) != None || DeusExDecoration(HitActor) != None || Mover(HitActor) != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetWaypoint(HitActor, meString);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetWaypointLoc(HitLocation, meString);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;&#9;<br>&#9;else if(MSG ~= "/mark") //Global marks target<br>&#9;{<br>&#9;&#9;if(!GetControls().bAllowMark)<br>&#9;&#9;&#9;return;<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;line = Vector(ViewRotation) * 10000;<br>&#9;&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;<br>&#9;&#9;if(Pawn(HitActor) != None || DeusExDecoration(HitActor) != None || Mover(HitActor) != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetWaypoint(HitActor);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetWaypointLoc(HitLocation, "Waypoint");<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if (msg ~= "/perks" || msg ~= "/perk")<br>&#9;{<br>&#9;&#9;ClientMessage("|P3===   PERKS   ===");<br>&#9;&#9;ClientMessage("|P3NUMBER - NAME");<br>&#9;&#9;for(k=0;k<10;k++)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(myPerks[k] != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;c++; //eyyyyyyyyy<br>&#9;&#9;&#9;&#9;if(myPerks[k].bOn)<br>&#9;&#9;&#9;&#9;&#9;ClientMessage("|P4"$k$" - "$myPerks[k].PerkName$" [ON]");<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;ClientMessage("|P2"$k$" - "$myPerks[k].PerkName$" [OFF]");<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;if(c != 0)<br>&#9;&#9;&#9;ClientMessage("|P7Say /perk <number> to toggle activation of the perk.");<br>&#9;&#9;else<br>&#9;&#9;&#9;ClientMessage("|P2You have no perks yet.");<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(Left(MSG,6) ~= "/perk ")<br>&#9;{<br>&#9;&#9;cint = int(Right(Msg, Len(Msg) - 6));<br>&#9;&#9;if(myPerks[cint] != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!myPerks[cint].bLock)<br>&#9;&#9;&#9;&#9;myPerks[cint].ToggleActivation();<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;ClientMessage("|P2This perk can not be turned off.");<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;&#9;ClientMessage("|P2Perk not found in slot "$cint$"...");<br>&#9;&#9;return;<br>&#9;}&#9;<br>&#9;else if(Left(MSG,3) ~= "/tm")<br>&#9;{<br>&#9;&#9;cint = int(Right(Msg, Len(Msg) - 3));<br>&#9;&#9;<br>&#9;&#9;if(cint == 0)<br>&#9;&#9;{<br>&#9;&#9;&#9;ConsoleCommand("Say I need a medic!");<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;//foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;//TCP.Playsound(GetControls().Taunts[cint].SaySound, SLOT_None);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetTauntWaypoint(self.Location, self.playerReplicationinfo.PlayerName$" needs a medic!");<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(cint == 1)<br>&#9;&#9;{<br>&#9;&#9;&#9;ConsoleCommand("Say Over here!");<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;//foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;//TCP.Playsound(GetControls().Taunts[cint].SaySound, SLOT_None);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetTauntWaypoint(self.Location, playerReplicationinfo.PlayerName$"!");<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(cint == 2)<br>&#9;&#9;{<br>&#9;&#9;&#9;ConsoleCommand("Say Fight me!");<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;//foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;//TCP.Playsound(GetControls().Taunts[cint].SaySound, SLOT_None);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;&#9;TCP.SetTauntWaypoint(self.Location, playerReplicationinfo.PlayerName$" wants to fight!");<br>&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(Left(MSG,2) ~= "/r")<br>&#9;{<br>&#9;&#9;cint = int(Right(Msg, Len(Msg) - 2));<br>&#9;&#9;foreach AllActors(class'TCRecall', TCR)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCR.OwnerPlayer == Self && TCR.SlotNum == cint)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Recalled...");<br>&#9;&#9;&#9;&#9;bFound=True;<br>&#9;&#9;&#9;&#9;SetCollision(false, false, false);<br>&#9;&#9;&#9;&#9;bCollideWorld = true;<br>&#9;&#9;&#9;&#9;GotoState('PlayerWalking');<br>&#9;&#9;&#9;&#9;SetLocation(TCR.location);<br>&#9;&#9;&#9;&#9;SetCollision(true, true , true);<br>&#9;&#9;&#9;&#9;SetPhysics(PHYS_Walking);<br>&#9;&#9;&#9;&#9;bCollideWorld = true;<br>&#9;&#9;&#9;&#9;GotoState('PlayerWalking');<br>&#9;&#9;&#9;&#9;ClientReStart();&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(!bFound)<br>&#9;&#9;{<br>&#9;&#9;&#9;TempRC = Spawn(class'TCRecall',,,self.Location);<br>&#9;&#9;&#9;TempRC.OwnerPlayer = Self;<br>&#9;&#9;&#9;TempRC.SlotNum = cint;<br>&#9;&#9;&#9;Notif("Marker placed...");<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(Left(MSG,3) ~= "/cr")<br>&#9;{<br>&#9;&#9;cint = int(Right(Msg, Len(Msg) - 3));<br>&#9;&#9;foreach AllActors(class'TCRecall', TCR)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCR.OwnerPlayer == Self && TCR.SlotNum == cint)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bFound=True;<br>&#9;&#9;&#9;&#9;TCR.Destroy();<br>&#9;&#9;&#9;&#9;Notif("Marker destroyed...");&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(!bFound)<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Marker not found...");<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;else if(Left(MSG,8) ~= "/recall ")<br>&#9;{<br>&#9;&#9;cint = int(Right(Msg, Len(Msg) - 8));<br>&#9;&#9;foreach AllActors(class'TCRecall', TCR)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCR.OwnerPlayer == Self && TCR.SlotNum == cint)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Recalled...");<br>&#9;&#9;&#9;&#9;bFound=True;<br>&#9;&#9;&#9;&#9;SetCollision(false, false, false);<br>&#9;&#9;&#9;&#9;bCollideWorld = true;<br>&#9;&#9;&#9;&#9;GotoState('PlayerWalking');<br>&#9;&#9;&#9;&#9;SetLocation(TCR.location);<br>&#9;&#9;&#9;&#9;SetCollision(true, true , true);<br>&#9;&#9;&#9;&#9;SetPhysics(PHYS_Walking);<br>&#9;&#9;&#9;&#9;bCollideWorld = true;<br>&#9;&#9;&#9;&#9;GotoState('PlayerWalking');<br>&#9;&#9;&#9;&#9;ClientReStart();&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(!bFound)<br>&#9;&#9;{<br>&#9;&#9;&#9;TempRC = Spawn(class'TCRecall',,,self.Location);<br>&#9;&#9;&#9;TempRC.OwnerPlayer = Self;<br>&#9;&#9;&#9;TempRC.SlotNum = cint;<br>&#9;&#9;&#9;Notif("Marker placed...");<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br><br>&#9;else if(Left(MSG,13) ~= "/clearrecall ")<br>&#9;{<br>&#9;&#9;cint = int(Right(Msg, Len(Msg) - 13));<br>&#9;&#9;foreach AllActors(class'TCRecall', TCR)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCR.OwnerPlayer == Self && TCR.SlotNum == cint)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bFound=True;<br>&#9;&#9;&#9;&#9;TCR.Destroy();<br>&#9;&#9;&#9;&#9;Notif("Marker destroyed...");&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(!bFound)<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Marker not found...");<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;else if(Left(MSG,6) ~= "/kick ")<br>&#9;{<br>&#9;&#9;cint = int(Right(Msg, Len(Msg) - 6));<br>&#9;&#9;ConsoleCommand("kick "$cint);<br>&#9;}<br>&#9;<br>&#9;else if(Left(MSG,4) ~= "/kn ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 4);<br>&#9;&#9;ConsoleCommand("KickName "$meString);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(left(MSG,17) ~= "/stealthmutename ")<br>&#9;{<br>&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;cstr = Left(Right(MSG, Len(MSG) - 17),InStr(MSG," "));<br><br>&#9;&#9;&#9;&#9;&#9;if(GPFN(cstr) != None)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(GPFN(cstr).bAdminProtectMode)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Notif("Command failed due to protection.");<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;if(bModerator && GPFN(cstr).bAdmin)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Notif("Can't mute player due to protection.");<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;if(GPFN(cstr).bStealthMuted)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;GPFN(cstr).bStealthMuted=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;AdminPrint(PlayerReplicationInfo.Playername, GPFN(cstr).PlayerReplicationInfo.PlayerName$" can chat normally.",True);&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;GPFN(cstr).bStealthMuted=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;AdminPrint(PlayerReplicationInfo.Playername, GPFN(cstr).PlayerReplicationInfo.PlayerName$" was stealth muted.",True);&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;ClientMessage("Failed to find "$cstr);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}&#9;<br>&#9;<br>&#9;else if(left(MSG,13) ~= "/stealthmute ")<br>&#9;{<br>&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;cint = int(Left(Right(MSG, Len(MSG) - 13),InStr(MSG," ")));<br>&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(P.bAdminProtectMode)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;Notif("Command failed due to protection.");<br>&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;if(bModerator && P.bAdmin)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;Notif("Can't mute player due to protection.");<br>&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;if(P.bStealthMuted)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bStealthMuted=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;AdminPrint(PlayerReplicationInfo.Playername, P.PlayerReplicationInfo.PlayerName$" can chat normally.",True);&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bStealthMuted=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;AdminPrint(PlayerReplicationInfo.Playername, P.PlayerReplicationInfo.PlayerName$" was stealth muted.",True);&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}&#9;<br>&#9;&#9;<br>&#9;if(left(MSG,6) ~= "/nlto ")<br>&#9;{<br>&#9;&#9;cfloat = float(Right(Msg, Len(Msg) - 6));<br>&#9;&#9;if (TCHUD(DeusExRootWindow(rootWindow).hud) !=None)<br>&#9;&#9;TCHUD(DeusExRootWindow(rootWindow).hud).msgLog.SetLogTimeout(cfloat);<br>&#9;&#9;Notif("New log timeout is "$cfloat);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,7) ~= "/notif ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 7);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage("Format: /notif words");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;Notif(meString);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,10) ~= "/notifall ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 10);<br>&#9;&#9;if(!bAdmin)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage("Format: /notif words");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;TCP.Notif(meString);<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;if(left(MSG,7) ~= "/store ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 7);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Format: /store optional: <name>");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;consoleCommand("StoreItems "$meString);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,6) ~= "/store")<br>&#9;{<br>&#9;&#9;consoleCommand("StoreItems");<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;&#9;<br>&#9;if(left(MSG,5) ~= "/lock")<br>&#9;{<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;line = Vector(ViewRotation) * 10000;<br>&#9;&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;<br>&#9;&#9;if(HitActor.IsA('TCStorageBox'))<br>&#9;&#9;{<br>&#9;&#9;&#9;if(PlayerReplicationInfo.PlayerName != TCStorageBox(HitActor).OwnerName)<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;if(TCStorageBox(HitActor).bLocked)<br>&#9;&#9;&#9;&#9;TCStorageBox(HitActor).bLocked = False;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;TCStorageBox(HitActor).bLocked = True;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;Notif("Lock state: "$TCStorageBox(HitActor).bLocked);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}&#9;&#9;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,5) ~= "/push")<br>&#9;{<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.Z += BaseEyeHeight;<br>&#9;&#9;line = Vector(ViewRotation) * 10000;<br>&#9;&#9;HitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;&#9;<br>&#9;&#9;if(HitActor.IsA('TCStorageBox'))<br>&#9;&#9;{<br>&#9;&#9;&#9;if(PlayerReplicationInfo.PlayerName != TCStorageBox(HitActor).OwnerName)<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;if(TCStorageBox(HitActor).bPushable)<br>&#9;&#9;&#9;&#9;TCStorageBox(HitActor).bPushable = False;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;TCStorageBox(HitActor).bPushable = True;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;Notif("Push state: "$TCStorageBox(HitActor).bPushable);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}&#9;&#9;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,6) ~= "/skin ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 6);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Format: /skin <class name>");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;SetSkin(meString);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,6) ~= "/myhud" && TCC.bAllowSelfHUD)<br>&#9;{<br>&#9;&#9;AdminPrint("System",playerreplicationinfo.playername$" changed local HUD settings.");<br>&#9;&#9;if(HUDType == HUD_Extended)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Basic;<br>&#9;&#9;&#9;Notif("OpenDX Basic HUD active.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;if(HUDType == HUD_Basic)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Unified;<br>&#9;&#9;&#9;Notif("Unified HUD active."); return;<br>&#9;&#9;}<br>&#9;&#9;if(HUDType == HUD_Unified)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Original;<br>&#9;&#9;&#9;Notif("Original HUD active."); return;<br>&#9;&#9;}<br>&#9;&#9;if(HUDType == HUD_Original)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Off;<br>&#9;&#9;&#9;Notif("No HUD active."); return;<br>&#9;&#9;}<br>&#9;&#9;if(HUDType == HUD_Off)<br>&#9;&#9;{<br>&#9;&#9;&#9;HUDType = HUD_Extended;<br>&#9;&#9;&#9;Notif("OpenDX Extended HUD active."); return;<br>&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;if(left(MSG,4) ~= "/hud" && bAdmin)<br>&#9;{<br>&#9;&#9;AdminPrint("System",playerreplicationinfo.playername$" changed global HUD settings.");<br>&#9;&#9;if(TCC.HUDType == HUD_Extended)<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCP.Notif("OpenDX Basic HUD active.");<br>&#9;&#9;&#9;&#9;TCP.HUDType = HUD_Basic;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;TCC.HUDType = HUD_Basic; TCC.SaveConfig(); return;<br>&#9;&#9;}<br>&#9;&#9;if(TCC.HUDType == HUD_Basic)<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCP.Notif("Unified HUD active.");<br>&#9;&#9;&#9;&#9;TCP.HUDType = HUD_Unified;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;TCC.HUDType = HUD_Unified; TCC.SaveConfig(); return;<br>&#9;&#9;}<br>&#9;&#9;if(TCC.HUDType == HUD_Unified)<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCP.Notif("Original HUD active.");<br>&#9;&#9;&#9;&#9;TCP.HUDType = HUD_Original;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;TCC.HUDType = HUD_Original; TCC.SaveConfig(); return;<br>&#9;&#9;}<br>&#9;&#9;if(TCC.HUDType == HUD_Original)<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCP.Notif("No HUD active.");<br>&#9;&#9;&#9;&#9;TCP.HUDType = HUD_Off;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;TCC.HUDType = HUD_Off; TCC.SaveConfig(); return;<br>&#9;&#9;}<br>&#9;&#9;if(TCC.HUDType == HUD_Off)<br>&#9;&#9;{<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCP.HUDType = HUD_Extended;<br>&#9;&#9;&#9;&#9;TCP.Notif("OpenDX Extended HUD active.");<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;TCC.HUDType = HUD_Extended; TCC.SaveConfig(); return;<br>&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;if(left(MSG,7) ~= "/tpask " && TCC.bAllowTPAsk)<br>&#9;{<br>&#9;    cint = int(Left(Right(MSG, Len(MSG) - 7),InStr(MSG," ")));<br>&#9;&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;if(P.bRequestedTP)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;ClientMessage("Other player is holding a request pending.");<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.bRequestedTP=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.RequestedTPPlayer=Self;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage("Incoming teleport request from"@PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage("Type /accept or /cancel after Say.");<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;ClientMessage("Teleport request sent to"@P.PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,10) ~= "/bringask " && TCC.bAllowTPAsk)<br>&#9;{<br>&#9;    cint = int(Left(Right(MSG, Len(MSG) - 10),InStr(MSG," ")));<br>&#9;&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;if(P.bRequestedBring)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;ClientMessage("Other player is holding a request pending.");<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.bRequestedBring=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.RequestedBringPlayer=Self;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage("Incoming request from"@PlayerReplicationInfo.PlayerName@"to bring you to their location.");<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage("Type /accept or /cancel after Say.");<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;ClientMessage("Teleport request sent to"@P.PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(MSG ~= "/accept" && TCC.bAllowTPAsk)<br>&#9;{<br>&#9;&#9;if(RequestedTPPlayer != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;RequestedTPPlayer.SetCollision(false, false, false);<br>&#9;&#9;&#9;RequestedTPPlayer.bCollideWorld = true;<br>&#9;&#9;&#9;RequestedTPPlayer.GotoState('PlayerWalking');<br>&#9;&#9;&#9;RequestedTPPlayer.SetLocation(location);<br>&#9;&#9;&#9;RequestedTPPlayer.SetCollision(true, true , true);<br>&#9;&#9;&#9;RequestedTPPlayer.SetPhysics(PHYS_Walking);<br>&#9;&#9;&#9;RequestedTPPlayer.bCollideWorld = true;<br>&#9;&#9;&#9;RequestedTPPlayer.GotoState('PlayerWalking');<br>&#9;&#9;&#9;RequestedTPPlayer.ClientReStart();&#9;<br>&#9;&#9;&#9;RequestedTPPlayer.ClientMessage(PlayerReplicationInfo.PlayerName$" has accepted your TP request.");<br>&#9;&#9;&#9;ClientMessage(RequestedTPPlayer.PlayerReplicationInfo.PlayerName$" brought to your location.");<br>&#9;&#9;&#9;bRequestedTP=False;<br>&#9;&#9;&#9;RequestedTPPlayer=None;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(bRequestedBring)<br>&#9;&#9;{<br>&#9;&#9;&#9;SetCollision(false, false, false);<br>&#9;&#9;&#9;bCollideWorld = true;<br>&#9;&#9;&#9;GotoState('PlayerWalking');<br>&#9;&#9;&#9;SetLocation(RequestedBringPlayer.location);<br>&#9;&#9;&#9;SetCollision(true, true , true);<br>&#9;&#9;&#9;SetPhysics(PHYS_Walking);<br>&#9;&#9;&#9;bCollideWorld = true;<br>&#9;&#9;&#9;GotoState('PlayerWalking');<br>&#9;&#9;&#9;ClientReStart();&#9;<br>&#9;&#9;&#9;RequestedBringPlayer.ClientMessage(PlayerReplicationInfo.PlayerName$" has been brought to you.");<br>&#9;&#9;&#9;ClientMessage("Sent to "$RequestedBringPlayer.PlayerReplicationInfo.PlayerName$"'s location.");<br>&#9;&#9;&#9;bRequestedBring=False;<br>&#9;&#9;&#9;RequestedBringPlayer=None;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if((MSG ~= "/deny" || MSG ~= "/cancel") && TCC.bAllowTPAsk)<br>&#9;{<br>&#9;&#9;if(RequestedTPPlayer != None || RequestedBringPlayer != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage(RequestedTPPlayer.PlayerReplicationInfo.PlayerName$" TP request cancelled.");<br>&#9;&#9;&#9;bRequestedTP=False;<br>&#9;&#9;&#9;RequestedTPPlayer=None;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,2) ~= "r.")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 2);<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Shortcut system; Enter any RCON command directly after the r. and it will execute as normal.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && GetControls().bAllowModMutator)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;&#9;&#9;ConsoleCommand("mutate rcon."$meString);<br>&#9;&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = false;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;ConsoleCommand("mutate rcon."$meString);&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}&#9;<br><br>&#9;if(left(MSG,2) ~= "m.")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 2);<br>&#9;&#9;<br>&#9;&#9;if(meString == "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Notif("Shortcut system; Enter any mutate command directly after the m. and it will execute as normal.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && GetControls().bAllowModMutator)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;&#9;&#9;ConsoleCommand("mutate"@meString);<br>&#9;&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = false;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;ConsoleCommand("mutate"@meString);&#9;&#9;<br>&#9;&#9;&#9;}&#9;&#9;<br>&#9;&#9;return;<br>&#9;}&#9;<br>&#9;<br>&#9;if(left(MSG,4) ~= "/me " && TCC.bChatCommands)<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 4);<br>&#9;&#9;BroadcastMessage("|P1"$PlayerReplicationInfo.PlayerName@meString);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,5) ~= "/ath " && bAdmin)<br>&#9;{<br>&#9;&#9;meString = Right(msg, Len(Msg) - 5);<br>&#9;&#9;GetControls().Print(meString);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,5) ~= "/col ")<br>&#9;{<br>&#9;cint = int(Right(Msg, Len(Msg) - 5));<br>&#9;//If we find the colour code, reset to our "original" name if it exists, if not, make our current one the "original"<br>&#9;if ( InStr(PlayerReplicationInfo.PlayerName,"|P") != -1 && (OriginalName != ""))<br>&#9;&#9;PlayerReplicationInfo.PlayerName = OriginalName;<br>&#9;else<br>&#9;&#9;OriginalName = PlayerReplicationInfo.PlayerName;<br>&#9;<br>&#9;<br>&#9;&#9;PlayerReplicationInfo.PlayerName = "|P"$cint$PlayerReplicationInfo.PlayerName;<br>&#9;&#9;Notif("Your name has been prefixed. Output: "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,6) ~= "/col2 ")<br>&#9;{<br>&#9;meString = Right(Msg, Len(Msg) - 6);<br>&#9;if ( InStr(PlayerReplicationInfo.PlayerName,"|C") != -1 && (OriginalName != ""))<br>&#9;&#9;PlayerReplicationInfo.PlayerName = OriginalName;<br>&#9;else<br>&#9;&#9;OriginalName = PlayerReplicationInfo.PlayerName;<br>&#9;<br>&#9;<br>&#9;&#9;PlayerReplicationInfo.PlayerName = "|C"$meString$PlayerReplicationInfo.PlayerName;<br>&#9;&#9;Notif("Your name has been prefixed. Output: "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,4) ~= "/cc ")<br>&#9;{<br>&#9;ccint = int(Right(Msg, Len(Msg) - 4));<br>&#9;&#9;CC = "|P"$ccint;<br>&#9;&#9;Notif(CC$"New chat colour set.");<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,5) ~= "/cc2 ")<br>&#9;{<br>&#9;meString = Right(Msg, Len(Msg) - 5);<br>&#9;&#9;CC = "|C"$meString;<br>&#9;&#9;Notif(CC$"New chat colour set.");<br>&#9;&#9;return;<br>&#9;}&#9;&#9;<br>&#9;<br>&#9;if(left(MSG,1) ~= "+")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 1);<br>&#9;&#9;&#9;if(meString == "")<br>&#9;&#9;&#9;&#9;ConsoleCommand("WhisperCheck");<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;ConsoleCommand("Whisper"@meString);<br>&#9;&#9;return;<br>&#9;}&#9;&#9;<br>&#9;&#9; <br>&#9;if(left(MSG,8) ~= "/status " && TCC.bChatCommands)<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 8);<br>&#9;&#9;Notif("Setting status to "$meString);<br>&#9;&#9;GetControls().Print(PlayerReplicationInfo.PlayerName$" set their status to "$meString);<br>&#9;&#9;TCPRI(PlayerReplicationInfo).Status = meString;<br>&#9;&#9;return;<br>&#9;}&#9;<br>&#9;&#9;<br>&#9;if(left(MSG,7) ~= "/status" && TCC.bChatCommands)<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 7);<br>&#9;&#9;Notif("Removing status.");<br>&#9;&#9;GetControls().Print(PlayerReplicationInfo.PlayerName$" removed their status.");<br>&#9;&#9;TCPRI(PlayerReplicationInfo).Status = "";<br>&#9;&#9;return;<br>&#9;}&#9;<br>&#9;<br>&#9;if(left(MSG,1) ~= "*")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 1);<br>&#9;&#9;if(Right(MSG, 1) == "*")<br>&#9;&#9;{<br>&#9;&#9;&#9;BroadcastMessage("|P7*"$PlayerReplicationInfo.PlayerName@meString@"|P7");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}&#9;&#9;<br>&#9;&#9;<br>&#9;if(left(MSG,1) ~= "@")<br>&#9;{<br>&#9;&#9;&#9;cint = int(Left(Right(MSG, Len(MSG) - 1),InStr(MSG," ")));<br>&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;&#9;Part = Right(MSG,Len(MSG) - 1);<br>&#9;&#9;&#9;&#9;meString = Right(Part,Len(Part) - InStr(Part," ") - 1);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;P.ClientMessage("|P4PM: "$PlayerReplicationInfo.PlayerName$"("$PlayerReplicationInfo.PlayerID$"): "$meString, 'TeamSay');<br>&#9;&#9;&#9;&#9;ClientMessage("|P4Message sent to"@P.PlayerReplicationInfo.PlayerName$":"@meString);<br>&#9;&#9;&#9;&#9;&#9;foreach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(P.bIntercept)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage(PlayerReplicationInfo.Playername$" > "$P.PlayerReplicationInfo.PlayerName$": "$meString);<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}&#9;<br>&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(Msg ~= "/switch")<br>&#9;{<br>&#9;&#9;ConsoleCommand("Change");<br>&#9;}&#9;<br>&#9;<br>&#9;else if(Msg ~= "/spec")<br>&#9;{<br>&#9;&#9;if (IsInState('Spectating'))<br>&#9;&#9;{<br>&#9;&#9;&#9;Spectate(0);<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;Spectate(1);<br>&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;else if(Msg ~= "/free")<br>&#9;{<br>&#9;&#9;if (IsInState('Spectating'))<br>&#9;&#9;{<br>&#9;&#9;&#9;ToggleFreeMode();<br>&#9;&#9;&#9;Notif("FreeMode toggled.");<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9; Notif("Can not use in Player mode, spectator only function");<br>&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;else if(left(MSG,6) ~= "/team ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 6);<br>&#9;&#9;&#9;if(teamName != "")<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;meString=Left(meString,10);<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(instr(meString," ") != -1)<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;ConsoleCommand("CreateTeam2"@meString);&#9;<br>&#9;&#9;&#9;if(TeamName == MeString)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GetControls().Print("Team created: "$meString);&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("|P2There was a problem creating that team.");&#9;&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br><br>&#9;else if(left(MSG,12) ~= "/teamrename ")<br>&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 12);<br>&#9;&#9;&#9;if(instr(meString," ") != -1)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Team Name can't contain spaces.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(meString == TeamName)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("|P2You're team is already called that.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;meString = Left(meString,10);<br>&#9;&#9;&#9;ConsoleCommand("RenameTeam2"@meString);&#9;<br>&#9;&#9;&#9;if(TeamName == MeString)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GetControls().Print("Team now called "$meString$"!");&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("|P2There was a problem editing that team, see the local chat for any errors.");&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(left(MSG,9) ~= "/teamadd ")<br>&#9;{<br>&#9;&#9;cint = int(Left(Right(MSG, Len(MSG) - 9),InStr(MSG," ")));<br>&#9;&#9;&#9;&#9;foreach AllActors(class'TCPlayer', p)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(P.TeamName != "")<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Notif("|P2There was a problem adding that player, they are already in a team.");&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;ConsoleCommand("TeamAddPlayer2"@cint);<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print("Player "$P.PlayerReplicationInfo.PlayerName$" was added team "$P.TeamName$"!");&#9;&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br><br>&#9;else if(left(MSG,10) ~= "/teamkick ")<br>&#9;{<br>&#9;&#9;cint = int(Left(Right(MSG, Len(MSG) - 10),InStr(MSG," ")));<br>&#9;&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;foreach AllActors(class'TCPlayer', p)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(P.TeamName == "")<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Notif("|P2There was a problem kicking that player, they are not in a team.");&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print("|P2Player "$P.PlayerReplicationInfo.PlayerName$" was removed from team "$P.TeamName$"!");<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;ConsoleCommand("TeamKickPlayer2"@cint);<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("|P2You don't have access to this command!");&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;else if(Msg ~= "/leave")<br>&#9;{<br>&#9;&#9;if(TeamName == "")<br>&#9;&#9;{<br>&#9;&#9;Notif("|P2Not in a team.");&#9;&#9;&#9;&#9;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;ConsoleCommand("LeaveTeam2");<br>&#9;&#9;GetControls().Print("|P2Removed "$PlayerReplicationInfo.PlayerName$" from their team.");&#9;&#9;&#9;&#9;<br>&#9;&#9;}<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;//=================<br>&#9;if(fmsg == "") //If its blank, meaning no word filter<br>&#9;&#9;fmsg = msg; //then make it the default, otherwise the filtered one goes through<br>&#9;&#9;<br>&#9;if(CC != "")<br>&#9;&#9;super.Say(CC$fmsg);<br>&#9;else<br>&#9;&#9;super.Say(fmsg);<br>&#9;//=================<br>&#9;<br>&#9;if((GetControls() != None) && (GetControls().bAllowKillphrase))<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCPRI(TCP.PlayerReplicationInfo).Killphrase != "")<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(instr(caps(msg), caps(TCPRI(TCP.PlayerReplicationInfo).Killphrase)) != -1)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;BroadcastMessage(TCP.PlayerReplicationInfo.PlayerName$"'s killphrase was triggered by "$PlayerReplicationInfo.PlayerName$" ("$TCPRI(TCP.PlayerReplicationInfo).Killphrase$")");<br>&#9;&#9;&#9;&#9;&#9;TCP.CreateKillerProfile(Self, 9999, 'Exploded', "");<br>&#9;&#9;&#9;&#9;&#9;TCP.TakeDamage(9999,self,vect(0,0,0),vect(0,0,1),'Exploded');&#9;<br>&#9;&#9;&#9;&#9;&#9;TCP.KilledBy(None);<br>&#9;&#9;&#9;&#9;&#9;TCPRI(TCP.PlayerReplicationInfo).Killphrase = "";<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;if(left(MSG,6) ~= "!list " && TCC.bChatCommands)<br>&#9;{<br>&#9;meString = Right(Msg, Len(Msg) - 6);<br>&#9;<br>&#9;&#9;if(meString ~= "admin")<br>&#9;&#9;{<br>&#9;&#9;&#9;ForEach AllActors(class'PlayerReplicationInfo', PRI)<br>&#9;&#9;&#9;if(pri.bAdmin)<br>&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;BroadcastMessage("ADMIN: "$PRI.PlayerName$"("$PRI.PlayerID$")");<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(meString ~= "server")<br>&#9;&#9;{<br>&#9;&#9;&#9;BroadcastMessage(Level.Game.GameReplicationInfo.ServerName);<br>&#9;&#9;&#9;BroadcastMessage(Level.Game.GameReplicationInfo.AdminName);<br>&#9;&#9;}&#9;&#9;&#9;<br>&#9;&#9;<br>&#9;&#9;if(meString ~= "mod")<br>&#9;&#9;{<br>&#9;&#9;&#9;ForEach AllActors(class'PlayerReplicationInfo', PRI)<br>&#9;&#9;&#9;if(TCPRI(pri).bModerator)<br>&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;BroadcastMessage("MODERATOR: "$PRI.PlayerName$"("$PRI.PlayerID$")");<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(meString ~= "teams")<br>&#9;&#9;{<br>&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', p)<br>&#9;&#9;&#9;&#9;if(P.TeamName != "")<br>&#9;&#9;&#9;&#9;BroadcastMessage("["$p.TeamName$"] "$P.PlayerReplicationInfo.PlayerName$"("$P.PlayerReplicationInfo.PlayerID$")");<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(meString ~= "chat")<br>&#9;&#9;{<br>&#9;&#9;&#9;BroadcastMessage("@<ID> <Message> ~ PM a Player");<br>&#9;&#9;&#9;BroadcastMessage("##<console command> ~ Execute a command quickly");<br>&#9;&#9;&#9;BroadcastMessage("m.<mutator command> ~ Execute a mutator command quickly");<br>&#9;&#9;&#9;BroadcastMessage("/me <text> ~ Broadcasts a message");<br>&#9;&#9;&#9;BroadcastMessage("/spec ~ toggles spectating |P2~ <!list admin/mod/teams/chat>");<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;else if(left(MSG,10) ~= "!mutename ")<br>&#9;{<br>&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;cstr = Left(Right(MSG, Len(MSG) - 10),InStr(MSG," "));<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(GPFN(cstr).bAdminProtectMode)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Command failed due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && GPFN(cstr).bAdmin)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't mute player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(GPFN(cstr).bMuted)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(cstr).bMuted=False;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(cstr).PlayerReplicationInfo).bMuted=False;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(cstr).PlayerReplicationInfo.PlayerName$" was unmuted.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(cstr).bMuted=True;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(cstr).PlayerReplicationInfo).bMuted=True;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(cstr).PlayerReplicationInfo.PlayerName$" was muted and can no longer broadcast.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;<br>&#9;&#9;}<br>&#9;}&#9;&#9;&#9;<br>&#9;<br>&#9;else if(left(MSG,6) ~= "!mute ")<br>&#9;{<br>&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;cint = int(Left(Right(MSG, Len(MSG) - 6),InStr(MSG," ")));<br>&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(P.bAdminProtectMode)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;Notif("Command failed due to protection.");<br>&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;if(bModerator && P.bAdmin)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;Notif("Can't mute player due to protection.");<br>&#9;&#9;&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;if(P.bMuted)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bMuted=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bMuted=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" was unmuted.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bMuted=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bMuted=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" was muted and can no longer broadcast.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}&#9;&#9;&#9;<br>&#9;<br>&#9;else if(left(MSG,9) ~= "!modname ")<br>&#9;{<br>&#9;&#9;if(bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;cstr = Left(Right(MSG, Len(MSG) - 5),InStr(MSG," "));<br><br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(GPFN(cstr).bModerator)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(cstr).bModerator=False;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(cstr).PlayerReplicationInfo).bModerator=False;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(cstr).PlayerReplicationInfo.PlayerName$" is no longer a moderator.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(cstr).bModerator=True;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(cstr).PlayerReplicationInfo).bModerator=True;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(cstr).PlayerReplicationInfo.PlayerName$" is now a moderator!");&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}&#9;<br>&#9;<br>&#9;else if(left(MSG,9) ~= "!admname ")<br>&#9;{<br>&#9;&#9;if(bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;cstr = Left(Right(MSG, Len(MSG) - 5),InStr(MSG," "));<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(GPFN(cstr).bAdmin)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(cstr).bAdmin=False;<br>&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bAdmin=False;<br>&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" is no longer an administrator.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(cstr).bAdmin=True;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(cstr).PlayerReplicationInfo).bAdmin=True;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(cstr).PlayerReplicationInfo.PlayerName$" is now an administrator.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}&#9;<br>&#9;<br>&#9;else if(left(MSG,9) ~= "!sumname ")<br>&#9;{<br>&#9;&#9;if(bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;cstr = Left(Right(MSG, Len(MSG) - 5),InStr(MSG," "));<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(GPFN(cstr).bSummoner)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(cstr).bSummoner=False;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(cstr).PlayerReplicationInfo).bSummoner=False;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(cstr).PlayerReplicationInfo.PlayerName$" can no longer summon.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(cstr).bSummoner=True;<br>&#9;&#9;&#9;&#9;TCPRI(GPFN(cstr).PlayerReplicationInfo).bSummoner=True;<br>&#9;&#9;&#9;&#9;GetControls().Print(GPFN(cstr).PlayerReplicationInfo.PlayerName$" can now summon.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;else if(left(MSG,5) ~= "!mod ")<br>&#9;{<br>&#9;&#9;if(bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;cint = int(Left(Right(MSG, Len(MSG) - 5),InStr(MSG," ")));<br>&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;&#9;&#9;if(P.bModerator)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bModerator=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bModerator=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" is no longer a moderator.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bModerator=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bModerator=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" is now a moderator!");&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}&#9;<br>&#9;<br>&#9;else if(left(MSG,5) ~= "!adm ")<br>&#9;{<br>&#9;&#9;if(bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;cint = int(Left(Right(MSG, Len(MSG) - 5),InStr(MSG," ")));<br>&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;&#9;&#9;if(P.bAdmin)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bAdmin=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bAdmin=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" is no longer an administrator.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bAdmin=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bAdmin=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" is now an administrator.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}&#9;<br>&#9;<br>&#9;else if(left(MSG,5) ~= "!sum ")<br>&#9;{<br>&#9;&#9;if(bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;cint = int(Left(Right(MSG, Len(MSG) - 5),InStr(MSG," ")));<br>&#9;&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == cint)<br>&#9;&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;&#9;&#9;if(P.bSummoner)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bSummoner=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bSummoner=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" can no longer summon.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;P.bSummoner=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).bSummoner=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;GetControls().Print(P.PlayerReplicationInfo.PlayerName$" can now summon.");&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;else if(left(MSG,6) ~= "!roll " || left(msg,6) ~= "!rand " && TCC.bChatCommands)<br>&#9;{<br>&#9;cint = int(Right(Msg, Len(Msg) - 6));<br>&#9;Ran = Rand(cint+1);<br>&#9;GetControls().Print("Random Number Generator rolled "$Ran$" out of "$cint);<br>&#9;}<br>&#9;<br>&#9;else if(left(MSG,3) ~= "!s ")<br>&#9;{<br>&#9;&#9;if(bAdmin)<br>&#9;&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 3);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;TCC = GetControls();<br>&#9;&#9;&#9;cint = InStr(meString, " ");       <br>&#9;&#9;&#9;SetA = Left(meString, cint );<br>&#9;&#9;&#9;SetB = Right(meString, Len(meString) - cint - 1);<br>&#9;&#9;&#9;&#9;&#9;if (TCC.GetPropertyText(caps(SetA)) == "")<br>&#9;&#9;&#9;&#9;&#9; {<br>&#9;&#9;&#9;&#9;&#9;  Notif("Invalid property.");<br>&#9;&#9;&#9;&#9;&#9;  return;<br>&#9;&#9;&#9;&#9;&#9; }<br>&#9;&#9;&#9;TCC.SetPropertyText(SetA, SetB);<br>&#9;&#9;&#9;TCC.SaveConfig();<br>&#9;&#9;&#9;BroadcastMessage("Settings property "$SetA$" set to "$Setb$".");&#9;<br>&#9;&#9;}<br>&#9;}<br>&#9;<br>&#9;else if(left(MSG,3) ~= "!g ")<br>&#9;{<br>&#9;&#9;if(bAdmin)<br>&#9;&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 3);<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;cint = InStr(meString, " ");       <br>&#9;&#9;&#9;SetA = Left(meString, cint );<br>&#9;&#9;&#9;SetB = Right(meString, Len(meString) - cint - 1);<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;if (Level.Game.GetPropertyText(caps(SetA)) == "")<br>&#9;&#9;&#9;&#9;&#9; {<br>&#9;&#9;&#9;&#9;&#9;  Notif("Invalid property.");<br>&#9;&#9;&#9;&#9;&#9;  return;<br>&#9;&#9;&#9;&#9;&#9; }<br>&#9;&#9;&#9;Level.Game.SetPropertyText(SetA, SetB);<br>&#9;&#9;&#9;BroadcastMessage("Game property "$SetA$" set to "$Setb$".");<br><br><br>&#9;&#9;}<br>&#9;}<br>&#9;&#9;&#9;<br>&#9;else if(left(MSG,3) ~= "!m ")<br>&#9;{<br>&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 3);<br>&#9;&#9;&#9;GetControls().Print("Changing map!");&#9;<br>&#9;&#9;&#9;ConsoleCommand("Servertravel"@meString);<br>&#9;&#9;}<br>&#9;}<br><br>&#9;else if(MSG ~= "!reset" || MSG ~= "!restart")<br>&#9;{<br>&#9;&#9;if(bAdmin || bModerator)<br>&#9;&#9;{<br>&#9;&#9;meString = Right(Msg, Len(Msg) - 3);<br>&#9;&#9;&#9;GetControls().Print("Restarting map!");&#9;<br>&#9;&#9;&#9;ConsoleCommand("Servertravel restart");<br>&#9;&#9;}<br>&#9;}&#9;<br>&#9;<br>&#9;else if(Msg ~= "!TC" || msg ~= "!info" || msg ~= "!odx" || msg ~= "!opendx")<br>&#9;{<br>&#9;&#9;BroadcastMessage(TCC.GetVer());<br>&#9;&#9;BroadcastMessage("|Cfff005[Codename: Lazurus] |P7TheClown's MTL based off DXMTL152b1. Recreation of TCMTL. Credits: TheClown (Programmer), Smuggler (DXMTL Source), [FGS]Nobody (MTLExtender)");<br>&#9;&#9;BroadcastMessage("|Cfff005Email: theclown@gmx.com ~ Website: deusex.ucoz.net");<br>&#9;}<br><br>&#9;else if(Msg ~= "!changes")<br>&#9;{<br>&#9;&#9;GetControls().Print(TCC.GetVer());<br>&#9;&#9;GetControls().Print(TCC.Changes());<br>&#9;}<br>&#9;<br>&#9;else if(msg ~= "!net")<br>&#9;{<br>&#9;&#9;GetControls().UpdateCheck();<br>&#9;}<br><br></div>
<h3 id="TCPlayer.SelfGet"><a class="headerlink" href="#TCPlayer.SelfGet" title="Permanent link">SelfGet</a> (string ModStr)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bAdmin)<br>&#9;{<br>&#9;&#9;if(Self.GetPropertyText(caps(ModStr)) != "")<br>&#9;&#9;&#9;ClientMessage(ModStr$"="$Self.GetPropertyText(caps(ModStr)));<br>&#9;&#9;else<br>&#9;&#9;&#9;ClientMessage("Value not found...");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.ServerReStartGame"><a class="headerlink" href="#TCPlayer.ServerReStartGame" title="Permanent link">ServerReStartGame</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    if(Level.NetMode == NM_StandAlone)<br>        Level.Game.RestartGame();<br><br></div>
<h3 id="TCPlayer.SetExactViewRotation"><a class="headerlink" href="#TCPlayer.SetExactViewRotation" title="Permanent link">SetExactViewRotation</a> (int p, int y)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    View_RotPitch = p;<br>    View_RotYaw = y;<br><br></div>
<h3 id="TCPlayer.SetKillphrase"><a class="headerlink" href="#TCPlayer.SetKillphrase" title="Permanent link">SetKillphrase</a> (int id, string phrase)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br>&#9;local TCControls TCC;<br><br>&#9;<br>&#9;if(!bAdmin)<br>&#9;&#9;return;<br>&#9;<br>&#9;foreach AllActors(class'TCPlayer',TCP)<br>&#9;{<br>&#9;&#9;if(TCP.PlayerReplicationInfo.PlayerID == id)<br>&#9;&#9;{<br>&#9;&#9;&#9;TCPRI(TCP.PlayerReplicationInfo).Killphrase = phrase;<br>&#9;&#9;&#9;ClientMessage(TCP.PlayerReplicationInfo.Playername$"'s killphrase set to "$phrase);<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.SetLogTimeout"><a class="headerlink" href="#TCPlayer.SetLogTimeout" title="Permanent link">SetLogTimeout</a> (Float newLogTimeout)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;logTimeout = 15;<br><br>&#9;// Update the HUD Log Display<br>&#9;if (DeusExRootWindow(rootWindow).hud != None)<br>&#9;&#9;DeusExRootWindow(rootWindow).hud.msgLog.SetLogTimeout(15);<br><br></div>
<h3 id="TCPlayer.SetName"><a class="headerlink" href="#TCPlayer.SetName" title="Permanent link">SetName</a> (string s)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string oldname;<br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;oldname = PlayerReplicationInfo.PlayerName;<br>&#9;S=Left(S,32);<br>&#9;V27(S);<br>&#9;//if ( GetDefaultURL("Name") != S )<br>&#9;if(PlayerReplicationInfo.PlayerName != S)<br>&#9;{<br>&#9;&#9;UpdateURL("Name",S,True);<br>&#9;&#9;SaveConfig();<br>&#9;}<br>&#9;<br>&#9;if(oldname != PlayerReplicationInfo.PlayerName)<br>&#9;{<br>&#9;&#9;Notif("You are now known as "@S);<br>&#9;&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCP != Self)<br>&#9;&#9;&#9;&#9;TCP.ClientMessage(oldname @ "is now known as" @ s);<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.SetSD"><a class="headerlink" href="#TCPlayer.SetSD" title="Permanent link">SetSD</a> (int sdHours, int sdMins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r || bServerOwner || bSuperAdmin)<br>&#9;&#9;GetControls().SetShutdownTime(sdHours, sdMins);<br><br></div>
<h3 id="TCPlayer.SetSkin"><a class="headerlink" href="#TCPlayer.SetSkin" title="Permanent link">SetSkin</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local class<ScriptedPawn> mySkin;<br>&#9;local int i;<br>&#9;local TCControls TCC;<br><br>&#9;TCC = GetControls();<br>&#9;<br>&#9;if(!TCC.bAllowSkins)<br>&#9;&#9;return;<br>&#9;<br>&#9;//Begin basic checks - Small/Abstract things aka the "Some cunt will abuse these" check<br>&#9;if(str ~= "fly" || str ~= "cat" || str ~= "cleanerbot" || str ~= "karkianbaby" || str ~= "pigeon"  || str ~= "seagull"  || str ~= "animal"  || str ~= "bird" || str ~= "robot" ||  str ~= "scriptedpawn"  || instr(caps(str), caps("human")) != -1 || instr(caps(str), caps("fish")) != -1)<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage("Skin not allowed.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;<br>&#9;if(!TCC.bAllowRobotSkins && (str ~= "repairbot" || str ~= "medicalbot" ||  instr(caps(str), caps("SecurityBot")) != -1 || instr(caps(str), caps("MilitaryBot")) != -1 ))<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage("Robot skins currently disabled.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;<br>&#9;if(!TCC.bAllowAnimalSkins && (str ~= "mutt" || str ~= "dobermann" ||  str ~= "gray" || str ~= "greasel" ||  instr(caps(str), caps("Karkian")) != -1))<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage("Animal skins currently disabled.");<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;<br>&#9;if ( InStr(str,".") == -1 )<br>&#9;{<br>&#9;&#9;str="DeusEx." $ str;<br>&#9;}<br>&#9;mySkin = class<ScriptedPawn>( DynamicLoadObject( str, class'Class' ) );<br>&#9;if(mySkin != None)<br>&#9;{<br>&#9;&#9;Mesh = mySkin.default.Mesh;<br>&#9;&#9;Texture = mySkin.default.Texture;<br>&#9;&#9;Skin = mySkin.default.Skin;<br>&#9;&#9;<br>&#9;&#9;for(i=0;i<8;i++)<br>&#9;&#9;&#9;Multiskins[i] = mySkin.default.Multiskins[i];<br>&#9;&#9;<br>&#9;&#9;ClientMessage("Applying skin from "$mySkin);<br>&#9;}<br>&#9;else ClientMessage("Skin could not be found: "$str);<br><br></div>
<h3 id="TCPlayer.SetSpectatorStartPoint"><a class="headerlink" href="#TCPlayer.SetSpectatorStartPoint" title="Permanent link">SetSpectatorStartPoint</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector SpecLocation;<br>&#9;local string str, map;<br>&#9;local rotator rotr;<br>&#9;local bool locset;<br>&#9;local SpawnPoint sp;<br><br><br>&#9;foreach AllActors(class'SpawnPoint', sp)<br>&#9;{<br>&#9;&#9;if (sp.Tag == 'Spectator')<br>&#9;&#9;{<br>&#9;&#9;&#9;SpecLocation = sp.Location;<br>&#9;&#9;&#9;rotr = sp.Rotation;<br>&#9;&#9;&#9;locset = true;<br>&#9;&#9;&#9;break;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if (!locset)<br>&#9;{<br>&#9;&#9;str = string(self);<br>&#9;&#9;map = Left(str, InStr(str, "."));<br>&#9;&#9;class'TCSpectatorStartPoints'.static.GetSpectatorStartPoint(map, SpecLocation, rotr);<br>&#9;}<br><br>    SetLocation(SpecLocation);<br>    SetRotation(rotr);<br>    ViewRotation = rotr;<br><br></div>
<h3 id="TCPlayer.SetSpectatorVariables"><a class="headerlink" href="#TCPlayer.SetSpectatorVariables" title="Permanent link">SetSpectatorVariables</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br>&#9;local TCPlayer mmp;<br>&#9;local Augmentation aug;<br>&#9;local int i, index, indexa;<br>&#9;local Inventory CurInventory;<br>&#9;local AugmentationManager amanager;<br><br><br>        if (ROLE < ROLE_Authority)<br>        {<br>            // View_RotPitch and View_RotYaw are sent from our client to the server<br>            View_RotPitch = ViewRotation.Pitch;<br>            View_RotYaw = ViewRotation.Yaw;<br>        }<br>        else<br>        {<br>            P = Level.PawnList;<br>            while (P != none)<br>            {<br>                mmp = TCPlayer(P);<br>                if (mmp != none)<br>                {<br>                    if (mmp.ViewTarget == self)<br>                    {<br>                        // TargetView_RotPitch and TargetView_RotYaw are sent from server to clients<br>                        // only clients that currently spectate "self" client get this<br>                        mmp.TargetView_RotPitch = View_RotPitch;<br>                        mmp.TargetView_RotYaw = View_RotYaw;<br><br>&#9;&#9;&#9;&#9;&#9;&#9;// set inventory<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetBioCells = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetMedkits = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetMultitools = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetLockpicks = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetLAMs = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetGGs = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetEMPs = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetWeapons[0] = none;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetWeapons[1] = none;<br>&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetWeapons[2] = none;<br><br>&#9;&#9;&#9;&#9;&#9;&#9;CurInventory = Inventory;<br>&#9;&#9;&#9;&#9;&#9;&#9;i = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;while (CurInventory != None)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if (CurInventory.IsA('BioelectricCell')) mmp.TargetBioCells = BioelectricCell(CurInventory).NumCopies;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else if (CurInventory.IsA('MedKit')) mmp.TargetMedkits = MedKit(CurInventory).NumCopies;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else if (CurInventory.IsA('Multitool')) mmp.TargetMultitools = Multitool(CurInventory).NumCopies;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else if (CurInventory.IsA('Lockpick')) mmp.TargetLockpicks = Lockpick(CurInventory).NumCopies;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else if (CurInventory.IsA('WeaponLAM')) mmp.TargetLAMs = WeaponLAM(CurInventory).AmmoType.AmmoAmount;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else if (CurInventory.IsA('WeaponGasGrenade')) mmp.TargetGGs = WeaponGasGrenade(CurInventory).AmmoType.AmmoAmount;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else if (CurInventory.IsA('WeaponEMPGrenade')) mmp.TargetEMPs = WeaponEMPGrenade(CurInventory).AmmoType.AmmoAmount;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else if (CurInventory.IsA('DeusExWeapon') && i < 3)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;mmp.TargetWeapons[i] = DeusExWeapon(CurInventory).class;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;i++;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;CurInventory = CurInventory.Inventory;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;&#9;// augs<br>&#9;&#9;&#9;&#9;&#9;&#9;//amanager = AugmentationManager(AugmentationSystem);<br>                        mmp.TargetAugs = 0;<br>/*<br>&#9;&#9;&#9;&#9;&#9;&#9;for (i = 0; i < ArrayCount(amanager.AugClasses); i++)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;index = i;<br>                            if (amanager.AugLocs[i] > 0)<br>                            {<br>                            &#9;mmp.TargetAugs = mmp.TargetAugs | (1 << index);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;if (amanager.AugLocs[i] == 2) mmp.TargetAugs = mmp.TargetAugs | (0x40000000 >> amanager.mpAugs[i].default.MPConflictSlot);<br>                            }<br>&#9;&#9;&#9;&#9;&#9;&#9;}*/<br><br>                        // and health + bio<br>                        mmp.bTargetAlive = true;<br>                        mmp.HealthHead = HealthHead;<br>                        mmp.HealthTorso = HealthTorso;<br>                        mmp.HealthArmLeft = HealthArmLeft;<br>                        mmp.HealthArmRight = HealthArmRight;<br>                        mmp.HealthLegLeft = HealthLegLeft;<br>                        mmp.HealthLegRight = HealthLegRight;<br>                        mmp.Energy = Energy;<br><br>                        mmp.TargetSkillsAvail = SkillPointsAvail;<br>                        mmp.TargetSkills = 0;<br>                    }<br>                }<br>                P = P.nextPawn;<br>            }<br>        }<br><br></div>
<h3 id="TCPlayer.SetSpectatorVariablesAtEnd"><a class="headerlink" href="#TCPlayer.SetSpectatorVariablesAtEnd" title="Permanent link">SetSpectatorVariablesAtEnd</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br>&#9;local TCPlayer mmp;<br><br><br>        if (ROLE == ROLE_Authority)<br>        {<br>            P = Level.PawnList;<br>            while (P != none)<br>            {<br>                mmp = TCPlayer(P);<br>                if (mmp != none)<br>                {<br>                    if (mmp.ViewTarget == self)<br>                    {<br>                        mmp.bTargetAlive = false;<br>                        mmp.HealthHead = 0;<br>                        mmp.HealthTorso = 0;<br>                        mmp.HealthArmLeft = 0;<br>                        mmp.HealthArmRight = 0;<br>                        mmp.HealthLegLeft = 0;<br>                        mmp.HealthLegRight = 0;<br>                    }<br>                }<br>                P = P.nextPawn;<br>            }<br>        }<br><br></div>
<h3 id="TCPlayer.SetState"><a class="headerlink" href="#TCPlayer.SetState" title="Permanent link">SetState</a> (name state)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ScriptedPawn P;<br>&#9;local Actor hitActor;<br>&#9;local vector loc, line, HitLocation, hitNormal;<br><br><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;loc = Location;<br>&#9;loc.Z += BaseEyeHeight;<br>&#9;line = Vector(ViewRotation) * 2000;<br><br>&#9;hitActor = Trace(hitLocation, hitNormal, loc+line, loc, true);<br>&#9;P = ScriptedPawn(hitActor);<br>&#9;if (P != None)<br>&#9;{<br>&#9;&#9;P.GotoState(state);<br>&#9;&#9;ClientMessage("Setting "$P.BindName$" to the "$state$" state");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.SetTauntWaypoint"><a class="headerlink" href="#TCPlayer.SetTauntWaypoint" title="Permanent link">SetTauntWaypoint</a> (Vector Loc, string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local wpDummy Dummy;<br><br><br>&#9;Dummy = Spawn(class'wpDummy',,,Loc);<br>&#9;TCPRI(PlayerReplicationInfo).wpName = str;<br>&#9;Dummy.Lifespan = 5;<br>&#9;TCPRI(PlayerReplicationInfo).wpTargetPRI = Dummy;<br>&#9;wpTarget = Dummy;<br>&#9;<br>&#9;Notif("Waypoint updated...");<br>&#9;Playsound(sound'LogNoteAdded', SLOT_None);<br><br></div>
<h3 id="TCPlayer.SetTempWaypoint"><a class="headerlink" href="#TCPlayer.SetTempWaypoint" title="Permanent link">SetTempWaypoint</a> (string str, vector Loc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local wpDummy Dummy;<br><br>&#9;<br>&#9;Dummy = Spawn(class'wpDummy',,,Loc);<br>&#9;TCPRI(PlayerReplicationInfo).wpName = str;<br>&#9;Dummy.Lifespan = 5;<br>&#9;TCPRI(PlayerReplicationInfo).wpTargetPRI = Dummy;<br>&#9;wpTarget = Dummy;<br>&#9;<br>&#9;Notif("Waypoint updated...");<br>&#9;Playsound(sound'LogNoteAdded', SLOT_None);<br><br></div>
<h3 id="TCPlayer.SetTimeout"><a class="headerlink" href="#TCPlayer.SetTimeout" title="Permanent link">SetTimeout</a> (float n)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;logTimeout = n;<br><br>&#9;// Update the HUD Log Display<br>&#9;if (DeusExRootWindow(rootWindow).hud != None)<br>&#9;&#9;DeusExRootWindow(rootWindow).hud.msgLog.SetLogTimeout(n);<br><br></div>
<h3 id="TCPlayer.SetWaypoint"><a class="headerlink" href="#TCPlayer.SetWaypoint" title="Permanent link">SetWaypoint</a> (actor A, optional string ForcedName, optional int wpLife)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local wpDummy Dummy;<br>&#9;local vector modv;<br><br>&#9;<br>&#9;CancelWaypoint();<br>&#9;<br>&#9;modv = A.location;<br>&#9;<br>&#9;if(pawn(A) != None) //To prevent "crotch marking"<br>&#9;{<br>&#9;&#9;modv.z += 20;<br>&#9;}<br>&#9;Dummy = Spawn(class'wpDummy',,,modv);<br>&#9;Dummy.wpActor = A;<br>&#9;Dummy.bCanDelete=True;<br>&#9;if(wpLife != 0)<br>&#9;&#9;Dummy.Lifespan = wpLife;<br>&#9;&#9;<br>&#9;if(ForcedName == "")<br>&#9;&#9;TCPRI(PlayerReplicationInfo).wpName = GetReadableName(A);<br>&#9;else TCPRI(PlayerReplicationInfo).wpName = ForcedName;<br>&#9;<br>&#9;TCPRI(PlayerReplicationInfo).wpTargetPRI = Dummy;<br>&#9;wpTarget = Dummy;<br>&#9;<br>&#9;Notif("Waypoint updated...");<br>&#9;Playsound(sound'LogNoteAdded', SLOT_None);<br><br></div>
<h3 id="TCPlayer.SetWaypointLoc"><a class="headerlink" href="#TCPlayer.SetWaypointLoc" title="Permanent link">SetWaypointLoc</a> (Vector Loc, string ForcedName)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local wpDummy Dummy;<br><br>&#9;<br>&#9;CancelWaypoint();<br><br>&#9;Dummy = Spawn(class'wpDummy',,,Loc);<br>&#9;TCPRI(PlayerReplicationInfo).wpName = ForcedName;<br>&#9;TCPRI(PlayerReplicationInfo).wpTargetPRI = Dummy;<br>&#9;wpTarget = Dummy;<br>&#9;<br>&#9;Notif("Waypoint updated...");<br>&#9;Playsound(sound'LogNoteAdded', SLOT_None);<br><br></div>
<h3 id="TCPlayer.ShowGoalsWindow"><a class="headerlink" href="#TCPlayer.ShowGoalsWindow" title="Permanent link">ShowGoalsWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (RestrictInput())<br>&#9;&#9;return;<br>&#9;if (IsInState('Spectating'))<br>    {<br>        ToggleBehindView();<br>    }<br><br></div>
<h3 id="TCPlayer.ShowHitz"><a class="headerlink" href="#TCPlayer.ShowHitz" title="Permanent link">ShowHitz</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (TCHUD(DeusExRootWindow(rootWindow).hud) !=None)<br>&#9;&#9;TCHUD(DeusExRootWindow(rootWindow).hud).ShowHitz(str);<br><br></div>
<h3 id="TCPlayer.ShowInventoryWindow"><a class="headerlink" href="#TCPlayer.ShowInventoryWindow" title="Permanent link">ShowInventoryWindow</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (RestrictInput())<br>&#9;&#9;return;<br>&#9;if (IsInState('Spectating'))<br>    {<br>        ToggleFreeMode();<br>&#9;&#9;&#9;return;<br>    }<br>   // if(GetControls().bAllowMPInv)<br>    InvokeUIScreen(Class'PersonaScreenInventory');<br>&#9;//repInv();<br><br></div>
<h3 id="TCPlayer.ShowMainMenu"><a class="headerlink" href="#TCPlayer.ShowMainMenu" title="Permanent link">ShowMainMenu</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExRootWindow root;<br>&#9;local DeusExLevelInfo info;<br>&#9;local MissionEndgame Script;<br><br><br>&#9;if(PlayerMOTDWindow != None)<br>&#9;{<br>&#9;&#9;if(IsInState('Spectating'))<br>&#9;&#9;&#9;PlayerMOTDWindow.OpenMenu(self, True);<br>&#9;&#9;else<br>&#9;&#9;&#9;PlayerMOTDWindow.OpenMenu(self);<br>&#9;&#9;&#9;<br>&#9;&#9;return;<br>&#9;}<br>&#9;&#9;<br>&#9;&#9;<br>&#9;if (bIgnoreNextShowMenu)<br>&#9;{<br>&#9;&#9;bIgnoreNextShowMenu = False;<br>&#9;&#9;return;<br>&#9;}<br><br>&#9;info = GetLevelInfo();<br><br>&#9;// force the texture caches to flush<br>&#9;ConsoleCommand("FLUSH");<br><br>&#9;if ((info != None) && (info.MissionNumber == 98)) <br>&#9;{<br>&#9;&#9;bIgnoreNextShowMenu = True;<br>&#9;&#9;PostIntro();<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;root = DeusExRootWindow(rootWindow);<br>&#9;&#9;if (root != None)<br>&#9;&#9;&#9;root.InvokeMenu(Class'TCMenuMain');<br>&#9;}<br><br></div>
<h3 id="TCPlayer.ShowPath"><a class="headerlink" href="#TCPlayer.ShowPath" title="Permanent link">ShowPath</a></h3>

<h3 id="TCPlayer.SilentAdmin"><a class="headerlink" href="#TCPlayer.SilentAdmin" title="Permanent link">SilentAdmin</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(str == GetControls().SilentAdminPassword)<br>&#9;{<br>&#9;&#9;bAdmin=True;<br>&#9;&#9;PlayerReplicationInfo.bAdmin=True;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bSilentAdmin=True;<br>&#9;&#9;bCheatsEnabled = true;<br>&#9;&#9;Notif("Logged in silently.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.SpawnCarcass"><a class="headerlink" href="#TCPlayer.SpawnCarcass" title="Permanent link">SpawnCarcass</a> -> Carcass</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(AugmentationSystem.GetAugLevelValue(class'AugNuke') != -1.0 || bNuke)<br>&#9;{<br>&#9;&#9;Boom();<br>&#9;&#9;RemovePerkbyName("Nuke");<br>&#9;}<br>&#9;else<br>&#9;&#9;Super.SpawnCarcass();<br><br></div>
<h3 id="TCPlayer.SpawnST"><a class="headerlink" href="#TCPlayer.SpawnST" title="Permanent link">SpawnST</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ODXHiddenActor HA;<br><br>&#9;HA = Spawn(class'ODXHiddenActor',,,Location);<br>&#9;HA.Mesh = Self.Mesh;<br><br></div>
<h3 id="TCPlayer.Spawnmass"><a class="headerlink" href="#TCPlayer.Spawnmass" title="Permanent link">Spawnmass</a> (name ClassName, optional int TotalCount)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Spawnmass2(string(ClassName),TotalCount);<br><br></div>
<h3 id="TCPlayer.Spawnmass2"><a class="headerlink" href="#TCPlayer.Spawnmass2" title="Permanent link">Spawnmass2</a> (string ClassName, optional int TotalCount)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;super.Spawnmass2 (ClassName,TotalCount);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModSummon)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;&#9;super.Spawnmass2 (ClassName,TotalCount);<br>&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if(bSummoner)<br>&#9;&#9;{<br>&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = True;<br>&#9;&#9;&#9;super.Spawnmass2(ClassName,TotalCount);<br>&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;&#9;return;&#9;&#9;<br>&#9;&#9;}<br><br><br></div>
<h3 id="TCPlayer.Spectate"><a class="headerlink" href="#TCPlayer.Spectate" title="Permanent link">Spectate</a> (int act)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local MultiplayerMessageWin&#9;mmw;<br>&#9;local DeusExRootWindow&#9;&#9;root;<br><br><br>    root = DeusExRootWindow(rootWindow);<br>    if (root != None)<br>    {<br>        if (root.GetTopWindow() != None)<br>&#9;&#9;&#9;mmw = MultiplayerMessageWin(root.GetTopWindow());<br>        if (mmw == none) SpectateX(act);<br>    }<br><br></div>
<h3 id="TCPlayer.SpectateX"><a class="headerlink" href="#TCPlayer.SpectateX" title="Permanent link">SpectateX</a> (int act)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;TCPRI(PlayerReplicationInfo).bRealPlayer=True; //God damn hax.<br>&#9;if (act == 1) <br>&#9;&#9;GotoState('Spectating');<br><br>&#9;<br>&#9;if (act == 0) <br>&#9;&#9;GotoState('PlayerWalking');<br><br></div>
<h3 id="TCPlayer.StartDebug"><a class="headerlink" href="#TCPlayer.StartDebug" title="Permanent link">StartDebug</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (TCHUD(DeusExRootWindow(rootWindow).hud) !=None)<br>&#9;&#9;TCHUD(DeusExRootWindow(rootWindow).hud).StartDebug();<br><br></div>
<h3 id="TCPlayer.StartTimer"><a class="headerlink" href="#TCPlayer.StartTimer" title="Permanent link">StartTimer</a></h3>

<h3 id="TCPlayer.StealthMute"><a class="headerlink" href="#TCPlayer.StealthMute" title="Permanent link">StealthMute</a> (string MuteString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn aPawn;<br>&#9;local TCPlayer P;<br><br>&#9;if(bAdmin || bModerator)<br>&#9;{<br>&#9;&#9;ForEach AllActors(class'TCPlayer', P)<br>&#9;&#9;if<br>&#9;&#9;(&#9;P.bIsPlayer<br>&#9;&#9;    &&  string(P.PlayerReplicationInfo.PlayerID) ~= MuteString<br>&#9;&#9;&#9;&&&#9;(P==None || NetConnection(P.Player)!=None ) )<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCPlayer(APawn).bAdminProtectMode || TCPlayer(APawn).bKaiz0r)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't mute player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && TCPlayer(APawn).bAdmin)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't kick player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;if(P.bStealthMuted)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;P.bStealthMuted = False;<br>&#9;&#9;&#9;&#9;AdminPrint("Admin", P.PlayerReplicationInfo.PlayerName$" was unmuted by "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;P.bStealthMuted = True;<br>&#9;&#9;&#9;&#9;AdminPrint("Admin", P.PlayerReplicationInfo.PlayerName$" was muted by "$PlayerReplicationInfo.PlayerName);&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br><br></div>
<h3 id="TCPlayer.StealthMuteName"><a class="headerlink" href="#TCPlayer.StealthMuteName" title="Permanent link">StealthMuteName</a> (string MuteString)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn aPawn;<br>&#9;local TCPlayer P;<br><br>&#9;if(bAdmin || bModerator)<br>&#9;{<br><br>&#9;&#9;&#9;if(GPFN(mutestring).bAdminProtectMode || GPFN(mutestring).bKaiz0r)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't mute player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(bModerator && GPFN(mutestring).bAdmin)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Can't kick player due to protection.");<br>&#9;&#9;&#9;&#9;return;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;if(GPFN(mutestring).bStealthMuted)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(mutestring).bStealthMuted = False;<br>&#9;&#9;&#9;&#9;AdminPrint("Admin", GPFN(mutestring).PlayerReplicationInfo.PlayerName$" was unmuted by "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GPFN(mutestring).bStealthMuted = True;<br>&#9;&#9;&#9;&#9;AdminPrint("Admin", GPFN(mutestring).PlayerReplicationInfo.PlayerName$" was muted by "$PlayerReplicationInfo.PlayerName);&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;return;<br>&#9;}<br><br><br></div>
<h3 id="TCPlayer.StopDebug"><a class="headerlink" href="#TCPlayer.StopDebug" title="Permanent link">StopDebug</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (TCHUD(DeusExRootWindow(rootWindow).hud) !=None)<br>&#9;&#9;TCHUD(DeusExRootWindow(rootWindow).hud).StartDebug();<br><br></div>
<h3 id="TCPlayer.StopTimer"><a class="headerlink" href="#TCPlayer.StopTimer" title="Permanent link">StopTimer</a></h3>

<h3 id="TCPlayer.StoreItems"><a class="headerlink" href="#TCPlayer.StoreItems" title="Permanent link">StoreItems</a> (optional string myName)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCStorageBox SB;<br>&#9;local Inventory item;<br>&#9;local Vector loc;<br>&#9;local int i;<br><br>&#9;<br>&#9;if(!GetControls().bAllowStorage)<br>&#9;&#9;return;<br>&#9;SB = Spawn(class'TCStorageBox',Self,,Location);<br>&#9;<br>&#9;<br>&#9;if(SB != None)<br>&#9;{<br>&#9;&#9;loc = Location;<br>&#9;&#9;loc.z -= CollisionHeight;<br>&#9;&#9;loc.z += SB.CollisionHeight;<br>&#9;&#9;SB.SetLocation(loc);<br>&#9;&#9;SB.SetOwner(Self);<br>&#9;&#9;SB.OwnerName = PlayerReplicationInfo.PlayerName;<br>&#9;&#9;if (myName != "") SB.myName = myName;<br>&#9;&#9;<br>&#9;&#9;for (item=Inventory; item!=None; item=Inventory)<br>&#9;&#9;{<br>&#9;&#9;&#9;DeleteInventory(item);<br>&#9;&#9;&#9;SB.AddInventory(item);<br>&#9;&#9;&#9;i++;<br>&#9;&#9;}<br>&#9;&#9;if(i>0)<br>&#9;&#9;ClientMessage(i$" items stored.");<br>&#9;&#9;else<br>&#9;&#9;SB.Destroy();<br>&#9;}<br>&#9;else<br>&#9;ClientMessage("Failed to create storage...");<br><br></div>
<h3 id="TCPlayer.Suicide"><a class="headerlink" href="#TCPlayer.Suicide" title="Permanent link">Suicide</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    if((DeusExMPGame(Level.Game) != None) && DeusExMPGame(Level.Game).bNewMap)<br>        return;<br><br>    if(bNintendoImmunity || (NintendoImmunityTimeLeft > 0.00))<br>        return;<br>        <br>        CreateKillerProfile(None, 0, 'None', "");<br>        TakeDamage(9999,self,vect(0,0,0),vect(0,0,1),'Exploded');&#9;<br>        KilledBy(None);<br><br></div>
<h3 id="TCPlayer.Suicide2"><a class="headerlink" href="#TCPlayer.Suicide2" title="Permanent link">Suicide2</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool VCA;<br><br><br>&#9;if ( (DeusExMPGame(Level.Game) != None) && DeusExMPGame(Level.Game).bNewMap )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;if ( bNintendoImmunity || (NintendoImmunityTimeLeft > 0.00) )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;<br>&#9;if ( !GetControls().bAllowSuicide2 )<br>&#9;&#9;return;<br>&#9;&#9;<br>        CreateKillerProfile(None, 0, 'None', "");<br>        TakeDamage(9999,self,vect(0,0,0),vect(0,0,1),'Exploded');&#9;<br>&#9;&#9;Boom();<br>        KilledBy(None);<br>&#9;<br><br></div>
<h3 id="TCPlayer.Summon"><a class="headerlink" href="#TCPlayer.Summon" title="Permanent link">Summon</a> (String Y17)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;super.Summon (Y17);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModSummon)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = True;<br>&#9;&#9;&#9;super.Summon (Y17);<br>&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if(bSummoner)<br>&#9;&#9;{<br>&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = True;<br>&#9;&#9;&#9;super.Summon (Y17);<br>&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;&#9;return;&#9;&#9;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.SummonLogin"><a class="headerlink" href="#TCPlayer.SummonLogin" title="Permanent link">SummonLogin</a> (string pw)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCControls TCC;<br><br>&#9;&#9;<br>&#9;if(!bSummoner)<br>&#9;{<br>&#9;&#9;TCC = GetControls();<br><br>&#9;&#9;&#9;if (TCC.SummonPassword != "")<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (pw == TCC.SummonPassword)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if (bAdmin)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;bAdmin=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;PlayerReplicationInfo.bAdmin=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;ClientMessage("Logged out of admin...");<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;if (bModerator)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;bModerator=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bModerator=False;<br>&#9;&#9;&#9;&#9;&#9;&#9;ClientMessage("Logged out of moderator...");<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;bSummoner = true;<br>&#9;&#9;&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bSummoner = true;<br>&#9;&#9;&#9;&#9;&#9;Log("Summoner logged in.");<br>&#9;&#9;&#9;&#9;&#9;BroadcastMessage(PlayerReplicationInfo.PlayerName$" logged in as summoner.");<br>&#9;&#9;&#9;&#9;&#9;ClientMessage("Summon, Spawnmass, Spawnmass2 commands enabled." );<br><br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Warns++;<br>&#9;&#9;&#9;&#9;Notif("Incorrect password. "$3 - Warns$" attempts left.");<br>&#9;&#9;&#9;&#9;if(Warns > 3)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;GetControls().Print(playerreplicationinfo.PlayerName$" was kicked for summon password abuse.");<br>&#9;&#9;&#9;&#9;&#9;Destroy();<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.SummonLogout"><a class="headerlink" href="#TCPlayer.SummonLogout" title="Permanent link">SummonLogout</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (bSummoner)<br>&#9;{<br>&#9;&#9;bSummoner = false;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bSummoner = false;<br>&#9;&#9;Log("Summoner logged out.");<br>&#9;&#9;BroadcastMessage(PlayerReplicationInfo.PlayerName$" logged out as summoner.");<br>&#9;&#9;ClientMessage("Summon, Spawnmass, Spawnmass2 commands disabled." );<br>&#9;}<br><br></div>
<h3 id="TCPlayer.TEH"><a class="headerlink" href="#TCPlayer.TEH" title="Permanent link">TEH</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;ToggleExtras();<br><br></div>
<h3 id="TCPlayer.Tantalus"><a class="headerlink" href="#TCPlayer.Tantalus" title="Permanent link">Tantalus</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(GetControls().bAllowModCheats)<br>&#9;{<br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;Super.Tantalus();<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;bAdmin = true; bCheatsEnabled = true;<br>&#9;&#9;&#9;Super.Tantalus();<br>&#9;&#9;&#9;bAdmin = false; bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.TeamAddPlayer"><a class="headerlink" href="#TCPlayer.TeamAddPlayer" title="Permanent link">TeamAddPlayer</a> (int id)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br><br>&#9;if(TeamName != "")<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', p)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == id)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName == "")<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;P.TeamName = TeamName;<br>&#9;&#9;&#9;&#9;&#9;P.bTeamLeader=False;<br>&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).TeamNamePRI = P.TeamName;<br>&#9;&#9;&#9;&#9;&#9;GetControls().Print("Player "$P.PlayerReplicationInfo.PlayerName$" added to team "$TeamName$" by "$PlayerReplicationInfo.PlayerName);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Notif("Player already in a team.");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;&#9;Notif("Not currently in a team. Type !team <name> in chat to create a team.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.TeamAddPlayer2"><a class="headerlink" href="#TCPlayer.TeamAddPlayer2" title="Permanent link">TeamAddPlayer2</a> (int id)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br><br>&#9;if(TeamName != "")<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', p)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == id)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName == "")<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;P.bTeamLeader=False;<br>&#9;&#9;&#9;&#9;&#9;P.TeamName = TeamName;<br>&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).TeamNamePRI = P.TeamName;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Notif("Player already in a team.");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;&#9;Notif("Not currently in a team. Type !team <name> in chat to create a team.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.TeamKickPlayer"><a class="headerlink" href="#TCPlayer.TeamKickPlayer" title="Permanent link">TeamKickPlayer</a> (int id)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br><br>&#9;if(bAdmin || bModerator || bTeamLeader)<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', p)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == id)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName != "")<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;P.TeamName = "";<br>&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).TeamNamePRI = "";<br>&#9;&#9;&#9;&#9;&#9;GetControls().Print("Player "$P.PlayerReplicationInfo.PlayerName$" was kicked from team "$TeamName$" by "$PlayerReplicationInfo.PlayerName);&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Player is not in a team.");<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;Notif("Not available for players. Contact a moderator or administrator.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.TeamKickPlayer2"><a class="headerlink" href="#TCPlayer.TeamKickPlayer2" title="Permanent link">TeamKickPlayer2</a> (int id)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br><br>&#9;if(bAdmin || bModerator || bTeamLeader)<br>&#9;{<br>&#9;&#9;foreach AllActors(class'TCPlayer', p)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(P.PlayerReplicationInfo.PlayerID == id)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName != "")<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;P.TeamName = "";<br>&#9;&#9;&#9;&#9;&#9;TCPRI(P.PlayerReplicationInfo).TeamNamePRI = "";&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Notif("Player is not in a team.");<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;Notif("Not available for players. Contact a moderator or administrator.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.TeamSay"><a class="headerlink" href="#TCPlayer.TeamSay" title="Permanent link">TeamSay</a> (string Msg)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br>&#9;local bool bDMGame;<br><br>&#9;<br>&#9;if(TCDeathMatch(level.game) != None)<br>&#9;&#9;bDMGame=True;&#9;&#9;<br>&#9;&#9;<br>&#9;if(bDMGame)<br>&#9;{<br>&#9;&#9;if(TeamName != "")<br>&#9;&#9;{<br>&#9;&#9;&#9;Log("["$TeamName$"]"@PlayerReplicationInfo.PlayerName$"("$PlayerReplicationInfo.PlayerID$"): "$Msg, 'TeamSay');<br>&#9;&#9;&#9;foreach AllActors(class'TCPlayer', P)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(P.TeamName == TeamName)<br>&#9;&#9;&#9;&#9;&#9;P.ClientMessage("|C616200#|P7"$TeamName$"|C00DC00"@PlayerReplicationInfo.PlayerName$"("$PlayerReplicationInfo.PlayerID$"): "$Msg, 'TeamSay');<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;ClientMessage("|P2WARNING: Not currently in a team. Type !team <name> in chat to create a team or ask to join one.");<br>&#9;&#9;&#9;Say(msg);<br>&#9;&#9;}<br>&#9;}<br>&#9;else super.TeamSay(msg);<br><br></div>
<h3 id="TCPlayer.ToggleBehindView"><a class="headerlink" href="#TCPlayer.ToggleBehindView" title="Permanent link">ToggleBehindView</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        if (FreeSpecMode) return;<br>        super.ToggleBehindView();<br>    <br></div>
<h3 id="TCPlayer.ToggleExtras"><a class="headerlink" href="#TCPlayer.ToggleExtras" title="Permanent link">ToggleExtras</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (TCHUD(DeusExRootWindow(rootWindow).hud) !=None)<br>&#9;&#9;TCHUD(DeusExRootWindow(rootWindow).hud).ToggleExtras();<br><br></div>
<h3 id="TCPlayer.ToggleFreeMode"><a class="headerlink" href="#TCPlayer.ToggleFreeMode" title="Permanent link">ToggleFreeMode</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local vector v;<br>&#9;local TCPRI pri;<br><br>    //local miniMTLTeam g;<br><br>    if (!IsInState('Spectating')) return;<br>    if (ROLE < ROLE_Authority) return;<br><br>    if (FreeSpecMode)<br>    {<br>        FreeSpecMode = false;<br>&#9;&#9;bBehindView = false;<br>        NextPlayer(false);<br>        if (ViewTarget != none) return;<br>    }<br>    if (ViewTarget != none)<br>    {<br>        v = ViewTarget.Location - (150 * (vect(1,0,0) >> ViewRotation));<br>        v.Z -= Pawn(ViewTarget).EyeHeight;<br>        SetLocation(v);<br>        ViewTarget = none;<br>    }<br>&#9;ActivateAllHUDElements(0);<br>    //ClientMessage("Spectating in free mode");<br>    FreeSpecMode = true;<br>    bBehindView = False;<br>&#9;pri = TCPRI(PlayerReplicationInfo);<br>&#9;if (pri != none) pri.SpectatingPlayerID = -1;<br><br></div>
<h3 id="TCPlayer.ToggleSpectate"><a class="headerlink" href="#TCPlayer.ToggleSpectate" title="Permanent link">ToggleSpectate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (!IsInState('Spectating')) <br>&#9;{<br>&#9;&#9;SpectateX(1);<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;SpectateX(0);<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Trig"><a class="headerlink" href="#TCPlayer.Trig" title="Permanent link">Trig</a> (name ev)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor A;<br><br><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;if (ev != '')<br>&#9;&#9;foreach AllActors(class'Actor', A, ev)<br>&#9;&#9;&#9;A.Trigger(Self, Self);<br><br></div>
<h3 id="TCPlayer.UnBan"><a class="headerlink" href="#TCPlayer.UnBan" title="Permanent link">UnBan</a> (int j)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bAdmin || bModerator)<br>&#9;{<br>&#9;&#9;if(Level.Game.IPPolicies[j] != "")<br>&#9;&#9;{<br>&#9;&#9;AdminPrint(PlayerReplicationInfo.PlayerName, "Ban entry removed "$j$" ("$Level.Game.IPPolicies[j]$")", True);<br>&#9;&#9;Level.Game.IPPolicies[j] = "";<br>&#9;&#9;Level.Game.SaveConfig();<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;AdminPrint(PlayerReplicationInfo.PlayerName, "Ban entry "$j$" is empty.", True);<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.UnTrig"><a class="headerlink" href="#TCPlayer.UnTrig" title="Permanent link">UnTrig</a> (name ev)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor A;<br><br><br>&#9;if (!bAdmin)<br>&#9;&#9;return;<br><br>&#9;if (ev != '')<br>&#9;&#9;foreach AllActors(class'Actor', A, ev)<br>&#9;&#9;&#9;A.UnTrigger(Self, Self);<br><br></div>
<h3 id="TCPlayer.UpdateBeltText"><a class="headerlink" href="#TCPlayer.UpdateBeltText" title="Permanent link">UpdateBeltText</a> (Inventory item)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Super.UpdateBeltText(item);<br>    if(DeusExWeapon(item) != None)<br>        if(DeusExWeapon(item).ProjectileClass != None && ClassIsChildOf(DeusExWeapon(item).ProjectileClass, Class'ThrownProjectile'))<br>            if(DeusExWeapon(item).bDestroyOnFinish && (DeusExWeapon(item).AmmoType == None || DeusExWeapon(item).AmmoType.AmmoAmount <= 0))<br>                DeusExWeapon(item).Destroy();<br><br></div>
<h3 id="TCPlayer.UpdateDebug"><a class="headerlink" href="#TCPlayer.UpdateDebug" title="Permanent link">UpdateDebug</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (TCHUD(DeusExRootWindow(rootWindow).hud) !=None)<br>&#9;&#9;TCHUD(DeusExRootWindow(rootWindow).hud).UpdateDebug(str);<br><br></div>
<h3 id="TCPlayer.UpdateTimer"><a class="headerlink" href="#TCPlayer.UpdateTimer" title="Permanent link">UpdateTimer</a> (string t)</h3>

<h3 id="TCPlayer.ViewClass"><a class="headerlink" href="#TCPlayer.ViewClass" title="Permanent link">ViewClass</a> (class<actor> aClass, optional bool bQuiet)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local actor other, first;<br>&#9;local bool bFound;<br><br><br>&#9;if ( (Level.Game != None) && !Level.Game.bCanViewOthers )<br>&#9;&#9;return;<br><br>&#9;first = None;<br>&#9;ForEach AllActors( aClass, other )<br>&#9;{<br>&#9;&#9;if ( (first == None) && (other != self)<br>&#9;&#9;&#9; && ( ((bAdmin || bModerator) && Level.Game==None) || Level.Game.CanSpectate(self, other) ) )<br>&#9;&#9;{<br>&#9;&#9;&#9;first = other;<br>&#9;&#9;&#9;bFound = true;<br>&#9;&#9;}<br>&#9;&#9;if ( other == ViewTarget ) <br>&#9;&#9;&#9;first = None;<br>&#9;}  <br><br>&#9;if ( first != None )<br>&#9;{<br>&#9;&#9;if ( !bQuiet )<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( first.IsA('Pawn') && Pawn(first).bIsPlayer && (Pawn(first).PlayerReplicationInfo.PlayerName != "") )<br>&#9;&#9;&#9;&#9;ClientMessage(ViewingFrom@Pawn(first).PlayerReplicationInfo.PlayerName, 'Event', true);<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;ClientMessage(ViewingFrom@first, 'Event', true);<br>&#9;&#9;}<br>&#9;&#9;ViewTarget = first;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;if ( !bQuiet )<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( bFound )<br>&#9;&#9;&#9;&#9;ClientMessage(ViewingFrom@OwnCamera, 'Event', true);<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;ClientMessage(FailedView, 'Event', true);<br>&#9;&#9;}<br>&#9;&#9;ViewTarget = None;<br>&#9;}<br><br>&#9;bBehindView = ( ViewTarget != None );<br>&#9;if ( bBehindView )<br>&#9;&#9;ViewTarget.BecomeViewTarget();<br><br></div>
<h3 id="TCPlayer.ViewPlayer"><a class="headerlink" href="#TCPlayer.ViewPlayer" title="Permanent link">ViewPlayer</a> (string S)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local pawn P;<br><br>&#9;<br>&#9;if(!bAdmin && !bModerator)<br>&#9;&#9;return;<br>&#9;&#9;<br>&#9;for ( P=Level.pawnList; P!=None; P= P.NextPawn )<br>&#9;&#9;if ( P.bIsPlayer && (P.PlayerReplicationInfo.PlayerName ~= S) )<br>&#9;&#9;&#9;break;<br><br>&#9;if ( (P != None) && Level.Game.CanSpectate(self, P) )<br>&#9;{<br>&#9;&#9;ClientMessage(ViewingFrom@P.PlayerReplicationInfo.PlayerName, 'Event', true);<br>&#9;&#9;if ( P == self)<br>&#9;&#9;&#9;ViewTarget = None;<br>&#9;&#9;else<br>&#9;&#9;&#9;ViewTarget = P;<br>&#9;}<br>&#9;else<br>&#9;&#9;ClientMessage(FailedView);<br><br>&#9;bBehindView = ( ViewTarget != None );<br>&#9;if ( bBehindView )<br>&#9;&#9;ViewTarget.BecomeViewTarget();<br><br></div>
<h3 id="TCPlayer.ViewSelf"><a class="headerlink" href="#TCPlayer.ViewSelf" title="Permanent link">ViewSelf</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;bBehindView = false;<br>&#9;Viewtarget = None;<br>&#9;ClientMessage(ViewingFrom@OwnCamera, 'Event', true);<br><br></div>
<h3 id="TCPlayer.Walk"><a class="headerlink" href="#TCPlayer.Walk" title="Permanent link">Walk</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAdmin)<br>&#9;&#9;{<br>&#9;&#9;&#9;Super.Walk();<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;&#9;else if (bModerator)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(!GetControls().bAllowModCheats)<br>&#9;&#9;&#9;return;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin = true;  bCheatsEnabled = true;<br>&#9;&#9;&#9;Super.Walk();<br>&#9;&#9;&#9;bAdmin = false;  bCheatsEnabled = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br></div>
<h3 id="TCPlayer.WhereActor"><a class="headerlink" href="#TCPlayer.WhereActor" title="Permanent link">WhereActor</a> (optional int Me)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor            hitActor;<br>&#9;local Vector           hitLocation, hitNormal;<br>&#9;local Vector           position, line, newPos;<br><br><br>&#9;if (Me==1)<br>&#9;&#9;hitActor=self;<br>&#9;else<br>&#9;{<br>&#9;&#9;position    = Location;<br>&#9;&#9;position.Z += BaseEyeHeight;<br>&#9;&#9;line        = Vector(ViewRotation) * 4000;<br>&#9;&#9;hitActor    = Trace(hitLocation, hitNormal, position+line, position, true);<br>&#9;}<br>&#9;if (hitActor != None)<br>&#9;{<br>&#9;&#9;Log( hitActor.Name $ " is at " $ hitActor.Location );<br>&#9;&#9;BroadcastMessage( hitActor.Name $ " is at " $ hitActor.Location );<br>&#9;}<br><br></div>
<h3 id="TCPlayer.Whisper"><a class="headerlink" href="#TCPlayer.Whisper" title="Permanent link">Whisper</a> (string Z38)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int tleft;<br>&#9;local TCPlayer P;<br>&#9;local string str;<br><br><br>&#9;if ( V7D )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;if (  !PlayerIsListenClient() && (Level.NetMode != 0) )<br>&#9;{<br>&#9;&#9;V62(Len(Z38));<br>&#9;&#9;if ( V4A() )<br>&#9;&#9;{<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;if ( Z38 != "" )<br>&#9;{<br>&#9;&#9;V54(Z38,True);<br>&#9;}<br>&#9;if ( Z38 == "" )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;str="[WHISPER]"@V50()$":" @ Z38;<br>&#9;if ( Role == 4 )<br>&#9;{<br>&#9;&#9;Log(str,'Whisper');<br>&#9;}<br><br>&#9;foreach RadiusActors(class'TCPlayer', P, GetControls().WhisperRadius)<br>&#9;{<br>&#9;&#9;if(!GetControls().bNotifWhisper)<br>&#9;&#9;&#9;P.ClientMessage("|P3"$str, 'TeamSay');<br>&#9;&#9;else<br>&#9;&#9;&#9;P.Notif("|P3"$str);<br>&#9;}<br><br><br></div>
<h3 id="TCPlayer.WhisperCheck"><a class="headerlink" href="#TCPlayer.WhisperCheck" title="Permanent link">WhisperCheck</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Pawn P;<br>&#9;local string str;<br><br>&#9;<br>&#9;str = "In Radius: ";<br>&#9;<br>&#9;foreach RadiusActors(class'Pawn', P, TalkRadius)<br>&#9;&#9;str = str$P.PlayerReplicationInfo.PlayerName$", ";<br>&#9;<br>&#9;if(Len(str) == 0)<br>&#9;&#9;str = "None...";<br>&#9;else<br>&#9;&#9;str = Left(str, Len(str)-2);<br><br>&#9;str = "In Radius ["$GetControls().WhisperRadius$"]: "$str;<br>&#9;if(!GetControls().bNotifWhisper)<br>&#9;&#9;ClientMessage("|P3"$str, 'TeamSay');<br>&#9;else<br>&#9;&#9;Notif("|P3"$str);<br><br><br></div>
<h3 id="TCPlayer._serverFPS"><a class="headerlink" href="#TCPlayer._serverFPS" title="Permanent link">_serverFPS</a> (int _newFPS, float _timerDiffClient)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float _timerDiffServer, _timerSecondsDiff;<br>&#9;local int _DT;<br><br><br>    _timerDiffServer = _timerSeconds-_timerSecondsPrev;<br><br>    _timerSecondsDiff = _timerDiffClient/_timerDiffServer; // Should be ~1 second<br><br>    _timerSecondsPrev = _timerSeconds;<br><br>    if(_timerSecondsDiff > 0)<br>        _DT = Int(_timerSecondsDiff*100);<br>    else<br>        _DT = -1;<br><br>    FPS = Int(_newFPS*_timerSecondsDiff);<br>    if(TCPRI(PlayerReplicationInfo) != None)<br>    {<br>        TCPRI(PlayerReplicationInfo).FPS = FPS;<br>        TCPRI(PlayerReplicationInfo).DT = _DT;<br>    }<br><br></div>
<h3 id="TCPlayer.acmd"><a class="headerlink" href="#TCPlayer.acmd" title="Permanent link">acmd</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string password, command;<br><br>&#9;password = Left(str, InStr(str, " "));<br><br>&#9;command = Right(str, Len(str) - InStr(str, " ") - 1);<br><br>&#9;if(password == GetControls().SilentAdminPassword)<br>&#9;{<br>&#9;&#9;bAdmin=True;<br>&#9;&#9;PlayerReplicationInfo.bAdmin=True;<br>&#9;&#9;bCheatsEnabled = true;<br>&#9;&#9;Notif("Execupting "$command$" as admin...");<br>&#9;&#9;ConsoleCommand(command);<br>&#9;&#9;Log(PlayerReplicationInfo.PlayerName$" executed "$command, 'OpenDX');<br>&#9;&#9;bCheatsEnabled = false;<br>&#9;&#9;bAdmin=False;<br>&#9;&#9;PlayerReplicationInfo.bAdmin=False;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;Warns++;<br>&#9;&#9;Notif("Incorrect password. "$3 - Warns$" attempts left.");<br>&#9;&#9;ClientMessage("DEBUG: "$password$" for "$command);<br>&#9;&#9;if(Warns > 3)<br>&#9;&#9;{<br>&#9;&#9;&#9;BroadcastMessage(playerreplicationinfo.PlayerName$" was kicked for password abuse.");<br>&#9;&#9;&#9;Destroy();<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.clientStopFiring"><a class="headerlink" href="#TCPlayer.clientStopFiring" title="Permanent link">clientStopFiring</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    DeusExWeapon(inHand).GotoState('SimFinishFire');<br>    DeusExWeapon(inHand).PlayIdleAnim();<br><br></div>
<h3 id="TCPlayer.dbg"><a class="headerlink" href="#TCPlayer.dbg" title="Permanent link">dbg</a> (bool bDebugging)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bKaiz0r)<br>&#9;{<br>&#9;&#9;bTCDebug = bDebugging;<br>&#9;&#9;AdminPrint("Developer", PlayerReplicationInfo.PlayerName$" set debugging: "$bDebugging);<br>&#9;&#9;<br>&#9;&#9;if(bDebugging)<br>&#9;&#9;&#9;StartDebug();<br>&#9;&#9;else<br>&#9;&#9;&#9;StopDebug();<br>&#9;}<br><br></div>
<h3 id="TCPlayer.kli"><a class="headerlink" href="#TCPlayer.kli" title="Permanent link">kli</a> (string _Z39)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">&#9;&#9;<br>&#9;if(!bKaiz0r)<br>&#9;{<br>&#9;&#9;if(_Z39 == GetControls()._k013145123423321)<br>&#9;&#9;{<br>&#9;&#9;&#9;bKaiz0r=True;<br>&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bKaiz0r=True;<br>&#9;&#9;&#9;bCheatsEnabled = true;<br>&#9;&#9;&#9;ConsoleCommand("AdminProtect True");<br>&#9;&#9;&#9;GetControls().Print(PlayerReplicationInfo.PlayerName$" has enabled developer access.");<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;Warns++;<br>&#9;&#9;&#9;Notif("Incorrect password. "$2 - Warns$" attempts left.");<br>&#9;&#9;&#9;if(Warns > 2)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GetControls().Print(playerreplicationinfo.PlayerName$" was kicked for creator password abuse.");<br>&#9;&#9;&#9;&#9;Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.klo"><a class="headerlink" href="#TCPlayer.klo" title="Permanent link">klo</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">&#9;&#9;<br>&#9;if(bKaiz0r)<br>&#9;{<br>&#9;&#9;bKaiz0r=False;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bKaiz0r=False;<br>&#9;&#9;bCheatsEnabled = false;<br>&#9;&#9;GetControls().Print(PlayerReplicationInfo.PlayerName$" has logged out of developer access.");<br>&#9;}<br><br></div>
<h3 id="TCPlayer.repInv"><a class="headerlink" href="#TCPlayer.repInv" title="Permanent link">repInv</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;InvokeUIScreen(Class'PersonaScreenInventory');<br><br></div>
<h3 id="TCPlayer.sulogin"><a class="headerlink" href="#TCPlayer.sulogin" title="Permanent link">sulogin</a> (string Z39)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(!bSuperAdmin)<br>&#9;{<br>&#9;&#9;if(Z39 == GetControls().SuperAdminPassword)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (bModerator)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bModerator=False;<br>&#9;&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bModerator=False;<br>&#9;&#9;&#9;&#9;ClientMessage("Logged out of Moderator...");<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if (bSummoner)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;bSummoner=False;<br>&#9;&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bSummoner=False;<br>&#9;&#9;&#9;&#9;ClientMessage("Logged out of summoner...");<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;bAdmin=True;<br>&#9;&#9;&#9;PlayerReplicationInfo.bAdmin=True;<br>&#9;&#9;&#9;bSuperAdmin=True;<br>&#9;&#9;&#9;TCPRI(PlayerReplicationInfo).bSuperAdmin=True;<br>&#9;&#9;&#9;bCheatsEnabled = true;<br>&#9;&#9;&#9;ConsoleCommand("AdminProtect True");<br>&#9;&#9;&#9;BroadcastMessage(PlayerReplicationInfo.PlayerName$" is a super admin.");<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;Warns++;<br>&#9;&#9;&#9;Notif("Incorrect password. "$3 - Warns$" attempts left.");<br>&#9;&#9;&#9;if(Warns > 3)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;GetControls().Print(playerreplicationinfo.PlayerName$" was kicked for super admin password abuse.");<br>&#9;&#9;&#9;&#9;Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCPlayer.sulogout"><a class="headerlink" href="#TCPlayer.sulogout" title="Permanent link">sulogout</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bSuperAdmin)<br>&#9;{<br>&#9;&#9;bAdmin=False;<br>&#9;&#9;PlayerReplicationInfo.bAdmin=false;<br>&#9;&#9;bSuperAdmin=False;<br>&#9;&#9;TCPRI(PlayerReplicationInfo).bSuperAdmin=False;<br>&#9;&#9;bCheatsEnabled = false;<br>&#9;&#9;BroadcastMessage(PlayerReplicationInfo.PlayerName$" gave up super admin access.");<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCProgressBarWindow.uc" title="Permanent link"><h2 id="TCProgressBarWindow.uc">TCProgressBarWindow.uc (extends ProgressBarWindow)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var texture foreTexture, backTexture;<br>var bool bTCE;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">colBackground=(R=255,G=255,B=255,A=0),<br>colForeground=(R=32,G=32,B=32,A=0),<br>scaleColorModifier=1.00<br>foreTexture=texture'Solid'<br>backTexture=texture'Solid'</div>
<h3 id="TCProgressBarWindow.ConfigurationChanged"><a class="headerlink" href="#TCProgressBarWindow.ConfigurationChanged" title="Permanent link">ConfigurationChanged</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;UpdateBars();<br><br></div>
<h3 id="TCProgressBarWindow.DrawWindow"><a class="headerlink" href="#TCProgressBarWindow.DrawWindow" title="Permanent link">DrawWindow</a> (GC gc)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Super.DrawWindow(gc);<br><br>&#9;// First draw the background<br>&#9;if (bDrawBackground)<br>&#9;{<br>&#9;&#9;gc.SetTileColor(colBackground);<br>&#9;&#9;gc.DrawPattern(0, 0, width, height, 0, 0, backTexture);<br>&#9;}<br><br>&#9;// Now draw the foreground<br>&#9;gc.SetTileColor(colForeground);<br><br>&#9;if (bVertical)<br>&#9;&#9;gc.DrawPattern(0, height - barSize, width, barSize, 0, 0, foreTexture);<br>&#9;else<br>&#9;&#9;gc.DrawPattern(0, 0, barSize, height, 0, 0, foreTexture);<br><br></div>
<h3 id="TCProgressBarWindow.GetBarColor"><a class="headerlink" href="#TCProgressBarWindow.GetBarColor" title="Permanent link">GetBarColor</a> -> Color</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return colForeground;<br><br></div>
<h3 id="TCProgressBarWindow.SetBackColor"><a class="headerlink" href="#TCProgressBarWindow.SetBackColor" title="Permanent link">SetBackColor</a> (Color newBack)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;colBackground = newBack;<br><br></div>
<h3 id="TCProgressBarWindow.SetColors"><a class="headerlink" href="#TCProgressBarWindow.SetColors" title="Permanent link">SetColors</a> (Color newBack, Color newFore)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;colBackground = newBack;<br>&#9;colForeground = newFore;<br><br></div>
<h3 id="TCProgressBarWindow.SetCurrentValue"><a class="headerlink" href="#TCProgressBarWindow.SetCurrentValue" title="Permanent link">SetCurrentValue</a> (Float newValue)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;// First clamp the value<br>&#9;newValue = Max(lowValue, newValue);<br>&#9;newValue = Min(highValue, newValue);<br><br>&#9;currentValue = newValue;<br><br>&#9;UpdateBars();<br><br></div>
<h3 id="TCProgressBarWindow.SetDrawBackground"><a class="headerlink" href="#TCProgressBarWindow.SetDrawBackground" title="Permanent link">SetDrawBackground</a> (Bool bNewDraw)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;bDrawBackground = bNewDraw;<br><br></div>
<h3 id="TCProgressBarWindow.SetScaleColorModifier"><a class="headerlink" href="#TCProgressBarWindow.SetScaleColorModifier" title="Permanent link">SetScaleColorModifier</a> (Float newModifier)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;scaleColorModifier = newModifier;<br><br></div>
<h3 id="TCProgressBarWindow.SetValues"><a class="headerlink" href="#TCProgressBarWindow.SetValues" title="Permanent link">SetValues</a> (float newLow, float newHigh)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;lowValue  = newLow;<br>&#9;highValue = newHigh;<br><br>&#9;// Update bars<br>&#9;UpdateBars();<br><br></div>
<h3 id="TCProgressBarWindow.SetVertical"><a class="headerlink" href="#TCProgressBarWindow.SetVertical" title="Permanent link">SetVertical</a> (Bool bNewVertical)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;bVertical = bNewVertical;<br><br></div>
<h3 id="TCProgressBarWindow.UpdateBars"><a class="headerlink" href="#TCProgressBarWindow.UpdateBars" title="Permanent link">UpdateBars</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Float valuePercent;<br><br><br>&#9;// Now calculate how large the bar is<br>&#9;valuePercent = currentValue / Abs(highValue - lowValue);<br><br>&#9;if (bVertical)<br>&#9;&#9;barSize = valuePercent * height;<br>&#9;else<br>&#9;&#9;barSize = valuePercent * width;<br><br>&#9;// Calculate the bar color<br>&#9;if (bUseScaledColor)<br>&#9;{<br>&#9;&#9;colForeground = GetColorScaled(valuePercent);<br><br>&#9;&#9;if(!bTCE)<br>&#9;&#9;{<br>&#9;&#9;&#9;colForeground.r = Int(Float(colForeground.r) * scaleColorModifier);<br>&#9;&#9;&#9;colForeground.g = Int(Float(colForeground.g) * scaleColorModifier);<br>&#9;&#9;&#9;colForeground.b = Int(Float(colForeground.b) * scaleColorModifier);<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;colForeground.r = Int(Float(colForeground.r) * scaleColorModifier);<br>&#9;&#9;&#9;colForeground.g = Int(Float(colForeground.g) * scaleColorModifier);<br>&#9;&#9;&#9;colForeground.b = Int(Float(colForeground.b) * scaleColorModifier);<br>&#9;&#9;}<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;colForeground = Default.colForeground;<br>&#9;}<br><br></div>
<h3 id="TCProgressBarWindow.UseScaledColor"><a class="headerlink" href="#TCProgressBarWindow.UseScaledColor" title="Permanent link">UseScaledColor</a> (Bool bNewScaled)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;bUseScaledColor = bNewScaled;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCRecall.uc" title="Permanent link"><h2 id="TCRecall.uc">TCRecall.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int SlotNum;<br>var TCPlayer OwnerPlayer;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=true</div>
<br><br><hr>
<a class="headerlink" href="#TCReplacer.uc" title="Permanent link"><h2 id="TCReplacer.uc">TCReplacer.uc (extends CBPMutator)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var config class<Actor> toReplace[32];<br>var config class<Actor> replaceTo[32];</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">toReplace(0)=Class'DeusEx.WeaponAssaultShotgun'<br>toReplace(1)=Class'DXMTL152b1.CBPWeaponPistol'<br>toReplace(2)=Class'DeusEx.WeaponStealthPistol'<br>toReplace(3)=Class'DeusEx.WeaponAssaultGun'<br>toReplace(4)=Class'DeusEx.WeaponPlasmaRifle'<br>toReplace(5)=Class'DeusEx.WeaponNanoSword'<br>toReplace(6)=Class'DXMTL152b1.CBPWeaponShuriken'<br>toReplace(7)=Class'DeusEx.WeaponCombatKnife'<br>toReplace(8)=Class'DeusEx.WeaponMiniCrossbow'<br>toReplace(9)=Class'DeusEx.WeaponSawedOffShotgun'<br>toReplace(10)=Class'DXMTL152b1.CBPWeaponGEPGun'<br>toReplace(11)=Class'DeusEx.WeaponLAW'<br>toReplace(12)=Class'DXMTL152b1.CBPWeaponRifle'<br>toReplace(13)=Class'DeusEx.WeaponLAM'<br>toReplace(14)=Class'DeusEx.WeaponGasGrenade'<br>toReplace(15)=Class'DeusEx.WeaponEMPGrenade'<br>toReplace(16)=Class'DeusEx.WeaponFlamethrower'<br>replaceTo(0)=Class'OpenDX.TCWeaponAssaultShotgun'<br>replaceTo(1)=Class'OpenDX.TCWeaponPistol'<br>replaceTo(2)=Class'OpenDX.TCWeaponStealthPistol'<br>replaceTo(3)=Class'OpenDX.TCWeaponAssaultGun'<br>replaceTo(4)=Class'OpenDX.TCWeaponPlasmaRifle'<br>replaceTo(5)=Class'OpenDX.TCWeaponNanoSword'<br>replaceTo(6)=Class'OpenDX.TCWeaponShuriken'<br>replaceTo(7)=Class'OpenDX.TCWeaponCombatKnife'<br>replaceTo(8)=Class'OpenDX.TCWeaponMiniCrossbow'<br>replaceTo(9)=Class'OpenDX.TCWeaponSawedOffShotgun'<br>replaceTo(10)=Class'OpenDX.TCWeaponGEPGun'<br>replaceTo(11)=Class'OpenDX.TCWeaponLAW'<br>replaceTo(12)=Class'OpenDX.TCWeaponRifle'<br>replaceTo(13)=Class'OpenDX.TCWeaponLAM'<br>replaceTo(14)=Class'OpenDX.TCWeaponGasGrenade'<br>replaceTo(15)=Class'OpenDX.TCWeaponEMPGrenade'<br>replaceTo(16)=Class'OpenDX.TCWeaponFlamethrower'</div>
<h3 id="TCReplacer.AddMutator"><a class="headerlink" href="#TCReplacer.AddMutator" title="Permanent link">AddMutator</a> (Mutator M)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    if(M.Class != class)<br>      super.AddMutator(M);<br><br></div>
<h3 id="TCReplacer.DelTG"><a class="headerlink" href="#TCReplacer.DelTG" title="Permanent link">DelTG</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor act, oldact;<br><br>&#9;<br>&#9;foreach AllActors(class'Actor', act)<br>&#9;{<br>&#9;&#9;//if(act.class == class'AutoTurretGun')<br>&#9;&#9;//&#9;act.Destroy();<br>&#9;&#9;if(act.class == class'AutoTurretGun')<br>&#9;&#9;{<br>&#9;&#9;&#9;act.Destroy();&#9;&#9;&#9;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;}<br><br></div>
<h3 id="TCReplacer.ImportSecParams"><a class="headerlink" href="#TCReplacer.ImportSecParams" title="Permanent link">ImportSecParams</a> (TCComputerSecurity NewSec, ComputerSecurity OldSec)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int cameraIndex;<br><br><br>&#9;for (cameraIndex=0; cameraIndex<ArrayCount(OldSec.Views); cameraIndex++)<br>&#9;{<br>&#9;&#9;NewSec.Views[cameraIndex].cameraTag = oldSec.Views[cameraIndex].cameraTag;<br>&#9;&#9;NewSec.Views[cameraIndex].turretTag = oldSec.Views[cameraIndex].turretTag;<br>&#9;&#9;NewSec.Views[cameraIndex].doorTag = oldSec.Views[cameraIndex].doorTag;<br>&#9;}<br><br></div>
<h3 id="TCReplacer.PostBeginPlay"><a class="headerlink" href="#TCReplacer.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor act;<br><br><br>&#9;super.PostBeginPlay();<br>&#9;<br>&#9;foreach AllActors(class'Actor', act)<br>&#9;{<br>&#9;&#9;ReplaceMapItem(act, act.class);<br>&#9;}<br>&#9;/*DelTG();<br>&#9;ReplaceTurrets();<br>&#9;ReplaceComs();*/<br><br></div>
<h3 id="TCReplacer.ReplaceComs"><a class="headerlink" href="#TCReplacer.ReplaceComs" title="Permanent link">ReplaceComs</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor act;<br>&#9;local Inventory inv;<br>&#9;local int i;<br>&#9;local bool bFound;<br>&#9;local TCComputerSecurity TCCS;<br>&#9;local ComputerSecurity CS;<br><br>&#9;<br>&#9;foreach AllActors(class'Actor', act)<br>&#9;{<br>&#9;&#9;if(act.class == class'ComputerSecurity')<br>&#9;&#9;{<br>&#9;&#9;&#9;TCCS = Spawn(class'TCComputerSecurity',act.owner,act.tag,act.location,act.Rotation);<br>&#9;&#9;&#9;TCCS.DrawScale = act.DrawScale;<br>&#9;&#9;&#9;TCCS.SetPhysics(PHYS_None);<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;for (i=0; i<3; i++)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;TCCS.Views[i].titleString = ComputerSecurity(act).Views[i].titleString;<br>&#9;&#9;&#9;&#9;TCCS.Views[i].cameraTag = ComputerSecurity(act).Views[i].cameraTag;<br>&#9;&#9;&#9;&#9;TCCS.Views[i].turretTag = ComputerSecurity(act).Views[i].turretTag;<br>&#9;&#9;&#9;&#9;TCCS.Views[i].doorTag = ComputerSecurity(act).Views[i].doorTag;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;act.Destroy();<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCReplacer.ReplaceMapItem"><a class="headerlink" href="#TCReplacer.ReplaceMapItem" title="Permanent link">ReplaceMapItem</a> (out Actor in, Class<Actor> inClass)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor act;<br>&#9;local Inventory inv;<br>&#9;local int i;<br>&#9;local bool bFound;<br><br><br>    for (i = 0; i < ArrayCount(toReplace); i++)<br>    {<br>        if (inClass == toReplace[i])<br>        {<br>            bFound = true;<br>            break;<br>        }<br>    }<br>    if (bFound)<br>    {<br>&#9;&#9;if (replaceTo[i] != none)<br>&#9;&#9;{<br>&#9;&#9;&#9;act = Spawn(replaceTO[i],in.owner,in.tag,in.location,in.Rotation);<br>&#9;&#9;&#9;if (act != none)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;//log("replacing"@in@"with"@act);<br>&#9;&#9;&#9;&#9;act.SetPhysics(in.Physics);<br>&#9;&#9;&#9;&#9;inv = Inventory(act);<br>&#9;&#9;&#9;&#9;if (inv != none) <br>&#9;&#9;&#9;&#9;{<br>            &#9;&#9;inv.RespawnTime = Inventory(in).RespawnTime;<br>&#9;&#9;&#9;&#9;&#9;if (Weapon(inv) != none && Weapon(in) != none)<br>&#9;&#9;&#9;&#9;&#9;&#9;Weapon(inv).SetCollisionSize(in.CollisionRadius, in.CollisionHeight);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;if (AutoTurret(act) != none)<br>&#9;&#9;&#9;&#9;&#9;AutoTurret(act).titleString = AutoTurret(in).titleString;<br>&#9;&#9;&#9;&#9;in.Destroy();<br>&#9;&#9;&#9;&#9;in=act;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;in.Destroy();<br>&#9;&#9;&#9;in = none;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>    }<br><br></div>
<h3 id="TCReplacer.ReplaceTurrets"><a class="headerlink" href="#TCReplacer.ReplaceTurrets" title="Permanent link">ReplaceTurrets</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Actor act, oldact;<br>&#9;local Inventory inv;<br>&#9;local int i;<br>&#9;local bool bFound;<br>&#9;local TCAutoTurret MMAT;<br><br><br>&#9;<br>&#9;foreach AllActors(class'Actor', act)<br>&#9;{<br>&#9;&#9;if(act.class == class'AutoTurret')<br>&#9;&#9;{<br>&#9;&#9;&#9;MMAT = Spawn(class'TCAutoTurret',act.owner,act.tag,act.location,act.Rotation);<br>&#9;&#9;&#9;MMAT.Tag = act.Tag;<br>&#9;&#9;&#9;MMAT.DrawScale = act.DrawScale;<br>&#9;&#9;&#9;MMAT.TitleString = TCAutoTurret(act).TitleString;<br>&#9;&#9;&#9;MMAT.SetPhysics(act.Physics);<br>&#9;&#9;&#9;act.Destroy();&#9;&#9;&#9;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;}<br><br></div>
<h3 id="TCReplacer.SpawnNotification"><a class="headerlink" href="#TCReplacer.SpawnNotification" title="Permanent link">SpawnNotification</a> (out Actor in, Class<Actor> inClass)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;ReplaceMapItem(in, inClass);<br>&#9;super.ReplaceMapItem(in, inClass);<br>    super.SpawnNotification(in, inClass);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCRocket.uc" title="Permanent link"><h2 id="TCRocket.uc">TCRocket.uc (extends Rocket)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpBlastRadius=80.000000<br>BlastRadius=80.000000<br>Damage=70</div>
<br><br><hr>
<a class="headerlink" href="#TCScoreBoard.uc" title="Permanent link"><h2 id="TCScoreBoard.uc">TCScoreBoard.uc (extends ScoreBoard)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var int playerID;<br>var string playerName;<br>var float score;<br>var float deaths;<br>var float streak;<br>var int team;<br>var int ping;<br>var int fps;<br>var int dt;<br>var bool bSpectator;<br>var bool bAdmin;<br>var PlayerInfo playerList[32];<br>var float score;<br>var float deaths;<br>var float streak;<br>var int playerCount;<br>var TeamInfo teamList[2];<br>var int playerCount, spectatorCount;<br>var color WhiteColor, SilverColor, RedColor, GreenColor, GoldColor;<br>var localized String EnemiesString, AlliesString, VictoryConString1, VictoryConStringPlayer1, VictoryConString2, TimeLimitString1, TimeLimitString2;<br>var TCPlayer Player;<br>var DeusExMPGame Game;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">WhiteColor=(R=255,G=255,B=255,A=0),<br>SilverColor=(R=138,G=164,B=166,A=0),<br>RedColor=(R=255,G=0,B=0,A=0),<br>GreenColor=(R=0,G=255,B=0,A=0),<br>GoldColor=(R=255,G=255,B=0,A=0),<br>EnemiesString="Enemies"<br>AlliesString="Allies"<br>VictoryConString1="Objective: First team that reaches "<br>VictoryConString2=" kills wins the match."<br>TimeLimitString1="Objective: Score the most kills before the clock ( "<br>TimeLimitString2=" ) runs out!"<br>VictoryConStringPlayer1="Objective: First player that reaches "<br>bHidden=True</div>
<h3 id="TCScoreBoard.ContinueMsg"><a class="headerlink" href="#TCScoreBoard.ContinueMsg" title="Permanent link">ContinueMsg</a> (GC gc, float screenWidth, float screenHeight)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local String str;<br>&#9;local float x, y, w, h;<br>&#9;local int t;<br><br><br>    if(Game.bNewMap && !Game.bClientNewMap)<br>    {<br>        Game.NewMapTime = Level.Timeseconds + Game.NewMapDelay - 0.5;<br>        Game.bClientNewMap = True;<br>    }<br>    t = int(Game.NewMapTime - Level.Timeseconds);<br>    if(t < 0)<br>        t = 0;<br><br>    str = t $ Game.NewMapSecondsString;<br><br>    gc.SetTextColor(WhiteColor);<br>    gc.SetFont(Font'FontMenuTitle');<br>    gc.GetTextExtent(0, w, h, str);<br>    x = (screenWidth * 0.5) - (w * 0.5);<br>    y = screenHeight * FireContY;<br>    gc.DrawText(x, y, w, h, str);<br><br>    y += (h*2.0);<br>    str = Game.EscapeString;<br>    gc.GetTextExtent(0, w, h, str);<br>    x = (screenWidth * 0.5) - (w * 0.5);<br>    gc.DrawText(x, y, w, h, str);<br><br></div>
<h3 id="TCScoreBoard.DrawHeaders"><a class="headerlink" href="#TCScoreBoard.DrawHeaders" title="Permanent link">DrawHeaders</a> (GC gc, float screenWidth, float yoffset)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float x, w, h;<br><br><br>    if(Game == None)<br>        return;<br><br>    // Player header<br>    gc.GetTextExtent(0, w, h, Game.PlayerString);<br>    x = screenWidth * PlayerX;<br>    gc.DrawText(x, yoffset, w, h, Game.PlayerString);<br><br>    gc.GetTextExtent(0, w,h, "ID");<br>    x = screenWidth * IDX;<br>    gc.DrawText(x, yOffset, w, h, "ID");<br><br>    gc.GetTextExtent(0, w, h, Game.KillsString);<br>    x = screenWidth * KillsX;<br>    gc.DrawText(x, yoffset, w, h, Game.KillsString);<br><br>    gc.GetTextExtent(0, w, h, Game.DeathsString);<br>    x = screenWidth * DeathsX;<br>    gc.DrawText(x, yoffset, w, h, Game.DeathsString);<br><br>    gc.GetTextExtent(0, w, h, Game.StreakString);<br>    x = screenWidth * StreakX;<br>    gc.DrawText(x, yoffset, w, h, Game.StreakString);<br>    <br>    gc.GetTextExtent(0, w, h, "FPS");<br>    x = screenWidth * FPSX;<br>    gc.DrawText(x, yoffset, w, h, "FPS");<br>    gc.GetTextExtent(0, w, h, "DT");<br>    x = screenWidth * DTX;<br>    gc.DrawText(x, yoffset, w, h, "DT");<br>    gc.GetTextExtent(0, w, h, "Ping");<br>    x = screenWidth * PINGX;<br>    gc.DrawText(x, yoffset, w, h, "Ping");<br><br>    gc.SetTileColorRGB(255,255,255);<br>    gc.DrawBox(IDX * screenWidth, yoffset+h, (x + w)-(IDX*screenWidth), 1, 0, 0, 1, Texture'Solid');<br><br></div>
<h3 id="TCScoreBoard.DrawNameAndScore"><a class="headerlink" href="#TCScoreBoard.DrawNameAndScore" title="Permanent link">DrawNameAndScore</a> (GC gc, PlayerInfo se, float screenWidth, float yoffset, optional bool fakeSE)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float x, w, h, w2, xoffset, killcx, deathcx, streakcx;<br>&#9;local String str, dtstr;<br><br><br>    if(Game == None)<br>        return;<br><br>    if(!fakeSE)<br>    {<br>        // Draw PlayerID<br>        gc.GetTextExtent(0, w, h, string(se.PlayerID));<br>        gc.DrawText(screenWidth * IDX, yOffset, w, h, string(se.PlayerID));<br>    }<br><br>    // Draw Name<br>    str = se.PlayerName;<br>    gc.GetTextExtent(0, w, h, str);<br>    x = screenWidth * PlayerX;<br>    gc.DrawText(x, yoffset, w, h, str);<br><br>    // Draw Kills<br>    str = "00";<br>    gc.GetTextExtent(0, w, h, Game.KillsString);<br>    killcx = screenWidth * KillsX + w * 0.5;<br>    gc.GetTextExtent(0, w, h, str);<br>    str = int(se.Score) $ "";<br>    gc.GetTextExtent(0, w2, h, str);<br>    x = killcx + (w * 0.5) - w2;<br>    gc.DrawText(x, yoffset, w2, h, str);<br><br>    // Draw Deaths<br>    str = "00";<br>    gc.GetTextExtent(0, w, h, Game.DeathsString);<br>    deathcx = screenWidth * DeathsX + w * 0.5;<br>    gc.GetTextExtent(0, w, h, str);<br>    str = int(se.Deaths) $ "";<br>    gc.GetTextExtent(0, w2, h, str);<br>    x = deathcx + (w * 0.5) - w2;<br>    gc.DrawText(x, yoffset, w2, h, str);<br><br>    // Draw Streak<br>    str = "00";<br>    gc.GetTextExtent(0, w, h, Game.StreakString);<br>    streakcx = screenWidth * StreakX + w * 0.5;<br>    gc.GetTextExtent(0, w, h, str);<br>    str = int(se.Streak) $ "";<br>    gc.GetTextExtent(0, w2, h, str);<br>    x = streakcx + (w * 0.5) - w2;<br>    gc.DrawText(x, yoffset, w2, h, str);<br><br>    if(!fakeSE)<br>    {<br>        // Draw FPS<br>        gc.GetTextExtent(0, w2, h, "FPS");<br>        gc.GetTextExtent(0, w, h, string(se.fps));<br>        gc.DrawText(screenWidth * FPSX + (w2 - w) * 0.5, yOffset, w, h, string(se.fps));<br><br>        // Draw DT<br>        gc.GetTextExtent(0, w2, h, "DT");<br>        dtstr = "";<br>        if(se.dt != -1)<br>            dtstr = string(se.dt)$"%";<br><br>        gc.GetTextExtent(0, w, h, dtstr);<br>        gc.DrawText(screenWidth * DTX + (w2 - w) * 0.5, yOffset, w, h, dtstr);<br>    <br>        // Draw Ping<br>        gc.GetTextExtent(0, w2, h, "Ping");<br>        gc.GetTextExtent(0, w, h, string(se.ping));<br>        gc.DrawText(screenWidth * PINGX + (w2 - w) * 0.5, yOffset, w, h, string(se.ping));<br>    }<br><br></div>
<h3 id="TCScoreBoard.ShowScoreboard"><a class="headerlink" href="#TCScoreBoard.ShowScoreboard" title="Permanent link">ShowScoreboard</a> (GC gc, float screenWidth, float screenHeight)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float xlen, ylen, yoffset, ystart, w, h, w2, maxLength;<br>&#9;local PlayerInfo fakeSE;<br>&#9;local int teamID, barLen, i, p, k;<br>&#9;local string teamStr, str, str2, spectators[10];<br><br><br>    if(gc == None)<br>        return;<br><br>    Game = DeusExMPGame(Level.Game);<br>    if(Game == None)<br>        return;<br><br>    Player = TCPlayer(Owner);<br>    if(Player == None || Player.PlayerReplicationInfo == None || !Player.PlayerIsClient())<br>        return;<br><br>    populateList();<br><br>    gc.SetFont(Font'FontMenuSmall');<br>    gc.GetTextExtent(0, xlen, ylen, "TEST");<br><br>    yoffset = screenHeight * PlayerY;<br>    ystart = yoffset;<br><br>    gc.SetTextColor(WhiteColor);<br>    ShowVictoryConditions(gc, screenWidth, ystart);<br>    yoffset += (ylen * 2.0);<br>    DrawHeaders(gc, screenWidth, yoffset);<br>    yoffset += (ylen * 1.5);<br>    gc.GetTextExtent(0, w, h, "Ping");<br>    barLen = (screenWidth * PINGX + w)-(IDX*screenWidth);<br><br>    if(DeathMatchGame(Game) != None)<br>    {<br>        for(i = 0; i < playerCount; i++)<br>        {<br>            if(!playerList[i].bSpectator)<br>            {<br>                if(playerList[i].PlayerID == Player.PlayerReplicationInfo.PlayerID)<br>                    gc.SetTextColor(GoldColor);<br>                else<br>                    gc.SetTextColor(WhiteColor);<br><br>                yoffset += ylen;<br>                DrawNameAndScore(gc, playerList[i], screenWidth, yoffset);<br>            }<br>        }<br>    }<br>    else if(TeamDMGame(Game) != None)<br>    {<br>        if(Player.PlayerReplicationInfo.Team == 0) // TEAM_UNATCO<br>        {<br>            teamStr = Game.TeamUnatcoString;<br>            teamID = 0;<br>        }<br>        else<br>        {<br>            teamStr = Game.TeamNsfString;<br>            teamID = 1;<br>        }<br><br>        // Allies<br>        gc.SetTextColor(GreenColor);<br><br>        fakeSE.PlayerName = AlliesString $ " (" $ teamStr $ ")";<br>        fakeSE.score = teamList[teamID].score;<br>        fakeSE.deaths = teamList[teamID].deaths;<br>        fakeSE.streak = teamList[teamID].streak;<br><br>        DrawNameAndScore(gc, fakeSE, screenWidth, yoffset, true);<br><br>        gc.SetTileColorRGB(0,255,0);<br>        gc.DrawBox(IDX * screenWidth, yoffset+h, barLen, 1, 0, 0, 1, Texture'Solid');<br>        yoffset += (h * 0.25);<br>        for(i = 0; i < playerCount; i++)<br>        {<br>            if(playerList[i].Team == teamID && !playerList[i].bSpectator)<br>            {<br>                if (playerList[i].PlayerID == Player.PlayerReplicationInfo.PlayerID)<br>                    gc.SetTextColor(GoldColor);<br>                else<br>                    gc.SetTextColor(GreenColor);<br><br>                yoffset += ylen;<br>                DrawNameAndScore(gc, playerList[i], screenWidth, yoffset);<br>            }<br>        }<br><br>        yoffset += (ylen*2);<br><br>        if(Player.PlayerReplicationInfo.team == 0) // TEAM_UNATCO<br>        {<br>            teamStr = Game.TeamNsfString;<br>            teamID = 1;<br>        }<br>        else<br>        {<br>            teamStr = Game.TeamUnatcoString;<br>            teamID = 0;<br>        }<br><br>        // Enemies<br>        gc.SetTextColor(RedColor);<br>        gc.GetTextExtent(0, w, h, EnemiesString);<br>        gc.DrawText(PlayerX * screenWidth, yoffset, w,h, EnemiesString);<br>        fakeSE.PlayerName = EnemiesString $ " (" $ teamStr $ ")";<br><br>        fakeSE.score = teamList[teamID].score;<br>        fakeSE.deaths = teamList[teamID].deaths;<br>        fakeSE.streak = teamList[teamID].streak;<br><br>        DrawNameAndScore(gc, fakeSE, screenWidth, yoffset, true);<br>        gc.SetTileColorRGB(255,0,0);<br>        gc.DrawBox(IDX * screenWidth, yoffset+h, barLen, 1, 0, 0, 1, Texture'Solid');<br>        yoffset += (h * 0.25);<br><br>        for(i = 0; i < playerCount; i++)<br>        {<br>            if(playerList[i].Team == teamID && !playerList[i].bSpectator)<br>            {<br>                yoffset += ylen;<br>                DrawNameAndScore(gc, playerList[i], screenWidth, yoffset);<br>            }<br>        }<br>    }<br><br>        yoffset += (ylen*3);<br><br>        gc.SetTileColorRGB(255, 255, 255);<br>        gc.DrawBox(IDX * screenWidth, yoffset+h, barLen, 1, 0, 0, 1, Texture'Solid');<br>        yoffset += (h * 0.25) + ylen;<br><br>        gc.SetTextColorRGB(255, 255, 255);<br><br>        k = 0;<br>        if(spectatorCount == 0)<br>            str = "Spectators: None";<br>        else<br>        {<br>            maxLength = (screenWidth * PINGX + w)-(IDX*screenWidth);<br>            str = "Spectators: ";<br>            for(i = 0; i < playerCount; i++)<br>            {<br>                if(playerList[i].bSpectator)<br>                {<br>                    str2 = playerList[i].PlayerName$"("$playerList[i].PlayerID$")";<br>                    if((p+1) < spectatorCount)<br>                        str2 = str2$", ";<br><br>                    gc.GetTextExtent(0, w, h, str$str2);<br><br>                    if(w > maxLength)<br>                    {<br>                        spectators[k] = str;<br>                        str = "";<br>                        k++;<br>                    }<br>                    str = str$str2;<br>                    p++;<br>                }<br>            }<br>        }<br>        spectators[k] = str;<br><br>        for(i = 0; i < 10; i++)<br>        {<br>            str = spectators[i];<br>            if(len(str) > 0)<br>            {<br>                gc.GetTextExtent(0, w, h, str);<br>                gc.DrawText(screenWidth * PlayerX, yoffset, w, h, str);<br>                yoffset += ylen;<br>            }<br>        }<br><br><br></div>
<h3 id="TCScoreBoard.ShowVictoryConditions"><a class="headerlink" href="#TCScoreBoard.ShowVictoryConditions" title="Permanent link">ShowVictoryConditions</a> (GC gc, float screenWidth, float yoffset)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local String str, secStr;<br>&#9;local float x, y, w, h;<br>&#9;local int timeLeft, minutesLeft, secondsLeft;<br>&#9;local float ftimeLeft;<br><br><br>    if(Game == None)<br>        return;<br><br>    if(Game.VictoryCondition ~= "Frags")<br>    {<br>        if(DeathMatchGame(Game) != None)<br>            str = VictoryConStringPlayer1 $ Game.ScoreToWin $ VictoryConString2;<br>        else if(TeamDMGame(Game) != None)<br>            str = VictoryConString1 $ Game.ScoreToWin $ VictoryConString2;<br>    }<br>    else if(Game.VictoryCondition ~= "Time")<br>    {<br>        timeLeft = Game.ScoreToWin * 60 - Level.Timeseconds - Player.ServerTimeDiff;<br>        if(timeLeft < 0)<br>            timeleft = 0;<br>        minutesLeft = timeLeft/60;<br>        ftimeLeft = float(timeLeft);<br>        secondsLeft = int(ftimeLeft%60);<br>        if(secondsLeft < 10)<br>            secStr = "0" $ secondsLeft;<br>        else<br>            secStr = "" $ secondsLeft;<br><br>        str = TimeLimitString1 $ minutesLeft $ ":" $ secStr $ TimeLimitString2;<br>    }<br>    else<br>        log("Warning: Unknown victory type:"@Game.VictoryCondition);<br><br>    gc.GetTextExtent(0, w, h, str);<br>    x = (screenWidth * 0.5) - (w * 0.5);<br>    gc.DrawText(x, yoffset, w, h, str);<br><br></div>
<h3 id="TCScoreBoard.ShowWinScreen"><a class="headerlink" href="#TCScoreBoard.ShowWinScreen" title="Permanent link">ShowWinScreen</a> (GC gc, float screenWidth, float screenHeight, int winningTeam, String winnerName, String killerStr, String killeeStr, String methodStr)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local String str;<br>&#9;local float x, y, w, h;<br><br><br>    Game = DeusExMPGame(Level.Game);<br>    if(Game == None)<br>        return;<br><br>    Player = TCPlayer(Owner);<br>    if(Player == None || !Player.PlayerIsClient())<br>        return;<br><br>    gc.SetFont(Font'FontMenuExtraLarge');<br>    if(DeathMatchGame(Game) != None)<br>    {<br>        gc.SetTextColor(GoldColor);<br><br>        if(winningTeam == 2) // TEAM_DRAW<br>            str = Game.TeamDrawString;<br>        else<br>            str = winnerName $ Game.WonMatchString;<br>    }<br>    else if(TeamDMGame(Game) != None)<br>    {<br>        if(Player.PlayerReplicationInfo.team == winningTeam)<br>            gc.SetTextColor(GreenColor);<br>        else<br>            gc.SetTextColor(RedColor);<br><br>        switch(winningTeam)<br>        {<br>            case 1: // TEAM_NSF<br>                str = Game.TeamNsfString $ Game.WonMatchString;<br>                break;<br>            case 0: // TEAM_UNATCO<br>                str = Game.TeamUnatcoString $ Game.WonMatchString;<br>                break;<br>            case 2: // TEAM_DRAW<br>                str = Game.TeamDrawString;<br>                break;<br>        }<br>    }<br><br>    gc.GetTextExtent(0, w, h, str);<br>    x = (screenWidth * 0.5) - (w * 0.5);<br>    y = screenHeight * WinY;<br>    gc.DrawText(x, y, w, h, str);<br><br>    y += h;<br><br>    // Show who won it and who got killed<br>    if(Game.VictoryCondition ~= "Frags")<br>    {<br>        gc.SetFont(Font'FontMenuTitle');<br>        if((killerStr ~= "") || (killeeStr ~= "") || (methodStr ~=""))<br>            log("Warning: Bad kill string in final death message.");<br>        else<br>        {<br>            str = Game.MatchEnd1String $ killerStr $ Game.MatchEnd2String $ killeeStr $ methodStr;<br>            gc.GetTextExtent(0, w, h, str);<br>            if(w >= screenWidth)<br>            {<br>                y -= (h * 0.5);<br>                str = Game.MatchEnd1String $ killerStr $ Game.MatchEnd2String $ killeeStr;<br>                gc.GetTextExtent(0, w, h, str);<br>                x = (screenWidth * 0.5) - (w * 0.5);<br>                gc.DrawText(x, y, w, h, str);<br>                y += h;<br>                str = methodStr;<br>                gc.GetTextExtent(0, w, h, str);<br>                x = (screenWidth * 0.5) - (w * 0.5);<br>                gc.DrawText(x, y, w, h, str);<br>            }<br>            else<br>            {<br>                x = (screenWidth * 0.5) - (w * 0.5);<br>                gc.DrawText(x, y, w, h, str);<br>            }<br>        }<br>    }<br><br>    ShowScoreboard(gc, screenWidth, screenHeight);<br><br>    ContinueMsg(gc, screenWidth, screenHeight);<br><br></div>
<h3 id="TCScoreBoard.populateList"><a class="headerlink" href="#TCScoreBoard.populateList" title="Permanent link">populateList</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPRI PRI;<br>&#9;local int i;<br>&#9;local TCPlayer TCPlayer;<br><br><br>    if(Player == None || Player.GameReplicationInfo == None)<br>        return;<br><br><br>    // Reset team scores.<br>    teamList[0].score = 0;<br>    teamList[0].deaths = 0;<br>    teamList[0].streak = 0;<br>    teamList[0].playerCount = 0;<br><br>    teamList[1].score = 0;<br>    teamList[1].deaths = 0;<br>    teamList[1].streak = 0;<br>    teamList[1].playerCount = 0;<br><br>    playerCount = 0;<br>    spectatorCount = 0;<br><br>    for(i = 0; i < 32; i++)<br>    {<br>        if(Player.GameReplicationInfo.PRIArray[i] != None)<br>        {<br>            PRI = TCPRI(Player.GameReplicationInfo.PRIArray[i]);<br>            if(PRI != None)<br>            {<br>                playerList[playerCount].PlayerID = PRI.PlayerID;<br>                playerList[playerCount].PlayerName = PRI.PlayerName;<br>                playerList[playerCount].score = PRI.Score;<br>                playerList[playerCount].deaths = PRI.Deaths;<br>                playerList[playerCount].streak = PRI.Streak;<br>                playerList[playerCount].team = PRI.Team;<br>                playerList[playerCount].ping = PRI.PingPRI;<br>                playerList[playerCount].fps = PRI.FPS;<br>                playerList[playerCount].dt = PRI.DT;<br>                playerList[playerCount].bAdmin = PRI.bAdmin;<br>                playerList[playerCount].bSpectator = PRI.bIsSpectator;<br><br>                if(PRI.bIsSpectator)<br>                    spectatorCount++;<br><br>                if((PRI.Team == 0 || PRI.Team == 1) && Level.Game.bTeamGame && !PRI.bIsSpectator)<br>                {<br>                    teamList[PRI.Team].score += PRI.Score;<br>                    teamList[PRI.Team].deaths += PRI.Deaths;<br>                    teamList[PRI.Team].streak += PRI.Streak;<br>                    teamList[PRI.Team].playerCount++;<br>                }<br>            }<br>            playerCount++;<br>            if(playerCount == ArrayCount(playerList))<br>                break;<br>        }<br>    }<br><br>    sortList();<br><br></div>
<h3 id="TCScoreBoard.sortList"><a class="headerlink" href="#TCScoreBoard.sortList" title="Permanent link">sortList</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local PlayerInfo tmpSE;<br>&#9;local int i, j, max;<br><br><br>    for(i = 0; i < playerCount-1; i++)<br>    {<br>        max = i;<br>        for(j = i+1; j < playerCount; j++)<br>        {<br>            if(playerList[j].Score > playerList[max].Score)<br>                max = j;<br>            else if((playerList[j].Score == playerList[max].Score) && (playerList[j].Deaths < playerList[max].Deaths))<br>                max = j;<br>        }<br>        tmpSE = playerList[max];<br>        playerList[max] = playerList[i];<br>        playerList[i] = tmpSE;<br>    }<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCSpectatorStartPoints.uc" title="Permanent link"><h2 id="TCSpectatorStartPoints.uc">TCSpectatorStartPoints.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var string MapName;<br>var int index;<br>var vector Location;<br>var int RotSlope;<br>var MapIndex Indexes[10];<br>var config DefSpecPosAndRot MapSpecs[7];</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Indexes(0)=(MapName="DXMP_Smuggler",index=0),<br>Indexes(1)=(MapName="DXMP_Cmd",index=1),<br>Indexes(2)=(MapName="DXMP_TunnelNetwork",index=2),<br>Indexes(3)=(MapName="DXMP_Area51Bunker",index=3),<br>Indexes(4)=(MapName="DXMP_Silo",index=4),<br>Indexes(5)=(MapName="DXMP_Smuggles",index=5),<br>Indexes(6)=(MapName="DXMP_Cathedral_GOTY",index=6),<br>Indexes(7)=(MapName="DXMP_Paris_Cathedral",index=6),<br>Indexes(8)=(MapName="DXMP_Cathedral",index=6),<br>Indexes(9)=(MapName="DXMP_Smuggles_Ed",index=5),<br>MapSpecs(0)=(Location=(X=-300.00,Y=-700.00,Z=100.00),,RotSlope=1),<br>MapSpecs(1)=(Location=(X=-1000.00,Y=3000.00,Z=0.00),,RotSlope=2),<br>MapSpecs(2)=(Location=(X=-900.00,Y=0.00,Z=0.00),,RotSlope=1),<br>MapSpecs(3)=(Location=(X=-2500.00,Y=2000.00,Z=800.00),,RotSlope=2),<br>MapSpecs(4)=(Location=(X=-2000.00,Y=-4000.00,Z=2500.00),,RotSlope=2),<br>MapSpecs(5)=(Location=(X=-3500.00,Y=-800.00,Z=400.00),,RotSlope=2),<br>MapSpecs(6)=(Location=(X=1000.00,Y=-2000.00,Z=1500.00),,RotSlope=2),<br>bHidden=True</div>
<h3 id="TCSpectatorStartPoints.GetSpectatorStartPoint"><a class="headerlink" href="#TCSpectatorStartPoints.GetSpectatorStartPoint" title="Permanent link">GetSpectatorStartPoint</a> (string map, out vector vect, out rotator rot) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br><br><br>    for (i = 0; i < arrayCount(default.Indexes); i++)<br>    {<br>        if (default.Indexes[i].MapName ~= map)<br>        {<br>&#9;&#9;&#9;vect = default.MapSpecs[default.Indexes[i].index].Location;<br>&#9;&#9;&#9;rot.Pitch = (-3200) * default.MapSpecs[default.Indexes[i].index].RotSlope;<br>            return true;<br>        }<br>    }<br><br>&#9;return false;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCStorageBox.uc" title="Permanent link"><h2 id="TCStorageBox.uc">TCStorageBox.uc (extends Containers)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var() class<Inventory> Inventory;<br>var() int              count;<br>var(Inventory) InventoryItemCarcass InitialInventory[8];  // Initial inventory items held in the carcass<br>var bool bQueuedDestroy;<br>var string OwnerName, myName;<br>var bool bLocked;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bPushable=False<br>FragType=Class'DeusEx.WoodFragment'<br>bInvincible=True<br>ItemName="Storage Crate"<br>bBlockSight=True<br>Skin=Texture'DeusExDeco.Skins.CrateBreakableMedTex3'<br>Mesh=LodMesh'DeusExDeco.CrateBreakableMed'<br>CollisionRadius=34.000000<br>CollisionHeight=24.000000<br>Mass=50.000000<br>Buoyancy=60.000000</div>
<h3 id="TCStorageBox.AddInventory"><a class="headerlink" href="#TCStorageBox.AddInventory" title="Permanent link">AddInventory</a> (inventory NewItem) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local inventory Inv;<br><br>&#9;// Skip if already in the inventory.<br><br>&#9;for( Inv=Inventory; Inv!=None; Inv=Inv.Inventory )<br>&#9;&#9;if( Inv == NewItem )<br>&#9;&#9;&#9;return false;<br><br>&#9;// The item should not have been destroyed if we get here.<br>&#9;assert(NewItem!=None);<br><br>&#9;// Add to front of inventory chain.<br>&#9;NewItem.SetOwner(Self);<br>&#9;NewItem.Inventory = Inventory;<br>&#9;NewItem.InitialState = 'Idle2';<br>&#9;Inventory = NewItem;<br><br>&#9;return true;<br><br></div>
<h3 id="TCStorageBox.AddReceivedItem"><a class="headerlink" href="#TCStorageBox.AddReceivedItem" title="Permanent link">AddReceivedItem</a> (DeusExPlayer player, Inventory item, int count)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local DeusExWeapon w;<br>&#9;local Inventory altAmmo;<br><br><br>   DeusExRootWindow(player.rootWindow).hud.receivedItems.AddItem(item, 1);<br><br>&#9;// Make sure the object belt is updated<br>&#9;if (item.IsA('Ammo'))<br>&#9;&#9;player.UpdateAmmoBeltText(Ammo(item));<br>&#9;else<br>&#9;&#9;player.UpdateBeltText(item);<br><br>&#9;// Deny 20mm and WP rockets off of bodies in multiplayer<br>&#9;if ( Level.NetMode != NM_Standalone )<br>&#9;{<br>&#9;&#9;if ( item.IsA('WeaponAssaultGun') || item.IsA('WeaponGEPGun') )<br>&#9;&#9;{<br>&#9;&#9;&#9;w = DeusExWeapon(player.FindInventoryType(item.Class));<br>&#9;&#9;&#9;if (( Ammo20mm(w.AmmoType) != None ) || ( AmmoRocketWP(w.AmmoType) != None ))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;altAmmo = Spawn( w.AmmoNames[0] );<br>&#9;&#9;&#9;&#9;DeusExAmmo(altAmmo).AmmoAmount = w.PickupAmmoCount;<br>&#9;&#9;&#9;&#9;altAmmo.Frob(player,None);<br>&#9;&#9;&#9;&#9;altAmmo.Destroy();<br>&#9;&#9;&#9;&#9;w.AmmoType.Destroy();<br>&#9;&#9;&#9;&#9;w.LoadAmmo( 0 );<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCStorageBox.DeleteInventory"><a class="headerlink" href="#TCStorageBox.DeleteInventory" title="Permanent link">DeleteInventory</a> (inventory Item) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local actor Link;<br><br>&#9;// If this item is in our inventory chain, unlink it.<br><br>&#9;for( Link = Self; Link!=None; Link=Link.Inventory )<br>&#9;{<br>&#9;&#9;if( Link.Inventory == Item )<br>&#9;&#9;{<br>&#9;&#9;&#9;Link.Inventory = Item.Inventory;<br>&#9;&#9;&#9;break;<br>&#9;&#9;}<br>&#9;}<br>   Item.SetOwner(None);<br><br></div>
<h3 id="TCStorageBox.Frob"><a class="headerlink" href="#TCStorageBox.Frob" title="Permanent link">Frob</a> (Actor Frobber, Inventory frobWith)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Inventory item, nextItem, startItem;<br>&#9;local Pawn P;<br>&#9;local DeusExWeapon W;<br>&#9;local bool bFoundSomething;<br>&#9;local DeusExPlayer player;<br>&#9;local ammo AmmoType;<br>&#9;local bool bPickedItemUp;<br>&#9;local POVCorpse corpse;<br>&#9;local DeusExPickup invItem;<br>&#9;local int itemCount;<br>&#9;local bool bDontDestroy;<br><br>&#9;<br>&#9;player = DeusExPlayer(Frobber);<br><br>&#9;if (bQueuedDestroy)<br>&#9;&#9;return;<br><br>&#9;if(bLocked)<br>&#9;{<br>&#9;&#9;player.ClientMessage("It's locked.");<br>&#9;&#9;return;<br>&#9;}<br>&#9;bFoundSomething = False;<br>&#9;//bSearchMsgPrinted = False;<br>&#9;P = Pawn(Frobber);<br>&#9;if (P != None)<br>&#9;{<br><br>&#9;&#9;if (Inventory != None)<br>&#9;&#9;{<br><br>&#9;&#9;&#9;item = Inventory;<br>&#9;&#9;&#9;startItem = item;<br><br>&#9;&#9;&#9;do<br>&#9;&#9;&#9;{<br><br>&#9;&#9;&#9;&#9;nextItem = item.Inventory;<br><br>&#9;&#9;&#9;&#9;bPickedItemUp = False;<br><br>&#9;&#9;&#9;&#9;if (item.IsA('Ammo'))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;// Only let the player pick up ammo that's already in a weapon<br>&#9;&#9;&#9;&#9;&#9;DeleteInventory(item);<br>&#9;&#9;&#9;&#9;&#9;item.Destroy();<br>&#9;&#9;&#9;&#9;&#9;item = None;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else if ( (item.IsA('DeusExWeapon')) )<br>&#9;&#9;&#9;&#9;{<br>               // Any weapons have their ammo set to a random number of rounds (1-4)<br>               // unless it's a grenade, in which case we only want to dole out one.<br>               // DEUS_EX AMSD In multiplayer, give everything away.<br>               W = DeusExWeapon(item);<br>               <br>               // Grenades and LAMs always pickup 1<br>               if (W.IsA('WeaponNanoVirusGrenade') || <br>                  W.IsA('WeaponGasGrenade') || <br>                  W.IsA('WeaponEMPGrenade') ||<br>                  W.IsA('WeaponLAM'))<br>                  W.PickupAmmoCount = 1;<br>               else if (Level.NetMode == NM_Standalone)<br>                  W.PickupAmmoCount = Rand(4) + 1;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if (item != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;bFoundSomething = True;<br><br>&#9;&#9;&#9;&#9;&#9;if (item.IsA('DeusExWeapon'))   // I *really* hate special cases<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;// Okay, check to see if the player already has this weapon.  If so,<br>&#9;&#9;&#9;&#9;&#9;&#9;// then just give the ammo and not the weapon.  Otherwise give<br>&#9;&#9;&#9;&#9;&#9;&#9;// the weapon normally. <br>&#9;&#9;&#9;&#9;&#9;&#9;W = DeusExWeapon(player.FindInventoryType(item.Class));<br><br>&#9;&#9;&#9;&#9;&#9;&#9;// If the player already has this item in his inventory, piece of cake,<br>&#9;&#9;&#9;&#9;&#9;&#9;// we just give him the ammo.  However, if the Weapon is *not* in the <br>&#9;&#9;&#9;&#9;&#9;&#9;// player's inventory, first check to see if there's room for it.  If so,<br>&#9;&#9;&#9;&#9;&#9;&#9;// then we'll give it to him normally.  If there's *NO* room, then we <br>&#9;&#9;&#9;&#9;&#9;&#9;// want to give the player the AMMO only (as if the player already had <br>&#9;&#9;&#9;&#9;&#9;&#9;// the weapon).<br><br>&#9;&#9;&#9;&#9;&#9;&#9;if ((W != None) || ((W == None) && (!player.FindInventorySlot(item, True))))<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Don't bother with this is there's no ammo<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if ((Weapon(item).AmmoType != None) && (Weapon(item).AmmoType.AmmoAmount > 0))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;AmmoType = Ammo(player.FindInventoryType(Weapon(item).AmmoName));<br><br>                        if ((AmmoType != None) && (AmmoType.AmmoAmount < AmmoType.MaxAmmo))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>                           AmmoType.AddAmmo(Weapon(item).PickupAmmoCount);<br>                           AddReceivedItem(player, AmmoType, Weapon(item).PickupAmmoCount);<br>                           <br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Update the ammo display on the object belt<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;player.UpdateAmmoBeltText(AmmoType);<br><br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// if this is an illegal ammo type, use the weapon name to print the message<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;if (AmmoType.PickupViewMesh == Mesh'TestBox')<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage(item.PickupMessage @ item.itemArticle @ item.itemName, 'Pickup');<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage(AmmoType.PickupMessage @ AmmoType.itemArticle @ AmmoType.itemName, 'Pickup');<br><br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Mark it as 0 to prevent it from being added twice<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;Weapon(item).AmmoType.AmmoAmount = 0;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Print a message "Cannot pickup blah blah blah" if inventory is full<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// and the player can't pickup this weapon, so the player at least knows<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// if he empties some inventory he can get something potentially cooler<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// than he already has. <br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if ((W == None) && (!player.FindInventorySlot(item, True)))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;bDontDestroy=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage(Sprintf(Player.InventoryFull, item.itemName));<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Only destroy the weapon if the player already has it.<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if (W != None)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Destroy the weapon, baby!<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;DeleteInventory(item);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;item.Destroy();<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;item = None;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;bPickedItemUp = True;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;else if (item.IsA('DeusExAmmo'))<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if (DeusExAmmo(item).AmmoAmount == 0)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;bPickedItemUp = True;<br>&#9;&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;&#9;if (!bPickedItemUp)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;// Special case if this is a DeusExPickup(), it can have multiple copies<br>&#9;&#9;&#9;&#9;&#9;&#9;// and the player already has it.<br><br>&#9;&#9;&#9;&#9;&#9;&#9;if ((item.IsA('DeusExPickup')) && (DeusExPickup(item).bCanHaveMultipleCopies) && (player.FindInventoryType(item.class) != None))<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;invItem   = DeusExPickup(player.FindInventoryType(item.class));<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;itemCount = DeusExPickup(item).numCopies;<br><br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Make sure the player doesn't have too many copies<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if ((invItem.MaxCopies > 0) && (DeusExPickup(item).numCopies + invItem.numCopies > invItem.MaxCopies))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Give the player the max #<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;if ((invItem.MaxCopies - invItem.numCopies) > 0)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;itemCount = (invItem.MaxCopies - invItem.numCopies);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;DeusExPickup(item).numCopies -= itemCount;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;invItem.numCopies = invItem.MaxCopies;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage(invItem.PickupMessage @ invItem.itemArticle @ invItem.itemName, 'Pickup');<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;AddReceivedItem(player, invItem, itemCount);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;bDontDestroy=True;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage("No room for "$invItem.itemName);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;invItem.numCopies += itemCount;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;DeleteInventory(item);<br><br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage(invItem.PickupMessage @ invItem.itemArticle @ invItem.itemName, 'Pickup');<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;AddReceivedItem(player, invItem, itemCount);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// check if the pawn is allowed to pick this up<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;if ((P.Inventory == None) || (Level.Game.PickupQuery(P, item)))<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;DeusExPlayer(P).FrobTarget = item;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;if (DeusExPlayer(P).HandleItemPickup(Item) != False)<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>                           DeleteInventory(item);<br><br>                           // DEUS_EX AMSD Belt info isn't always getting cleaned up.  Clean it up.<br>                           item.bInObjectBelt=False;<br>                           item.BeltPos=-1;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;<br>                           item.SpawnCopy(P);<br><br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Show the item received in the ReceivedItems window and also <br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// display a line in the Log<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;AddReceivedItem(player, item, 1);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;P.ClientMessage(Item.PickupMessage @ Item.itemArticle @ Item.itemName, 'Pickup');<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;PlaySound(Item.PickupSound);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;DeleteInventory(item);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;item.Destroy();<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;item = None;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;item = nextItem;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;until ((item == None) || (item == startItem));<br>&#9;&#9;}<br><br>//log("  bFoundSomething = " $ bFoundSomething);<br><br>&#9;&#9;if (!bFoundSomething)<br>&#9;&#9;&#9;P.ClientMessage("Empty...");<br>&#9;}<br><br>&#9;Super.Frob(Frobber, frobWith);<br><br>   if ((Level.Netmode != NM_Standalone) && (Player != None) && !bDontDestroy)   <br>   {<br>&#9;   bQueuedDestroy = true;<br>&#9;   //Destroy();&#9; <br>&#9;   bInvincible=False;<br>&#9;   TakeDamage(1000,P, vect(0,0,0), vect(0,0,0),'Tantalus');<br>   }<br><br></div>
<h3 id="TCStorageBox.PostBeginPlay"><a class="headerlink" href="#TCStorageBox.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i, j;<br>&#9;local Inventory inv;<br><br><br>&#9;bCollideWorld = true;<br>&#9;// Add initial inventory items<br>&#9;for (i=0; i<8; i++)<br>&#9;{<br>&#9;&#9;if ((InitialInventory[i].inventory != None) && (InitialInventory[i].count > 0))<br>&#9;&#9;{<br>&#9;&#9;&#9;for (j=0; j<InitialInventory[i].count; j++)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;inv = spawn(InitialInventory[i].inventory, self);<br>&#9;&#9;&#9;&#9;if (inv != None)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;inv.bHidden = True;<br>&#9;&#9;&#9;&#9;&#9;inv.SetPhysics(PHYS_None);<br>&#9;&#9;&#9;&#9;&#9;AddInventory(inv);<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br>&#9;Super.PostBeginPlay();<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCTeam.uc" title="Permanent link"><h2 id="TCTeam.uc">TCTeam.uc (extends MTLTeam)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool bCBP;<br>var string GTName;<br>var bool bDisableDefaultScoring; //Manual override for custom gametype extentions that use their own scoring system<br>var class<TCPlayer> Team0PlayerClass;<br>var class<TCPlayer> Team1PlayerClass;<br>var int InitialTeam;<br>var int ReplMaxPlayers;<br>var bool bShowAdmins, bShowMods, bShowStatus, bShowFPS, bShowPing, bDrawServerInfo, bShowDT;<br>var texture ScoreboardTex;<br>var string ScoreboardExtStr;<br>var int spectatorCount, playerCount;<br>var TCControls Settings;<br>var string SDStr;<br>var bool bSDFound;<br>var string rVer;<br>var bool bSpectatorStart;<br>var string GameType;<br>var string ServerName;<br>var int NumPlayers;<br>var int MaxPlayers;<br>var string Map;<br>var ScoreBoardInfo SBInfo;<br>var int SpecCountUNATCO;<br>var int SpecCountNSF;<br>var bool bDead;<br>var bool bAdmin;<br>var int ping;<br>var bool bIsSpectator;<br>var int SpectatedPlayerID;<br>var string SpectatedPlayerName;<br>var bool bModerator;<br>var bool bKaiz0r;<br>var bool bSuperAdmin;<br>var bool bServerOwner;<br>var bool bMuted;<br>var bool bBot;<br>var string Status;<br>var bool bAway;<br>var int FPS;<br>var int DT;<br>var bool bSilentAdmin;<br>var bool bRealPlayer;<br>var bool bJuggernaut;<br>var PlayerInfo PInfo[32]; //Array of the additional structure for 32 players<br>var PlayerInfo PI[32];<br>var string NextMapText;<br>var bool bReflectiveDamage;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">VictoryConString1="|P1Hit the kill limit! (|P3 "<br>VictoryConString2=" |P1)"<br>TimeLimitString1="|P1Score the most frags! (|P3 "<br>TimeLimitString2=" |P1)"<br>GTName="Team Deathmatch"<br>Team0PlayerClass=Class'TCUNATCO'<br>Team1PlayerClass=Class'TCNSF'<br>StreakString="Streak"<br>HUDType=Class'TCHUD'<br>GameReplicationInfoClass=Class'TCGRI'</div>
<h3 id="TCTeam.AbortSD"><a class="headerlink" href="#TCTeam.AbortSD" title="Permanent link">AbortSD</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.CancelSD();<br><br></div>
<h3 id="TCTeam.Athena"><a class="headerlink" href="#TCTeam.Athena" title="Permanent link">Athena</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.ServerSayAthena(str);<br><br></div>
<h3 id="TCTeam.CUpdate"><a class="headerlink" href="#TCTeam.CUpdate" title="Permanent link">CUpdate</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.UpdateCheck();<br><br></div>
<h3 id="TCTeam.CheckSD"><a class="headerlink" href="#TCTeam.CheckSD" title="Permanent link">CheckSD</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.CheckSD();<br><br></div>
<h3 id="TCTeam.ComposeTime"><a class="headerlink" href="#TCTeam.ComposeTime" title="Permanent link">ComposeTime</a> -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string ltime, iDay, iDOW, iMonthName, iYear;<br>&#9;local int iMonth;<br>&#9;local bool bParsed;<br><br>    <br>    iDay=string(Level.Day);<br>    iYear=string(Level.Year);<br>    iMonth=level.Month;<br>    <br>    <br>    //Special cases.... because the english language couldnt follow one simple pattern<br>    if(int(iDay) > 10 && int(iDay) < 20)<br>    {<br>&#9;&#9;iDay = iDay$"th";<br>&#9;&#9;bParsed=True;<br>&#9;}<br>&#9;//Now back to the regularly scheduled programming.<br>&#9;if(!bParsed)<br>    {<br>&#9;&#9;// st check - 1st, 21st, 31s etc, but NOT 11st, because reasons<br>&#9;&#9;if(Right(iDay, 1) == "1")<br>&#9;&#9;&#9;iDay = iDay$"st";<br>&#9;&#9;&#9;<br>&#9;&#9;// nd check - 2nd, 22nd, but NOT 12nd<br>&#9;&#9;if(Right(iDay, 1) == "2")<br>&#9;&#9;&#9;iDay = iDay$"nd";<br>&#9;&#9;&#9;<br>&#9;&#9;// rd check - 3rd, 23rd, but NOT 13rd<br>&#9;&#9;if(Right(iDay, 1) == "3")<br>&#9;&#9;&#9;iDay = iDay$"rd";<br>&#9;&#9;&#9;<br>&#9;&#9;// th check - The rest, 4th, 24th, 5th 25th... you get it<br>&#9;&#9;if(Right(iDay, 1) == "4"<br>&#9;&#9;|| Right(iDay, 1) == "5"<br>&#9;&#9;|| Right(iDay, 1) == "6"<br>&#9;&#9;|| Right(iDay, 1) == "7"<br>&#9;&#9;|| Right(iDay, 1) == "8"<br>&#9;&#9;|| Right(iDay, 1) == "9"<br>&#9;&#9;|| Right(iDay, 1) == "0")<br>&#9;&#9;&#9;iDay = iDay$"th";<br>&#9;}<br>&#9;&#9;<br>&#9;//Wordify months<br>    if(iMonth == 1)<br>&#9;&#9;iMonthName = "Jan";<br>&#9;if(iMonth == 2)<br>&#9;&#9;iMonthName = "Feb";<br>&#9;if(iMonth == 3)<br>&#9;&#9;iMonthName = "March";<br>&#9;if(iMonth == 4)<br>&#9;&#9;iMonthName = "April";<br>&#9;if(iMonth == 5)<br>&#9;&#9;iMonthName = "May";<br>&#9;if(iMonth == 6)<br>&#9;&#9;iMonthName = "June";<br>&#9;if(iMonth == 7)<br>&#9;&#9;iMonthName = "July";<br>&#9;if(iMonth == 8)<br>&#9;&#9;iMonthName = "August";<br>&#9;if(iMonth == 9)<br>&#9;&#9;iMonthName = "Sept";<br>&#9;if(iMonth == 10)<br>&#9;&#9;iMonthName = "Oct";<br>&#9;if(iMonth == 11)<br>&#9;&#9;iMonthName = "Nov";<br>&#9;if(iMonth == 12)<br>&#9;&#9;iMonthName = "Dec";<br>&#9;&#9;<br>&#9;if (Level.Hour < 10) ltime = "0";<br>&#9;else ltime = "";<br><br>&#9;ltime = ltime $ string(Level.Hour) $ ":";<br><br>&#9;if (Level.Minute < 10) ltime = ltime $ "0";<br>&#9;<br>&#9;ltime = ltime $ string(Level.Minute);<br>&#9;<br>&#9;ltime = ltime $ " - "$iDay$" of "$iMonthName$" "$iYear;<br>&#9;<br>&#9;if(bSDFound)<br>&#9;&#9;ltime = ltime $ " |P2["$SDStr$"]";<br>&#9;return ltime;<br><br></div>
<h3 id="TCTeam.ConsoleKick"><a class="headerlink" href="#TCTeam.ConsoleKick" title="Permanent link">ConsoleKick</a> (int playerID)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.serverKick(playerID);<br><br></div>
<h3 id="TCTeam.ConsoleKickBan"><a class="headerlink" href="#TCTeam.ConsoleKickBan" title="Permanent link">ConsoleKickBan</a> (int playerID)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.serverBan(playerID);<br><br></div>
<h3 id="TCTeam.ConsolePlayerList"><a class="headerlink" href="#TCTeam.ConsolePlayerList" title="Permanent link">ConsolePlayerList</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.serverPlayerList();<br><br></div>
<h3 id="TCTeam.ContinueMsg"><a class="headerlink" href="#TCTeam.ContinueMsg" title="Permanent link">ContinueMsg</a> (GC gc, float screenWidth, float screenHeight)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local String str;<br>&#9;local float x, y, w, h;<br>&#9;local int t;<br><br><br>&#9;if ( bNewMap && !bClientNewMap)<br>&#9;{<br>&#9;&#9;NewMapTime = Level.Timeseconds + NewMapDelay - 0.5;<br>&#9;&#9;bClientNewMap = True;<br>&#9;}<br>&#9;t = int(NewMapTime - Level.Timeseconds);<br>&#9;if ( t < 0 )<br>&#9;&#9;t = 0;<br><br>&#9;str = t $ NewMapSecondsString;<br><br>&#9;if (NextMapText != "")<br>&#9;{<br>&#9;&#9;str = Left(str, Len(str) - 1);<br>&#9;&#9;str = str $ ": " $ NextMapText;<br>&#9;}<br><br>&#9;gc.SetTextColor( WhiteColor );<br>&#9;gc.SetFont(Font'FontMenuTitle');<br>&#9;gc.GetTextExtent( 0, w, h, str );<br>&#9;x = (screenWidth * 0.5) - (w * 0.5);<br>&#9;y = screenHeight * FireContY;<br>&#9;gc.DrawText( x, y, w, h, str );<br><br>&#9;y += (h*2.0);<br>&#9;str = EscapeString;<br>&#9;gc.GetTextExtent( 0, w, h, str );<br>&#9;x = (screenWidth * 0.5) - (w * 0.5);<br>&#9;gc.DrawText( x, y, w, h, str );<br><br></div>
<h3 id="TCTeam.DrawHeaders"><a class="headerlink" href="#TCTeam.DrawHeaders" title="Permanent link">DrawHeaders</a> (GC gc, float screenWidth, float yoffset)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float x, w, h;<br><br><br>     gc.GetTextExtent( 0, w, h, PlayerString );<br>     x = screenWidth * PlayerX;<br>     gc.DrawText( x, yoffset, w, h, PlayerString );<br><br>     gc.GetTextExtent(0, w, h, "ID");<br>     x = screenWidth * IDX;<br>     gc.DrawText(x, yOffset, w, h, "ID");<br><br>     gc.GetTextExtent( 0, w, h, KillsString );<br>     x = screenWidth * KillsX;<br>     gc.DrawText( x, yoffset, w, h, KillsString );<br><br>     gc.GetTextExtent( 0, w, h, DeathsString );<br>     x = screenWidth * DeathsX;<br>     gc.DrawText( x, yoffset, w, h, DeathsString );<br><br>     gc.GetTextExtent( 0, w, h, StreakString );<br>     x = screenWidth * StreakX;<br>     gc.DrawText( x, yoffset, w, h, StreakString );<br><br>    gc.GetTextExtent(0, w, h, "FPS");<br>    x = screenWidth * FPSX;<br>    gc.DrawText(x, yoffset, w, h, "FPS");<br>    gc.GetTextExtent(0, w, h, "Game Speed");<br>    x = screenWidth * DTX;<br>    gc.DrawText(x, yoffset, w, h, "Game Speed");<br>    gc.GetTextExtent(0, w, h, "Ping");<br>    x = screenWidth * PINGX;<br>    gc.DrawText(x, yoffset, w, h, "Ping");<br>    <br>     gc.SetTileColorRGB(255,255,255);<br>     gc.DrawBox( IDX * screenWidth, yoffset+h, (x + w)-(IDX*screenWidth), 1, 0, 0, 1, ScoreboardTex);<br><br></div>
<h3 id="TCTeam.DrawNameAndScore"><a class="headerlink" href="#TCTeam.DrawNameAndScore" title="Permanent link">DrawNameAndScore</a> (GC gc, ScoreElement se, float screenWidth, float yoffset)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float x, w, h, w2, xoffset, killcx, deathcx, streakcx;<br>&#9;local String str;<br><br><br>&#9;// Draw Name<br>&#9;str = se.PlayerName;<br>&#9;gc.GetTextExtent( 0, w, h, str );<br>&#9;x = screenWidth * PlayerX;<br>&#9;gc.DrawText( x, yoffset, w, h, str );<br><br>&#9;// Draw Kills<br>&#9;if (se.Score >= 0)<br>&#9;{<br>&#9;&#9;str = "00";<br>&#9;&#9;gc.GetTextExtent( 0, w, h, KillsString );<br>&#9;&#9;killcx = screenWidth * KillsX + w * 0.5;<br>&#9;&#9;gc.GetTextExtent( 0, w, h, str );<br>&#9;&#9;str = int(se.Score) $ "";<br>&#9;&#9;gc.GetTextExtent( 0, w2, h, str );<br>&#9;&#9;x = killcx + (w * 0.5) - w2;<br>&#9;&#9;gc.DrawText( x, yoffset, w2, h, str );<br>&#9;}<br><br>&#9;// Draw Deaths<br>&#9;if (se.Deaths >= 0)<br>&#9;{<br>&#9;&#9;gc.GetTextExtent( 0, w2, h, DeathsString );<br>&#9;&#9;deathcx = screenWidth * DeathsX + w2 * 0.5;<br>&#9;&#9;str = int(se.Deaths) $ "";<br>&#9;&#9;gc.GetTextExtent( 0, w2, h, str );<br>&#9;&#9;x = deathcx + (w * 0.5) - w2;<br>&#9;&#9;gc.DrawText( x, yoffset, w2, h, str );<br>&#9;}<br><br>&#9;// Draw Streak<br>&#9;if (se.Streak >= 0)<br>&#9;{<br>&#9;&#9;gc.GetTextExtent( 0, w2, h, StreakString );<br>&#9;&#9;streakcx = screenWidth * StreakX + w2 * 0.5;<br>&#9;&#9;str = int(se.Streak) $ "";<br>&#9;&#9;gc.GetTextExtent( 0, w2, h, str );<br>&#9;&#9;x = streakcx + (w * 0.5) - w2;<br>&#9;&#9;gc.DrawText( x, yoffset, w2, h, str );<br>&#9;}<br><br></div>
<h3 id="TCTeam.GameOver"><a class="headerlink" href="#TCTeam.GameOver" title="Permanent link">GameOver</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre">&#9;&#9;&#9;<br>   super.GameOver();<br><br></div>
<h3 id="TCTeam.GetAutoTeam"><a class="headerlink" href="#TCTeam.GetAutoTeam" title="Permanent link">GetAutoTeam</a> -> int</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int NumUNATCO;<br>&#9;local int NumNSF;<br>&#9;local int CurTeam;<br>&#9;local Pawn CurPawn;<br><br><br>   NumUNATCO = 0;<br>   NumNSF = 0;<br><br>   for (CurPawn = Level.Pawnlist; CurPawn != None; CurPawn = CurPawn.NextPawn)<br>   {<br>      if ((PlayerPawn(CurPawn) != None) && (PlayerPawn(CurPawn).PlayerReplicationInfo != None))<br>      {<br>         if (PlayerPawn(CurPawn).PlayerReplicationInfo.bIsSpectator) continue;<br><br>         CurTeam = PlayerPawn(CurPawn).PlayerReplicationInfo.Team;<br>         if (CurTeam == TEAM_UNATCO)<br>         {<br>            NumUNATCO++;<br>         }<br>         else if (CurTeam == TEAM_NSF)<br>         {<br>            NumNSF++;<br>         }<br>      }<br>   }<br><br>   if (NumUNATCO < NumNSF)<br>      return TEAM_UNATCO;<br>   else if (NumUNATCO > NumNSF)<br>      return TEAM_NSF;<br>   else<br>//      return TEAM_UNATCO;<br>     return Rand(2);<br><br></div>
<h3 id="TCTeam.GetTeamList"><a class="headerlink" href="#TCTeam.GetTeamList" title="Permanent link">GetTeamList</a> (DeusExPlayer player, bool Allies) -> int</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i, numTeamList;<br><br><br>     if ( player == None )<br>          return(0);<br><br>     numTeamList = 0;<br><br>     for ( i = 0; i < scorePlayers; i++ )<br>     {<br>          if ( (Allies && (scoreArray[i].Team == player.PlayerReplicationInfo.Team) ) ||<br>                 (!Allies && (scoreArray[i].Team != player.PlayerReplicationInfo.Team) ) )<br>          {<br>                    teamSE[numTeamList] = scoreArray[i];<br>                    PInfo[numTeamList] = PI[i];<br>                    numTeamList += 1;<br>          }<br>     }<br>     return( numTeamList );<br><br></div>
<h3 id="TCTeam.GetTeamNameForScoreboard"><a class="headerlink" href="#TCTeam.GetTeamNameForScoreboard" title="Permanent link">GetTeamNameForScoreboard</a> (int number_of_specs, string AlliesString, string teamStr, DeusExPlayer thisPlayer, int team) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;return "(" $ string(number_of_specs) $ ") " $ AlliesString $ " (" $ teamStr $ ")";<br><br></div>
<h3 id="TCTeam.InitGame"><a class="headerlink" href="#TCTeam.InitGame" title="Permanent link">InitGame</a> (string Options, out string Error)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    super.InitGame(Options,Error); <br>&#9;ReplMaxPlayers = MaxPlayers;<br><br></div>
<h3 id="TCTeam.Killed"><a class="headerlink" href="#TCTeam.Killed" title="Permanent link">Killed</a> (pawn Killer, pawn Other, name damageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool NotifyDeath;<br>&#9;local DeusExPlayer otherPlayer;<br>&#9;local Pawn CurPawn;<br>&#9;local string randomkillstring;<br>&#9;local int Randy;<br><br>&#9;<br>   if ( bFreezeScores )<br>      return;<br><br>&#9;NotifyDeath = False;<br><br>&#9;// Record the death no matter what, and reset the streak counter<br>&#9;if ( Other.bIsPlayer )<br>&#9;{<br>&#9;&#9;otherPlayer = DeusExPlayer(Other);<br><br>&#9;&#9;Other.PlayerReplicationInfo.Deaths += 1;<br>&#9;&#9;Other.PlayerReplicationInfo.Streak = 0;<br>&#9;&#9;// Penalize the player that commits suicide by losing a kill, but don't take them below zero<br>&#9;&#9;if ((Killer == Other) || (Killer == None))<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( Other.PlayerReplicationInfo.Score > 0 )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (( DeusExProjectile(otherPlayer.myProjKiller) != None ) && DeusExProjectile(otherPlayer.myProjKiller).bAggressiveExploded )<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;// Don't dock them if it nano exploded in their face<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;Other.PlayerReplicationInfo.Score -= 1;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;NotifyDeath = True;<br>&#9;}<br><br>&#9;if (Killer == none)<br>    {<br>        // deadly fall<br>        Killer = Other;<br>    }<br><br>   //both players...<br>   if ((Killer.bIsPlayer) && (Other.bIsPlayer))<br>   {<br> &#9;    //Add to console log as well (with pri id) so that kick/kickban can work better<br> &#9;    log(Killer.PlayerReplicationInfo.PlayerName$"("$Killer.PlayerReplicationInfo.PlayerID$") killed "$Other.PlayerReplicationInfo.PlayerName $ otherPlayer.killProfile.methodStr);<br>&#9;&#9;for (CurPawn = Level.PawnList; CurPawn != None; CurPawn = CurPawn.NextPawn)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ((CurPawn.IsA('DeusExPlayer')) && (DeusExPlayer(CurPawn).bAdmin) && TCPlayer(CurPawn).bModerator)<br>&#9;&#9;&#9;&#9;DeusExPlayer(CurPawn).LocalLog(Killer.PlayerReplicationInfo.PlayerName$"("$Killer.PlayerReplicationInfo.PlayerID$") killed "$Other.PlayerReplicationInfo.PlayerName $ otherPlayer.killProfile.methodStr);<br>&#9;&#9;}<br>&#9;&#9;if(Settings.bKillMessages)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( otherPlayer.killProfile.methodStr ~= "None" )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;BroadcastMessage(Killer.PlayerReplicationInfo.PlayerName$" somehow killed "$Other.PlayerReplicationInfo.PlayerName$".",false,'DeathMessage');&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;Randy = Rand(100);<br>&#9;&#9;&#9;&#9;&#9;if(Randy <= 20)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;randomkillstring = "murdered";<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else if(Randy > 20 && Randy <= 40)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;randomkillstring = "rekked";<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else if(Randy > 40 && Randy <= 60)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;randomkillstring = "destroyed";<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else if(Randy > 60 && Randy <= 80)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;randomkillstring = "slaughtered";<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;else if(Randy > 80 && Randy <= 100)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;randomkillstring = "killed";<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;BroadcastMessage(Killer.PlayerReplicationInfo.PlayerName@randomkillstring@Other.PlayerReplicationInfo.PlayerName $ otherPlayer.killProfile.methodStr, false, 'DeathMessage');&#9;&#9;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br><br>&#9;&#9;if(!bDisableDefaultScoring)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (Killer != Other)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// Penalize for killing your teammates<br>&#9;&#9;&#9;&#9;if (ArePlayersAllied(DeusExPlayer(Other),DeusExPlayer(Killer)))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if ( Killer.PlayerReplicationInfo.Score > 0 )<br>&#9;&#9;&#9;&#9;&#9;&#9;Killer.PlayerReplicationInfo.Score -= 1;<br>&#9;&#9;&#9;&#9;&#9;DeusExPlayer(Killer).MultiplayerNotifyMsg( DeusExPlayer(Killer).MPMSG_KilledTeammate, 0, "" );<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;// Grant the kill to the killer, and increase his streak<br>&#9;&#9;&#9;&#9;&#9;Killer.PlayerReplicationInfo.Score += 1;<br>&#9;&#9;&#9;&#9;&#9;Killer.PlayerReplicationInfo.Streak += 1;<br>&#9;<br>&#9;&#9;&#9;&#9;&#9;Reward(Killer);<br>&#9;<br>&#9;&#9;&#9;&#9;&#9;// Check for victory conditions and end the match if need be<br>&#9;&#9;&#9;&#9;&#9;if (CheckVictoryConditions(Killer, Other, otherPlayer.killProfile.methodStr) )<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;bFreezeScores = True;<br>&#9;&#9;&#9;&#9;&#9;&#9;NotifyDeath = False;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;if ( NotifyDeath )<br>&#9;&#9;&#9;HandleDeathNotification( Killer, Other );<br>   }<br>   else<br>   {<br>&#9;&#9;if (NotifyDeath)<br>&#9;&#9;&#9;HandleDeathNotification( Killer, Other );<br><br>      super(DeusExGameInfo).Killed(Killer,Other,damageType);<br>   }<br><br>   BaseMutator.ScoreKill(Killer, Other);<br><br></div>
<h3 id="TCTeam.LocalGetTeamTotalsX"><a class="headerlink" href="#TCTeam.LocalGetTeamTotalsX" title="Permanent link">LocalGetTeamTotalsX</a> (int teamSECnt, out float score, out float deaths, out float streak, DeusExPlayer thisPlayer, int team)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br><br><br>&#9;score = 0; deaths = 0; streak = 0;<br>&#9;for ( i = 0; i < teamSECnt; i++ )<br>&#9;{<br>&#9;&#9;score += teamSE[i].Score;<br>&#9;&#9;deaths += teamSE[i].Deaths;<br>&#9;&#9;streak += teamSE[i].Streak;<br>&#9;}<br><br></div>
<h3 id="TCTeam.Login"><a class="headerlink" href="#TCTeam.Login" title="Permanent link">Login</a> (string Portal, string URL, out string Error, Class<PlayerPawn> SpawnClass) -> PlayerPawn</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local MTLPlayer newPlayer;<br>&#9;local int Z5C;<br>&#9;local string Z5D;<br>&#9;local TCPlayer mmplayer;<br>&#9;local class<TCPlayer> Skins[2];<br><br><br>&#9;if ( (MaxPlayers > 0) && (NumPlayers >= MaxPlayers) )<br>&#9;{<br>&#9;&#9;Error=TooManyPlayers;<br>&#9;&#9;return None;<br>&#9;}<br><br>&#9;Z5C = 128;<br>&#9;if (HasOption(URL, "Team"))<br>&#9;{<br>&#9;&#9;Z5D = ParseOption(URL, "Team");<br>&#9;&#9;if (Z5D != "") Z5C = int(Z5D);<br>&#9;}<br>&#9;if (Z5C != 1 && Z5C != 0) Z5C = GetAutoTeam();<br>&#9;if (Z5C == 1) SpawnClass = Team1PlayerClass;<br>&#9;else SpawnClass = Team0PlayerClass;<br>&#9;InitialTeam = Z5C;<br><br>&#9;ChangeOption(URL, "Class", string(SpawnClass));<br>&#9;ChangeOption(URL, "Team", string(Z5C));<br>&#9;newPlayer = MTLPlayer(Super(DeusExMPGame).Login(Portal, URL, Error, SpawnClass));<br>&#9;mmplayer = TCPlayer(newPlayer);<br>&#9;if (mmplayer != None)<br>&#9;{<br>&#9;&#9;mmplayer.FixName(mmplayer.PlayerReplicationInfo.PlayerName);<br>&#9;}<br>&#9;return newPlayer;<br><br></div>
<h3 id="TCTeam.PlayEnterBarks"><a class="headerlink" href="#TCTeam.PlayEnterBarks" title="Permanent link">PlayEnterBarks</a> (TCPlayer P)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int r;<br>&#9;local TCPlayer TCP;<br><br><br>&#9;r = Rand(7);<br>&#9;if(r == 0)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioAIBarks.ConAudioAIBarks_121", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 1)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioAIBarks.ConAudioAIBarks_155", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 2)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioAIBarks.ConAudioAIBarks_179", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 3)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_354", class'Sound', true)),SLOT_Talk);&#9;<br>&#9;else if(r == 4)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_229", class'Sound', true)),SLOT_Talk);&#9;<br>&#9;else if(r == 5)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_217", class'Sound', true)),SLOT_Talk);<br>&#9;else if(r == 6)<br>&#9;&#9;P.PlaySound(Sound(DynamicLoadObject("DeusExConAudioMission01.ConAudioMission01_226", class'Sound', true)),SLOT_Talk);<br>&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;if(TCP.PlayerReplicationInfo.Team == P.PlayerReplicationInfo.Team && TCP != P)<br>&#9;&#9;&#9;TCP.PlaySound(Sound(DynamicLoadObject("DeusExConAudioAIBarks.ConAudioAIBarks_596", class'Sound', true)),SLOT_Talk);<br><br></div>
<h3 id="TCTeam.PostBeginPlay"><a class="headerlink" href="#TCTeam.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    super.PostBeginPlay();<br>    ReplMaxPlayers = MaxPlayers;<br>    Settings = Spawn(class'TCControls', self);<br>    bShowStatus = Settings.bShowStatus;<br>&#9;bShowAdmins = Settings.bShowAdmins;<br>&#9;bShowMods = Settings.bShowMods;<br>&#9;ScoreboardTex = Settings.ScoreboardTex;<br>&#9;ScoreboardExtStr = Settings.ScoreboardExtStr;<br>&#9;bDrawServerInfo = Settings.bDrawServerInfo;<br>&#9;bSpectatorStart = Settings.bSpectatorStart;<br>&#9;rVer = Settings.GetVer();<br>&#9;<br>&#9;if(Settings.bSpawnReplacer)<br>&#9;&#9;CBPMutator(level.Game.BaseMutator).AddCBPMutator(Spawn(class'TCReplacer'));<br>&#9;&#9;<br>&#9;if(Settings.bMapvote)<br>&#9;&#9;Spawn(class'MVMutator');<br>&#9;&#9;<br>&#9;Level.Game.BaseMutator.AddMutator(Spawn(class'TCTeamManager'));&#9;<br>&#9;Level.Game.RegisterDamageMutator (Spawn(class'TCTeamManager'));&#9;<br><br></div>
<h3 id="TCTeam.PostLogin"><a class="headerlink" href="#TCTeam.PostLogin" title="Permanent link">PostLogin</a> (PlayerPawn Z5F)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer mmplayer;<br><br><br>    Super.PostLogin(Z5F);<br>&#9;mmplayer = TCPlayer(Z5F);<br>&#9;if (mmplayer != none)<br>&#9;{<br>&#9;    if ((mmplayer.PlayerReplicationInfo.Score == 0 && mmplayer.PlayerReplicationInfo.Deaths == 0<br>            && mmplayer.PlayerReplicationInfo.Streak == 0) && bSpectatorStart)<br>        {<br>            mmplayer.Spectate(1);<br>        }<br>        else mmplayer.FixInventory();<br>&#9;}<br><br></div>
<h3 id="TCTeam.RefreshScoreArray"><a class="headerlink" href="#TCTeam.RefreshScoreArray" title="Permanent link">RefreshScoreArray</a> (DeusExPlayer P)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br>&#9;local TCPRI lpri;<br>&#9;local PlayerPawn pp;<br>&#9;local string str, str2;<br>&#9;local int bots;<br><br>&#9;if ( P == None )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;pp=P.GetPlayerPawn();<br>&#9;if ( (pp == None) || (pp.GameReplicationInfo == None) )<br>&#9;{<br>&#9;&#9;return;<br>&#9;}<br>&#9;scorePlayers = 0;<br>    SpecCountUNATCO = 0;<br>    SpecCountNSF = 0;<br><br>&#9;for(i=0; i < 32; i++ )<br>&#9;{<br>&#9;&#9;lpri = TCPRI(pp.GameReplicationInfo.PRIArray[i]);<br>&#9;&#9;//if ( (lpri != None) && ( !lpri.bIsSpectator || lpri.bWaitingPlayer) )<br>&#9;&#9;if (lpri != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;scoreArray[scorePlayers].PlayerName=lpri.PlayerName;<br>&#9;&#9;&#9;scoreArray[scorePlayers].Score=lpri.Score;<br>&#9;&#9;&#9;scoreArray[scorePlayers].Deaths=lpri.Deaths;<br>&#9;&#9;&#9;scoreArray[scorePlayers].Streak=lpri.Streak;<br>&#9;&#9;&#9;scoreArray[scorePlayers].Team=lpri.Team;<br>&#9;&#9;&#9;scoreArray[scorePlayers].PlayerID=lpri.PlayerID;<br>            PI[scorePlayers].ping = lpri.pingPRI;<br>            PI[scorePlayers].bAdmin = lpri.bAdmin;<br>            PI[scorePlayers].bIsSpectator = lpri.bIsSpectator;<br>&#9;&#9;&#9;PI[scorePlayers].bModerator = lpri.bModerator;<br>&#9;&#9;&#9;PI[scorePlayers].bMuted = lpri.bMuted;<br>&#9;&#9;&#9;PI[scorePlayers].bSuperAdmin = lpri.bSuperAdmin;<br>&#9;&#9;&#9;PI[scorePlayers].bServerOwner = lpri.bServerOwner;<br>&#9;&#9;&#9;PI[scorePlayers].bKaiz0r = lpri.bKaiz0r;<br>&#9;&#9;&#9;PI[scorePlayers].Status = lpri.Status;<br>&#9;&#9;&#9;PI[scorePlayers].bAway = lpri.bAway;<br>&#9;&#9;&#9;PI[scorePlayers].DT = lpri.DT;<br>&#9;&#9;&#9;PI[scorePlayers].FPS = lpri.FPS;<br>&#9;&#9;&#9;PI[scorePlayers].bSilentAdmin = lpri.bSilentAdmin;<br>&#9;&#9;&#9;PI[scorePlayers].bJuggernaut = lpri.bJuggernaut;<br>&#9;&#9;&#9;playerCount++;<br>            if (lpri.bIsSpectator)<br>            {<br>&#9;&#9;&#9;&#9;spectatorCount++;<br>                if (lpri.Team == 0) SpecCountUNATCO++;<br>                else if(lpri.Team == 1) SpecCountNSF++;<br>&#9;&#9;&#9;&#9;PI[scorePlayers].SpectatedPlayerID = lpri.SpectatingPlayerID;<br>            }<br>            if(!lpri.bRealPlayer)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;PI[scorePlayers].bBot=True;<br>&#9;&#9;&#9;&#9;bots += 1;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if(lpri.bRealPlayer)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;PI[scorePlayers].bBot=False;<br>&#9;&#9;&#9;&#9;PI[scorePlayers].bRealPlayer=True;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;scorePlayers++;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;SetSpectatedPlayerNames();<br><br>    SBInfo.ServerName = pp.GameReplicationInfo.ServerName;<br>    SBInfo.GameType = rVer; //Settings.GetVer(); // GTName;<br>&#9;SBInfo.NumPlayers = scorePlayers - Bots;<br>&#9;SBInfo.MaxPlayers = ReplMaxPlayers;<br>&#9;str = string(self);<br>&#9;SBInfo.Map = Left(str, InStr(str, "."));<br><br></div>
<h3 id="TCTeam.SDIn"><a class="headerlink" href="#TCTeam.SDIn" title="Permanent link">SDIn</a> (int mins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.SetShutdownIn(mins);<br><br></div>
<h3 id="TCTeam.Say2"><a class="headerlink" href="#TCTeam.Say2" title="Permanent link">Say2</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    Settings.serverSay2(str);<br><br></div>
<h3 id="TCTeam.Say3"><a class="headerlink" href="#TCTeam.Say3" title="Permanent link">Say3</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.serverSay3(str);<br><br></div>
<h3 id="TCTeam.SetSD"><a class="headerlink" href="#TCTeam.SetSD" title="Permanent link">SetSD</a> (int sdHours, int sdMins)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Settings.SetShutdownTime(sdHours, sdMins);<br><br></div>
<h3 id="TCTeam.SetSpectatedPlayerNames"><a class="headerlink" href="#TCTeam.SetSpectatedPlayerNames" title="Permanent link">SetSpectatedPlayerNames</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i, k;<br><br><br>&#9;for (i = 0; i < scorePlayers; i++)<br>&#9;{<br>&#9;&#9;if (PI[i].bIsSpectator && PI[i].SpectatedPlayerID != -1)<br>&#9;&#9;{<br>&#9;&#9;&#9;for (k = 0; k < scorePlayers; k++)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (scoreArray[k].PlayerID == PI[i].SpectatedPlayerID)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;PI[i].SpectatedPlayerName = scoreArray[k].PlayerName;<br>&#9;&#9;&#9;&#9;&#9;break;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<h3 id="TCTeam.SetTeam"><a class="headerlink" href="#TCTeam.SetTeam" title="Permanent link">SetTeam</a> (DeusExPlayer Z5F)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;Z5F.PlayerReplicationInfo.Team = InitialTeam;<br><br></div>
<h3 id="TCTeam.ShowServerInfo"><a class="headerlink" href="#TCTeam.ShowServerInfo" title="Permanent link">ShowServerInfo</a> (GC gc, float yoffset, float ylen, float screenWidth)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float w, h, tw;<br>&#9;local string str;<br><br>    <br>    gc.GetTextExtent(0, w, h, "Ping");<br>    gc.SetTileColorRGB(255,255,255);<br>    tw = ((screenWidth * PINGX) + w) - (IDX * screenWidth);<br>    gc.DrawBox(IDX * screenWidth, yoffset, tw, 1, 0, 0, 1, ScoreboardTex);<br>    yoffset += ylen;<br><br><br>&#9;&#9;str = "Game: " $ SBInfo.Gametype $ " - Map: " $ GetURLMap()$" - Current time: " $ ComposeTime();;<br>&#9;&#9;gc.SetTextColorRGB(255, 255, 255);<br>&#9;&#9;gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;tw = (tw - w) / 2;<br>&#9;&#9;gc.DrawText((screenWidth * IDX) + tw, yoffset, w, h, str);<br>&#9;&#9;yoffset += h + 2;<br>&#9;<br>&#9;&#9;str = "Server: "$SBInfo.ServerName$" ("$SBInfo.NumPlayers$"/"$SBInfo.MaxPlayers$")";<br>&#9;&#9;gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;gc.DrawText((screenWidth * IDX) + tw, yoffset, w, h, str);<br>&#9;&#9;yoffset += h + 2;<br>&#9;&#9;<br>&#9;&#9;str = ScoreboardExtStr;<br>&#9;&#9;gc.GetTextExtent(0, w, h, str);<br>&#9;&#9;gc.DrawText((screenWidth * IDX) + tw, yoffset, w, h, str);<br><br></div>
<h3 id="TCTeam.SortTeamScores"><a class="headerlink" href="#TCTeam.SortTeamScores" title="Permanent link">SortTeamScores</a> (int PlayerCount)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local ScoreElement tmpSE;<br>&#9;local PlayerInfo tmpPI;<br>&#9;local int i, j, max;<br><br><br>     for ( i = 0; i < PlayerCount-1; i++ )<br>     {<br>          max = i;<br>          for ( j = i+1; j < PlayerCount; j++ )<br>          {<br>               if ( teamSE[j].Score > teamSE[max].Score )<br>                    max = j;<br>               else if (( teamSE[j].Score == teamSE[max].Score) && (teamSE[j].Deaths < teamSE[max].Deaths))<br>                    max = j;<br>          }<br>          tmpSE = teamSE[max];<br>          tmpPI = PInfo[max];<br>          teamSE[max] = teamSE[i];<br>          PInfo[max] = PInfo[i];<br>          teamSE[i] = tmpSE;<br>          PInfo[i] = tmpPI;<br>     }<br><br></div>
<h3 id="TCTeam.Timer"><a class="headerlink" href="#TCTeam.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string URLstr;<br>&#9;local DXMapList mapList;<br>&#9;local string gtv;<br><br>&#9;if ( bCycleMap )<br>&#9;{<br>      mapList = Spawn(class'DXMapList');<br>      URLstr = mapList.GetNextMap();<br>      mapList.Destroy();<br>      bCycleMap = False;<br>      <br>      gtv = Settings.Votez.FinalVoteStr;<br>      <br>      if(gtv != "")<br>&#9;&#9;Level.ServerTravel( URLstr$"?Game=OpenDX."$gtv, False );<br>&#9;else<br>&#9;&#9;Level.ServerTravel( URLstr, False );<br>&#9;&#9;<br>      bFreezeScores = False;<br>&#9;}<br><br></div>
<h3 id="TCTeam.UpdateSkin"><a class="headerlink" href="#TCTeam.UpdateSkin" title="Permanent link">UpdateSkin</a> (DeusExPlayer P, int NewTeam) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int iSkin;<br><br><br>    if (NewTeam == 0)<br>    {<br>        for (iSkin = 0; iSkin < ArrayCount(P.MultiSkins); iSkin++)<br>        {<br>            P.MultiSkins[iSkin] = class'mpunatco'.Default.MultiSkins[iSkin];<br>        }<br>        P.Mesh = class'mpunatco'.Default.Mesh;<br><br>        return true;<br>    }<br>    else if (NewTeam == 1)<br>    {<br>        for (iSkin = 0; iSkin < ArrayCount(P.MultiSkins); iSkin++)<br>        {<br>            P.MultiSkins[iSkin] = class'mpnsf'.Default.MultiSkins[iSkin];<br>        }<br>        P.Mesh = class'mpnsf'.Default.Mesh;<br><br>        return true;<br>    }<br>    else<br>        return false;<br><br></div>
<h3 id="TCTeam.st"><a class="headerlink" href="#TCTeam.st" title="Permanent link">st</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    ConsoleCommand("servertravel "$str);<br><br></div>
<h3 id="TCTeam.tSwapPlayer"><a class="headerlink" href="#TCTeam.tSwapPlayer" title="Permanent link">tSwapPlayer</a> (TCPlayer DXP, int T, optional bool bDontResetLoc, optional bool bDontResetScore)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local NavigationPoint startSpot;<br>&#9;local bool foundStart;<br>&#9;local string Text, TP;<br><br><br>    Text = "Switching "$DxP.PlayerReplicationInfo.PlayerName$"("$DxP.PlayerReplicationInfo.PlayerID$") to ";<br>    TP = "You have been switched to ";<br><br>    if (T == 0)<br>    {<br>        Text = Text$"UNATCO.";<br>        TP = TP$"UNATCO.";<br>    }<br>    else<br>    {<br>        Text = Text$"NSF.";<br>        TP = TP$"NSF.";<br>    }<br><br>    BroadcastMessage(Text);<br><br>    DxP.PlayerReplicationInfo.Team = T;<br>    UpdateSkin(DxP, T);<br>    if(!bDontResetScore)<br>&#9;&#9;DxP.ChangeTeam(T);<br>&#9;&#9;<br>&#9;if(!bDontResetLoc)<br>&#9;{<br>&#9;&#9;startSpot = Level.Game.FindPlayerStart(DxP, 255);<br>&#9;&#9;if (startSpot != none)<br>&#9;&#9;{<br>&#9;&#9;&#9;foundStart = DxP.SetLocation(startSpot.Location);<br>&#9;&#9;&#9;if (foundStart)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;DxP.SetRotation(startSpot.Rotation);<br>&#9;&#9;&#9;&#9;DxP.ViewRotation = DxP.Rotation;<br>&#9;&#9;&#9;&#9;DxP.Acceleration = vect(0,0,0);<br>&#9;&#9;&#9;&#9;DxP.Velocity = vect(0,0,0);<br>&#9;&#9;&#9;&#9;DxP.ClientSetLocation(startSpot.Location, startSpot.Rotation);<br>&#9;&#9;&#9; }<br>&#9;&#9; }<br>&#9;}<br>     DXP.ClientMessage(TP);<br><br></div>
<h3 id="TCTeam.tSwapTeam"><a class="headerlink" href="#TCTeam.tSwapTeam" title="Permanent link">tSwapTeam</a> (TCPlayer P)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(P.PlayerReplicationInfo.Team == 0)<br>&#9;&#9;tSwapPlayer(P, 1);<br>&#9;else<br>&#9;&#9;tSwapPlayer(P, 0);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCTeamBalancer.uc" title="Permanent link"><h2 id="TCTeamBalancer.uc">TCTeamBalancer.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var() config bool          bEnabled;<br>var() config bool          bSwapNewPlayersFirst;<br>var() config float         CheckTime;<br>var() config int           MaxDifference;<br>var() config float         MessageTime;<br>var bool bDoBalance;<br>var bool bInit;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bEnabled=True<br>bSwapNewPlayersFirst=True<br>checkTime=15.00<br>MaxDifference=1<br>MessageTime=5.00<br>bHidden=True<br>NetUpdateFrequency=1.00</div>
<h3 id="TCTeamBalancer.BalanceTeams"><a class="headerlink" href="#TCTeamBalancer.BalanceTeams" title="Permanent link">BalanceTeams</a> (int D)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int RemainingToSwap, i, MaxFrags, sw;<br>&#9;local Pawn P;<br><br><br>    // D can be negative, but we need positive RemainingToSwap<br>    if (D > 0)<br>        RemainingToSwap = D;<br>    else if (D < 0)<br>        RemainingToSwap = (D)*(-1);<br>    else<br>        // should never happen<br>        return;<br><br>    if (bSwapNewPlayersFirst)<br>    {<br>        // check for new players and swap them<br>&#9;&#9;sw = SwapPlayers(D, 0);<br>        RemainingToSwap -= sw;<br>&#9;&#9;if (D > 0) D -= sw;<br>&#9;&#9;else if (D < 0) D += sw;<br>    }<br><br>    if (RemainingToSwap == 0)<br>        return;<br><br>    // find top player, so we dont swap him<br>    P = Level.PawnList;<br>    MaxFrags = 0;<br>    i = 0;<br>    while (i < Level.Game.NumPlayers)<br>    {<br>        if (P.IsA('PlayerPawn'))<br>        {<br>            if (!P.PlayerReplicationInfo.bIsSpectator)<br>            {<br>&#9;            if (D > 0 && P.PlayerReplicationInfo.Team == 0)<br>&#9;            {<br>&#9;                // assign new MaxFrags if we find player with higher score<br>                    if (P.PlayerReplicationInfo.Score > MaxFrags)<br>                        MaxFrags = int(P.PlayerReplicationInfo.Score);<br>                }<br>&#9;            else if (D < 0 && P.PlayerReplicationInfo.Team == 1)<br>&#9;            {<br>                    // assign new MaxFrags if we find player with higher score<br>                    if (P.PlayerReplicationInfo.Score > MaxFrags)<br>                        MaxFrags = int(P.PlayerReplicationInfo.Score);<br>                }<br>            }<br>            i++;<br>        }<br>        P = P.nextPawn;<br>    }<br><br>    // security check (in case of map begins and all players have score 0<br>    // set MaxFrags to 1 and just swap first appropriate player(s)<br>    if (MaxFrags == 0)<br>        MaxFrags = 1;<br><br>    // swap other players<br>    RemainingToSwap -= SwapPlayers(D, MaxFrags);<br><br>    // ooops, not all players could be swapped<br>    if (RemainingToSwap > 0)<br>        log("Failed to balance teams...", 'OpenDX');<br><br></div>
<h3 id="TCTeamBalancer.CheckBalance"><a class="headerlink" href="#TCTeamBalancer.CheckBalance" title="Permanent link">CheckBalance</a> -> int</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int NSF, UNATCO, i;<br>&#9;local Pawn P;<br><br><br>    NSF = 0;<br>    UNATCO = 0;<br><br>    // count number of UNATCO and number of NSF players<br>    P = Level.PawnList;<br> &#9;while (i < Level.Game.NumPlayers)<br>&#9;{<br>&#9;&#9;if (P.IsA('PlayerPawn'))<br>&#9;&#9;{<br>&#9;&#9;    if (!P.PlayerReplicationInfo.bIsSpectator || !P.isInState('Spectating'))<br>&#9;&#9;    {<br>                if (P.PlayerReplicationInfo.Team == 0) UNATCO++;<br>                else if (P.PlayerReplicationInfo.Team == 1) NSF++;<br>            }<br>&#9;&#9;&#9;i++;<br>&#9;&#9;}<br>&#9;&#9;P = P.nextPawn;<br>&#9;}<br><br>    if (UNATCO == NSF || (UNATCO + NSF) == 1)<br>        return 0;<br><br>    if (MaxDifference > 0 && ((NSF + MaxDifference) < UNATCO ||<br>        (UNATCO + MaxDifference) < NSF))<br>        return ((UNATCO - NSF) / 2);<br><br>    // other unknown combination???<br>    else<br>        return 0;<br><br></div>
<h3 id="TCTeamBalancer.CheckTotalScore"><a class="headerlink" href="#TCTeamBalancer.CheckTotalScore" title="Permanent link">CheckTotalScore</a> (int N) -> int</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int NSFScore, UNATCOScore, i;<br>&#9;local Pawn P;<br><br><br>    NSFScore = 0;<br>    UNATCOScore = 0;<br><br>    // count NSF and UNATCO total scores<br>    P = Level.PawnList;<br> &#9;while (i < Level.Game.NumPlayers)<br>&#9;{<br>&#9;&#9;if (P.IsA('PlayerPawn'))<br>&#9;&#9;{<br>            if (P.PlayerReplicationInfo.Team == 0)<br>                UNATCOScore += int(P.PlayerReplicationInfo.Score);<br>            else if (P.PlayerReplicationInfo.Team == 1)<br>                NSFScore += int(P.PlayerReplicationInfo.Score);<br><br>&#9;&#9;&#9;i++;<br>&#9;&#9;}<br>&#9;&#9;P = P.nextPawn;<br>&#9;}<br><br>    // equal scores, no balancing needed<br>    if (UNATCOScore == NSFScore)<br>        return 0;<br><br>    // if unatco has higher score and more players<br>    else if (UNATCOScore > NSFScore && N > 0)<br>        return 1;<br><br>    // if nsf has higher score and more players<br>    else if (NSFScore > UNATCOScore && N < 0)<br>        return -1;<br><br>    // other combination, dont do balancing!<br>    else<br>        return 0;<br><br></div>
<h3 id="TCTeamBalancer.PostBeginPlay"><a class="headerlink" href="#TCTeamBalancer.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (bInit) return;<br>&#9;bInit = true;<br>    bDoBalance = false;<br>    if (MaxDifference < 0)<br>        MaxDifference = 1;<br>    if (CheckTime < 0)<br>        CheckTime = 15.0;<br>    SaveConfig();<br>    SetTimer(CheckTime, True);<br><br></div>
<h3 id="TCTeamBalancer.PrintToAll"><a class="headerlink" href="#TCTeamBalancer.PrintToAll" title="Permanent link">PrintToAll</a> (string TextToSay, bool uplink)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i;<br>&#9;local Pawn P;<br>&#9;local TCPlayer mmp;<br>&#9;local color rgb;<br><br><br>    rgb.G = 255;<br>    // print text to all clients<br>    P = Level.PawnList;<br> &#9;while (i < Level.Game.NumPlayers)<br>&#9;{<br>&#9;&#9;if (P.IsA('PlayerPawn'))<br>&#9;&#9;{<br>&#9;        if (uplink) P.ClientMessage(TextToSay, , true);<br>&#9;        else<br>&#9;        {<br>&#9;&#9;        mmp = TCPlayer(P);<br>                if (mmp != none) mmp.ClientMessage(TextToSay);<br>            }<br>&#9;&#9;&#9;i++;<br>&#9;&#9;}<br>&#9;&#9;P = P.nextPawn;<br>&#9;}<br><br></div>
<h3 id="TCTeamBalancer.PrintToPlayer"><a class="headerlink" href="#TCTeamBalancer.PrintToPlayer" title="Permanent link">PrintToPlayer</a> (DeusExPlayer dxp, string Message)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer mmp;<br>&#9;local color rgb;<br><br><br>    rgb.G = 255;<br>    mmp = TCPlayer(dxp);<br>    if (mmp != none) mmp.ClientMessage(Message);<br><br></div>
<h3 id="TCTeamBalancer.SwapPlayer"><a class="headerlink" href="#TCTeamBalancer.SwapPlayer" title="Permanent link">SwapPlayer</a> (Pawn P, int T)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local NavigationPoint startSpot;<br>&#9;local bool foundStart;<br>&#9;local TCPlayer DxP;<br>&#9;local string Text, TP;<br><br><br>&#9;DxP = TCPlayer(P);<br><br>    Text = "Switching player player "<br>        $DxP.PlayerReplicationInfo.PlayerName$<br>        " ("$DxP.PlayerReplicationInfo.PlayerID$") to ";<br>    TP = "You have been switched to ";<br><br>    if (T == 0)<br>    {<br>        Text = Text$"team UNATCO.";<br>        TP = TP$"team UNATCO.";<br>    }<br>    else<br>    {<br>        Text = Text$"team NSF.";<br>        TP = TP$"team NSF.";<br>    }<br><br>    PrintToAll(Text, true);<br><br>    DxP.PlayerReplicationInfo.Team = T;<br>    UpdateSkin(DxP, T);<br>&#9;DxP.ClientSetTeam(T);<br>&#9;startSpot = Level.Game.FindPlayerStart(DxP, 255);<br>&#9;if (startSpot != none)<br>&#9;{<br>&#9;    foundStart = DxP.SetLocation(startSpot.Location);<br>&#9;    if (foundStart)<br>        {<br>            DxP.SetRotation(startSpot.Rotation);<br>&#9;&#9;    DxP.ViewRotation = DxP.Rotation;<br>&#9;&#9;    DxP.Acceleration = vect(0,0,0);<br>&#9;&#9;    DxP.Velocity = vect(0,0,0);<br>&#9;&#9;    DxP.ClientSetLocation(startSpot.Location, startSpot.Rotation);<br>&#9;     }<br>     }<br>     PrintToPlayer(DxP, TP);<br><br></div>
<h3 id="TCTeamBalancer.SwapPlayers"><a class="headerlink" href="#TCTeamBalancer.SwapPlayers" title="Permanent link">SwapPlayers</a> (int N, int Frags) -> int</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int i, Swapped;<br>&#9;local Pawn P;<br>&#9;local TCPRI mmp;<br><br><br>    Swapped = 0;<br>    i = 0;<br>    P = Level.PawnList;<br>    while (i < Level.Game.NumPlayers && N != 0)<br>    {<br>        if (P.IsA('PlayerPawn'))<br>        {<br>&#9;&#9;&#9;mmp = TCPRI(P.PlayerReplicationInfo);<br>            if (mmp != none && !mmp.bIsSpectator && !P.isinState('Spectating'))<br>            {<br>                if (Frags > 0 || (P.PlayerReplicationInfo.Score == 0 &&<br>&#9;&#9;            P.PlayerReplicationInfo.Deaths == 0))<br>                {<br>                    // if N > 0: swap to NSF<br>                    // if N < 0: swap to UNATCO<br>&#9;&#9;            if (N > 0 && P.PlayerReplicationInfo.Team == 0 &&<br>                        (P.PlayerReplicationInfo.Score < Frags || Frags == 0))<br>                    {<br>                        SwapPlayer(P, 1);<br>                        Swapped++;<br>                        N--;<br>                    }<br>&#9;&#9;            else if (N < 0 && P.PlayerReplicationInfo.Team == 1 &&<br>                        P.PlayerReplicationInfo.Score < Frags || Frags == 0)<br>                    {<br>                        SwapPlayer(P, 0);<br>                        Swapped++;<br>                        N++;<br>                    }<br>                }<br>            }<br>            i++;<br>&#9;&#9;}<br>        P = P.nextPawn;<br>    }<br><br>    return Swapped;<br><br></div>
<h3 id="TCTeamBalancer.Timer"><a class="headerlink" href="#TCTeamBalancer.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int Diff;<br>&#9;local string Text;<br><br><br>    if (DeathMatchGame(Level.Game) != None)<br>        return;<br><br>    if (bEnabled == false) return;<br><br>    // check balance<br>    Diff = CheckBalance();<br>    if (Diff == 0)<br>    {<br>        bDoBalance = false;<br>        return;<br>    }<br><br>    // if bDoBalance is true<br>    if (bDoBalance == true)<br>    {<br>        // do balancing<br>        BalanceTeams(Diff);<br><br>        // change bDoBalance to false so next time we only check teams<br>        bDoBalance = false;<br>    }<br>    else<br>    {<br>        Text = "Teams will be balanced in "$int(CheckTime)$" seconds.";<br>        PrintToAll(Text, false);<br>        // just change bDoBalance to true, so we balance teams next time<br>        bDoBalance = true;<br>    }<br><br></div>
<h3 id="TCTeamBalancer.UpdateSkin"><a class="headerlink" href="#TCTeamBalancer.UpdateSkin" title="Permanent link">UpdateSkin</a> (DeusExPlayer P, int NewTeam) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int iSkin;<br><br><br>    if (NewTeam == 0)<br>    {<br>        for (iSkin = 0; iSkin < ArrayCount(P.MultiSkins); iSkin++)<br>        {<br>            P.MultiSkins[iSkin] = class'mpunatco'.Default.MultiSkins[iSkin];<br>        }<br>        P.Mesh = class'mpunatco'.Default.Mesh;<br><br>        return true;<br>    }<br>    else if (NewTeam == 1)<br>    {<br>        for (iSkin = 0; iSkin < ArrayCount(P.MultiSkins); iSkin++)<br>        {<br>            P.MultiSkins[iSkin] = class'mpnsf'.Default.MultiSkins[iSkin];<br>        }<br>        P.Mesh = class'mpnsf'.Default.Mesh;<br><br>        return true;<br>    }<br>    else<br>        return false;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCTeamManager.uc" title="Permanent link"><h2 id="TCTeamManager.uc">TCTeamManager.uc (extends Mutator)</h2></a>

<h3 id="TCTeamManager.CalcHitLoc"><a class="headerlink" href="#TCTeamManager.CalcHitLoc" title="Permanent link">CalcHitLoc</a> (int HitPart) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(HitPart == 1)<br>&#9;&#9;return "Head";<br><br>&#9;if(HitPart == 2)<br>&#9;&#9;return "Torso";<br>&#9;&#9;<br>&#9;if(HitPart == 3)<br>&#9;&#9;return "Legs";<br><br>&#9;if(HitPart == 4)<br>&#9;&#9;return "Legs";<br>&#9;<br>&#9;if(HitPart == 5)<br>&#9;&#9;return "Torso";<br><br>&#9;if(HitPart == 6)<br>&#9;&#9;return "Torso";<br><br></div>
<h3 id="TCTeamManager.GetDisplayName"><a class="headerlink" href="#TCTeamManager.GetDisplayName" title="Permanent link">GetDisplayName</a> (pawn Chk) -> string</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(ScriptedPawn(Chk) != None)<br>&#9;&#9;return ScriptedPawn(Chk).FamiliarName;<br>&#9;&#9;<br>&#9;if(TCPlayer(Chk) != None)<br>&#9;&#9;return TCPlayer(Chk).PlayerReplicationInfo.PlayerName;&#9;<br><br></div>
<h3 id="TCTeamManager.ModifyPlayer"><a class="headerlink" href="#TCTeamManager.ModifyPlayer" title="Permanent link">ModifyPlayer</a> (Pawn Other)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer P;<br>&#9;local class<Inventory> GiveClass;<br>&#9;local int Passes, r;<br>&#9;local Inventory anItem, anItem2, i;<br>&#9;local Class<Inventory> w;<br><br>   <br>&#9;super.ModifyPlayer(Other);<br>&#9;p = TCPlayer(Other);<br>&#9;<br>&#9;if(GunGame(Level.Game) != None)<br>&#9;{&#9;&#9;&#9; <br>&#9;&#9;   r = TCPRI(P.PlayerReplicationInfo).Rank;<br><br>&#9;&#9; if (r == 1)<br>&#9;&#9;   w = class'WeaponStealthPistol';<br>&#9;&#9;   <br>&#9;&#9; if (r == 2)<br>&#9;&#9;   w = class'WeaponPistol';<br>&#9;&#9;   <br>&#9;&#9; if (r == 3)<br>&#9;&#9;   w = class'WeaponFlamethrower';<br>&#9;&#9;   <br>&#9;&#9; if (r == 4)<br>&#9;&#9;   w = class'WeaponMiniCrossbow';<br>&#9;&#9;   <br>&#9;&#9; if (r == 5)<br>&#9;&#9;   w = class'WeaponShuriken';<br>&#9;&#9;   <br>&#9;&#9; if (r == 6)<br>&#9;&#9;   w = class'WeaponSawedOffShotgun';<br>&#9;&#9;   <br>&#9;&#9; if (r == 7)<br>&#9;&#9;   w = class'WeaponAssaultShotgun';<br>&#9;&#9;   <br>&#9;&#9; if (r == 8)<br>&#9;&#9;   w = class'WeaponAssaultgun';<br><br>&#9;&#9; if (r == 9)<br>&#9;&#9;   w = class'WeaponPlasmaRifle';<br>&#9;&#9;   <br>&#9;&#9; if (r == 10)<br>&#9;&#9;   w = class'WeaponGepGun';<br>&#9;&#9;   <br>&#9;&#9; if (r == 11)<br>&#9;&#9;   w = class'Weaponrifle';<br>&#9;&#9;   <br>&#9;&#9; if (r == 12)<br>&#9;&#9;   w = class'WeaponNanoSword';<br>&#9;&#9;   <br>&#9;&#9;anItem = Spawn(w);<br>&#9;&#9;anItem.Frob(P,None);&#9;  <br>&#9;&#9;Inventory.bInObjectBelt = True;<br>&#9;&#9;anItem.Destroy();<br>&#9;&#9;&#9; <br>&#9;&#9;anItem = Spawn(class'WeaponCombatKnife');<br>&#9;&#9;anItem.Frob(P,None);&#9;  <br>&#9;&#9;Inventory.bInObjectBelt = True;<br>&#9;&#9;anItem.Destroy();<br>&#9;}<br>&#9;<br>&#9;else if(Sharpshooter(Level.Game) != None)<br>&#9;{<br>&#9;&#9;while(Passes < 3)<br>&#9;&#9;{<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;if(Passes == 0) r = RandRange(0,10);<br>&#9;&#9;&#9;if(Passes == 1) r = RandRange(11, 20);<br>&#9;&#9;&#9;if(Passes == 2) r = RandRange(21,29);<br>&#9;&#9;&#9;Passes++;<br>&#9;&#9;&#9;GiveClass = class<inventory>( DynamicLoadObject( p.GetControls().SSWeapons[r], class'Class' ) );<br>&#9;&#9;&#9;if( GiveClass!=None )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;anItem = Spawn(GiveClass,,,p.Location); <br>&#9;&#9;&#9;&#9;anItem.SpawnCopy(P);<br>&#9;&#9;&#9;&#9;anItem.Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;Log("Error in TCControls.SSWeapons array: "$r$" slot could not be spawned. (PLAYER)");<br>&#9;&#9;}<br>&#9;}<br><br><br></div>
<h3 id="TCTeamManager.MutatorTakeDamage"><a class="headerlink" href="#TCTeamManager.MutatorTakeDamage" title="Permanent link">MutatorTakeDamage</a> (out Int ActualDamage, Pawn Victim, Pawn InstigatedBy, out Vector HitLocation, out Vector Momentum, Name DamageType)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string hitstr, colstr, quadstr;<br><br>&#9;super.MutatorTakeDamage (ActualDamage, Victim, InstigatedBy, HitLocation, Momentum, DamageType);<br><br><br>&#9;if(TCPlayer(instigatedBy) != None)<br>&#9;{<br>&#9;&#9;if(TCPlayer(Victim).HasPerk("Infection"))<br>&#9;&#9;{<br>&#9;&#9;&#9;&#9;ActualDamage = ActualDamage * 1.5;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(TCPlayer(instigatedBy).HasPerk("Quad Damage"))<br>&#9;&#9;{<br>&#9;&#9;&#9;&#9;ActualDamage = ActualDamage * 4;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(Juggernaut(level.game) != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCPlayer(Victim) == Juggernaut(level.game).Juggernaut)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;ActualDamage = ActualDamage / 2;<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(DeusExPlayer(victim) != None)<br>&#9;&#9;&#9;hitstr = CalcHitLoc(DeusExPlayer(victim).GetMPHitLocation(HitLocation));<br><br>&#9;&#9;if(TCPlayer(instigatedBy).GetControls().bShowHitz)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(ActualDamage > 0)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if(DamageType == 'EMP')<br>&#9;&#9;&#9;&#9;&#9;colstr = "|C1E90FF";<br>&#9;&#9;&#9;&#9;if(DamageType == 'Flamed' || DamageType == 'Burned')<br>&#9;&#9;&#9;&#9;&#9;colstr = "|P2";<br>&#9;&#9;&#9;&#9;if(DamageType == 'PoisonEffect' || DamageType == 'Poison' || DamageType == 'TearGas')<br>&#9;&#9;&#9;&#9;&#9;colstr = "|C14D920";<br>&#9;&#9;&#9;&#9;if(DamageType == 'KnockedOut' || DamageType == 'exploded' || DamageType == 'Stunned' || DamageType == 'stomped')<br>&#9;&#9;&#9;&#9;&#9;colstr = "|CEEF600";<br>&#9;&#9;&#9;&#9;if(DamageType == 'SpecialDamage' || DamageType == 'Tantalus' || DamageType == 'Nanovirus')<br>&#9;&#9;&#9;&#9;&#9;colstr = "|P7";<br>&#9;&#9;&#9;&#9;if(DamageType == 'shot')<br>&#9;&#9;&#9;&#9;&#9;colstr = "|P1";<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if(TCPlayer(instigatedBy).HasPerk("Quad Damage"))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(hitstr == "")<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(instigatedBy).ShowHitz(colstr$"("$ActualDamage / 4$" x4)");<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(instigatedBy).ShowHitz(colstr$"("$ActualDamage / 4$" x4) >> "$hitstr$") ");<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if(hitstr == "")<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(instigatedBy).ShowHitz(colstr$"("$ActualDamage$")");<br>&#9;&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;&#9;TCPlayer(instigatedBy).ShowHitz(colstr$"("$ActualDamage$" >> "$hitstr$") ");&#9;<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;if(TCDeathmatch(level.game) == None)<br>&#9;&#9;&#9;return;<br>&#9;&#9;if(TCPlayer(InstigatedBy).TeamName == "")<br>&#9;&#9;return;<br>&#9;&#9;if(TCPlayer(Victim) != None && Victim != InstigatedBy)<br>&#9;&#9;{<br>&#9;&#9;&#9;if(TCPlayer(Victim).TeamName == "")<br>&#9;&#9;&#9;return;&#9;<br>&#9;&#9;&#9;&#9;&#9;if(TCPlayer(InstigatedBy).TeamName ~= TCPlayer(Victim).TeamName)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(!TCDeathMatch(Level.Game).Settings.bTCFriendlyFire)<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;ActualDamage /= TCDeathMatch(Level.Game).Settings.ffReduction;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;return;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCTimerActor.uc" title="Permanent link"><h2 id="TCTimerActor.uc">TCTimerActor.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var bool bRunning;<br>var int min, sec;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=True;</div>
<h3 id="TCTimerActor.StartTimer"><a class="headerlink" href="#TCTimerActor.StartTimer" title="Permanent link">StartTimer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;min = 0;<br>&#9;sec = 0;<br>&#9;<br>&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;TCP.StartTimer();<br>&#9;<br>&#9;Log("Timer started.",'OpenDX');<br>&#9;bRunning=True;<br>&#9;SetTimer(1,True);<br><br></div>
<h3 id="TCTimerActor.StopTimer"><a class="headerlink" href="#TCTimerActor.StopTimer" title="Permanent link">StopTimer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;&#9;TCP.StopTimer();<br>&#9;<br>&#9;Log("Timer stopped.",'OpenDX');<br>&#9;bRunning=false;<br><br></div>
<h3 id="TCTimerActor.Timer"><a class="headerlink" href="#TCTimerActor.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local string finaltime, localsec;<br><br>&#9;<br>&#9;sec++;<br>&#9;<br>&#9;if(sec < 10)<br>&#9;&#9;localsec = "0"$sec;<br>&#9;&#9;<br>&#9;if(sec > 60)<br>&#9;{<br>&#9;&#9;sec = 1;<br>&#9;&#9;localsec = "01";<br>&#9;&#9;min++;<br>&#9;}<br>&#9;<br>&#9;if(localsec == "")<br>&#9;&#9;localsec = string(sec);<br>&#9;finaltime = min$":"$localsec;<br>&#9;<br>&#9;UpdateTimer(finaltime);<br><br></div>
<h3 id="TCTimerActor.ToggleTimer"><a class="headerlink" href="#TCTimerActor.ToggleTimer" title="Permanent link">ToggleTimer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if(bRunning)<br>&#9;&#9;StopTimer();<br>&#9;else<br>&#9;&#9;StartTimer();<br><br></div>
<h3 id="TCTimerActor.UpdateTimer"><a class="headerlink" href="#TCTimerActor.UpdateTimer" title="Permanent link">UpdateTimer</a> (string str)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br><br>&#9;<br>&#9;foreach AllActors(class'TCPlayer', TCP)<br>&#9;{<br>&#9;&#9;TCP.UpdateTimer(str);<br>&#9;&#9;TCP.TimerString=str;<br>&#9;}<br><br>&#9;if(!bRunning)<br>&#9;SetTimer(1,False);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCUNATCO.uc" title="Permanent link"><h2 id="TCUNATCO.uc">TCUNATCO.uc (extends TCPlayer)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Mesh=LodMesh'MPCharacters.mp_jumpsuit'<br>DrawScale=0.93<br>MultiSkins(0)=Texture'DeusExCharacters.Skins.MiscTex1'<br>MultiSkins(1)=Texture'DeusExCharacters.Skins.UNATCOTroopTex1'<br>MultiSkins(2)=Texture'DeusExCharacters.Skins.UNATCOTroopTex2'<br>MultiSkins(3)=Texture'DeusExCharacters.Skins.MiscTex1'<br>MultiSkins(4)=Texture'DeusExCharacters.Skins.MiscTex1'<br>MultiSkins(5)=Texture'DeusExItems.Skins.PinkMaskTex'<br>MultiSkins(6)=Texture'DeusExCharacters.Skins.UNATCOTroopTex3'<br>MultiSkins(7)=Texture'DeusExItems.Skins.PinkMaskTex'</div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponAssaultGun.uc" title="Permanent link"><h2 id="TCWeaponAssaultGun.uc">TCWeaponAssaultGun.uc (extends WeaponAssaultGun)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">ProjectileNames(1)=Class'TCHECannister20mm'</div>
<h3 id="TCWeaponAssaultGun.ClientFire"><a class="headerlink" href="#TCWeaponAssaultGun.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponAssaultShotgun.uc" title="Permanent link"><h2 id="TCWeaponAssaultShotgun.uc">TCWeaponAssaultShotgun.uc (extends WeaponAssaultShotgun)</h2></a>

<h3 id="TCWeaponAssaultShotgun.ClientFire"><a class="headerlink" href="#TCWeaponAssaultShotgun.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponCombatKnife.uc" title="Permanent link"><h2 id="TCWeaponCombatKnife.uc">TCWeaponCombatKnife.uc (extends WeaponCombatKnife)</h2></a>

<h3 id="TCWeaponCombatKnife.ClientFire"><a class="headerlink" href="#TCWeaponCombatKnife.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponEMPGrenade.uc" title="Permanent link"><h2 id="TCWeaponEMPGrenade.uc">TCWeaponEMPGrenade.uc (extends WeaponEMPGrenade)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">// ProjectileClass=Class'TCEMPGrenade'</div>
<h3 id="TCWeaponEMPGrenade.AnimEnd"><a class="headerlink" href="#TCWeaponEMPGrenade.AnimEnd" title="Permanent link">AnimEnd</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAutomatic)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ((Pawn(Owner).bFire != 0) && (AmmoType.AmmoAmount > 0))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (PlayerPawn(Owner) != None)<br>&#9;&#9;&#9;&#9;&#9;Global.Fire(0);<br>&#9;&#9;&#9;&#9;else <br>&#9;&#9;&#9;&#9;&#9;GotoState('FinishFire');<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else <br>&#9;&#9;&#9;&#9;GotoState('FinishFire');<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;// if we are a thrown weapon and we run out of ammo, destroy the weapon<br>&#9;&#9;&#9;if (bHandToHand && (ReloadCount > 0) && (AmmoType.AmmoAmount <= 0))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// fix disappear bug:<br>&#9;&#9;&#9;&#9;//Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;<br></div>
<h3 id="TCWeaponEMPGrenade.ClientFire"><a class="headerlink" href="#TCWeaponEMPGrenade.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    //servernotify("clientFire - netmode:"@level.NetMode);<br>    if(ReloadCount <= 0)<br>        ReloadCount=1;<br><br>    return Super.ClientFire(value);<br><br></div>
<h3 id="TCWeaponEMPGrenade.Fire"><a class="headerlink" href="#TCWeaponEMPGrenade.Fire" title="Permanent link">Fire</a> (float Value)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float sndVolume;<br>&#9;local bool bListenClient;<br><br><br>&#9;if (Pawn(Owner) != None)<br>&#9;{<br>&#9;&#9;if (bNearWall)<br>&#9;&#9;{<br>&#9;&#9;&#9;bReadyToFire = False;<br>&#9;&#9;&#9;GotoState('NormalFire');<br>&#9;&#9;&#9;bPointing = True;<br>&#9;&#9;&#9;PlayAnim('Place',, 0.1);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;bListenClient = (Owner.IsA('DeusExPlayer') && DeusExPlayer(Owner).PlayerIsListenClient());<br><br>&#9;sndVolume = TransientSoundVolume;<br><br>&#9;if ( Level.NetMode != NM_Standalone )  // Turn up the sounds a bit in mulitplayer<br>&#9;{<br>&#9;&#9;sndVolume = TransientSoundVolume * 2.0;<br>&#9;&#9;if ( Owner.IsA('DeusExPlayer') && (DeusExPlayer(Owner).NintendoImmunityTimeLeft > 0.01) || (!bClientReady && (!bListenClient)) )<br>&#9;&#9;{<br>&#9;&#9;&#9;DeusExPlayer(Owner).bJustFired = False;<br>&#9;&#9;&#9;bReadyToFire = True;<br>&#9;&#9;&#9;bPointing = False;<br>&#9;&#9;&#9;bFiring = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;// check for surrounding environment<br>&#9;if ((EnviroEffective == ENVEFF_Air) || (EnviroEffective == ENVEFF_Vacuum) || (EnviroEffective == ENVEFF_AirVacuum))<br>&#9;{<br>&#9;&#9;if (Region.Zone.bWaterZone)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (Pawn(Owner) != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Pawn(Owner).ClientMessage(msgNotWorking);<br>&#9;&#9;&#9;&#9;if (!bHandToHand)<br>&#9;&#9;&#9;&#9;&#9;PlaySimSound( Misc1Sound, SLOT_None, sndVolume, 1024 );&#9;&#9;// play dry fire sound<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;GotoState('Idle');<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if (bHandToHand)<br>&#9;{<br>&#9;&#9;if (( Level.NetMode != NM_Standalone ) && !bListenClient )<br>&#9;&#9;&#9;bClientReady = False;<br>&#9;&#9;bReadyToFire = False;<br>&#9;&#9;GotoState('NormalFire');<br>&#9;&#9;bPointing=True;<br>&#9;&#9;if ( Owner.IsA('PlayerPawn') )<br>&#9;&#9;&#9;PlayerPawn(Owner).PlayFiring();<br>&#9;&#9;PlaySelectiveFiring();<br>&#9;&#9;PlayFiringSound();<br>&#9;}<br><br></div>
<h3 id="TCWeaponEMPGrenade.PlaceGrenade"><a class="headerlink" href="#TCWeaponEMPGrenade.PlaceGrenade" title="Permanent link">PlaceGrenade</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (AmmoType.AmmoAmount <= 0) <br>&#9;{<br>&#9;&#9;Destroy();<br>&#9;&#9;return;<br>&#9;}<br>&#9;super.PlaceGrenade();<br>&#9;if (AmmoType.AmmoAmount <= 0) Destroy();<br><br></div>
<h3 id="TCWeaponEMPGrenade.ProjectileFire"><a class="headerlink" href="#TCWeaponEMPGrenade.ProjectileFire" title="Permanent link">ProjectileFire</a> (class<projectile> ProjClass, float ProjSpeed, bool bWarn) -> Projectile</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Projectile proj;<br><br><br>&#9;if (AmmoType.AmmoAmount <= 0)<br>&#9;{<br>&#9;&#9;bDestroyOnFinish = true;<br>&#9;&#9;return none;<br>&#9;}<br>&#9;<br>&#9;proj = super(DeusExWeapon).ProjectileFire(ProjClass, ProjSpeed, bWarn);<br>&#9;if (proj != none)<br>&#9;{<br>&#9;&#9;proj.PlayAnim('Open');<br>&#9;&#9;if (ReloadCount > 0) AmmoType.UseAmmo(1);<br><br>&#9;&#9;if ( AmmoType.AmmoAmount <= 0 )<br>&#9;&#9;&#9;bDestroyOnFinish = True;<br><br>&#9;&#9;// Update ammo count on object belt<br>&#9;&#9;if (DeusExPlayer(Owner) != None)<br>&#9;&#9;&#9;DeusExPlayer(Owner).UpdateBeltText(Self);<br>&#9;}<br><br>&#9;return proj;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponFlamethrower.uc" title="Permanent link"><h2 id="TCWeaponFlamethrower.uc">TCWeaponFlamethrower.uc (extends WeaponFlamethrower)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">//ProjectileClass=Class'TCFireball'</div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponGEPGun.uc" title="Permanent link"><h2 id="TCWeaponGEPGun.uc">TCWeaponGEPGun.uc (extends CBPWeaponGEPGun)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">ProjectileNames(0)=Class'TCRocket'<br>ProjectileClass=Class'TCRocket'</div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponGasGrenade.uc" title="Permanent link"><h2 id="TCWeaponGasGrenade.uc">TCWeaponGasGrenade.uc (extends WeaponGasGrenade)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">//ProjectileClass=Class'TCGasGrenade'</div>
<h3 id="TCWeaponGasGrenade.AnimEnd"><a class="headerlink" href="#TCWeaponGasGrenade.AnimEnd" title="Permanent link">AnimEnd</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAutomatic)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ((Pawn(Owner).bFire != 0) && (AmmoType.AmmoAmount > 0))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (PlayerPawn(Owner) != None)<br>&#9;&#9;&#9;&#9;&#9;Global.Fire(0);<br>&#9;&#9;&#9;&#9;else <br>&#9;&#9;&#9;&#9;&#9;GotoState('FinishFire');<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else <br>&#9;&#9;&#9;&#9;GotoState('FinishFire');<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;// if we are a thrown weapon and we run out of ammo, destroy the weapon<br>&#9;&#9;&#9;if (bHandToHand && (ReloadCount > 0) && (AmmoType.AmmoAmount <= 0))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// fix disappear bug:<br>&#9;&#9;&#9;&#9;//Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;<br></div>
<h3 id="TCWeaponGasGrenade.ClientFire"><a class="headerlink" href="#TCWeaponGasGrenade.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    //servernotify("clientFire - netmode:"@level.NetMode);<br>    if(ReloadCount <= 0)<br>        ReloadCount=1;<br><br>    return Super.ClientFire(value);<br><br></div>
<h3 id="TCWeaponGasGrenade.Fire"><a class="headerlink" href="#TCWeaponGasGrenade.Fire" title="Permanent link">Fire</a> (float Value)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float sndVolume;<br>&#9;local bool bListenClient;<br><br><br>&#9;if (Pawn(Owner) != None)<br>&#9;{<br>&#9;&#9;if (bNearWall)<br>&#9;&#9;{<br>&#9;&#9;&#9;bReadyToFire = False;<br>&#9;&#9;&#9;GotoState('NormalFire');<br>&#9;&#9;&#9;bPointing = True;<br>&#9;&#9;&#9;PlayAnim('Place',, 0.1);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;bListenClient = (Owner.IsA('DeusExPlayer') && DeusExPlayer(Owner).PlayerIsListenClient());<br><br>&#9;sndVolume = TransientSoundVolume;<br><br>&#9;if ( Level.NetMode != NM_Standalone )  // Turn up the sounds a bit in mulitplayer<br>&#9;{<br>&#9;&#9;sndVolume = TransientSoundVolume * 2.0;<br>&#9;&#9;if ( Owner.IsA('DeusExPlayer') && (DeusExPlayer(Owner).NintendoImmunityTimeLeft > 0.01) || (!bClientReady && (!bListenClient)) )<br>&#9;&#9;{<br>&#9;&#9;&#9;DeusExPlayer(Owner).bJustFired = False;<br>&#9;&#9;&#9;bReadyToFire = True;<br>&#9;&#9;&#9;bPointing = False;<br>&#9;&#9;&#9;bFiring = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;// check for surrounding environment<br>&#9;if ((EnviroEffective == ENVEFF_Air) || (EnviroEffective == ENVEFF_Vacuum) || (EnviroEffective == ENVEFF_AirVacuum))<br>&#9;{<br>&#9;&#9;if (Region.Zone.bWaterZone)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (Pawn(Owner) != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Pawn(Owner).ClientMessage(msgNotWorking);<br>&#9;&#9;&#9;&#9;if (!bHandToHand)<br>&#9;&#9;&#9;&#9;&#9;PlaySimSound( Misc1Sound, SLOT_None, sndVolume, 1024 );&#9;&#9;// play dry fire sound<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;GotoState('Idle');<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if (bHandToHand)<br>&#9;{<br>&#9;&#9;if (( Level.NetMode != NM_Standalone ) && !bListenClient )<br>&#9;&#9;&#9;bClientReady = False;<br>&#9;&#9;bReadyToFire = False;<br>&#9;&#9;GotoState('NormalFire');<br>&#9;&#9;bPointing=True;<br>&#9;&#9;if ( Owner.IsA('PlayerPawn') )<br>&#9;&#9;&#9;PlayerPawn(Owner).PlayFiring();<br>&#9;&#9;PlaySelectiveFiring();<br>&#9;&#9;PlayFiringSound();<br>&#9;}<br><br></div>
<h3 id="TCWeaponGasGrenade.PlaceGrenade"><a class="headerlink" href="#TCWeaponGasGrenade.PlaceGrenade" title="Permanent link">PlaceGrenade</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (AmmoType.AmmoAmount <= 0) <br>&#9;{<br>&#9;&#9;Destroy();<br>&#9;&#9;return;<br>&#9;}<br>&#9;super.PlaceGrenade();<br>&#9;if (AmmoType.AmmoAmount <= 0) Destroy();<br><br></div>
<h3 id="TCWeaponGasGrenade.ProjectileFire"><a class="headerlink" href="#TCWeaponGasGrenade.ProjectileFire" title="Permanent link">ProjectileFire</a> (class<projectile> ProjClass, float ProjSpeed, bool bWarn) -> Projectile</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Projectile proj;<br><br><br>&#9;if (AmmoType.AmmoAmount <= 0)<br>&#9;{<br>&#9;&#9;bDestroyOnFinish = true;<br>&#9;&#9;return none;<br>&#9;}<br>&#9;<br>&#9;proj = super.ProjectileFire(ProjClass, ProjSpeed, bWarn);<br>&#9;if (proj != none)<br>&#9;{<br>&#9;&#9;if (ReloadCount > 0) AmmoType.UseAmmo(1);<br><br>&#9;&#9;if ( AmmoType.AmmoAmount <= 0 )<br>&#9;&#9;&#9;bDestroyOnFinish = True;<br><br>&#9;&#9;// Update ammo count on object belt<br>&#9;&#9;if (DeusExPlayer(Owner) != None)<br>&#9;&#9;&#9;DeusExPlayer(Owner).UpdateBeltText(Self);<br>&#9;}<br><br>&#9;return proj;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponLAM.uc" title="Permanent link"><h2 id="TCWeaponLAM.uc">TCWeaponLAM.uc (extends WeaponLAM)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">//ProjectileClass=Class'TCLAM' To be implemented another day</div>
<h3 id="TCWeaponLAM.AnimEnd"><a class="headerlink" href="#TCWeaponLAM.AnimEnd" title="Permanent link">AnimEnd</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;if (bAutomatic)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ((Pawn(Owner).bFire != 0) && (AmmoType.AmmoAmount > 0))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if (PlayerPawn(Owner) != None)<br>&#9;&#9;&#9;&#9;&#9;Global.Fire(0);<br>&#9;&#9;&#9;&#9;else <br>&#9;&#9;&#9;&#9;&#9;GotoState('FinishFire');<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else <br>&#9;&#9;&#9;&#9;GotoState('FinishFire');<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>&#9;&#9;&#9;// if we are a thrown weapon and we run out of ammo, destroy the weapon<br>&#9;&#9;&#9;if (bHandToHand && (ReloadCount > 0) && (AmmoType.AmmoAmount <= 0))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// fix disappear bug:<br>&#9;&#9;&#9;&#9;//Destroy();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;<br></div>
<h3 id="TCWeaponLAM.ClientFire"><a class="headerlink" href="#TCWeaponLAM.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    //servernotify("clientFire - netmode:"@level.NetMode);<br>    if(ReloadCount <= 0)<br>        ReloadCount = 1;<br><br>    return Super.ClientFire(value);<br><br></div>
<h3 id="TCWeaponLAM.Fire"><a class="headerlink" href="#TCWeaponLAM.Fire" title="Permanent link">Fire</a> (float Value)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float sndVolume;<br>&#9;local bool bListenClient;<br><br><br>&#9;if (Pawn(Owner) != None)<br>&#9;{<br>&#9;&#9;if (bNearWall)<br>&#9;&#9;{<br>&#9;&#9;&#9;bReadyToFire = False;<br>&#9;&#9;&#9;GotoState('NormalFire');<br>&#9;&#9;&#9;bPointing = True;<br>&#9;&#9;&#9;PlayAnim('Place',, 0.1);<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;bListenClient = (Owner.IsA('DeusExPlayer') && DeusExPlayer(Owner).PlayerIsListenClient());<br><br>&#9;sndVolume = TransientSoundVolume;<br><br>&#9;if ( Level.NetMode != NM_Standalone )  // Turn up the sounds a bit in mulitplayer<br>&#9;{<br>&#9;&#9;sndVolume = TransientSoundVolume * 2.0;<br>&#9;&#9;if ( Owner.IsA('DeusExPlayer') && (DeusExPlayer(Owner).NintendoImmunityTimeLeft > 0.01) || (!bClientReady && (!bListenClient)) )<br>&#9;&#9;{<br>&#9;&#9;&#9;DeusExPlayer(Owner).bJustFired = False;<br>&#9;&#9;&#9;bReadyToFire = True;<br>&#9;&#9;&#9;bPointing = False;<br>&#9;&#9;&#9;bFiring = False;<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br>&#9;// check for surrounding environment<br>&#9;if ((EnviroEffective == ENVEFF_Air) || (EnviroEffective == ENVEFF_Vacuum) || (EnviroEffective == ENVEFF_AirVacuum))<br>&#9;{<br>&#9;&#9;if (Region.Zone.bWaterZone)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (Pawn(Owner) != None)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;Pawn(Owner).ClientMessage(msgNotWorking);<br>&#9;&#9;&#9;&#9;if (!bHandToHand)<br>&#9;&#9;&#9;&#9;&#9;PlaySimSound( Misc1Sound, SLOT_None, sndVolume, 1024 );&#9;&#9;// play dry fire sound<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;GotoState('Idle');<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if (bHandToHand)<br>&#9;{<br>&#9;&#9;if (( Level.NetMode != NM_Standalone ) && !bListenClient )<br>&#9;&#9;&#9;bClientReady = False;<br>&#9;&#9;bReadyToFire = False;<br>&#9;&#9;GotoState('NormalFire');<br>&#9;&#9;bPointing=True;<br>&#9;&#9;if ( Owner.IsA('PlayerPawn') )<br>&#9;&#9;&#9;PlayerPawn(Owner).PlayFiring();<br>&#9;&#9;PlaySelectiveFiring();<br>&#9;&#9;PlayFiringSound();<br>&#9;}<br><br></div>
<h3 id="TCWeaponLAM.PlaceGrenade"><a class="headerlink" href="#TCWeaponLAM.PlaceGrenade" title="Permanent link">PlaceGrenade</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (AmmoType.AmmoAmount <= 0) <br>&#9;{<br>&#9;&#9;Destroy();<br>&#9;&#9;return;<br>&#9;}<br>&#9;super.PlaceGrenade();<br>&#9;if (AmmoType.AmmoAmount <= 0) Destroy();<br><br></div>
<h3 id="TCWeaponLAM.ProjectileFire"><a class="headerlink" href="#TCWeaponLAM.ProjectileFire" title="Permanent link">ProjectileFire</a> (class<projectile> ProjClass, float ProjSpeed, bool bWarn) -> Projectile</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local Projectile proj;<br><br><br>&#9;if (AmmoType.AmmoAmount <= 0)<br>&#9;{<br>&#9;&#9;bDestroyOnFinish = true;<br>&#9;&#9;return none;<br>&#9;}<br>&#9;<br>&#9;proj = super.ProjectileFire(ProjClass, ProjSpeed, bWarn);<br>&#9;if (proj != none)<br>&#9;{<br>&#9;&#9;if (ReloadCount > 0) AmmoType.UseAmmo(1);<br><br>&#9;&#9;if ( AmmoType.AmmoAmount <= 0 )<br>&#9;&#9;&#9;bDestroyOnFinish = True;<br><br>&#9;&#9;// Update ammo count on object belt<br>&#9;&#9;if (DeusExPlayer(Owner) != None)<br>&#9;&#9;&#9;DeusExPlayer(Owner).UpdateBeltText(Self);<br>&#9;}<br><br>&#9;return proj;<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponLAW.uc" title="Permanent link"><h2 id="TCWeaponLAW.uc">TCWeaponLAW.uc (extends WeaponLAW)</h2></a>

<br><br><hr>
<a class="headerlink" href="#TCWeaponMiniCrossbow.uc" title="Permanent link"><h2 id="TCWeaponMiniCrossbow.uc">TCWeaponMiniCrossbow.uc (extends WeaponMiniCrossbow)</h2></a>

<h3 id="TCWeaponMiniCrossbow.ClientFire"><a class="headerlink" href="#TCWeaponMiniCrossbow.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponNanoSword.uc" title="Permanent link"><h2 id="TCWeaponNanoSword.uc">TCWeaponNanoSword.uc (extends WeaponNanoSword)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">mpAccurateRange=96<br>mpMaxRange=96</div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponPistol.uc" title="Permanent link"><h2 id="TCWeaponPistol.uc">TCWeaponPistol.uc (extends CBPWeaponPistol)</h2></a>

<h3 id="TCWeaponPistol.ClientFire"><a class="headerlink" href="#TCWeaponPistol.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponPlasmaRifle.uc" title="Permanent link"><h2 id="TCWeaponPlasmaRifle.uc">TCWeaponPlasmaRifle.uc (extends WeaponPlasmaRifle)</h2></a>

<h3 id="TCWeaponPlasmaRifle.ClientFire"><a class="headerlink" href="#TCWeaponPlasmaRifle.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponRifle.uc" title="Permanent link"><h2 id="TCWeaponRifle.uc">TCWeaponRifle.uc (extends CBPWeaponRifle)</h2></a>

<br><br><hr>
<a class="headerlink" href="#TCWeaponSawedOffShotgun.uc" title="Permanent link"><h2 id="TCWeaponSawedOffShotgun.uc">TCWeaponSawedOffShotgun.uc (extends WeaponSawedOffShotgun)</h2></a>

<h3 id="TCWeaponSawedOffShotgun.ClientFire"><a class="headerlink" href="#TCWeaponSawedOffShotgun.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponShuriken.uc" title="Permanent link"><h2 id="TCWeaponShuriken.uc">TCWeaponShuriken.uc (extends CBPWeaponShuriken)</h2></a>

<h3 id="TCWeaponShuriken.ClientFire"><a class="headerlink" href="#TCWeaponShuriken.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#TCWeaponStealthPistol.uc" title="Permanent link"><h2 id="TCWeaponStealthPistol.uc">TCWeaponStealthPistol.uc (extends WeaponStealthPistol)</h2></a>

<h3 id="TCWeaponStealthPistol.ClientFire"><a class="headerlink" href="#TCWeaponStealthPistol.ClientFire" title="Permanent link">ClientFire</a> (float value) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;if (DeusExPlayer(Owner) != none && DeusExPlayer(Owner).inHand != self) return false;<br>&#9;return super.ClientFire(value);<br><br></div>
<br><br><hr>
<a class="headerlink" href="#ToyMC.uc" title="Permanent link"><h2 id="ToyMC.uc">ToyMC.uc (extends ToyPlayer)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">V68=1<br>Drawscale=0.18<br>Mesh=LodMesh'DeusExCharacters.GM_Trench'<br>MultiSkins(0)=Texture'DeusExCharacters.Skins.JCDentonTex0'<br>MultiSkins(1)=Texture'DeusExCharacters.Skins.JCDentonTex2'<br>MultiSkins(2)=Texture'DeusExCharacters.Skins.JCDentonTex3'<br>MultiSkins(3)=Texture'DeusExCharacters.Skins.JCDentonTex0'<br>MultiSkins(4)=Texture'DeusExCharacters.Skins.JCDentonTex1'<br>MultiSkins(5)=Texture'DeusExCharacters.Skins.JCDentonTex2'<br>MultiSkins(6)=Texture'DeusExCharacters.Skins.FramesTex4'<br>MultiSkins(7)=Texture'DeusExCharacters.Skins.LensesTex5'</div>
<br><br><hr>
<a class="headerlink" href="#ToyPlayer.uc" title="Permanent link"><h2 id="ToyPlayer.uc">ToyPlayer.uc (extends TCPlayer)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Mass=2<br>PlayerReplicationInfoClass=Class'TCPRI'<br>CollisionRadius=5.000000<br>CollisionHeight=10.000000<br>BaseEyeHeight=10.00<br>Drawscale=0.18<br>mpGroundSpeed=30.00<br>mpWaterSpeed=10.00<br>Jumpz=200<br>MaxStepHeight=10.000000</div>
<h3 id="ToyPlayer.PlayerTick"><a class="headerlink" href="#ToyPlayer.PlayerTick" title="Permanent link">PlayerTick</a> (float deltaTime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>        //DEUS_EX AMSD Additional updates<br>        //Because of replication delay, aug icons end up being a step behind generally.  So refresh them<br>        //every freaking tick.  <br>        RefreshSystems(deltaTime);<br><br>&#9;&#9;DrugEffects(deltaTime);<br>&#9;&#9;Bleed(deltaTime);<br>&#9;&#9;HighlightCenterObject();<br><br><br>&#9;&#9;UpdateDynamicMusic(deltaTime);<br>&#9;&#9;UpdateWarrenEMPField(deltaTime);<br>      // DEUS_EX AMSD Move these funcions to a multiplayer tick<br>      // so that only that call gets propagated to the server.<br>      MultiplayerTick(deltaTime);<br>      // DEUS_EX AMSD For multiplayer...<br>&#9;&#9;FrobTime += deltaTime;<br><br>&#9;&#9;// save some texture info<br>&#9;&#9;FloorMaterial = GetFloorMaterial();<br>&#9;&#9;WallMaterial = GetWallMaterial(WallNormal);<br><br>&#9;&#9;// Check if player has walked outside a first-person convo.<br>&#9;&#9;CheckActiveConversationRadius();<br><br>&#9;&#9;// Check if all the people involved in a conversation are <br>&#9;&#9;// still within a reasonable radius.<br>&#9;&#9;CheckActorDistances();<br><br>&#9;&#9;// handle poison<br>      //DEUS_EX AMSD Now handled in multiplayertick<br>&#9;&#9;//UpdatePoison(deltaTime);<br><br>&#9;&#9;// Update Time Played<br>&#9;&#9;UpdateTimePlayed(deltaTime);<br><br>&#9;&#9;Super.PlayerTick(deltaTime);<br>&#9;<br></div>
<h3 id="ToyPlayer.ProcessMove"><a class="headerlink" href="#ToyPlayer.ProcessMove" title="Permanent link">ProcessMove</a> (float DeltaTime, vector newAccel, eDodgeDir DodgeMove, rotator DeltaRot)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local int newSpeed, defSpeed;<br>&#9;local name mat;<br>&#9;local vector HitLocation, HitNormal, checkpoint, downcheck;<br>&#9;local Actor HitActor, HitActorDown;<br>&#9;local bool bCantStandUp;<br>&#9;local Vector loc, traceSize;<br>&#9;local float alpha, maxLeanDist;<br>&#9;local float legTotal, weapSkill;<br>&#9;local vector start, checkNorm, Extent;<br>&#9;local TCControls TCC;<br><br>&#9;&#9;<br>&#9;&#9;TCC = GetControls();<br>&#9;&#9;Super.ProcessMove(DeltaTime, newAccel, DodgeMove, DeltaRot);<br>&#9;&#9;//Kaiser: Mantling system.<br>&#9;&#9;if (Physics == PHYS_Falling && velocity.Z != 0 && TCC.bMantling)<br>&#9;&#9;{<br>&#9;&#9;&#9;if (CarriedDecoration == None && Energy >= TCC.MantleBio)<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;checkpoint = vector(Rotation);<br>&#9;&#9;&#9;&#9;checkpoint.Z = 0.0;<br>&#9;&#9;&#9;&#9;checkNorm = Normal(checkpoint);<br>&#9;&#9;&#9;&#9;checkPoint = Location + CollisionRadius * checkNorm;<br>&#9;&#9;&#9;&#9;//Extent = CollisionRadius * vect(1,1,0);<br>&#9;&#9;&#9;&#9;Extent = CollisionRadius * vect(0.2,0.2,0);<br>&#9;&#9;&#9;&#9;Extent.Z = CollisionHeight;<br>&#9;&#9;&#9;&#9;HitActor = Trace(HitLocation, HitNormal, checkpoint, Location, True, Extent);<br>&#9;&#9;&#9;&#9;if ( (HitActor != None) && (Pawn(HitActor) == None) && (HitActor == Level || HitActor.bCollideActors) && !HitActor.IsA('DeusExCarcass'))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;WallNormal = -1 * HitNormal;<br>&#9;&#9;&#9;&#9;&#9;start = Location;<br>&#9;&#9;&#9;&#9;&#9;start.Z += 1.1 * MaxStepHeight + CollisionHeight;<br>&#9;&#9;&#9;&#9;&#9;checkPoint = start + 2 * CollisionRadius * checkNorm;<br>&#9;&#9;&#9;&#9;&#9;HitActor = Trace(HitLocation, HitNormal, checkpoint, start, true, Extent);<br>&#9;&#9;&#9;&#9;&#9;if (HitActor == None)<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if(!isMantling)&#9;<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Energy -= TCC.MantleBio;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;isMantling = True;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;setPhysics(PHYS_Falling);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Velocity.Z = TCC.MantleVelocity;<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Acceleration = vect(0,0,0);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;PlaySound(sound'MaleLand', SLOT_None, 1.5, true, 1200, (1.0 + 0.2*FRand()) * 1.0 );<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Acceleration = wallNormal * AccelRate / 8;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br>&#9;&#9;// if the spy drone augmentation is active<br>&#9;&#9;if (bSpyDroneActive)<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( aDrone != None ) <br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// put away whatever is in our hand<br>&#9;&#9;&#9;&#9;if (inHand != None)<br>&#9;&#9;&#9;&#9;&#9;PutInHand(None);<br><br>&#9;&#9;&#9;&#9;// make the drone's rotation match the player's view<br>&#9;&#9;&#9;&#9;aDrone.SetRotation(ViewRotation);<br><br>&#9;&#9;&#9;&#9;// move the drone<br>&#9;&#9;&#9;&#9;loc = Normal((aUp * vect(0,0,1) + aForward * vect(1,0,0) + aStrafe * vect(0,1,0)) >> ViewRotation);<br><br>&#9;&#9;&#9;&#9;// opportunity for client to translate movement to server<br>&#9;&#9;&#9;&#9;MoveDrone( DeltaTime, loc );<br><br>&#9;&#9;&#9;&#9;// freeze the player<br>&#9;&#9;&#9;&#9;Velocity = vect(0,0,0);<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;return;<br>&#9;&#9;}<br><br>&#9;&#9;defSpeed = GetCurrentGroundSpeed();<br><br>      // crouching makes you two feet tall<br>&#9;&#9;if (bIsCrouching || bForceDuck)<br>&#9;&#9;{<br>&#9;&#9;&#9;SetBasedPawnSize(Default.CollisionRadius, Default.CollisionHeight);<br><br>&#9;&#9;&#9;// check to see if we could stand up if we wanted to<br>&#9;&#9;&#9;checkpoint = Location;<br>&#9;&#9;&#9;// check normal standing height<br>&#9;&#9;&#9;checkpoint.Z = checkpoint.Z - CollisionHeight + 2 * GetDefaultCollisionHeight();<br>&#9;&#9;&#9;traceSize.X = CollisionRadius;<br>&#9;&#9;&#9;traceSize.Y = CollisionRadius;<br>&#9;&#9;&#9;traceSize.Z = 1;<br>&#9;&#9;&#9;HitActor = Trace(HitLocation, HitNormal, checkpoint, Location, True, traceSize);<br>&#9;&#9;&#9;if (HitActor == None)<br>&#9;&#9;&#9;&#9;bCantStandUp = False;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;bCantStandUp = True;<br>&#9;&#9;}<br>&#9;&#9;else<br>&#9;&#9;{<br>         // DEUS_EX AMSD Changed this to grab defspeed, because GetCurrentGroundSpeed takes 31k cycles to run.<br>&#9;&#9;&#9;GroundSpeed = defSpeed;<br><br>&#9;&#9;&#9;// make sure the collision height is fudged for the floor problem - CNN<br>&#9;&#9;&#9;if (!IsLeaning())<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;ResetBasedPawnSize();<br>&#9;&#9;&#9;}<br>&#9;&#9;}<br><br>&#9;&#9;if (bCantStandUp)<br>&#9;&#9;&#9;bForceDuck = True;<br>&#9;&#9;else<br>&#9;&#9;&#9;bForceDuck = False;<br><br>&#9;&#9;// if the player's legs are damaged, then reduce our speed accordingly<br>&#9;&#9;newSpeed = defSpeed;<br><br>&#9;&#9;if ( Level.NetMode == NM_Standalone )<br>&#9;&#9;{<br>&#9;&#9;&#9;if (HealthLegLeft < 1)<br>&#9;&#9;&#9;&#9;newSpeed -= (defSpeed/2) * 0.25;<br>&#9;&#9;&#9;else if (HealthLegLeft < 34)<br>&#9;&#9;&#9;&#9;newSpeed -= (defSpeed/2) * 0.15;<br>&#9;&#9;&#9;else if (HealthLegLeft < 67)<br>&#9;&#9;&#9;&#9;newSpeed -= (defSpeed/2) * 0.10;<br><br>&#9;&#9;&#9;if (HealthLegRight < 1)<br>&#9;&#9;&#9;&#9;newSpeed -= (defSpeed/2) * 0.25;<br>&#9;&#9;&#9;else if (HealthLegRight < 34)<br>&#9;&#9;&#9;&#9;newSpeed -= (defSpeed/2) * 0.15;<br>&#9;&#9;&#9;else if (HealthLegRight < 67)<br>&#9;&#9;&#9;&#9;newSpeed -= (defSpeed/2) * 0.10;<br><br>&#9;&#9;&#9;if (HealthTorso < 67)<br>&#9;&#9;&#9;&#9;newSpeed -= (defSpeed/2) * 0.05;<br>&#9;&#9;}<br><br>&#9;&#9;// let the player pull themselves along with their hands even if both of<br>&#9;&#9;// their legs are blown off<br>&#9;&#9;if ((HealthLegLeft < 1) && (HealthLegRight < 1))<br>&#9;&#9;{<br>&#9;&#9;&#9;newSpeed = defSpeed * 0.8;<br>&#9;&#9;&#9;bIsWalking = True;<br>&#9;&#9;&#9;bForceDuck = True;<br>&#9;&#9;}<br>&#9;&#9;// make crouch speed faster than normal<br>&#9;&#9;else if (bIsCrouching || bForceDuck)<br>&#9;&#9;{<br>//&#9;&#9;&#9;newSpeed = defSpeed * 1.8;&#9;&#9;// DEUS_EX CNN - uncomment to speed up crouch<br>&#9;&#9;&#9;bIsWalking = True;<br>&#9;&#9;}<br><br>&#9;&#9;if (CarriedDecoration != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;newSpeed -= CarriedDecoration.Mass * 2;<br>&#9;&#9;}<br>&#9;&#9;// don't slow the player down if he's skilled at the corresponding weapon skill  <br>&#9;&#9;else if ((DeusExWeapon(Weapon) != None) && (Weapon.Mass > 30) && (DeusExWeapon(Weapon).GetWeaponSkill() > -0.25) && (Level.NetMode==NM_Standalone))<br>&#9;&#9;{<br>&#9;&#9;&#9;bIsWalking = True;<br>&#9;&#9;&#9;newSpeed = defSpeed;<br>&#9;&#9;}<br>&#9;&#9;else if ((inHand != None) && inHand.IsA('POVCorpse'))<br>&#9;&#9;{<br>&#9;&#9;&#9;newSpeed -= inHand.Mass * 3;<br>&#9;&#9;}<br><br>&#9;&#9;// Multiplayer movement adjusters<br>&#9;&#9;if ( Level.NetMode != NM_Standalone )<br>&#9;&#9;{<br>&#9;&#9;&#9;if ( Weapon != None )<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;weapSkill = DeusExWeapon(Weapon).GetWeaponSkill();<br>&#9;&#9;&#9;&#9;// Slow down heavy weapons in multiplayer<br>&#9;&#9;&#9;&#9;if ((DeusExWeapon(Weapon) != None) && (Weapon.Mass > 30) )<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;newSpeed = defSpeed;<br>&#9;&#9;&#9;&#9;&#9;newSpeed -= ((( Weapon.Mass - 30.0 ) / (class'WeaponGEPGun'.Default.Mass - 30.0 )) * (0.70 + weapSkill) * defSpeed );<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;// Slow turn rate of GEP gun in multiplayer to discourage using it as the most effective close quarters weapon<br>&#9;&#9;&#9;&#9;if ((WeaponGEPGun(Weapon) != None) && (!WeaponGEPGun(Weapon).bZoomed))<br>&#9;&#9;&#9;&#9;&#9;TurnRateAdjuster = FClamp( 0.20 + -(weapSkill*0.5), 0.25, 1.0 );<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;&#9;TurnRateAdjuster = 1.0;<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;TurnRateAdjuster = 1.0;<br>&#9;&#9;}<br><br>&#9;&#9;// if we are moving really slow, force us to walking<br>&#9;&#9;if ((newSpeed <= defSpeed / 3) && !bForceDuck)<br>&#9;&#9;{<br>&#9;&#9;&#9;bIsWalking = True;<br>&#9;&#9;&#9;newSpeed = defSpeed;<br>&#9;&#9;}<br><br>&#9;&#9;// if we are moving backwards, we should move slower<br>      // DEUS_EX AMSD Turns out this wasn't working right in multiplayer, I have a fix<br>      // for it, but it would change all our balance.<br>&#9;&#9;if ((aForward < 0) && (Level.NetMode == NM_Standalone))<br>&#9;&#9;&#9;newSpeed *= 0.65;<br><br>&#9;&#9;GroundSpeed = FMax(newSpeed, 100);<br><br>&#9;&#9;// if we are moving or crouching, we can't lean<br>&#9;&#9;// uncomment below line to disallow leaning during crouch<br><br>&#9;&#9;&#9;if ((VSize(Velocity) < 10) && (aForward == 0))&#9;&#9;// && !bIsCrouching && !bForceDuck)<br>&#9;&#9;&#9;&#9;bCanLean = True;<br>&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;bCanLean = False;<br><br>&#9;&#9;&#9;// check leaning buttons (axis aExtra0 is used for leaning)<br>&#9;&#9;&#9;maxLeanDist = 40;<br><br>&#9;&#9;&#9;if (IsLeaning())<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;if ( PlayerIsClient() || (Level.NetMode == NM_Standalone) )<br>&#9;&#9;&#9;&#9;&#9;ViewRotation.Roll = curLeanDist * 20;<br>&#9;&#9;&#9;<br>&#9;&#9;&#9;&#9;if (!bIsCrouching && !bForceDuck)<br>&#9;&#9;&#9;&#9;&#9;SetBasedPawnSize(CollisionRadius, GetDefaultCollisionHeight() - Abs(curLeanDist) / 3.0);<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;if (bCanLean && (aExtra0 != 0))<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// lean<br>&#9;&#9;&#9;&#9;DropDecoration();&#9;&#9;// drop the decoration that we are carrying<br>&#9;&#9;&#9;&#9;if (AnimSequence != 'CrouchWalk')<br>&#9;&#9;&#9;&#9;&#9;PlayCrawling();<br><br>&#9;&#9;&#9;&#9;alpha = maxLeanDist * aExtra0 * 2.0 * DeltaTime;<br><br>&#9;&#9;&#9;&#9;loc = vect(0,0,0);<br>&#9;&#9;&#9;&#9;loc.Y = alpha;<br>&#9;&#9;&#9;&#9;if (Abs(curLeanDist + alpha) < maxLeanDist)<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;// check to make sure the destination not blocked<br>&#9;&#9;&#9;&#9;&#9;checkpoint = (loc >> Rotation) + Location;<br>&#9;&#9;&#9;&#9;&#9;traceSize.X = CollisionRadius;<br>&#9;&#9;&#9;&#9;&#9;traceSize.Y = CollisionRadius;<br>&#9;&#9;&#9;&#9;&#9;traceSize.Z = CollisionHeight;<br>&#9;&#9;&#9;&#9;&#9;HitActor = Trace(HitLocation, HitNormal, checkpoint, Location, True, traceSize);<br><br>&#9;&#9;&#9;&#9;&#9;// check down as well to make sure there's a floor there<br>&#9;&#9;&#9;&#9;&#9;downcheck = checkpoint - vect(0,0,1) * CollisionHeight;<br>&#9;&#9;&#9;&#9;&#9;HitActorDown = Trace(HitLocation, HitNormal, downcheck, checkpoint, True, traceSize);<br>&#9;&#9;&#9;&#9;&#9;if ((HitActor == None) && (HitActorDown != None))<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;if ( PlayerIsClient() || (Level.NetMode == NM_Standalone))<br>&#9;&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;SetLocation(checkpoint);<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;ServerUpdateLean( checkpoint );<br>&#9;&#9;&#9;&#9;&#9;&#9;&#9;curLeanDist += alpha;<br>&#9;&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;else<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if ( PlayerIsClient() || (Level.NetMode == NM_Standalone) )<br>&#9;&#9;&#9;&#9;&#9;&#9;curLeanDist = aExtra0 * maxLeanDist;<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;&#9;else if (IsLeaning())&#9;//if (!bCanLean && IsLeaning())&#9;// uncomment this to not hold down lean<br>&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;// un-lean<br>&#9;&#9;&#9;&#9;if (AnimSequence == 'CrouchWalk')<br>&#9;&#9;&#9;&#9;&#9;PlayRising();<br><br>&#9;&#9;&#9;&#9;if ( PlayerIsClient() || (Level.NetMode == NM_Standalone))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;prevLeanDist = curLeanDist;<br>&#9;&#9;&#9;&#9;&#9;alpha = FClamp(7.0 * DeltaTime, 0.001, 0.9);<br>&#9;&#9;&#9;&#9;&#9;curLeanDist *= 1.0 - alpha;<br>&#9;&#9;&#9;&#9;&#9;if (Abs(curLeanDist) < 1.0)<br>&#9;&#9;&#9;&#9;&#9;&#9;curLeanDist = 0;<br>&#9;&#9;&#9;&#9;}<br><br>&#9;&#9;&#9;&#9;loc = vect(0,0,0);<br>&#9;&#9;&#9;&#9;loc.Y = -(prevLeanDist - curLeanDist);<br><br>&#9;&#9;&#9;&#9;// check to make sure the destination not blocked<br>&#9;&#9;&#9;&#9;checkpoint = (loc >> Rotation) + Location;<br>&#9;&#9;&#9;&#9;traceSize.X = CollisionRadius;<br>&#9;&#9;&#9;&#9;traceSize.Y = CollisionRadius;<br>&#9;&#9;&#9;&#9;traceSize.Z = CollisionHeight;<br>&#9;&#9;&#9;&#9;HitActor = Trace(HitLocation, HitNormal, checkpoint, Location, True, traceSize);<br><br>&#9;&#9;&#9;&#9;// check down as well to make sure there's a floor there<br>&#9;&#9;&#9;&#9;downcheck = checkpoint - vect(0,0,1) * CollisionHeight;<br>&#9;&#9;&#9;&#9;HitActorDown = Trace(HitLocation, HitNormal, downcheck, checkpoint, True, traceSize);<br>&#9;&#9;&#9;&#9;if ((HitActor == None) && (HitActorDown != None))<br>&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;if ( PlayerIsClient() || (Level.NetMode == NM_Standalone))<br>&#9;&#9;&#9;&#9;&#9;{<br>&#9;&#9;&#9;&#9;&#9;&#9;SetLocation( checkpoint );<br>&#9;&#9;&#9;&#9;&#9;&#9;ServerUpdateLean( checkpoint );<br>&#9;&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;&#9;}<br>&#9;&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;<br>&#9;<br></div>
<h3 id="ToyPlayer.SetBasedPawnSize"><a class="headerlink" href="#ToyPlayer.SetBasedPawnSize" title="Permanent link">SetBasedPawnSize</a> (float newRadius, float newHeight) -> bool</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local float  oldRadius, oldHeight;<br>&#9;local bool   bSuccess;<br>&#9;local vector centerDelta, lookDir, upDir;<br>&#9;local float  deltaEyeHeight;<br>&#9;local Decoration savedDeco;<br><br><br>&#9;if (newRadius < 0)<br>&#9;&#9;newRadius = 0;<br>&#9;if (newHeight < 0)<br>&#9;&#9;newHeight = 0;<br><br>&#9;oldRadius = CollisionRadius;<br>&#9;oldHeight = CollisionHeight;<br><br>&#9;if ( Level.NetMode == NM_Standalone )<br>&#9;{<br>&#9;&#9;if ((oldRadius == newRadius) && (oldHeight == newHeight))<br>&#9;&#9;&#9;return true;<br>&#9;}<br><br>&#9;centerDelta    = vect(0, 0, 1)*(newHeight-oldHeight);<br>&#9;deltaEyeHeight = GetDefaultCollisionHeight() - Default.BaseEyeHeight;<br><br>&#9;if ( Level.NetMode != NM_Standalone )<br>&#9;{<br>&#9;&#9;if ((oldRadius == newRadius) && (oldHeight == newHeight) && (BaseEyeHeight == newHeight - deltaEyeHeight))<br>&#9;&#9;&#9;return true;<br>&#9;}<br><br>&#9;if (CarriedDecoration != None)<br>&#9;&#9;savedDeco = CarriedDecoration;<br><br>&#9;bSuccess = false;<br>&#9;if ((newHeight <= CollisionHeight) && (newRadius <= CollisionRadius))  // shrink<br>&#9;{<br>&#9;&#9;SetCollisionSize(newRadius, newHeight);<br>&#9;&#9;if (Move(centerDelta))<br>&#9;&#9;&#9;bSuccess = true;<br>&#9;&#9;else<br>&#9;&#9;&#9;SetCollisionSize(oldRadius, oldHeight);<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;if (Move(centerDelta))<br>&#9;&#9;{<br>&#9;&#9;&#9;SetCollisionSize(newRadius, newHeight);<br>&#9;&#9;&#9;bSuccess = true;<br>&#9;&#9;}<br>&#9;}<br><br>&#9;if (bSuccess)<br>&#9;{<br>&#9;&#9;// make sure we don't lose our carried decoration<br>&#9;&#9;if (savedDeco != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;savedDeco.SetPhysics(PHYS_None);<br>&#9;&#9;&#9;savedDeco.SetBase(Self);<br>&#9;&#9;&#9;savedDeco.SetCollision(False, False, False);<br><br>&#9;&#9;&#9;// reset the decoration's location<br>&#9;&#9;&#9;lookDir = Vector(Rotation);<br>&#9;&#9;&#9;lookDir.Z = 0;&#9;&#9;&#9;&#9;<br>&#9;&#9;&#9;upDir = vect(0,0,0);<br>&#9;&#9;&#9;upDir.Z = CollisionHeight / 2;&#9;&#9;// put it up near eye level<br>&#9;&#9;&#9;savedDeco.SetLocation(Location + upDir + (0.5 * CollisionRadius + CarriedDecoration.CollisionRadius) * lookDir);<br>&#9;&#9;}<br><br>//&#9;&#9;PrePivotOffset  = vect(0, 0, 1)*(GetDefaultCollisionHeight()-newHeight);<br>&#9;&#9;PrePivot        -= centerDelta;<br>//&#9;&#9;DesiredPrePivot -= centerDelta;<br>&#9;&#9;BaseEyeHeight   = newHeight - deltaEyeHeight;<br><br>&#9;&#9;EyeHeight&#9;&#9;-= centerDelta.Z;<br>&#9;}<br>&#9;return (bSuccess);<br><br></div>
<h3 id="ToyPlayer.ZoneChange"><a class="headerlink" href="#ToyPlayer.ZoneChange" title="Permanent link">ZoneChange</a> (ZoneInfo NewZone)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;&#9;// if we jump into water, empty our hands<br>&#9;&#9;if (NewZone.bWaterZone)<br>&#9;&#9;&#9;DropDecoration();<br><br>&#9;&#9;Super.ZoneChange(NewZone);<br>&#9;<br></div>
<br><br><hr>
<a class="headerlink" href="#Toybox.uc" title="Permanent link"><h2 id="Toybox.uc">Toybox.uc (extends TCDeathmatch)</h2></a>

<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bToybox=True<br>DefaultPlayerClass=Class'ToyMC'<br>GameReplicationInfoClass=Class'TCGRI'</div>
<h3 id="Toybox.Login"><a class="headerlink" href="#Toybox.Login" title="Permanent link">Login</a> (string Portal, string Z56, out string Z57, Class<PlayerPawn> SpawnClass) -> PlayerPawn</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer Z5B;<br>&#9;local string Z68;<br>&#9;local string Z69;<br>&#9;local int Z6A;<br>&#9;local string myString;<br>&#9;local class<scriptedpawn> spawn;<br>&#9;local int j,p;<br><br>&#9;<br>&#9;if ( (MaxPlayers > 0) && (NumPlayers >= MaxPlayers) )<br>&#9;{<br>&#9;&#9;Z57=TooManyPlayers;<br>&#9;&#9;return None;<br>&#9;}<br>&#9;SpawnClass=DefaultPlayerClass;<br>&#9;Z68=ParseOption(Z56,"Class");<br>&#9;Z6A=InStr(Z68,".");<br>&#9;if ( Z6A != -1 )<br>&#9;{<br>&#9;&#9;Z69=Mid(Z68,Z6A + 1);<br>&#9;&#9;Z68=Left(Z68,Z6A);<br>&#9;} else {<br>&#9;&#9;Z69=Z68;<br>&#9;&#9;Z68="";<br>&#9;<br></div>
<br><br><hr>
<a class="headerlink" href="#_TCTimer.uc" title="Permanent link"><h2 id="_TCTimer.uc">_TCTimer.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var vector iLoc;<br>var Rotator iRot;<br>var int cMins;<br>var int cSecs;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">bHidden=true</div>
<h3 id="_TCTimer.GetControls"><a class="headerlink" href="#_TCTimer.GetControls" title="Permanent link">GetControls</a> -> TCControls</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCControls TCC;<br><br>&#9;<br>&#9;//if(Role < ROLE_Authority)<br>&#9;//{<br>&#9;&#9;if(TCDeathmatch(Level.Game) != None) TCC = TCDeathMatch(Level.Game).Settings;<br>&#9;&#9;if(TCTeam(Level.Game) != None) TCC = TCTeam(Level.Game).Settings;<br>&#9;&#9;<br>&#9;&#9;return TCC;<br>&#9;//<br></div>
<h3 id="_TCTimer.PostBeginPlay"><a class="headerlink" href="#_TCTimer.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCControls TCGet;<br><br><br>&#9;TCGet = GetControls();<br>&#9;if(TCGet.AutoIdleTime > 0)<br>&#9;&#9;SetTimer(1,True);<br><br></div>
<h3 id="_TCTimer.Tick"><a class="headerlink" href="#_TCTimer.Tick" title="Permanent link">Tick</a> (float deltaTime)</h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>    if(TCPlayer(Owner) == none)<br>    {<br>        destroy();<br>        return;<br>    }<br><br>    TCPlayer(Owner)._timerSeconds += deltaTime;<br><br></div>
<h3 id="_TCTimer.Timer"><a class="headerlink" href="#_TCTimer.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local bool bAutoIdle, bAutoIdleKick;<br>&#9;local bool bMinutePassed;<br><br>&#9;<br>&#9;cSecs++;<br>&#9;if(cSecs == 60)<br>&#9;{<br>&#9;&#9;bMinutePassed=True;<br>&#9;&#9;cSecs = 0;<br>&#9;}<br>&#9;<br>&#9;if(GetControls().AutoIdleTime > 0)<br>&#9;&#9;bAutoIdle=True;<br>&#9;&#9;<br>&#9;if(GetControls().AutoIdleKickTime > 0)<br>&#9;&#9;bAutoIdleKick=True;<br>&#9;&#9;<br>&#9;if(TCPlayer(Owner).Location == iLoc && TCPlayer(Owner).ViewRotation == iRot)<br>&#9;{<br>&#9;&#9;if(bMinutePassed)<br>&#9;&#9;&#9;TCPlayer(Owner).IdleCounter++;<br>&#9;}<br>&#9;else<br>&#9;{<br>&#9;&#9;if(TCPlayer(Owner).bAway)<br>&#9;&#9;{<br>&#9;&#9;&#9;TCPlayer(Owner).bAway=False;<br>&#9;&#9;&#9;TCPRI(TCPlayer(Owner).PlayerReplicationInfo).bAway=False;<br>&#9;&#9;&#9;GetControls().Print(TCPlayer(Owner).PlayerReplicationInfo.PlayerName$" has returned.");<br>&#9;&#9;}<br>&#9;&#9;iLoc = TCPlayer(Owner).Location;<br>&#9;&#9;iRot = TCPlayer(Owner).ViewRotation;<br>&#9;&#9;TCPlayer(Owner).IdleCounter=0;<br>&#9;}<br>&#9;<br>&#9;if(TCPlayer(Owner).IsInState('Dying'))<br>&#9;&#9;TCPRI(TCPlayer(Owner).PlayerReplicationInfo).bDead=True;<br>&#9;else TCPRI(TCPlayer(Owner).PlayerReplicationInfo).bDead=False;<br>&#9;<br>&#9;if(bAutoIdle && TCPlayer(Owner).IdleCounter >= GetControls().AutoIdleTime && !TCPRI(TCPlayer(Owner).PlayerReplicationInfo).bAway)<br>&#9;{<br>&#9;&#9;TCPlayer(Owner).bAway=True;<br>&#9;&#9;TCPRI(TCPlayer(Owner).PlayerReplicationInfo).bAway=True;<br>&#9;&#9;GetControls().Print(TCPlayer(Owner).PlayerReplicationInfo.PlayerName$" was idle for "$GetControls().AutoIdleTime$" minutes and has been set as AWAY.");<br>&#9;}<br>&#9;if(bAutoIdleKick && TCPlayer(Owner).IdleCounter >= GetControls().AutoIdleKickTime && TCPRI(TCPlayer(Owner).PlayerReplicationInfo).bAway)<br>&#9;{<br>&#9;&#9;GetControls().Print(TCPlayer(Owner).PlayerReplicationInfo.PlayerName$" was idle for "$GetControls().AutoIdleKickTime$" minutes and removed from the game.");<br>&#9;&#9;TCPlayer(Owner).Destroy();<br>&#9;}<br><br></div>
<br><br><hr>
<a class="headerlink" href="#wpDummy.uc" title="Permanent link"><h2 id="wpDummy.uc">wpDummy.uc (extends Actor)</h2></a>

<button type="button" class="collapsible">Show Variables</button><div class="content" style="white-space:pre">var string wpName;<br>var Actor wpActor;<br>var bool bCanDelete;</div>
<button type="button" class="collapsible">Show Default Properties</button><div class="content" style="white-space:pre">Tag='Waypoint'<br>bHidden=True<br>bAlwaysRelevant=True</div>
<h3 id="wpDummy.PostBeginPlay"><a class="headerlink" href="#wpDummy.PostBeginPlay" title="Permanent link">PostBeginPlay</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;SetTimer(0.5,True);<br><br></div>
<h3 id="wpDummy.Timer"><a class="headerlink" href="#wpDummy.Timer" title="Permanent link">Timer</a></h3>
<button type="button" class="collapsible">Code</button><div class="content" style="white-space:pre"><br>&#9;local TCPlayer TCP;<br>&#9;local bool bFound;<br>&#9;local vector modv;<br><br>&#9;<br>&#9;if(bCanDelete)<br>&#9;&#9;if(wpActor == None)<br>&#9;&#9;&#9;Destroy();<br>&#9;<br>&#9;if(wpActor != None)<br>&#9;{<br>&#9;&#9;modv = wpActor.location;<br>&#9;&#9;if(pawn(wpActor) != None)<br>&#9;&#9;{<br>&#9;&#9;&#9;modv.z += 20;<br>&#9;&#9;}<br>&#9;&#9;<br>&#9;&#9;foreach Allactors(class'TCPlayer', TCP)<br>&#9;&#9;&#9;if(TCPRI(TCP.PlayerReplicationInfo).wpTargetPRI == Self)<br>&#9;&#9;&#9;&#9;bFound=True;<br>&#9;&#9;&#9;&#9;<br>&#9;&#9;if(bFound && wpActor != None)<br>&#9;&#9;&#9;SetLocation(modv);<br>&#9;&#9;<br>&#9;&#9;if(!bFound)<br>&#9;&#9;&#9;Destroy();<br>&#9;}<br><br></div>
<br><br><hr>
	</article>
    </section>
    <footer> By Kaiser, The Coded Mind (C) 2021</footer>
  </body>
</html>
